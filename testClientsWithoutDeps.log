body-parser
subdir: express json-server loopback routing-controllers skipper
----------------------client express of body-parser----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> express@4.18.1 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/ test/acceptance/



  Route
    ✔ should work without handlers
    ✔ should not stack overflow with a large sync stack (52ms)
    .all
      ✔ should add handler
      ✔ should handle VERBS
      ✔ should stack
    .VERB
      ✔ should support .get
      ✔ should limit to just .VERB
      ✔ should allow fallthrough
    errors
      ✔ should handle errors via arity 4 functions
      ✔ should handle throw
      ✔ should handle throwing inside error handlers
      ✔ should handle throw in .all
      ✔ should handle single error handler

  Router
    ✔ should return a function with router methods
    ✔ should support .use of other routers
    ✔ should support dynamic routes
    ✔ should handle blank URL
    ✔ should handle missing URL
    ✔ should not stack overflow with many registered routes (157ms)
    ✔ should not stack overflow with a large sync route stack (67ms)
    ✔ should not stack overflow with a large sync middleware stack (44ms)
    .handle
      ✔ should dispatch
    .multiple callbacks
      ✔ should throw if a callback is null
      ✔ should throw if a callback is undefined
      ✔ should throw if a callback is not a function
      ✔ should not throw if all callbacks are functions
    error
      ✔ should skip non error middleware
      ✔ should handle throwing inside routes with params
      ✔ should handle throwing in handler after async param
      ✔ should handle throwing inside error handlers
    FQDN
      ✔ should not obscure FQDNs
      ✔ should ignore FQDN in search
      ✔ should ignore FQDN in path
      ✔ should adjust FQDN req.url
      ✔ should adjust FQDN req.url with multiple handlers
      ✔ should adjust FQDN req.url with multiple routed handlers
    .all
      ✔ should support using .all to capture all http verbs
      ✔ should be called for any URL when "*"
    .use
      ✔ should require middleware
      ✔ should reject string as middleware
      ✔ should reject number as middleware
      ✔ should reject null as middleware
      ✔ should reject Date as middleware
      ✔ should be called for any URL
      ✔ should accept array of middleware
    .param
      ✔ should call param function when routing VERBS
      ✔ should call param function when routing middleware
      ✔ should only call once per request
      ✔ should call when values differ
    parallel requests
      ✔ should not mix requests (51ms)

  app.all()
    ✔ should add a router per method
    ✔ should run the callback for a method just once

  app.del()
    ✔ should alias app.delete()

  app
    .engine(ext, fn)
      ✔ should map a template engine
      ✔ should throw when the callback is missing
      ✔ should work without leading "."
      ✔ should work "view engine" setting
      ✔ should work "view engine" with leading "."

  HEAD
    ✔ should default to GET
    ✔ should output the same headers as GET requests

  app.head()
    ✔ should override

  app
    ✔ should inherit from event emitter
    ✔ should be callable
    ✔ should 404 without routes

  app.parent
    ✔ should return the parent when mounted

  app.mountpath
    ✔ should return the mounted path

  app.router
    ✔ should throw with notice

  app.path()
    ✔ should return the canonical

  in development
    ✔ should disable "view cache"

  in production
    ✔ should enable "view cache"

  without NODE_ENV
    ✔ should default to development

  app.listen()
    ✔ should wrap with an HTTP server

  app
    .locals
      ✔ should default object
      .settings
        ✔ should contain app settings 

  OPTIONS
    ✔ should default to the routes defined
    ✔ should only include each method once
    ✔ should not be affected by app.all
    ✔ should not respond if the path is not defined
    ✔ should forward requests down the middleware chain
    when error occurs in response handler
      ✔ should pass error to callback

  app.options()
    ✔ should override the default behavior

  app
    .param(fn)
      ✔ should map app.param(name, ...) logic
      ✔ should fail if not given fn
    .param(names, fn)
      ✔ should map the array
    .param(name, fn)
      ✔ should map logic for a single param
      ✔ should only call once per request
      ✔ should call when values differ
      ✔ should support altering req.params across routes
      ✔ should not invoke without route handler
      ✔ should work with encoded values
      ✔ should catch thrown error
      ✔ should catch thrown secondary error
      ✔ should defer to next route
      ✔ should defer all the param routes
      ✔ should not call when values differ on error
      ✔ should call when values differ when using "next"

  app
    .render(name, fn)
      ✔ should support absolute paths
      ✔ should support absolute paths with "view engine"
      ✔ should expose app.locals
      ✔ should support index.<engine>
      ✔ should handle render error throws
      when the file does not exist
        ✔ should provide a helpful error
      when an error occurs
        ✔ should invoke the callback
      when an extension is given
        ✔ should render the template
      when "view engine" is given
        ✔ should render the template
      when "views" is given
        ✔ should lookup the file in the path
        when array of paths
          ✔ should lookup the file in the path
          ✔ should lookup in later paths until found
          ✔ should error if file does not exist
      when a "view" constructor is given
        ✔ should create an instance of it
      caching
        ✔ should always lookup view without cache
        ✔ should cache with "view cache" setting
    .render(name, options, fn)
      ✔ should render the template
      ✔ should expose app.locals
      ✔ should give precedence to app.render() locals
      caching
        ✔ should cache with cache option

  app
    .request
      ✔ should extend the request prototype
      ✔ should only extend for the referenced app
      ✔ should inherit to sub apps
      ✔ should allow sub app to override
      ✔ should not pollute parent app

  app
    .response
      ✔ should extend the response prototype
      ✔ should only extend for the referenced app
      ✔ should inherit to sub apps
      ✔ should allow sub app to override
      ✔ should not pollute parent app

  app.route
    ✔ should return a new route
    ✔ should all .VERB after .all
    ✔ should support dynamic routes
    ✔ should not error on empty routes

  app.router
    ✔ should restore req.params after leaving router
    ✔ should be .use()able
    ✔ should allow escaped regexp
    ✔ should allow literal "."
    ✔ should allow rewriting of the url
    ✔ should run in order added
    ✔ should be chainable
    methods
      ✔ should include ACL
      ✔ should reject numbers for app.acl
      ✔ should include BIND
      ✔ should reject numbers for app.bind
      ✔ should include CHECKOUT
      ✔ should reject numbers for app.checkout
      ✔ should include COPY
      ✔ should reject numbers for app.copy
      ✔ should include DELETE
      ✔ should reject numbers for app.delete
      ✔ should include GET
      ✔ should reject numbers for app.get
      ✔ should include HEAD
      ✔ should reject numbers for app.head
      ✔ should include LINK
      ✔ should reject numbers for app.link
      ✔ should include LOCK
      ✔ should reject numbers for app.lock
      ✔ should include M-SEARCH
      ✔ should reject numbers for app.m-search
      ✔ should include MERGE
      ✔ should reject numbers for app.merge
      ✔ should include MKACTIVITY
      ✔ should reject numbers for app.mkactivity
      ✔ should include MKCALENDAR
      ✔ should reject numbers for app.mkcalendar
      ✔ should include MKCOL
      ✔ should reject numbers for app.mkcol
      ✔ should include MOVE
      ✔ should reject numbers for app.move
      ✔ should include NOTIFY
      ✔ should reject numbers for app.notify
      ✔ should include OPTIONS
      ✔ should reject numbers for app.options
      ✔ should include PATCH
      ✔ should reject numbers for app.patch
      ✔ should include POST
      ✔ should reject numbers for app.post
      ✔ should include PROPFIND
      ✔ should reject numbers for app.propfind
      ✔ should include PROPPATCH
      ✔ should reject numbers for app.proppatch
      ✔ should include PURGE
      ✔ should reject numbers for app.purge
      ✔ should include PUT
      ✔ should reject numbers for app.put
      ✔ should include REBIND
      ✔ should reject numbers for app.rebind
      ✔ should include REPORT
      ✔ should reject numbers for app.report
      ✔ should include SEARCH
      ✔ should reject numbers for app.search
      ✔ should include SOURCE
      ✔ should reject numbers for app.source
      ✔ should include SUBSCRIBE
      ✔ should reject numbers for app.subscribe
      ✔ should include TRACE
      ✔ should reject numbers for app.trace
      ✔ should include UNBIND
      ✔ should reject numbers for app.unbind
      ✔ should include UNLINK
      ✔ should reject numbers for app.unlink
      ✔ should include UNLOCK
      ✔ should reject numbers for app.unlock
      ✔ should include UNSUBSCRIBE
      ✔ should reject numbers for app.unsubscribe
      ✔ should include DEL
      ✔ should reject numbers for app.del
      ✔ should re-route when method is altered
    decode params
      ✔ should decode correct params
      ✔ should not accept params in malformed paths
      ✔ should not decode spaces
      ✔ should work with unicode
    when given a regexp
      ✔ should match the pathname only
      ✔ should populate req.params with the captures
      ✔ should ensure regexp matches path prefix
    case sensitivity
      ✔ should be disabled by default
      when "case sensitive routing" is enabled
        ✔ should match identical casing
        ✔ should not match otherwise
    params
      ✔ should overwrite existing req.params by default
      ✔ should allow merging existing req.params
      ✔ should use params from router
      ✔ should merge numeric indices req.params
      ✔ should merge numeric indices req.params when more in parent
      ✔ should merge numeric indices req.params when parent has same number
      ✔ should ignore invalid incoming req.params
      ✔ should restore req.params
    trailing slashes
      ✔ should be optional by default
      when "strict routing" is enabled
        ✔ should match trailing slashes
        ✔ should pass-though middleware
        ✔ should pass-though mounted middleware
        ✔ should match no slashes
        ✔ should match middleware when omitting the trailing slash
        ✔ should match middleware
        ✔ should match middleware when adding the trailing slash
        ✔ should fail when omitting the trailing slash
        ✔ should fail when adding the trailing slash
    *
      ✔ should capture everything
      ✔ should decode the capture
      ✔ should denote a greedy capture group
      ✔ should work with several
      ✔ should work cross-segment
      ✔ should allow naming
      ✔ should not be greedy immediately after param
      ✔ should eat everything after /
      ✔ should span multiple segments
      ✔ should be optional
      ✔ should require a preceding /
      ✔ should keep correct parameter indexes
      ✔ should work within arrays
    :name
      ✔ should denote a capture group
      ✔ should match a single segment only
      ✔ should allow several capture groups
      ✔ should work following a partial capture group
      ✔ should work inside literal parenthesis
      ✔ should work in array of paths
    :name?
      ✔ should denote an optional capture group
      ✔ should populate the capture group
    .:name
      ✔ should denote a format
    .:name?
      ✔ should denote an optional format
    when next() is called
      ✔ should continue lookup
    when next("route") is called
      ✔ should jump to next route
    when next("router") is called
      ✔ should jump out of router
    when next(err) is called
      ✔ should break out of app.router
      ✔ should call handler in same route, if exists

  app
    .VERB()
      ✔ should not get invoked without error handler on error
      ✔ should only call an error handling routing callback when an error is propagated

  app
    ✔ should emit "mount" when mounted
    .use(app)
      ✔ should mount the app
      ✔ should support mount-points
      ✔ should set the child's .parent
      ✔ should support dynamic routes
      ✔ should support mounted app anywhere
    .use(middleware)
      ✔ should accept multiple arguments
      ✔ should invoke middleware for all requests
      ✔ should accept array of middleware
      ✔ should accept multiple arrays of middleware
      ✔ should accept nested arrays of middleware
    .use(path, middleware)
      ✔ should require middleware
      ✔ should reject string as middleware
      ✔ should reject number as middleware
      ✔ should reject null as middleware
      ✔ should reject Date as middleware
      ✔ should strip path from req.url
      ✔ should accept multiple arguments
      ✔ should invoke middleware for all requests starting with path
      ✔ should work if path has trailing slash
      ✔ should accept array of middleware
      ✔ should accept multiple arrays of middleware
      ✔ should accept nested arrays of middleware
      ✔ should support array of paths
      ✔ should support array of paths with middleware array
      ✔ should support regexp path
      ✔ should support empty string path

  config
    .set()
      ✔ should set a value
      ✔ should set prototype values
      ✔ should return the app
      ✔ should return the app when undefined
      ✔ should return set value
      ✔ should return undefined for prototype values
      "etag"
        ✔ should throw on bad value
        ✔ should set "etag fn"
      "trust proxy"
        ✔ should set "trust proxy fn"
    .get()
      ✔ should return undefined when unset
      ✔ should return undefined for prototype values
      ✔ should otherwise return the value
      when mounted
        ✔ should default to the parent app
        ✔ should given precedence to the child
        ✔ should inherit "trust proxy" setting
        ✔ should prefer child "trust proxy" setting
    .enable()
      ✔ should set the value to true
      ✔ should set prototype values
    .disable()
      ✔ should set the value to false
      ✔ should set prototype values
    .enabled()
      ✔ should default to false
      ✔ should return true when set
      ✔ should default to false for prototype values
    .disabled()
      ✔ should default to true
      ✔ should return false when set
      ✔ should default to true for prototype values

  exports
    ✔ should expose Router
    ✔ should expose json middleware
    ✔ should expose raw middleware
    ✔ should expose static middleware
    ✔ should expose text middleware
    ✔ should expose urlencoded middleware
    ✔ should expose the application prototype
    ✔ should expose the request prototype
    ✔ should expose the response prototype
    ✔ should permit modifying the .application prototype
    ✔ should permit modifying the .request prototype
    ✔ should permit modifying the .response prototype
    ✔ should throw on old middlewares

  express.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  express.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  express.static()
    basic operations
      ✔ should require root path
      ✔ should require root path to be string
      ✔ should serve static files
      ✔ should support nesting
      ✔ should set Content-Type
      ✔ should set Last-Modified
      ✔ should default max-age=0
      ✔ should support urlencoded pathnames
      ✔ should not choke on auth-looking URL
      ✔ should support index.html
      ✔ should support ../
      ✔ should support HEAD
      ✔ should skip POST requests
      ✔ should support conditional requests
      ✔ should support precondition checks
      ✔ should serve zero-length files
      ✔ should ignore hidden files
    current dir
      ✔ should be served with "."
    acceptRanges
      when false
        ✔ should not include Accept-Ranges
        ✔ should ignore Rage request header
      when true
        ✔ should include Accept-Ranges
        ✔ should obey Rage request header
    cacheControl
      when false
        ✔ should not include Cache-Control
        ✔ should ignore maxAge
      when true
        ✔ should include Cache-Control
    extensions
      ✔ should be not be enabled by default
      ✔ should be configurable
      ✔ should support disabling extensions
      ✔ should support fallbacks
      ✔ should 404 if nothing found
    fallthrough
      ✔ should default to true
      when true
        ✔ should fall-through when OPTIONS request
        ✔ should fall-through when URL malformed
        ✔ should fall-through when traversing past root
        ✔ should fall-through when URL too long
        with redirect: true
          ✔ should fall-through when directory
          ✔ should redirect when directory without slash
        with redirect: false
          ✔ should fall-through when directory
          ✔ should fall-through when directory without slash
      when false
        ✔ should 405 when OPTIONS request
        ✔ should 400 when URL malformed
        ✔ should 403 when traversing past root
        ✔ should 404 when URL too long
        with redirect: true
          ✔ should 404 when directory
          ✔ should redirect when directory without slash
        with redirect: false
          ✔ should 404 when directory
          ✔ should 404 when directory without slash
    hidden files
      ✔ should be served when dotfiles: "allow" is given
    immutable
      ✔ should default to false
      ✔ should set immutable directive in Cache-Control
    lastModified
      when false
        ✔ should not include Last-Modified
      when true
        ✔ should include Last-Modified
    maxAge
      ✔ should accept string
      ✔ should be reasonable when infinite
    redirect
      ✔ should redirect directories
      ✔ should include HTML link
      ✔ should redirect directories with query string
      ✔ should not redirect to protocol-relative locations
      ✔ should ensure redirect URL is properly encoded
      ✔ should respond with default Content-Security-Policy
      ✔ should not redirect incorrectly
      when false
        ✔ should disable redirect
    setHeaders
      ✔ should reject non-functions
      ✔ should get called when sending file
      ✔ should not get called on 404
      ✔ should not get called on redirect
    when traversing past root
      ✔ should catch urlencoded ../
      ✔ should not allow root path disclosure
    when request has "Range" header
      ✔ should support byte ranges
      ✔ should be inclusive
      ✔ should set Content-Range
      ✔ should support -n
      ✔ should support n-
      ✔ should respond with 206 "Partial Content"
      ✔ should set Content-Length to the # of octets transferred
      when last-byte-pos of the range is greater than current length
        ✔ is taken to be equal to one less than the current length
        ✔ should adapt the Content-Length accordingly
      when the first- byte-pos of the range is greater than the current length
        ✔ should respond with 416
        ✔ should include a Content-Range header of complete length
      when syntactically invalid
        ✔ should respond with 200 and the entire contents
    when index at mount point
      ✔ should redirect correctly
    when mounted
      ✔ should redirect relative to the originalUrl
      ✔ should not choke on auth-looking URL
    when mounted "root" as a file
      ✔ should load the file when on trailing slash
      ✔ should 404 when trailing slash
    when responding non-2xx or 304
      ✔ should not alter the status
    when index file serving disabled
      ✔ should next() on directory
      ✔ should redirect to trailing slash
      ✔ should next() on mount point
      ✔ should redirect to trailing slash mount point

  express.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (103ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  express.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (54ms)
        ✔ should work with Infinity limit (156ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  middleware
    .next()
      ✔ should behave like connect

  throw after .end()
    ✔ should fail gracefully

  req
    ✔ should accept an argument list of type names
    .accepts(type)
      ✔ should return true when Accept is not present
      ✔ should return true when present
      ✔ should return false otherwise
    .accepts(types)
      ✔ should return the first when Accept is not present
      ✔ should return the first acceptable type
      ✔ should return false when no match is made
      ✔ should take quality into account
      ✔ should return the first acceptable type with canonical mime types

  req
    .acceptsCharset(type)
      when Accept-Charset is not present
        ✔ should return true
      when Accept-Charset is present
        ✔ should return true
        ✔ should return false otherwise

  req
    .acceptsCharsets(type)
      when Accept-Charset is not present
        ✔ should return true
      when Accept-Charset is present
        ✔ should return true
        ✔ should return false otherwise

  req
    .acceptsEncoding
      ✔ should return encoding if accepted
      ✔ should be false if encoding not accepted

  req
    .acceptsEncodings
      ✔ should return encoding if accepted
      ✔ should be false if encoding not accepted

  req
    .acceptsLanguage
      ✔ should return language if accepted
      ✔ should be false if language not accepted
      when Accept-Language is not present
        ✔ should always return language

  req
    .acceptsLanguages
      ✔ should return language if accepted
      ✔ should be false if language not accepted
      when Accept-Language is not present
        ✔ should always return language

  req
    .baseUrl
      ✔ should be empty for top-level route
      ✔ should contain lower path
      ✔ should contain full lower path
      ✔ should travel through routers correctly

  req
    .fresh
      ✔ should return true when the resource is not modified
      ✔ should return false when the resource is modified
      ✔ should return false without response headers

  req
    .get(field)
      ✔ should return the header field value
      ✔ should special-case Referer
      ✔ should throw missing header name
      ✔ should throw for non-string header name

  req
    .host
      ✔ should return the Host when present
      ✔ should strip port number
      ✔ should return undefined otherwise
      ✔ should work with IPv6 Host
      ✔ should work with IPv6 Host and port
      when "trust proxy" is enabled
        ✔ should respect X-Forwarded-Host
        ✔ should ignore X-Forwarded-Host if socket addr not trusted
        ✔ should default to Host
        when trusting hop count
          ✔ should respect X-Forwarded-Host
      when "trust proxy" is disabled
        ✔ should ignore X-Forwarded-Host

  req
    .hostname
      ✔ should return the Host when present
      ✔ should strip port number
      ✔ should return undefined otherwise
      ✔ should work with IPv6 Host
      ✔ should work with IPv6 Host and port
      when "trust proxy" is enabled
        ✔ should respect X-Forwarded-Host
        ✔ should ignore X-Forwarded-Host if socket addr not trusted
        ✔ should default to Host
        when multiple X-Forwarded-Host
          ✔ should use the first value
          ✔ should remove OWS around comma
          ✔ should strip port number
      when "trust proxy" is disabled
        ✔ should ignore X-Forwarded-Host

  req
    .ip
      when X-Forwarded-For is present
        when "trust proxy" is enabled
          ✔ should return the client addr
          ✔ should return the addr after trusted proxy based on count
          ✔ should return the addr after trusted proxy based on list
          ✔ should return the addr after trusted proxy, from sub app
        when "trust proxy" is disabled
          ✔ should return the remote address
      when X-Forwarded-For is not present
        ✔ should return the remote address

  req
    .ips
      when X-Forwarded-For is present
        when "trust proxy" is enabled
          ✔ should return an array of the specified addresses
          ✔ should stop at first untrusted
        when "trust proxy" is disabled
          ✔ should return an empty array
      when X-Forwarded-For is not present
        ✔ should return []

  req.is()
    when given a mime type
      ✔ should return the type when matching
      ✔ should return false when not matching
      ✔ should ignore charset
    when content-type is not present
      ✔ should return false
    when given an extension
      ✔ should lookup the mime type
    when given */subtype
      ✔ should return the full type when matching
      ✔ should return false when not matching
      ✔ should ignore charset
    when given type/*
      ✔ should return the full type when matching
      ✔ should return false when not matching
      ✔ should ignore charset

  req
    .param(name, default)
      ✔ should use the default value unless defined
    .param(name)
      ✔ should check req.query
      ✔ should check req.body
      ✔ should check req.params

  req
    .path
      ✔ should return the parsed pathname

  req
    .protocol
      ✔ should return the protocol string
      when "trust proxy" is enabled
        ✔ should respect X-Forwarded-Proto
        ✔ should default to the socket addr if X-Forwarded-Proto not present
        ✔ should ignore X-Forwarded-Proto if socket addr not trusted
        ✔ should default to http
        when trusting hop count
          ✔ should respect X-Forwarded-Proto
      when "trust proxy" is disabled
        ✔ should ignore X-Forwarded-Proto

  req
    .query
      ✔ should default to {}
      ✔ should default to parse complex keys
      when "query parser" is extended
        ✔ should parse complex keys
        ✔ should parse parameters with dots
      when "query parser" is simple
        ✔ should not parse complex keys
      when "query parser" is a function
        ✔ should parse using function
      when "query parser" disabled
        ✔ should not parse query
      when "query parser" enabled
        ✔ should not parse complex keys
      when "query parser fn" is missing
        ✔ should act like "extended"
      when "query parser" an unknown value
        ✔ should throw

  req
    .range(size)
      ✔ should return parsed ranges
      ✔ should cap to the given size
      ✔ should cap to the given size when open-ended
      ✔ should have a .type
      ✔ should accept any type
      ✔ should return undefined if no range
    .range(size, options)
      with "combine: true" option
        ✔ should return combined ranges

  req
    .route
      ✔ should be the executed Route

  req
    .secure
      when X-Forwarded-Proto is missing
        ✔ should return false when http
    .secure
      when X-Forwarded-Proto is present
        ✔ should return false when http
        ✔ should return true when "trust proxy" is enabled
        ✔ should return false when initial proxy is http
        ✔ should return true when initial proxy is https
        when "trust proxy" trusting hop count
          ✔ should respect X-Forwarded-Proto

  req
    .signedCookies
      ✔ should return a signed JSON cookie

  req
    .stale
      ✔ should return false when the resource is not modified
      ✔ should return true when the resource is modified
      ✔ should return true without response headers

  req
    .subdomains
      when present
        ✔ should return an array
        ✔ should work with IPv4 address
        ✔ should work with IPv6 address
      otherwise
        ✔ should return an empty array
      with no host
        ✔ should return an empty array
      with trusted X-Forwarded-Host
        ✔ should return an array
      when subdomain offset is set
        when subdomain offset is zero
          ✔ should return an array with the whole domain
          ✔ should return an array with the whole IPv4
          ✔ should return an array with the whole IPv6
        when present
          ✔ should return an array
        otherwise
          ✔ should return an empty array

  req
    .xhr
      ✔ should return true when X-Requested-With is xmlhttprequest
      ✔ should case-insensitive
      ✔ should return false otherwise
      ✔ should return false when not present

  res
    .append(field, val)
      ✔ should append multiple headers
      ✔ should accept array of values
      ✔ should get reset by res.set(field, val)
      ✔ should work with res.set(field, val) first
      ✔ should work together with res.cookie

  res
    .attachment()
      ✔ should Content-Disposition to attachment
    .attachment(filename)
      ✔ should add the filename param
      ✔ should set the Content-Type
    .attachment(utf8filename)
      ✔ should add the filename and filename* params
      ✔ should set the Content-Type

  res
    .clearCookie(name)
      ✔ should set a cookie passed expiry
    .clearCookie(name, options)
      ✔ should set the given params

  res
    .cookie(name, object)
      ✔ should generate a JSON cookie
    .cookie(name, string)
      ✔ should set a cookie
      ✔ should allow multiple calls
    .cookie(name, string, options)
      ✔ should set params
      expires
        ✔ should throw on invalid date
      maxAge
        ✔ should set relative expires
        ✔ should set max-age
        ✔ should not mutate the options object
        ✔ should not throw on null
        ✔ should not throw on undefined
        ✔ should throw an error with invalid maxAge
      priority
        ✔ should set low priority
        ✔ should set medium priority
        ✔ should set high priority
        ✔ should throw with invalid priority
      signed
        ✔ should generate a signed JSON cookie
      signed without secret
        ✔ should throw an error
      .signedCookie(name, string)
        ✔ should set a signed cookie

  res
    .download(path)
      ✔ should transfer as an attachment
      ✔ should accept range requests
      ✔ should respond with requested byte range
    .download(path, filename)
      ✔ should provide an alternate filename
    .download(path, fn)
      ✔ should invoke the callback
      async local storage
        ✔ should presist store
        ✔ should presist store on error
    .download(path, options)
      ✔ should allow options to res.sendFile()
      with "headers" option
        ✔ should set headers on response
        ✔ should use last header when duplicated
        ✔ should override Content-Type
        ✔ should not set headers on 404
        when headers contains Content-Disposition
          ✔ should be ignored
          ✔ should be ignored case-insensitively
      with "root" option
        ✔ should allow relative path
        ✔ should allow up within root
        ✔ should reject up outside root
        ✔ should reject reading outside root
    .download(path, filename, fn)
      ✔ should invoke the callback
    .download(path, filename, options, fn)
      ✔ should invoke the callback
      ✔ should allow options to res.sendFile()
      when options.headers contains Content-Disposition
        ✔ should be ignored
        ✔ should be ignored case-insensitively
    on failure
      ✔ should invoke the callback
      ✔ should remove Content-Disposition

  res
    .format(obj)
      with canonicalized mime types
        ✔ should utilize qvalues in negotiation
        ✔ should allow wildcard type/subtypes
        ✔ should default the Content-Type
        ✔ should set the correct charset for the Content-Type
        ✔ should Vary: Accept
        when Accept is not present
          ✔ should invoke the first callback
        when no match is made
          ✔ should should respond with 406 not acceptable
      with extnames
        ✔ should utilize qvalues in negotiation
        ✔ should allow wildcard type/subtypes
        ✔ should default the Content-Type
        ✔ should set the correct charset for the Content-Type
        ✔ should Vary: Accept
        when Accept is not present
          ✔ should invoke the first callback
        when no match is made
          ✔ should should respond with 406 not acceptable
      with parameters
        ✔ should utilize qvalues in negotiation
        ✔ should allow wildcard type/subtypes
        ✔ should default the Content-Type
        ✔ should set the correct charset for the Content-Type
        ✔ should Vary: Accept
        when Accept is not present
          ✔ should invoke the first callback
        when no match is made
          ✔ should should respond with 406 not acceptable
      given .default
        ✔ should be invoked instead of auto-responding
        ✔ should work when only .default is provided
        ✔ should be able to invoke other formatter
      in router
        ✔ should utilize qvalues in negotiation
        ✔ should allow wildcard type/subtypes
        ✔ should default the Content-Type
        ✔ should set the correct charset for the Content-Type
        ✔ should Vary: Accept
        when Accept is not present
          ✔ should invoke the first callback
        when no match is made
          ✔ should should respond with 406 not acceptable
      in router
        ✔ should utilize qvalues in negotiation
        ✔ should allow wildcard type/subtypes
        ✔ should default the Content-Type
        ✔ should set the correct charset for the Content-Type
        ✔ should Vary: Accept
        when Accept is not present
          ✔ should invoke the first callback
        when no match is made
          ✔ should should respond with 406 not acceptable

  res
    .get(field)
      ✔ should get the response header field

  res
    .json(object)
      ✔ should not support jsonp callbacks
      ✔ should not override previous Content-Types
      when given primitives
        ✔ should respond with json for null
        ✔ should respond with json for Number
        ✔ should respond with json for String
      when given an array
        ✔ should respond with json
      when given an object
        ✔ should respond with json
      "json escape" setting
        ✔ should be undefined by default
        ✔ should unicode escape HTML-sniffing characters
        ✔ should not break undefined escape
      "json replacer" setting
        ✔ should be passed to JSON.stringify()
      "json spaces" setting
        ✔ should be undefined by default
        ✔ should be passed to JSON.stringify()
    .json(status, object)
      ✔ should respond with json and set the .statusCode
    .json(object, status)
      ✔ should respond with json and set the .statusCode for backwards compat
      ✔ should use status as second number for backwards compat

  res
    ✔ should not override previous Content-Types
    .jsonp(object)
      ✔ should respond with jsonp
      ✔ should use first callback parameter with jsonp
      ✔ should ignore object callback parameter with jsonp
      ✔ should allow renaming callback
      ✔ should allow []
      ✔ should disallow arbitrary js
      ✔ should escape utf whitespace
      ✔ should not escape utf whitespace for json fallback
      ✔ should include security header and prologue
      ✔ should not override previous Content-Types with no callback
      ✔ should override previous Content-Types with callback
      when given undefined
        ✔ should invoke callback with no arguments
      when given null
        ✔ should invoke callback with null
      when given a string
        ✔ should invoke callback with a string
      when given a number
        ✔ should invoke callback with a number
      when given an array
        ✔ should invoke callback with an array
      when given an object
        ✔ should invoke callback with an object
      "json escape" setting
        ✔ should be undefined by default
        ✔ should unicode escape HTML-sniffing characters
        ✔ should not break undefined escape
      "json replacer" setting
        ✔ should be passed to JSON.stringify()
      "json spaces" setting
        ✔ should be undefined by default
        ✔ should be passed to JSON.stringify()
    .jsonp(status, object)
      ✔ should respond with json and set the .statusCode
    .jsonp(object, status)
      ✔ should respond with json and set the .statusCode for backwards compat
      ✔ should use status as second number for backwards compat

  res
    .links(obj)
      ✔ should set Link header field
      ✔ should set Link header field for multiple calls

  res
    ✔ should work when mounted
    .locals
      ✔ should be empty by default

  res
    .location(url)
      ✔ should set the header
      ✔ should encode "url"
      ✔ should not touch already-encoded sequences in "url"
      when url is "back"
        ✔ should set location from "Referer" header
        ✔ should set location from "Referrer" header
        ✔ should prefer "Referrer" header
        ✔ should set the header to "/" without referrer

  res
    .redirect(url)
      ✔ should default to a 302 redirect
      ✔ should encode "url"
      ✔ should not touch already-encoded sequences in "url"
    .redirect(status, url)
      ✔ should set the response status
    .redirect(url, status)
      ✔ should set the response status
    when the request method is HEAD
      ✔ should ignore the body
    when accepting html
      ✔ should respond with html
      ✔ should escape the url
      ✔ should include the redirect type
    when accepting text
      ✔ should respond with text
      ✔ should encode the url
      ✔ should include the redirect type
    when accepting neither text or html
      ✔ should respond with an empty body

  res
    .render(name)
      ✔ should support absolute paths
      ✔ should support absolute paths with "view engine"
      ✔ should error without "view engine" set and file extension to a non-engine module
      ✔ should error without "view engine" set and no file extension
      ✔ should expose app.locals
      ✔ should expose app.locals with `name` property
      ✔ should support index.<engine>
      when an error occurs
        ✔ should next(err)
      when "view engine" is given
        ✔ should render the template
      when "views" is given
        ✔ should lookup the file in the path
        when array of paths
          ✔ should lookup the file in the path
          ✔ should lookup in later paths until found
    .render(name, option)
      ✔ should render the template
      ✔ should expose app.locals
      ✔ should expose res.locals
      ✔ should give precedence to res.locals over app.locals
      ✔ should give precedence to res.render() locals over res.locals
      ✔ should give precedence to res.render() locals over app.locals
    .render(name, options, fn)
      ✔ should pass the resulting string
    .render(name, fn)
      ✔ should pass the resulting string
      when an error occurs
        ✔ should pass it to the callback

  res
    ✔ should always check regardless of length
    ✔ should respond with 304 Not Modified when fresh
    ✔ should not perform freshness check unless 2xx or 304
    ✔ should not support jsonp callbacks
    ✔ should be chainable
    .send()
      ✔ should set body to ""
    .send(null)
      ✔ should set body to ""
    .send(undefined)
      ✔ should set body to ""
    .send(code)
      ✔ should set .statusCode
    .send(code, body)
      ✔ should set .statusCode and body
    .send(body, code)
      ✔ should be supported for backwards compat
    .send(code, number)
      ✔ should send number as json
    .send(String)
      ✔ should send as html
      ✔ should set ETag
      ✔ should not override Content-Type
      ✔ should override charset in Content-Type
      ✔ should keep charset in Content-Type for Buffers
    .send(Buffer)
      ✔ should send as octet-stream
      ✔ should set ETag
      ✔ should not override Content-Type
      ✔ should not override ETag
    .send(Object)
      ✔ should send as application/json
    when the request method is HEAD
      ✔ should ignore the body
    when .statusCode is 204
      ✔ should strip Content-* fields, Transfer-Encoding field, and body
    when .statusCode is 205
      ✔ should strip Transfer-Encoding field and body, set Content-Length
    when .statusCode is 304
      ✔ should strip Content-* fields, Transfer-Encoding field, and body
    "etag" setting
      when enabled
        ✔ should send ETag
        ✔ should send ETag in response to ACL request
        ✔ should send ETag in response to BIND request
        ✔ should send ETag in response to CHECKOUT request
        ✔ should send ETag in response to COPY request
        ✔ should send ETag in response to DELETE request
        ✔ should send ETag in response to GET request
        ✔ should send ETag in response to HEAD request
        ✔ should send ETag in response to LINK request
        ✔ should send ETag in response to LOCK request
        ✔ should send ETag in response to M-SEARCH request
        ✔ should send ETag in response to MERGE request
        ✔ should send ETag in response to MKACTIVITY request
        ✔ should send ETag in response to MKCALENDAR request
        ✔ should send ETag in response to MKCOL request
        ✔ should send ETag in response to MOVE request
        ✔ should send ETag in response to NOTIFY request
        ✔ should send ETag in response to OPTIONS request
        ✔ should send ETag in response to PATCH request
        ✔ should send ETag in response to POST request
        ✔ should send ETag in response to PROPFIND request
        ✔ should send ETag in response to PROPPATCH request
        ✔ should send ETag in response to PURGE request
        ✔ should send ETag in response to PUT request
        ✔ should send ETag in response to REBIND request
        ✔ should send ETag in response to REPORT request
        ✔ should send ETag in response to SEARCH request
        ✔ should send ETag in response to SOURCE request
        ✔ should send ETag in response to SUBSCRIBE request
        ✔ should send ETag in response to TRACE request
        ✔ should send ETag in response to UNBIND request
        ✔ should send ETag in response to UNLINK request
        ✔ should send ETag in response to UNLOCK request
        ✔ should send ETag in response to UNSUBSCRIBE request
        ✔ should send ETag for empty string response
        ✔ should send ETag for long response
        ✔ should not override ETag when manually set
        ✔ should not send ETag for res.send()
      when disabled
        ✔ should send no ETag
        ✔ should send ETag when manually set
      when "strong"
        ✔ should send strong ETag
      when "weak"
        ✔ should send weak ETag
      when a function
        ✔ should send custom ETag
        ✔ should not send falsy ETag

  res
    .sendFile(path)
      ✔ should error missing path
      ✔ should error for non-string path
      ✔ should error for non-absolute path
      ✔ should transfer a file
      ✔ should transfer a file with special characters in string
      ✔ should include ETag
      ✔ should 304 when ETag matches
      ✔ should 404 for directory
      ✔ should 404 when not found
      ✔ should send cache-control by default
      ✔ should not serve dotfiles by default
      ✔ should not override manual content-types
      ✔ should not error if the client aborts
    .sendFile(path, fn)
      ✔ should invoke the callback when complete
      ✔ should invoke the callback when client aborts
      ✔ should invoke the callback when client already aborted
      ✔ should invoke the callback without error when HEAD
      ✔ should invoke the callback without error when 304
      ✔ should invoke the callback on 404
      async local storage
        ✔ should presist store
        ✔ should presist store on error
    .sendFile(path, options)
      ✔ should pass options to send module
      with "acceptRanges" option
        when true
          ✔ should advertise byte range accepted
          ✔ should respond to range request
        when false
          ✔ should not advertise accept-ranges
          ✔ should not honor range requests
      with "cacheControl" option
        when true
          ✔ should send cache-control header
        when false
          ✔ should not send cache-control header
      with "dotfiles" option
        when "allow"
          ✔ should allow dotfiles
        when "deny"
          ✔ should deny dotfiles
        when "ignore"
          ✔ should ignore dotfiles
      with "headers" option
        ✔ should set headers on response
        ✔ should use last header when duplicated
        ✔ should override Content-Type
        ✔ should not set headers on 404
      with "immutable" option
        when true
          ✔ should send cache-control header with immutable
        when false
          ✔ should not send cache-control header with immutable
      with "lastModified" option
        when true
          ✔ should send last-modified header
          ✔ should conditionally respond with if-modified-since
        when false
          ✔ should not have last-modified header
          ✔ should not honor if-modified-since
      with "maxAge" option
        ✔ should set cache-control max-age to milliseconds
        ✔ should cap cache-control max-age to 1 year
        ✔ should min cache-control max-age to 0
        ✔ should floor cache-control max-age
        when cacheControl: false
          ✔ should not send cache-control
        when string
          ✔ should accept plain number as milliseconds
          ✔ should accept suffix "s" for seconds
          ✔ should accept suffix "m" for minutes
          ✔ should accept suffix "d" for days
      with "root" option
        ✔ should allow relative path
        ✔ should allow up within root
        ✔ should reject up outside root
        ✔ should reject reading outside root
    .sendfile(path, fn)
      ✔ should invoke the callback when complete
      ✔ should utilize the same options as express.static()
      ✔ should invoke the callback when client aborts
      ✔ should invoke the callback when client already aborted
      ✔ should invoke the callback without error when HEAD
      ✔ should invoke the callback without error when 304
      ✔ should invoke the callback on 404
      ✔ should not override manual content-types
      ✔ should invoke the callback on 403
      ✔ should invoke the callback on socket error
      async local storage
        ✔ should presist store
        ✔ should presist store on error
    .sendfile(path)
      ✔ should not serve dotfiles
      ✔ should accept dotfiles option
      ✔ should accept headers option
      ✔ should ignore headers option on 404
      ✔ should transfer a file
      ✔ should transfer a directory index file
      ✔ should 404 for directory without trailing slash
      ✔ should transfer a file with urlencoded name
      ✔ should not error if the client aborts
      with an absolute path
        ✔ should transfer the file
      with a relative path
        ✔ should transfer the file
        ✔ should serve relative to "root"
        ✔ should consider ../ malicious when "root" is not set
        ✔ should allow ../ when "root" is set
        ✔ should disallow requesting out of "root"
        ✔ should next(404) when not found
        with non-GET
          ✔ should still serve
    .sendfile(path, options)
      ✔ should pass options to send module

  res
    .sendStatus(statusCode)
      ✔ should send the status code and message as body
      ✔ should work with unknown code

  res
    .set(field, value)
      ✔ should set the response header field
      ✔ should coerce to a string
    .set(field, values)
      ✔ should set multiple response header fields
      ✔ should coerce to an array of strings
      ✔ should not set a charset of one is already set
      ✔ should throw when Content-Type is an array
    .set(object)
      ✔ should set multiple fields
      ✔ should coerce to a string

  res
    .status(code)
      when "code" is undefined
        ✔ should raise error for invalid status code
      when "code" is null
        ✔ should raise error for invalid status code
      when "code" is 201
        ✔ should set the response status code to 201
      when "code" is 302
        ✔ should set the response status code to 302
      when "code" is 403
        ✔ should set the response status code to 403
      when "code" is 501
        ✔ should set the response status code to 501
      when "code" is "410"
        ✔ should set the response status code to 410
      when "code" is 410.1
        ✔ should set the response status code to 410
      when "code" is 1000
        ✔ should raise error for invalid status code
      when "code" is 99
        ✔ should raise error for invalid status code
      when "code" is -401
        ✔ should raise error for invalid status code

  res
    .type(str)
      ✔ should set the Content-Type based on a filename
      ✔ should default to application/octet-stream
      ✔ should set the Content-Type with type/subtype

  res.vary()
    with no arguments
      ✔ should not set Vary
    with an empty array
      ✔ should not set Vary
    with an array
      ✔ should set the values
    with a string
      ✔ should set the value
    when the value is present
      ✔ should not add it again

  utils.etag(body, encoding)
    ✔ should support strings
    ✔ should support utf8 strings
    ✔ should support buffer
    ✔ should support empty string

  utils.setCharset(type, charset)
    ✔ should do anything without type
    ✔ should return type if not given charset
    ✔ should keep charset if not given charset
    ✔ should set charset
    ✔ should override charset

  utils.wetag(body, encoding)
    ✔ should support strings
    ✔ should support utf8 strings
    ✔ should support buffer
    ✔ should support empty string

  utils.isAbsolute()
    ✔ should support windows
    ✔ should support windows unc
    ✔ should support unices

  utils.flatten(arr)
    ✔ should flatten an array

  auth
    GET /
      ✔ should redirect to /login
    GET /login
      ✔ should render login form
      ✔ should display login error for bad user
      ✔ should display login error for bad password
    GET /logout
      ✔ should redirect to /
    GET /restricted
      ✔ should redirect to /login without cookie
      ✔ should succeed with proper cookie
    POST /login
      ✔ should fail without proper username
      ✔ should fail without proper password
      ✔ should succeed with proper credentials

  content-negotiation
    GET /
      ✔ should default to text/html
      ✔ should accept to text/plain
      ✔ should accept to application/json
    GET /users
      ✔ should default to text/html
      ✔ should accept to text/plain
      ✔ should accept to application/json

  cookie-sessions
    GET /
      ✔ should display no views
      ✔ should set a session cookie
      ✔ should display 1 view on revisit

  cookies
    GET /
      ✔ should have a form
      ✔ should respond with no cookies
      ✔ should respond to cookie
    GET /forget
      ✔ should clear cookie
    POST /
      ✔ should set a cookie
      ✔ should no set cookie w/o reminder

  downloads
    GET /
      ✔ should have a link to amazing.txt
    GET /files/notes/groceries.txt
      ✔ should have a download header
    GET /files/amazing.txt
      ✔ should have a download header
    GET /files/missing.txt
      ✔ should respond with 404
    GET /files/../index.js
      ✔ should respond with 403

  ejs
    GET /
      ✔ should respond with html

  error-pages
    GET /
      ✔ should respond with page list
    Accept: text/html
      GET /403
        ✔ should respond with 403
      GET /404
        ✔ should respond with 404
      GET /500
        ✔ should respond with 500
    Accept: application/json
      GET /403
        ✔ should respond with 403
      GET /404
        ✔ should respond with 404
      GET /500
        ✔ should respond with 500
    Accept: text/plain
      GET /403
        ✔ should respond with 403
      GET /404
        ✔ should respond with 404
      GET /500
        ✔ should respond with 500

  error
    GET /
      ✔ should respond with 500
    GET /next
      ✔ should respond with 500
    GET /missing
      ✔ should respond with 404

  hello-world
    GET /
      ✔ should respond with hello world
    GET /missing
      ✔ should respond with 404

  markdown
    GET /
      ✔ should respond with html
    GET /fail
      ✔ should respond with an error

  multi-router
    GET /
      ✔ should respond with root handler
    GET /api/v1/
      ✔ should respond with APIv1 root handler
    GET /api/v1/users
      ✔ should respond with users from APIv1
    GET /api/v2/
      ✔ should respond with APIv2 root handler
    GET /api/v2/users
      ✔ should respond with users from APIv2

  mvc
    GET /
      ✔ should redirect to /users
    GET /pet/0
      ✔ should get pet
    GET /pet/0/edit
      ✔ should get pet edit page
    PUT /pet/2
      ✔ should update the pet
    GET /users
      ✔ should display a list of users (42ms)
    GET /user/:id
      when present
        ✔ should display the user
        ✔ should display the users pets
      when not present
        ✔ should 404
    GET /user/:id/edit
      ✔ should display the edit form
    PUT /user/:id
      ✔ should 500 on error
      ✔ should update the user
    POST /user/:id/pet
      ✔ should create a pet for user

  params
    GET /
      ✔ should respond with instructions
    GET /user/0
      ✔ should respond with a user
    GET /user/9
      ✔ should fail to find user
    GET /users/0-2
      ✔ should respond with three users
    GET /users/foo-bar
      ✔ should fail integer parsing

  resource
    GET /
      ✔ should respond with instructions
    GET /users
      ✔ should respond with all users
    GET /users/1
      ✔ should respond with user 1
    GET /users/9
      ✔ should respond with error
    GET /users/1..3
      ✔ should respond with users 1 through 3
    DELETE /users/1
      ✔ should delete user 1
    DELETE /users/9
      ✔ should fail
    GET /users/1..3.json
      ✔ should respond with users 2 and 3 as json

  route-map
    GET /users
      ✔ should respond with users
    DELETE /users
      ✔ should delete users
    GET /users/:id
      ✔ should get a user
    GET /users/:id/pets
      ✔ should get a users pets
    GET /users/:id/pets/:pid
      ✔ should get a users pet

  route-separation
    GET /
      ✔ should respond with index
    GET /users
      ✔ should list users
    GET /user/:id
      ✔ should get a user
      ✔ should 404 on missing user
    GET /user/:id/view
      ✔ should get a user
      ✔ should 404 on missing user
    GET /user/:id/edit
      ✔ should get a user to edit
    PUT /user/:id/edit
      ✔ should edit a user
    POST /user/:id/edit?_method=PUT
      ✔ should edit a user
    GET /posts
      ✔ should get a list of posts

  vhost
    example.com
      GET /
        ✔ should say hello
      GET /foo
        ✔ should say foo
    foo.example.com
      GET /
        ✔ should redirect to /foo
    bar.example.com
      GET /
        ✔ should redirect to /bar

  web-service
    GET /api/users
      without an api key
        ✔ should respond with 400 bad request
      with an invalid api key
        ✔ should respond with 401 unauthorized
      with a valid api key
        ✔ should respond users json
    GET /api/repos
      without an api key
        ✔ should respond with 400 bad request
      with an invalid api key
        ✔ should respond with 401 unauthorized
      with a valid api key
        ✔ should respond repos json
    GET /api/user/:name/repos
      without an api key
        ✔ should respond with 400 bad request
      with an invalid api key
        ✔ should respond with 401 unauthorized
      with a valid api key
        ✔ should respond user repos json
        ✔ should 404 with unknown user
    when requesting an invalid route
      ✔ should respond with 404 json


  1261 passing (4s)

npm uninstall

removed 5 packages, and audited 411 packages in 1s

48 packages are looking for funding
  run `npm fund` for details

3 high severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> express@4.18.1 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/ test/acceptance/

----------------------run test done----------------------
----------------------client json-server of body-parser----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> json-server@0.17.0 test
> npm run build && cross-env NODE_ENV=test jest && npm run lint


> json-server@0.17.0 build
> babel src -d lib

Successfully compiled 19 files with Babel (960ms).

  \{^_^}/ hi!

  Loading /tmp/f16ce634-d798-49d8-afe3-0a3c0b479991/db.json
  Done

  Resources
  http://localhost:3101/posts
  http://localhost:3101/comments

  Home
  http://localhost:3101

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/26fd0263-f915-4b8c-8113-1a08b82e8905/db.json
  Done

  Resources
  http://localhost:3102/posts
  http://localhost:3102/comments

  Home
  http://localhost:3102

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/88d34b76-4b61-4818-a691-c3ab50858c13/db.json
  Done

  Resources
  http://localhost:3103/posts
  http://localhost:3103/comments

  Home
  http://localhost:3103

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3104/posts

  Home
  http://localhost:3104

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading https://jsonplaceholder.typicode.com/db
  Done

  Resources
  http://localhost:3105/posts
  http://localhost:3105/comments
  http://localhost:3105/albums
  http://localhost:3105/photos
  http://localhost:3105/users
  http://localhost:3105/todos

  Home
  http://localhost:3105

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/2e8fdcc9-9bf7-40f1-aa4e-dbf3e7dfd62d/db.json
  Loading /tmp/98c1d263-3b50-4245-b595-cc30c34c7e5d/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3106/posts
  http://localhost:3106/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3106

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/8356ee7f-cf76-4f35-a7b7-9b55303a5c79/db.json
  Loading /tmp/79d8320d-9dfc-4294-9c3b-46ff84cde975/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3107/posts
  http://localhost:3107/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3107

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/0be2c3cc-5ea0-4ab1-af98-731d193530f6/db.json
  Loading /tmp/0d425f9c-581e-4cec-add6-478227fdd621/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3108/posts
  http://localhost:3108/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3108

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/9a0b3356-1318-4508-9481-af8de3255a0b/db.json
  Loading /tmp/a40e2294-b276-451c-92f2-a18831de89cb/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3109/posts
  http://localhost:3109/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3109

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/54f3dc04-3cef-4528-a389-773e1bcc224b/db.json
  Loading ./../../__fixtures__/middlewares/en.js
  Loading ./../../__fixtures__/middlewares/jp.js
  Done

  Resources
  http://localhost:3110/posts
  http://localhost:3110/comments

  Home
  http://localhost:3110

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/b03bb4ac-6fc1-46b5-ad75-cb319d615cf3/db.json
  Loading ./../../__fixtures__/middlewares/postbody.js
  Done

  Resources
  http://localhost:3111/posts
  http://localhost:3111/comments

  Home
  http://localhost:3111

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/23610526-6b45-40bf-ab97-3253995b9631/db.json
  Done

  Resources
  http://localhost:3112/posts
  http://localhost:3112/comments

  Home
  http://localhost:3112

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/6f5ce01f-4315-43fd-8b7f-6ce32ce11070/db.json
  Done

  Resources
  http://localhost:3113/posts
  http://localhost:3113/comments

  Home
  http://localhost:3113

  Type s + enter at any time to create a snapshot of the database
  Saved snapshot to ../../../../../../../../tmp/snapshots/db-1661444394519.json


  \{^_^}/ hi!

  Loading /tmp/245bd803-18ef-4e0a-b116-9c8198a9924b/db.json
  Done

  Resources
  http://localhost:3114/posts
  http://localhost:3114/comments

  Home
  http://localhost:3114

  Type s + enter at any time to create a snapshot of the database
  Saved snapshot to ../../../../../../../../tmp/snapshots/db-1661444394898.json


  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3115/posts

  Home
  http://localhost:3115

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3116/posts

  Home
  http://localhost:3116

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/7c1da061-eae2-4afe-b945-d5dfa3667073/db.json
  Loading /tmp/fe72cf2d-5894-4e07-a385-5754ede10231/routes.json
  Done

  Resources
  http://localhost:3117/posts
  http://localhost:3117/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3117

  Type s + enter at any time to create a snapshot of the database
  Watching...

  /tmp/7c1da061-eae2-4afe-b945-d5dfa3667073/db.json has changed, reloading...

  Loading /tmp/7c1da061-eae2-4afe-b945-d5dfa3667073/db.json
  Loading /tmp/fe72cf2d-5894-4e07-a385-5754ede10231/routes.json
  Done

  Resources
  http://localhost:3117/foo

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3117


  \{^_^}/ hi!

  Loading /tmp/a2e6eafe-6d1b-4626-adce-19fbb11a75c2/db.json
  Loading /tmp/bddef6de-c5e6-4397-b42b-4f32054c9d16/routes.json
  Done

  Resources
  http://localhost:3118/posts
  http://localhost:3118/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3118

  Type s + enter at any time to create a snapshot of the database
  Watching...

  /tmp/bddef6de-c5e6-4397-b42b-4f32054c9d16/routes.json has changed, reloading...

  Loading /tmp/a2e6eafe-6d1b-4626-adce-19fbb11a75c2/db.json
  Loading /tmp/bddef6de-c5e6-4397-b42b-4f32054c9d16/routes.json
  Done

  Resources
  http://localhost:3118/posts
  http://localhost:3118/comments

  Other routes
  /api/* -> /$1

  Home
  http://localhost:3118


  \{^_^}/ hi!

  Loading /tmp/ddd24929-c55f-4e0f-b261-f6d486c5d608/db.json
  Oops, /tmp/ddd24929-c55f-4e0f-b261-f6d486c5d608/db.json doesn't seem to exist
  Creating /tmp/ddd24929-c55f-4e0f-b261-f6d486c5d608/db.json with some default data

  Done

  Resources
  http://localhost:3119/posts
  http://localhost:3119/comments
  http://localhost:3119/profile

  Home
  http://localhost:3119

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/4d34ead4-5044-498a-9b90-f906d1e06048/db-error.json
  Done
Error: Oops, found / character in database property 'a/b'.

/ aren't supported, if you want to tweak default routes, see
https://github.com/typicode/json-server/#add-custom-routes
    at validateKey (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/validate-data.js:8:11)
    at Array.forEach (<anonymous>)
    at module.exports (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/validate-data.js:14:22)
    at Object.module.exports [as router] (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/index.js:46:3)
    at createApp (/data/js-variants/multee/Clients/body-parser/json-server/lib/cli/run.js:52:29)
    at /data/js-variants/multee/Clients/body-parser/json-server/lib/cli/run.js:134:13

> json-server@0.17.0 lint
> eslint . --ignore-path .gitignore

npm uninstall

up to date, audited 1038 packages in 3s

78 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (4 moderate, 1 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> json-server@0.17.0 test
> npm run build && cross-env NODE_ENV=test jest && npm run lint


> json-server@0.17.0 build
> babel src -d lib

Successfully compiled 19 files with Babel (879ms).

  \{^_^}/ hi!

  Loading /tmp/63619a88-0fe1-4fcf-a9c9-d57f793873a2/db.json
  Done

  Resources
  http://localhost:3101/posts
  http://localhost:3101/comments

  Home
  http://localhost:3101

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/35097297-7e22-48c9-8771-4f47f57d452e/db.json
  Done

  Resources
  http://localhost:3102/posts
  http://localhost:3102/comments

  Home
  http://localhost:3102

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/63714c8c-0295-419b-9bbd-abc795686b8b/db.json
  Done

  Resources
  http://localhost:3103/posts
  http://localhost:3103/comments

  Home
  http://localhost:3103

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3104/posts

  Home
  http://localhost:3104

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading https://jsonplaceholder.typicode.com/db
  Done

  Resources
  http://localhost:3105/posts
  http://localhost:3105/comments
  http://localhost:3105/albums
  http://localhost:3105/photos
  http://localhost:3105/users
  http://localhost:3105/todos

  Home
  http://localhost:3105

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/ae279d08-9109-4671-9e08-9af7429256ec/db.json
  Loading /tmp/ca673483-938c-4e3c-b677-e82b60d13656/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3106/posts
  http://localhost:3106/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3106

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/bda878ef-ab04-4622-b351-e69cb657face/db.json
  Loading /tmp/ce19a7c8-e28c-4631-bd2e-fccc3dad2ed6/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3107/posts
  http://localhost:3107/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3107

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/9b7d9bf0-0ab7-4052-a887-b55551a73922/db.json
  Loading /tmp/6a9a5750-2f9d-4399-949c-b1ad3fd3379c/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3108/posts
  http://localhost:3108/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3108

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/6eebf559-5606-4030-812d-63ff345bce1a/db.json
  Loading /tmp/4562dffb-b644-4409-97ff-428a5f0e019d/routes.json
  Loading ./../../__fixtures__/middlewares/en.js
  Done

  Resources
  http://localhost:3109/posts
  http://localhost:3109/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3109

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/97b1bffc-6225-4c62-b9f3-a07a06dc2c92/db.json
  Loading ./../../__fixtures__/middlewares/en.js
  Loading ./../../__fixtures__/middlewares/jp.js
  Done

  Resources
  http://localhost:3110/posts
  http://localhost:3110/comments

  Home
  http://localhost:3110

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/0bf8018b-1834-4072-b6e2-68a7985ebfb8/db.json
  Loading ./../../__fixtures__/middlewares/postbody.js
  Done

  Resources
  http://localhost:3111/posts
  http://localhost:3111/comments

  Home
  http://localhost:3111

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/9f32c979-03b7-4675-8600-188432d10b99/db.json
  Done

  Resources
  http://localhost:3112/posts
  http://localhost:3112/comments

  Home
  http://localhost:3112

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/64893214-a3b8-4af6-be6d-c4d872b4048b/db.json
  Done

  Resources
  http://localhost:3113/posts
  http://localhost:3113/comments

  Home
  http://localhost:3113

  Type s + enter at any time to create a snapshot of the database
  Saved snapshot to ../../../../../../../../tmp/snapshots/db-1661444424974.json


  \{^_^}/ hi!

  Loading /tmp/2aeb9f8a-9e6a-4ff4-bf32-f5fb49b11224/db.json
  Done

  Resources
  http://localhost:3114/posts
  http://localhost:3114/comments

  Home
  http://localhost:3114

  Type s + enter at any time to create a snapshot of the database
  Saved snapshot to ../../../../../../../../tmp/snapshots/db-1661444425350.json


  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3115/posts

  Home
  http://localhost:3115

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading ../../__fixtures__/seed.js
  Done

  Resources
  http://localhost:3116/posts

  Home
  http://localhost:3116

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/a7435826-3c8a-430b-b73d-d9c0540882e5/db.json
  Loading /tmp/10e98be8-4177-4393-8303-932b67deb906/routes.json
  Done

  Resources
  http://localhost:3117/posts
  http://localhost:3117/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3117

  Type s + enter at any time to create a snapshot of the database
  Watching...

  /tmp/a7435826-3c8a-430b-b73d-d9c0540882e5/db.json has changed, reloading...

  Loading /tmp/a7435826-3c8a-430b-b73d-d9c0540882e5/db.json
  Loading /tmp/10e98be8-4177-4393-8303-932b67deb906/routes.json
  Done

  Resources
  http://localhost:3117/foo

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3117


  \{^_^}/ hi!

  Loading /tmp/8802bbc4-002f-4919-a065-f0c5266d7c38/db.json
  Loading /tmp/eb5d1634-26e7-4401-92d8-463c9431bccc/routes.json
  Done

  Resources
  http://localhost:3118/posts
  http://localhost:3118/comments

  Other routes
  /blog/* -> /$1

  Home
  http://localhost:3118

  Type s + enter at any time to create a snapshot of the database
  Watching...

  /tmp/eb5d1634-26e7-4401-92d8-463c9431bccc/routes.json has changed, reloading...

  Loading /tmp/8802bbc4-002f-4919-a065-f0c5266d7c38/db.json
  Loading /tmp/eb5d1634-26e7-4401-92d8-463c9431bccc/routes.json
  Done

  Resources
  http://localhost:3118/posts
  http://localhost:3118/comments

  Other routes
  /api/* -> /$1

  Home
  http://localhost:3118


  \{^_^}/ hi!

  Loading /tmp/67afc555-d3cf-464b-a7af-a3802ea39035/db.json
  Oops, /tmp/67afc555-d3cf-464b-a7af-a3802ea39035/db.json doesn't seem to exist
  Creating /tmp/67afc555-d3cf-464b-a7af-a3802ea39035/db.json with some default data

  Done

  Resources
  http://localhost:3119/posts
  http://localhost:3119/comments
  http://localhost:3119/profile

  Home
  http://localhost:3119

  Type s + enter at any time to create a snapshot of the database

  \{^_^}/ hi!

  Loading /tmp/0a471487-5b9a-446e-b04b-c34ed59bf5e7/db-error.json
  Done
Error: Oops, found / character in database property 'a/b'.

/ aren't supported, if you want to tweak default routes, see
https://github.com/typicode/json-server/#add-custom-routes
    at validateKey (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/validate-data.js:8:11)
    at Array.forEach (<anonymous>)
    at module.exports (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/validate-data.js:14:22)
    at Object.module.exports [as router] (/data/js-variants/multee/Clients/body-parser/json-server/lib/server/router/index.js:46:3)
    at createApp (/data/js-variants/multee/Clients/body-parser/json-server/lib/cli/run.js:52:29)
    at /data/js-variants/multee/Clients/body-parser/json-server/lib/cli/run.js:134:13

> json-server@0.17.0 lint
> eslint . --ignore-path .gitignore

----------------------run test done----------------------
----------------------client loopback of body-parser----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> loopback@3.28.0 test
> nyc grunt mocha-and-karma

Running "eslint:gruntfile" (eslint) task

Running "eslint:lib" (eslint) task

Running "eslint:common" (eslint) task

Running "eslint:server" (eslint) task

Running "eslint:test" (eslint) task

Running "mochaTest:unit" (mochaTest) task


  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․,․․․․․․
  ․․․․․․․․․․,,․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,,․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․

  1008 passing (21s)
  14 pending


Running "karma:unit-once" (karma) task
Deprecated private createPreprocessor() API
[32m25 08 2022 16:21:22.189:INFO [framework.browserify]: [39mbundle built
[32m25 08 2022 16:21:22.225:INFO [karma-server]: [39mKarma v4.4.1 server started at http://0.0.0.0:9876/
[32m25 08 2022 16:21:22.225:INFO [launcher]: [39mLaunching browsers ChromeDocker with concurrency unlimited
[32m25 08 2022 16:21:22.229:INFO [launcher]: [39mStarting browser ChromeHeadless
[91m25 08 2022 16:21:22.230:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
Warning: Task "karma:unit-once" failed. Use --force to continue.

Aborted due to warnings.
------------------------------|----------|----------|----------|----------|-------------------|
File                          |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
------------------------------|----------|----------|----------|----------|-------------------|
All files                     |     88.6 |    80.74 |    88.01 |    90.31 |                   |
 loopback                     |      100 |      100 |      100 |      100 |                   |
  index.js                    |      100 |      100 |      100 |      100 |                   |
 loopback/common/models       |    89.18 |    83.03 |    91.67 |    91.76 |                   |
  access-token.js             |     84.4 |    81.25 |    86.67 |    85.05 |... 50,251,276,277 |
  acl.js                      |     88.5 |    84.39 |    83.87 |    90.55 |... 74,575,576,578 |
  application.js              |    88.57 |    71.88 |      100 |    89.71 |... 54,155,182,183 |
  change.js                   |    83.94 |    77.08 |    97.14 |    89.77 |... 62,563,564,815 |
  checkpoint.js               |     91.3 |       50 |      100 |      100 |             59,64 |
  email.js                    |    66.67 |      100 |    33.33 |    66.67 |             49,56 |
  key-value-model.js          |    77.42 |      100 |       30 |    76.67 |... 84,106,154,224 |
  role-mapping.js             |     90.7 |    81.25 |       75 |     90.7 |     50,51,100,101 |
  role.js                     |    90.37 |    79.67 |    94.55 |    92.05 |... 03,627,640,641 |
  scope.js                    |     87.5 |       50 |      100 |    93.33 |                47 |
  user.js                     |    93.63 |    88.56 |      100 |    95.76 |... 1260,1391,1433 |
 loopback/lib                 |     88.3 |    78.33 |     86.8 |    89.34 |                   |
  access-context.js           |    78.69 |    72.52 |    94.74 |    78.53 |... 15,416,417,418 |
  application.js              |    88.79 |    76.62 |     87.1 |    89.33 |... 31,534,544,644 |
  builtin-models.js           |      100 |      100 |      100 |      100 |                   |
  configure-shared-methods.js |    97.14 |    92.59 |      100 |    97.14 |                36 |
  current-context.js          |       70 |      100 |       25 |       70 |          15,23,31 |
  globalize.js                |      100 |      100 |      100 |      100 |                   |
  loopback.js                 |    96.43 |       84 |    90.48 |    97.56 |             61,64 |
  model.js                    |    89.73 |    79.32 |      100 |    90.66 |... 1007,1047,1048 |
  persisted-model.js          |    84.58 |    70.36 |    78.13 |    86.78 |... 1931,1932,1955 |
  registry.js                 |     95.3 |    94.23 |      100 |    95.14 |... 68,270,385,386 |
  runtime.js                  |      100 |      100 |      100 |      100 |                   |
  server-app.js               |    95.45 |    89.55 |    93.33 |    96.03 |   94,95,96,98,193 |
  utils.js                    |    92.73 |    84.38 |    91.67 |    92.59 |     29,67,110,137 |
 loopback/lib/connectors      |    81.18 |     69.7 |       50 |    81.18 |                   |
  base-connector.js           |    64.29 |      100 |        0 |    64.29 |    31,32,34,48,49 |
  mail.js                     |    82.26 |     69.7 |    77.78 |    82.26 |... 61,169,171,172 |
  memory.js                   |      100 |      100 |        0 |      100 |                   |
 loopback/server/middleware   |    89.25 |    89.47 |    81.25 |       90 |                   |
  context.js                  |    66.67 |      100 |        0 |    66.67 |                10 |
  error-handler.js            |      100 |      100 |      100 |      100 |                   |
  favicon.js                  |       60 |        0 |        0 |       60 |             15,16 |
  rest.js                     |    95.45 |    83.33 |      100 |    95.45 |                45 |
  static.js                   |      100 |      100 |      100 |      100 |                   |
  status.js                   |      100 |      100 |      100 |      100 |                   |
  token.js                    |    94.12 |    95.35 |      100 |    95.83 |           104,105 |
  url-not-found.js            |       40 |      100 |       50 |       40 |          21,22,23 |
------------------------------|----------|----------|----------|----------|-------------------|
npm uninstall

up to date, audited 1097 packages in 5s

67 packages are looking for funding
  run `npm fund` for details

22 vulnerabilities (5 moderate, 12 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> loopback@3.28.0 test
> nyc grunt mocha-and-karma

Running "eslint:gruntfile" (eslint) task

Running "eslint:lib" (eslint) task

Running "eslint:common" (eslint) task

Running "eslint:server" (eslint) task

Running "eslint:test" (eslint) task

Running "mochaTest:unit" (mochaTest) task


  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․,․․․․․․
  ․․․․․․․․․․,,․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,,․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․

  1008 passing (21s)
  14 pending


Running "karma:unit-once" (karma) task
Deprecated private createPreprocessor() API
[32m25 08 2022 16:22:05.511:INFO [framework.browserify]: [39mbundle built
[32m25 08 2022 16:22:05.548:INFO [karma-server]: [39mKarma v4.4.1 server started at http://0.0.0.0:9876/
[32m25 08 2022 16:22:05.548:INFO [launcher]: [39mLaunching browsers ChromeDocker with concurrency unlimited
[32m25 08 2022 16:22:05.552:INFO [launcher]: [39mStarting browser ChromeHeadless
[91m25 08 2022 16:22:05.553:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
Warning: Task "karma:unit-once" failed. Use --force to continue.

Aborted due to warnings.
------------------------------|----------|----------|----------|----------|-------------------|
File                          |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
------------------------------|----------|----------|----------|----------|-------------------|
All files                     |     88.6 |    80.74 |    88.01 |    90.31 |                   |
 loopback                     |      100 |      100 |      100 |      100 |                   |
  index.js                    |      100 |      100 |      100 |      100 |                   |
 loopback/common/models       |    89.18 |    83.03 |    91.67 |    91.76 |                   |
  access-token.js             |     84.4 |    81.25 |    86.67 |    85.05 |... 50,251,276,277 |
  acl.js                      |     88.5 |    84.39 |    83.87 |    90.55 |... 74,575,576,578 |
  application.js              |    88.57 |    71.88 |      100 |    89.71 |... 54,155,182,183 |
  change.js                   |    83.94 |    77.08 |    97.14 |    89.77 |... 62,563,564,815 |
  checkpoint.js               |     91.3 |       50 |      100 |      100 |             59,64 |
  email.js                    |    66.67 |      100 |    33.33 |    66.67 |             49,56 |
  key-value-model.js          |    77.42 |      100 |       30 |    76.67 |... 84,106,154,224 |
  role-mapping.js             |     90.7 |    81.25 |       75 |     90.7 |     50,51,100,101 |
  role.js                     |    90.37 |    79.67 |    94.55 |    92.05 |... 03,627,640,641 |
  scope.js                    |     87.5 |       50 |      100 |    93.33 |                47 |
  user.js                     |    93.63 |    88.56 |      100 |    95.76 |... 1260,1391,1433 |
 loopback/lib                 |     88.3 |    78.33 |     86.8 |    89.34 |                   |
  access-context.js           |    78.69 |    72.52 |    94.74 |    78.53 |... 15,416,417,418 |
  application.js              |    88.79 |    76.62 |     87.1 |    89.33 |... 31,534,544,644 |
  builtin-models.js           |      100 |      100 |      100 |      100 |                   |
  configure-shared-methods.js |    97.14 |    92.59 |      100 |    97.14 |                36 |
  current-context.js          |       70 |      100 |       25 |       70 |          15,23,31 |
  globalize.js                |      100 |      100 |      100 |      100 |                   |
  loopback.js                 |    96.43 |       84 |    90.48 |    97.56 |             61,64 |
  model.js                    |    89.73 |    79.32 |      100 |    90.66 |... 1007,1047,1048 |
  persisted-model.js          |    84.58 |    70.36 |    78.13 |    86.78 |... 1931,1932,1955 |
  registry.js                 |     95.3 |    94.23 |      100 |    95.14 |... 68,270,385,386 |
  runtime.js                  |      100 |      100 |      100 |      100 |                   |
  server-app.js               |    95.45 |    89.55 |    93.33 |    96.03 |   94,95,96,98,193 |
  utils.js                    |    92.73 |    84.38 |    91.67 |    92.59 |     29,67,110,137 |
 loopback/lib/connectors      |    81.18 |     69.7 |       50 |    81.18 |                   |
  base-connector.js           |    64.29 |      100 |        0 |    64.29 |    31,32,34,48,49 |
  mail.js                     |    82.26 |     69.7 |    77.78 |    82.26 |... 61,169,171,172 |
  memory.js                   |      100 |      100 |        0 |      100 |                   |
 loopback/server/middleware   |    89.25 |    89.47 |    81.25 |       90 |                   |
  context.js                  |    66.67 |      100 |        0 |    66.67 |                10 |
  error-handler.js            |      100 |      100 |      100 |      100 |                   |
  favicon.js                  |       60 |        0 |        0 |       60 |             15,16 |
  rest.js                     |    95.45 |    83.33 |      100 |    95.45 |                45 |
  static.js                   |      100 |      100 |      100 |      100 |                   |
  status.js                   |      100 |      100 |      100 |      100 |                   |
  token.js                    |    94.12 |    95.35 |      100 |    95.83 |           104,105 |
  url-not-found.js            |       40 |      100 |       50 |       40 |          21,22,23 |
------------------------------|----------|----------|----------|----------|-------------------|
----------------------run test done----------------------
----------------------client routing-controllers of body-parser----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.questionErrorMiddleware (test/fakes/global-options/FakeService.ts:25:13)

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

npm uninstall

up to date, audited 1000 packages in 5s

49 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (9 moderate, 14 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.questionErrorMiddleware (test/fakes/global-options/FakeService.ts:25:13)

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

----------------------run test done----------------------
----------------------client skipper of body-parser----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> skipper@0.9.2 test
> npm run lint && npm run custom-tests


> skipper@0.9.2 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.2 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (35s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m

  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m

  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m

  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m

    [32m  ✓[0m[90m should be an object [0m

    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m

    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m

      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m

      [32m  ✓[0m[90m should be a string [0m

      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m

      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m

      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m

      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m

      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m

      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m

      [32m  ✓[0m[90m should be a string [0m

      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m

  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m

  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m

  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m

  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m

  [32m  ✓[0m[90m binds a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m

  [32m  ✓[0m[90m binds a file uploader action [0m

  [32m  ✓[0m[90m sends an attachment on an unused field [0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1424ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1313ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(894ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(306ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1667ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1238ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1554ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1527ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(76ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1423ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1562ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(287ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1389ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(914ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(457ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(355ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(398ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1426ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1489ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1352ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(971ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(204ms)[0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m

  [32m  ✓[0m[90m bind a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m

  [32m  ✓[0m[90m bind a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (27s)[0m
[36m [0m[36m 2 pending[0m

npm uninstall

up to date, audited 430 packages in 5s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 12 moderate, 20 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> skipper@0.9.2 test
> npm run lint && npm run custom-tests


> skipper@0.9.2 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.2 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (30s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m

  [32m  ✓[0m[90m should not crash the server [0m[31m(3021ms)[0m

[0m  when some big files start coming in, this adapter[0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m

  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m

  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m

  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m

    [32m  ✓[0m[90m should be an object [0m

    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m

    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m

      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m

      [32m  ✓[0m[90m should be a string [0m

      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m

      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m

      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m

      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m

      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m

      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m

      [32m  ✓[0m[90m should be a string [0m

      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m

  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m

  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m

  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m

  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m

  [32m  ✓[0m[90m binds a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m

  [32m  ✓[0m[90m binds a file uploader action [0m

  [32m  ✓[0m[90m sends an attachment on an unused field [0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1001ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(326ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1583ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1195ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(879ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(439ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1583ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(650ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1421ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(929ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1651ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(462ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(56ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(840ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(720ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1198ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1526ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1282ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(631ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(100ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(247ms)[0m

  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(965ms)[0m

  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m

  [32m  ✓[0m[90m bind a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m

  [32m  ✓[0m[90m bind a file uploader action [0m

  [32m  ✓[0m[90m sends a multi-part file upload request [0m

  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (25s)[0m
[36m [0m[36m 2 pending[0m

----------------------run test done----------------------
compression
subdir: hexo-server koop-core kraken-js molstar router
----------------------client hexo-server of compression----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> hexo-server@3.0.0 test
> mocha test/index.js

npm uninstall

up to date, audited 467 packages in 1s

71 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> hexo-server@3.0.0 test
> mocha test/index.js

----------------------run test done----------------------
----------------------client koop-core of compression----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> koop@5.0.0 test
> standard && mocha test --recursive -t 5000

WARNING: "/MapServer" routes will be registered, but only for specialized 404 handling in FeatureServer.
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}


  Datsets API
    Cache CRUD
      ✓ should insert data on PUT (50ms)
      ✓ should read data on GET (38ms)
      ✓ should delete data on DELETE
    Metadata CRUD
      ✓ should insert metadata on PUT
      ✓ should read metadata on GET
      ✓ should delete metadata on DELETE
    FeatureServer
      ✓ should get features at /FeatureServer/0/query (74ms)

  Index tests
    Koop instantiation
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should instantiate Koop with config
    Provider registration
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register provider and add output and provider routes to router stack
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register provider-routes before plugin-routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST


"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    

{"level":"info","message":"registered provider:"}
      ✓ should register plugin-routes before provider-routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/path-to-route/fake/:id          GET    


"Geoservices" output routes for the "test-provider" provider                 Methods  
---------------------------------------------------------------------------  ---------
/path-to-route/test-provider/rest/info                                       GET, POST
/path-to-route/test-provider/tokens/:method                                  GET, POST
/path-to-route/test-provider/tokens                                          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer                 GET, POST
/path-to-route/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/path-to-route/test-provider/:id/FeatureServer/layers                        GET, POST
/path-to-route/test-provider/:id/FeatureServer/:layer                        GET, POST
/path-to-route/test-provider/:id/FeatureServer                               GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer*                GET, POST
/path-to-route/test-provider/:id/FeatureServer*                              GET, POST
/path-to-route/test-provider/rest/services/:id/MapServer*                    GET, POST
/path-to-route/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully a provider with a routePrefix
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach cache and options object to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach optional custom cache to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject cache option missing an upsert method
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject cache option missing a retrieve method
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject routePrefix option that is not a string
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach optional "before" and "after" function to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject optional "before" function that does not have correct arity
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject optional "after" function that does not have correct arity
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"options-name" provider routes  Methods
------------------------------  -------
/fake/:id                       GET    


"Geoservices" output routes for the "options-name" provider   Methods  
------------------------------------------------------------  ---------
/options-name/rest/info                                       GET, POST
/options-name/tokens/:method                                  GET, POST
/options-name/tokens                                          GET, POST
/options-name/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/options-name/rest/services/:id/FeatureServer/layers          GET, POST
/options-name/rest/services/:id/FeatureServer/:layer          GET, POST
/options-name/rest/services/:id/FeatureServer                 GET, POST
/options-name/:id/FeatureServer/:layer/:method                GET, POST
/options-name/:id/FeatureServer/layers                        GET, POST
/options-name/:id/FeatureServer/:layer                        GET, POST
/options-name/:id/FeatureServer                               GET, POST
/options-name/rest/services/:id/FeatureServer*                GET, POST
/options-name/:id/FeatureServer*                              GET, POST
/options-name/rest/services/:id/MapServer*                    GET, POST
/options-name/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should successfully use options "name" in route
    can register a provider and apply a route prefix to all routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/api/test/fake/:id               GET    


"Geoservices" output routes for the "test-provider" provider            Methods  
----------------------------------------------------------------------  ---------
/api/test/test-provider/rest/info                                       GET, POST
/api/test/test-provider/tokens/:method                                  GET, POST
/api/test/test-provider/tokens                                          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer                 GET, POST
/api/test/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/api/test/test-provider/:id/FeatureServer/layers                        GET, POST
/api/test/test-provider/:id/FeatureServer/:layer                        GET, POST
/api/test/test-provider/:id/FeatureServer                               GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer*                GET, POST
/api/test/test-provider/:id/FeatureServer*                              GET, POST
/api/test/test-provider/rest/services/:id/MapServer*                    GET, POST
/api/test/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should not return 404 for prefixed custom route
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/api/test/fake/:id               GET    


"Geoservices" output routes for the "test-provider" provider            Methods  
----------------------------------------------------------------------  ---------
/api/test/test-provider/rest/info                                       GET, POST
/api/test/test-provider/tokens/:method                                  GET, POST
/api/test/test-provider/tokens                                          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer                 GET, POST
/api/test/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/api/test/test-provider/:id/FeatureServer/layers                        GET, POST
/api/test/test-provider/:id/FeatureServer/:layer                        GET, POST
/api/test/test-provider/:id/FeatureServer                               GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer*                GET, POST
/api/test/test-provider/:id/FeatureServer*                              GET, POST
/api/test/test-provider/rest/services/:id/MapServer*                    GET, POST
/api/test/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should not return 404 for prefixed plugin route

  Tests for registering auth plugin
    can register an auth plugin
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully
    can register an auth plugin and apply methods to a provider
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully
    can register an auth plugin and selectively apply methods to a provider
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}





"Geoservices" output routes for the "test-provider-ii" provider   Methods  
----------------------------------------------------------------  ---------
/test-provider-ii/rest/info                                       GET, POST
/test-provider-ii/tokens/:method                                  GET, POST
/test-provider-ii/tokens                                          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer                 GET, POST
/test-provider-ii/:id/FeatureServer/:layer/:method                GET, POST
/test-provider-ii/:id/FeatureServer/layers                        GET, POST
/test-provider-ii/:id/FeatureServer/:layer                        GET, POST
/test-provider-ii/:id/FeatureServer                               GET, POST
/test-provider-ii/rest/services/:id/FeatureServer*                GET, POST
/test-provider-ii/:id/FeatureServer*                              GET, POST
/test-provider-ii/rest/services/:id/MapServer*                    GET, POST
/test-provider-ii/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully

  Tests for registering plugins
    can register a plugin
{"level":"info","message":"registered plugin:"}
      ✓ should register successfully
{"level":"info","message":"registered plugin:"}
      ✓ should override the plugin name
{"level":"info","message":"registered plugin:"}
      ✓ should honor the legacy plugin_name property
{"level":"info","message":"registered plugin:"}
      ✓ should use the pluginName property rather than the legacy plugin_name property
{"level":"info","message":"registered plugin:"}
      ✓ should include plugin dependencies

  Middleware tests
    paramTrim function
      ✓ should trim leading and trail white space from body params
      ✓ should leave non-string type intact
    paramParse function
      ✓ should convert a JSON (escaped) string parameter to a JSON object
      ✓ should convert a JSON string parameter to a JSON object
    paramCoerce function
      ✓ should convert boolean strings to booleans
    copyBodyToQuery middleware
      ✓ should combine query and body, body overrides query, except for token

  Tests for create-controller
    ✓ should extend a controller authored with function syntax
    ✓ should extend a controller authored with class syntax
    ✓ should produce a controller when no base controller is provided
    ✓ should use a default namespace when unnamed constructor functions are used

  Tests for create-model
    model pull method
      ✓ should work in callback form, no upsert to cache
      ✓ should work in callback form, should upsert to cache
    createKey
      ✓ should create cache-key as provider name
      ✓ should create cache-key as provider name and concenated url params
      ✓ should create cache-key from Model defined createKey function
    auth methods
      ✓ should attach auth methods when auth plugin is registered with Koop
    transformation functions
      ✓ before function should modify request object
      ✓ after function should modify request and data object
    fetch layer metadata
      ✓ should throw an error if the getLayer() function is not implemented
      ✓ should try to fetch from cache
      ✓ should call the getLayer() function if cache misses
      ✓ should use the provided createKey function
    fetch catalog metadata
      ✓ should throw an error if the getCatalog() function is not implemented
      ✓ should try to fetch from cache
      ✓ should call the getCatalog() function is cache misses
      ✓ should use the provided createKey function
    model pullStream method
      ✓ should resolve with result of getStream
      ✓ should call "before" before getStream
      ✓ should reject if the getStream() function is not implemented

  Tests for namespacedRoutePath
    ✓ create route with :host and :id parameter
    ✓ create route with :host parameter and without :id parameter
    ✓ create route without :host parameter
    ✓ create route without :host and :id parameter
    ✓ create route with templated $namespace$ substring
    ✓ create route with templated $namespace$ and $providerParams$ substrings
    ✓ create route without path construction
    ✓ create route with prefix, :host, :id parameters

  Tests for routeJoiner
    ✓ create route with simple fragments
    ✓ create route with complex fragments
    ✓ create route with empty fragments
    ✓ create route with fragments that are "/" 

  Tests for Provider

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"MockOutput" output routes for the "test-provider" provider  Methods  
-----------------------------------------------------------  ---------
/test-provider/:host/:id/koop-output/:layer                  GET, POST

    ✓ should create instance of ProviderRegistration

  Tests for ProviderOutputRoute
    ✓ should create instance of ProviderOutputRoute

  Tests for ProviderRoute
    ✓ should create instance of ProviderRoute


  75 passing (382ms)

npm uninstall

up to date, audited 826 packages in 4s

63 packages are looking for funding
  run `npm fund` for details

17 vulnerabilities (6 moderate, 9 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> koop@5.0.0 test
> standard && mocha test --recursive -t 5000

WARNING: "/MapServer" routes will be registered, but only for specialized 404 handling in FeatureServer.
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}


  Datsets API
    Cache CRUD
      ✓ should insert data on PUT (51ms)
      ✓ should read data on GET
      ✓ should delete data on DELETE
    Metadata CRUD
      ✓ should insert metadata on PUT
      ✓ should read metadata on GET
      ✓ should delete metadata on DELETE
    FeatureServer
      ✓ should get features at /FeatureServer/0/query (75ms)

  Index tests
    Koop instantiation
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should instantiate Koop with config
    Provider registration
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register provider and add output and provider routes to router stack
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register provider-routes before plugin-routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST


"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    

{"level":"info","message":"registered provider:"}
      ✓ should register plugin-routes before provider-routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/path-to-route/fake/:id          GET    


"Geoservices" output routes for the "test-provider" provider                 Methods  
---------------------------------------------------------------------------  ---------
/path-to-route/test-provider/rest/info                                       GET, POST
/path-to-route/test-provider/tokens/:method                                  GET, POST
/path-to-route/test-provider/tokens                                          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer                 GET, POST
/path-to-route/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/path-to-route/test-provider/:id/FeatureServer/layers                        GET, POST
/path-to-route/test-provider/:id/FeatureServer/:layer                        GET, POST
/path-to-route/test-provider/:id/FeatureServer                               GET, POST
/path-to-route/test-provider/rest/services/:id/FeatureServer*                GET, POST
/path-to-route/test-provider/:id/FeatureServer*                              GET, POST
/path-to-route/test-provider/rest/services/:id/MapServer*                    GET, POST
/path-to-route/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully a provider with a routePrefix
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach cache and options object to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach optional custom cache to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject cache option missing an upsert method
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject cache option missing a retrieve method
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject routePrefix option that is not a string
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully and attach optional "before" and "after" function to model
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject optional "before" function that does not have correct arity
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should reject optional "after" function that does not have correct arity
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"options-name" provider routes  Methods
------------------------------  -------
/fake/:id                       GET    


"Geoservices" output routes for the "options-name" provider   Methods  
------------------------------------------------------------  ---------
/options-name/rest/info                                       GET, POST
/options-name/tokens/:method                                  GET, POST
/options-name/tokens                                          GET, POST
/options-name/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/options-name/rest/services/:id/FeatureServer/layers          GET, POST
/options-name/rest/services/:id/FeatureServer/:layer          GET, POST
/options-name/rest/services/:id/FeatureServer                 GET, POST
/options-name/:id/FeatureServer/:layer/:method                GET, POST
/options-name/:id/FeatureServer/layers                        GET, POST
/options-name/:id/FeatureServer/:layer                        GET, POST
/options-name/:id/FeatureServer                               GET, POST
/options-name/rest/services/:id/FeatureServer*                GET, POST
/options-name/:id/FeatureServer*                              GET, POST
/options-name/rest/services/:id/MapServer*                    GET, POST
/options-name/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should successfully use options "name" in route
    can register a provider and apply a route prefix to all routes
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/api/test/fake/:id               GET    


"Geoservices" output routes for the "test-provider" provider            Methods  
----------------------------------------------------------------------  ---------
/api/test/test-provider/rest/info                                       GET, POST
/api/test/test-provider/tokens/:method                                  GET, POST
/api/test/test-provider/tokens                                          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer                 GET, POST
/api/test/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/api/test/test-provider/:id/FeatureServer/layers                        GET, POST
/api/test/test-provider/:id/FeatureServer/:layer                        GET, POST
/api/test/test-provider/:id/FeatureServer                               GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer*                GET, POST
/api/test/test-provider/:id/FeatureServer*                              GET, POST
/api/test/test-provider/rest/services/:id/MapServer*                    GET, POST
/api/test/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should not return 404 for prefixed custom route
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/api/test/fake/:id               GET    


"Geoservices" output routes for the "test-provider" provider            Methods  
----------------------------------------------------------------------  ---------
/api/test/test-provider/rest/info                                       GET, POST
/api/test/test-provider/tokens/:method                                  GET, POST
/api/test/test-provider/tokens                                          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer                 GET, POST
/api/test/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/api/test/test-provider/:id/FeatureServer/layers                        GET, POST
/api/test/test-provider/:id/FeatureServer/:layer                        GET, POST
/api/test/test-provider/:id/FeatureServer                               GET, POST
/api/test/test-provider/rest/services/:id/FeatureServer*                GET, POST
/api/test/test-provider/:id/FeatureServer*                              GET, POST
/api/test/test-provider/rest/services/:id/MapServer*                    GET, POST
/api/test/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should not return 404 for prefixed plugin route

  Tests for registering auth plugin
    can register an auth plugin
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully
    can register an auth plugin and apply methods to a provider
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully
    can register an auth plugin and selectively apply methods to a provider
{"level":"info","message":"registered output:"}
{"level":"info","message":"registered filesystem:"}

"datasets" provider routes  Methods
--------------------------  -------
/datasets/:id               GET    
/datasets/:id               PUT    
/datasets/:id               DELETE 
/datasets/:id/metadata      GET    
/datasets/:id/metadata      PUT    
/datasets/:id/metadata      DELETE 


"Geoservices" output routes for the "datasets" provider   Methods  
--------------------------------------------------------  ---------
/datasets/rest/info                                       GET, POST
/datasets/tokens/:method                                  GET, POST
/datasets/tokens                                          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/datasets/rest/services/:id/FeatureServer/layers          GET, POST
/datasets/rest/services/:id/FeatureServer/:layer          GET, POST
/datasets/rest/services/:id/FeatureServer                 GET, POST
/datasets/:id/FeatureServer/:layer/:method                GET, POST
/datasets/:id/FeatureServer/layers                        GET, POST
/datasets/:id/FeatureServer/:layer                        GET, POST
/datasets/:id/FeatureServer                               GET, POST
/datasets/rest/services/:id/FeatureServer*                GET, POST
/datasets/:id/FeatureServer*                              GET, POST
/datasets/rest/services/:id/MapServer*                    GET, POST
/datasets/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}





"Geoservices" output routes for the "test-provider-ii" provider   Methods  
----------------------------------------------------------------  ---------
/test-provider-ii/rest/info                                       GET, POST
/test-provider-ii/tokens/:method                                  GET, POST
/test-provider-ii/tokens                                          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider-ii/rest/services/:id/FeatureServer                 GET, POST
/test-provider-ii/:id/FeatureServer/:layer/:method                GET, POST
/test-provider-ii/:id/FeatureServer/layers                        GET, POST
/test-provider-ii/:id/FeatureServer/:layer                        GET, POST
/test-provider-ii/:id/FeatureServer                               GET, POST
/test-provider-ii/rest/services/:id/FeatureServer*                GET, POST
/test-provider-ii/:id/FeatureServer*                              GET, POST
/test-provider-ii/rest/services/:id/MapServer*                    GET, POST
/test-provider-ii/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"Geoservices" output routes for the "test-provider" provider   Methods  
-------------------------------------------------------------  ---------
/test-provider/rest/info                                       GET, POST
/test-provider/tokens/:method                                  GET, POST
/test-provider/tokens                                          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer/:method  GET, POST
/test-provider/rest/services/:id/FeatureServer/layers          GET, POST
/test-provider/rest/services/:id/FeatureServer/:layer          GET, POST
/test-provider/rest/services/:id/FeatureServer                 GET, POST
/test-provider/:id/FeatureServer/:layer/:method                GET, POST
/test-provider/:id/FeatureServer/layers                        GET, POST
/test-provider/:id/FeatureServer/:layer                        GET, POST
/test-provider/:id/FeatureServer                               GET, POST
/test-provider/rest/services/:id/FeatureServer*                GET, POST
/test-provider/:id/FeatureServer*                              GET, POST
/test-provider/rest/services/:id/MapServer*                    GET, POST
/test-provider/:id/MapServer*                                  GET, POST

{"level":"info","message":"registered provider:"}
      ✓ should register successfully

  Tests for registering plugins
    can register a plugin
{"level":"info","message":"registered plugin:"}
      ✓ should register successfully
{"level":"info","message":"registered plugin:"}
      ✓ should override the plugin name
{"level":"info","message":"registered plugin:"}
      ✓ should honor the legacy plugin_name property
{"level":"info","message":"registered plugin:"}
      ✓ should use the pluginName property rather than the legacy plugin_name property
{"level":"info","message":"registered plugin:"}
      ✓ should include plugin dependencies

  Middleware tests
    paramTrim function
      ✓ should trim leading and trail white space from body params
      ✓ should leave non-string type intact
    paramParse function
      ✓ should convert a JSON (escaped) string parameter to a JSON object
      ✓ should convert a JSON string parameter to a JSON object
    paramCoerce function
      ✓ should convert boolean strings to booleans
    copyBodyToQuery middleware
      ✓ should combine query and body, body overrides query, except for token

  Tests for create-controller
    ✓ should extend a controller authored with function syntax
    ✓ should extend a controller authored with class syntax
    ✓ should produce a controller when no base controller is provided
    ✓ should use a default namespace when unnamed constructor functions are used

  Tests for create-model
    model pull method
      ✓ should work in callback form, no upsert to cache
      ✓ should work in callback form, should upsert to cache
    createKey
      ✓ should create cache-key as provider name
      ✓ should create cache-key as provider name and concenated url params
      ✓ should create cache-key from Model defined createKey function
    auth methods
      ✓ should attach auth methods when auth plugin is registered with Koop
    transformation functions
      ✓ before function should modify request object
      ✓ after function should modify request and data object
    fetch layer metadata
      ✓ should throw an error if the getLayer() function is not implemented
      ✓ should try to fetch from cache
      ✓ should call the getLayer() function if cache misses
      ✓ should use the provided createKey function
    fetch catalog metadata
      ✓ should throw an error if the getCatalog() function is not implemented
      ✓ should try to fetch from cache
      ✓ should call the getCatalog() function is cache misses
      ✓ should use the provided createKey function
    model pullStream method
      ✓ should resolve with result of getStream
      ✓ should call "before" before getStream
      ✓ should reject if the getStream() function is not implemented

  Tests for namespacedRoutePath
    ✓ create route with :host and :id parameter
    ✓ create route with :host parameter and without :id parameter
    ✓ create route without :host parameter
    ✓ create route without :host and :id parameter
    ✓ create route with templated $namespace$ substring
    ✓ create route with templated $namespace$ and $providerParams$ substrings
    ✓ create route without path construction
    ✓ create route with prefix, :host, :id parameters

  Tests for routeJoiner
    ✓ create route with simple fragments
    ✓ create route with complex fragments
    ✓ create route with empty fragments
    ✓ create route with fragments that are "/" 

  Tests for Provider

"test-provider" provider routes  Methods
-------------------------------  -------
/fake/:id                        GET    


"MockOutput" output routes for the "test-provider" provider  Methods  
-----------------------------------------------------------  ---------
/test-provider/:host/:id/koop-output/:layer                  GET, POST

    ✓ should create instance of ProviderRegistration

  Tests for ProviderOutputRoute
    ✓ should create instance of ProviderOutputRoute

  Tests for ProviderRoute
    ✓ should create instance of ProviderRoute


  75 passing (381ms)

----------------------run test done----------------------
----------------------client kraken-js of compression----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> kraken-js@2.4.0 test
> tape test/*.js

TAP version 13
# composition
# plugin
ok 1 should not be equal
ok 2 should not be equal
ok 3 Expected 'x-powered-by' to be equal.
ok 4 Expected 'etag' to be equal.
ok 5 Expected 'env' to be equal.
ok 6 Expected 'query parser' to be equal.
ok 7 Expected 'subdomain offset' to be equal.
ok 8 Expected 'trust proxy' to be equal.
ok 9 Expected 'jsonp callback name' to be equal.
ok 10 Expected 'case sensitive routing' to be equal.
ok 11 Expected 'strict routing' to be equal.
ok 12 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 13 null
# plugin with mountpath
ok 14 should not be equal
ok 15 should not be equal
ok 16 Expected 'x-powered-by' to be equal.
ok 17 Expected 'etag' to be equal.
ok 18 Expected 'env' to be equal.
ok 19 Expected 'query parser' to be equal.
ok 20 Expected 'subdomain offset' to be equal.
ok 21 Expected 'trust proxy' to be equal.
ok 22 Expected 'jsonp callback name' to be equal.
ok 23 Expected 'case sensitive routing' to be equal.
ok 24 Expected 'strict routing' to be equal.
ok 25 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 26 null
# inherited views
ok 27 should be equal
ok 28 should be equal
ok 29 Expected 'x-powered-by' to be equal.
ok 30 Expected 'etag' to be equal.
ok 31 Expected 'env' to be equal.
ok 32 Expected 'query parser' to be equal.
ok 33 Expected 'subdomain offset' to be equal.
ok 34 Expected 'trust proxy' to be equal.
ok 35 Expected 'jsonp callback name' to be equal.
ok 36 Expected 'case sensitive routing' to be equal.
ok 37 Expected 'strict routing' to be equal.
ok 38 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 39 null
# late mounting
ok 40 should not be equal
ok 41 should not be equal
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 42 null
# kraken
# startup without options
ok 43 server started
# startup with basedir
ok 44 server started
# startup with options
ok 45 server started
# startup with custom config directory
ok 46 server started
# mount point
ok 47 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 48 null
# express route
ok 49 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:00 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 50 null
# startup delay
ok 51 server started
# onKrakenMount
ok 52 app instance exist
ok 53 app is a function
ok 54 length of args is 2
ok 55 bootstrap successful
# server 503 until started
ok 56 server starting
ok 57 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:02 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 58 server is accepting requests
# server 503 until started with custom headers
ok 59 server starting
ok 60 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:04 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 61 server is accepting requests
# startup error
ok 62 server starting
ok 63 server startup failed
ok 64 server is accepting requests
# shutdown
ok 65 server stopped
ok 66 correct exit code
ok 67 server stopped
ok 68 correct exit code
# shutdown headers
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 69 null
ok 70 correct status code.
ok 71 null
ok 72 correct status code.
ok 73 has custom header 1.
ok 74 has custom header 1.
# shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 75 null
ok 76 correct status code.
ok 77 null
ok 78 correct status code.
# override shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 79 null
ok 80 correct status code.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 81 null
ok 82 correct status code.
# shutdown should only emit once, ever
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 83 no error.
ok 84 correct status code.
ok 85 shutdown emitted once.
# middleware
# no config
# multipart
ok 86 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "POST / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 87 should be truthy
ok 88 should be equal
ok 89 should be equal
ok 90 should be equal
ok 91 should be equal
ok 92 server is accepting requests
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 93 null
# settings
# custom
ok 94 should be equal
ok 95 should be equal
ok 96 should be equal
ok 97 should be equivalent
# should resolve from config (shortstop-resolve)
ok 98 should be equal
# should not clobber `trust proxy fn`
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:06 +0000] "GET /ip HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 99 null
# views
# renderer
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 100 null
# renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 101 null
# alt renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 102 null
# configured renderer function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 103 null
# configured renderer factory function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 104 null
# configured renderer exported function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 105 null
# custom view implementation
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 106 null
# custom renderer module implementation
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 107 null
# built-in shim
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 108 null
# built-in shim with precompiled templates
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 109 null

1..109
# tests 109
# pass  109

# ok

npm uninstall

removed 1 package, and audited 429 packages in 4s

44 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (3 low, 6 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> kraken-js@2.4.0 test
> tape test/*.js

TAP version 13
# composition
# plugin
ok 1 should not be equal
ok 2 should not be equal
ok 3 Expected 'x-powered-by' to be equal.
ok 4 Expected 'etag' to be equal.
ok 5 Expected 'env' to be equal.
ok 6 Expected 'query parser' to be equal.
ok 7 Expected 'subdomain offset' to be equal.
ok 8 Expected 'trust proxy' to be equal.
ok 9 Expected 'jsonp callback name' to be equal.
ok 10 Expected 'case sensitive routing' to be equal.
ok 11 Expected 'strict routing' to be equal.
ok 12 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 13 null
# plugin with mountpath
ok 14 should not be equal
ok 15 should not be equal
ok 16 Expected 'x-powered-by' to be equal.
ok 17 Expected 'etag' to be equal.
ok 18 Expected 'env' to be equal.
ok 19 Expected 'query parser' to be equal.
ok 20 Expected 'subdomain offset' to be equal.
ok 21 Expected 'trust proxy' to be equal.
ok 22 Expected 'jsonp callback name' to be equal.
ok 23 Expected 'case sensitive routing' to be equal.
ok 24 Expected 'strict routing' to be equal.
ok 25 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 26 null
# inherited views
ok 27 should be equal
ok 28 should be equal
ok 29 Expected 'x-powered-by' to be equal.
ok 30 Expected 'etag' to be equal.
ok 31 Expected 'env' to be equal.
ok 32 Expected 'query parser' to be equal.
ok 33 Expected 'subdomain offset' to be equal.
ok 34 Expected 'trust proxy' to be equal.
ok 35 Expected 'jsonp callback name' to be equal.
ok 36 Expected 'case sensitive routing' to be equal.
ok 37 Expected 'strict routing' to be equal.
ok 38 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 39 null
# late mounting
ok 40 should not be equal
ok 41 should not be equal
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 42 null
# kraken
# startup without options
ok 43 server started
# startup with basedir
ok 44 server started
# startup with options
ok 45 server started
# startup with custom config directory
ok 46 server started
# mount point
ok 47 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 48 null
# express route
ok 49 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:12 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 50 null
# startup delay
ok 51 server started
# onKrakenMount
ok 52 app instance exist
ok 53 app is a function
ok 54 length of args is 2
ok 55 bootstrap successful
# server 503 until started
ok 56 server starting
ok 57 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:14 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 58 server is accepting requests
# server 503 until started with custom headers
ok 59 server starting
ok 60 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:15 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 61 server is accepting requests
# startup error
ok 62 server starting
ok 63 server startup failed
ok 64 server is accepting requests
# shutdown
ok 65 server stopped
ok 66 correct exit code
ok 67 server stopped
ok 68 correct exit code
# shutdown headers
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 69 null
ok 70 correct status code.
ok 71 null
ok 72 correct status code.
ok 73 has custom header 1.
ok 74 has custom header 1.
# shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 75 null
ok 76 correct status code.
ok 77 null
ok 78 correct status code.
# override shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 79 null
ok 80 correct status code.
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 81 null
ok 82 correct status code.
# shutdown should only emit once, ever
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 83 no error.
ok 84 correct status code.
ok 85 shutdown emitted once.
# middleware
# no config
# multipart
ok 86 server started
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "POST / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 87 should be truthy
ok 88 should be equal
ok 89 should be equal
ok 90 should be equal
ok 91 should be equal
ok 92 server is accepting requests
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 93 null
# settings
# custom
ok 94 should be equal
ok 95 should be equal
ok 96 should be equal
ok 97 should be equivalent
# should resolve from config (shortstop-resolve)
ok 98 should be equal
# should not clobber `trust proxy fn`
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:17 +0000] "GET /ip HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 99 null
# views
# renderer
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 100 null
# renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 101 null
# alt renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 102 null
# configured renderer function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 103 null
# configured renderer factory function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 104 null
# configured renderer exported function
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 105 null
# custom view implementation
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 106 null
# custom renderer module implementation
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 107 null
# built-in shim
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 108 null
# built-in shim with precompiled templates
::ffff:127.0.0.1 - - [25/Aug/2022:16:25:18 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 109 null

1..109
# tests 109
# pass  109

# ok

----------------------run test done----------------------
----------------------client molstar of compression----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> molstar@3.14.0 test
> npm install --no-save "gl@^5.0.0" && npm run lint && jest


changed 3 packages, and audited 1037 packages in 5s

125 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> molstar@3.14.0 lint
> eslint .

npm uninstall

removed 92 packages, and audited 945 packages in 2s

120 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> molstar@3.14.0 test
> npm install --no-save "gl@^5.0.0" && npm run lint && jest


added 86 packages, and audited 1031 packages in 4s

125 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> molstar@3.14.0 lint
> eslint .

----------------------run test done----------------------
----------------------client router of compression----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> nxus-router@4.0.1 test
> NODE_ENV=test mocha --recursive --compilers js:babel-register -R spec src/test/* src/modules/**/test/*



  Router
    Load

      ✓ should not be null

      ✓ should be instantiated
    Init

      ✓ should register for app lifecycle

      ✓ should have port after load

      ✓ should have default config after load
    Providers

      ✓ should return an expressApp

      ✓ should return the routing table

  RouterSessions
    Load

      ✓ should not be null

      ✓ should be instantiated

      ✓ should have default config


  10 passing (62ms)

npm uninstall

removed 1 package, and audited 744 packages in 7s

47 vulnerabilities (3 low, 8 moderate, 28 high, 8 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> nxus-router@4.0.1 test
> NODE_ENV=test mocha --recursive --compilers js:babel-register -R spec src/test/* src/modules/**/test/*

----------------------run test done----------------------
deep-equal
subdir: flumeview-reduce http-assert kbpgp react-mapbox-gl tape
----------------------client flumeview-reduce of deep-equal----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> flumeview-reduce@1.4.0 test
> set -e; for t in test/*.js; do node $t; done

TAP version 13
# simple
ok 1 initial state
ok 2 saw message
ok 3 reducing
ok 4 saw message
ok 5 reducing
ok 6 streams reduction of view
ok 7 reduces view
ok 8 meta: true, values: true
ok 9 values: false
ok 10 saw message
ok 11 reducing
ok 12 saw message
ok 13 reducing
ok 14 null

1..14
# tests 14
# pass  14

# ok

TAP version 13
# simple
ok 1 initial state
ok 2 saw message
ok 3 reducing
ok 4 saw message
ok 5 reducing
ok 6 streams reduction of view
ok 7 reduces view
ok 8 meta: true, values: true
ok 9 values: false
ok 10 saw message
ok 11 reducing
ok 12 saw message
ok 13 reducing
ok 14 null

1..14
# tests 14
# pass  14

# ok

TAP version 13
# simple
ok 1 should be equivalent
# reload
ok 2 should be equivalent
# remote
ok 3 should be equal
ok 4 should be equal
# remote 2
ok 5 should be equal

1..5
# tests 5
# pass  5

# ok

TAP version 13
# simple
VIEW undefined -1 undefined
LOG -1 -1 undefined
1 0
REDUCE 0 { value: 0 } 1
1 { value: 0 }
REDUCE 1 { value: 10 } 2
1 { value: 10 }
REDUCE 2 { value: 20 } 3
1 { value: 20 }
REDUCE 3 { value: 30 } 4
1 { value: 30 }
GET
2 0

1..0
# tests 0
# pass  0

# ok

npm uninstall

removed 1 package, changed 1 package, and audited 110 packages in 1s

39 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> flumeview-reduce@1.4.0 test
> set -e; for t in test/*.js; do node $t; done

TAP version 13
# simple
ok 1 initial state
ok 2 saw message
ok 3 reducing
ok 4 saw message
ok 5 reducing
ok 6 streams reduction of view
ok 7 reduces view
ok 8 meta: true, values: true
ok 9 values: false
ok 10 saw message
ok 11 reducing
ok 12 saw message
ok 13 reducing
ok 14 null

1..14
# tests 14
# pass  14

# ok

TAP version 13
# simple
ok 1 initial state
ok 2 saw message
ok 3 reducing
ok 4 saw message
ok 5 reducing
ok 6 streams reduction of view
ok 7 reduces view
ok 8 meta: true, values: true
ok 9 values: false
ok 10 saw message
ok 11 reducing
ok 12 saw message
ok 13 reducing
ok 14 null

1..14
# tests 14
# pass  14

# ok

TAP version 13
# simple
ok 1 should be equivalent
# reload
ok 2 should be equivalent
# remote
ok 3 should be equal
ok 4 should be equal
# remote 2
ok 5 should be equal

1..5
# tests 5
# pass  5

# ok

TAP version 13
# simple
VIEW undefined -1 undefined
LOG -1 -1 undefined
1 0
REDUCE 0 { value: 0 } 1
1 { value: 0 }
REDUCE 1 { value: 10 } 2
1 { value: 10 }
REDUCE 2 { value: 20 } 3
1 { value: 20 }
REDUCE 3 { value: 30 } 4
1 { value: 30 }
GET
2 0

1..0
# tests 0
# pass  0

# ok

----------------------run test done----------------------
----------------------client http-assert of deep-equal----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> http-assert@1.5.0 test
> mocha --reporter spec --bail --check-leaks test/



  assert()
    ✔ should throw when guard is falsy
    ✔ should not throw when guard is truthy
    ✔ should accept options for the error object
    ✔ should not expose 5xx errors
    ✔ should default to status code 500

  assert.equal()
    ✔ should throw when things aren't equal
    ✔ should not throw when things are equal

  assert.notEqual()
    ✔ should throw when things are equal
    ✔ should not throw when things aren't equal

  assert.ok()
    ✔ should throw when value is falsy
    ✔ should not throw when value is truthy

  assert.strictEqual()
    ✔ should throw when things aren't equal
    ✔ should not throw when things are equal

  assert.notStrictEqual()
    ✔ should throw when things are equal
    ✔ should not throw when things aren't equal

  assert.deepEqual()
    ✔ should throw when things aren't deeply equal
    ✔ should not throw when things are deeply equal

  assert.notDeepEqual()
    ✔ should throw when things aren't deeply equal
    ✔ should not throw when things are deeply equal

  assert.fail()
    ✔ should always throw


  20 passing (13ms)

npm uninstall

removed 1 package, and audited 304 packages in 2s

81 packages are looking for funding
  run `npm fund` for details

2 moderate severity vulnerabilities

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> http-assert@1.5.0 test
> mocha --reporter spec --bail --check-leaks test/

----------------------run test done----------------------
----------------------client kbpgp of deep-equal----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> kbpgp@2.1.16 test
> make test

node_modules/.bin/iced test/run.iced
[32m✔ basex.iced: test_base58[39m
[32m✔ basex.iced: test_base32[39m
[32m✔ box.iced: box_unbox_1[39m
[32m✔ box.iced: box_unbox_2[39m
[32m✔ brainpool256.iced: import_brainpool256_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool256.iced: unlock_private_brainpool256[39m
[32m✔ brainpool256.iced: decrypt_brainpool256[39m
[32m✔ brainpool256.iced: roundtrip_brainpool256[39m
[32m✔ brainpool256.iced: roundtrip_sig_crypt_brainpool256[39m
[32m✔ brainpool384.iced: import_brainpool384_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool384.iced: unlock_private_brainpool384[39m
[32m✔ brainpool384.iced: decrypt_brainpool384[39m
[32m✔ brainpool384.iced: roundtrip_brainpool384[39m
[32m✔ brainpool384.iced: roundtrip_sig_crypt_brainpool384[39m
[32m✔ brainpool512.iced: import_brainpool512_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool512.iced: unlock_private_brainpool512[39m
[32m✔ brainpool512.iced: decrypt_brainpool512[39m
[32m✔ brainpool512.iced: roundtrip_brainpool512[39m
[32m✔ brainpool512.iced: roundtrip_sig_crypt_brainpool512[39m
[32m✔ buffer_shift_right.iced: test_buffer_shift_right[39m
[32m✔ buffer_shift_right.iced: test_mpi_from_left_n_bits[39m
[32m✔ burner.iced: burn_with_hasher[39m
[32m✔ burner.iced: burn_with_hasher_2[39m
[32m✔ burner.iced: burner_default_hash[39m
[32m✔ burner.iced: assert_pgp_hash[39m
[32m  ☑ msg 0 checked out![39m
[32m  ☑ msg 1 checked out![39m
[32m✔ bzip2.iced: process[39m
[32m✔ cast5.iced: rfc_2144_B1[39m
[32m✔ cast5.iced: cfb[39m
[32m✔ cfb.iced: nist_sp800_38a__f_3_17[39m
[32m✔ critical_subpacket.iced: decode[39m
[32m✔ cv25519.iced: import_private_cv25519_key_from_gpg[39m
[32m✔ cv25519.iced: decrypt_cv25519_encrypted_msg_from_gpg[39m
[32m✔ cv25519.iced: roundtrip_cv25519[39m
[32m✔ cv25519.iced: roundtrip_cv25519_with_sign[39m
[32m✔ cv25519.iced: decrypt_padded_coord_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_short_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_big_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_big_2_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_byte_size_exact_cv25519[39m
[32m✔ cv25519.iced: decrypt_verify_gpg2_issued_payload[39m
[32m✔ cv25519.iced: generate_cv25519[39m
[32m✔ cv25519.iced: generate_cv25519_and_reimport[39m
[32m  ☑ parsed portwood[39m
[32m  ☑ parsed edbett[39m
[32m  ☑ parsed azet[39m
[32m  ☑ parsed bitfolk[39m
[32m  ☑ parsed ophelia[39m
[32m  ☑ parsed sneak[39m
[32m  ☑ parsed elitehaxor[39m
[32m  ☑ parsed gmax[39m
[32m  ☑ parsed finn[39m
[32m  ☑ parsed adam[39m
[32m  ☑ parsed ry4an[39m
[32m  ☑ parsed asymptotic[39m
[32m  ☑ parsed dbellizzi[39m
[32m  ☑ parsed fincham[39m
[32m  ☑ parsed thierry[39m
[32m  ☑ parsed babazka[39m
[32m  ☑ parsed zyphlar[39m
[32m  ☑ parsed grantolson[39m
[32m  ☑ parsed vanity[39m
[32m✔ decode_pgp.iced: public_keys_advanced[39m
[32m  ☑ parsed weston[39m
[32m✔ decode_pgp.iced: public_keys_now[39m
[32m  ☑ parsed[39m
[32m  ☑ signatures verified[39m
[32m  ☑ opened key 0[39m
[32m  ☑ sanity checked key 0[39m
[32m  ☑ opened key 3[39m
[32m  ☑ sanity checked key 3[39m
[32m✔ decode_pgp.iced: decode_pgp_secret_key_1[39m
[32m✔ decode_pgp.iced: dearmor[39m
[32m✔ decode_pgp.iced: public_key_round_trip[39m
[32m✔ decode_pgp.iced: public_key_with_multiple_signers[39m
[32m✔ decode_pgp.iced: public_key_with_pic[39m
[32m✔ decode_pgp.iced: public_key_expired_uid[39m
[32m✔ decode_pgp.iced: public_key_expired_subkey[39m
[32m✔ decode_pgp.iced: public_key_expired_both[39m
[32m✔ decode_pgp.iced: public_key_expired_uid_bypass[39m
[32m✔ decode_pgp.iced: test_ukm_decode_sig_pgp[39m
[32m✔ decode_pgp.iced: test_ukm_decode_sig_nacl[39m
[32m✔ decoder.iced: test_freestanding[39m
[32m✔ decoder.iced: test_context_1[39m
[32m✔ decoder.iced: test_context_2[39m
[32m✔ decoder.iced: test_context_3[39m
[32m✔ decoder.iced: failed_checksum_1[39m
[32m✔ decoder.iced: failed_checksum_2[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported verification key[39m
[32m  ☑ parsed incoming message[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported verification key[39m
[32m  ☑ decrypted the session key[39m
[32m  ☑ decrypted the message using the session key[39m
[32m  ☑ parsed the decrypted message body[39m
[32m  ☑ inflated the compressed message body[39m
[32m  ☑ parsed the inflated message body[39m
[32m  ☑ signature verified properly[39m
[32m✔ decrypt_verify_msg.iced: run_test_msg_0[39m
[32m✔ decrypt_verify_msg.iced: process_msg_0[39m
[32m✔ decrypt_verify_msg.iced: process_msg_1[39m
[32m✔ decrypt_verify_msg.iced: process_msg_2[39m
[32m✔ decrypt_verify_msg.iced: process_msg_3[39m
[32m✔ decrypt_verify_msg.iced: process_corrupted_armor[39m
[32m✔ dsa.iced: verify_sigs[39m
[32m✔ dsa.iced: dsa_round_trip[39m
[32m  ☑ addition S+T[39m
[32m  ☑ subtraction S-T[39m
[32m  ☑ twice 2S[39m
[32m  ☑ multiply dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p521_test[39m
[32m  ☑ add S+T[39m
[32m  ☑ add T+S[39m
[32m  ☑ subtract S-T[39m
[32m  ☑ scalar multiply 2S[39m
[32m  ☑ scalar multiply dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p384_test[39m
[32m  ☑ addition S+T[39m
[32m  ☑ subtraction S-T[39m
[32m  ☑ twice 2S[39m
[32m  ☑ multiplication dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p256_test[39m
[32m✔ ecc2.iced: import_ecc_key_with_private_gen_by_google_e2e_1[39m
[32m✔ ecc2.iced: unlock_private[39m
[32m✔ ecc2.iced: decrypt_ecdh_1[39m
[32m✔ ecc2.iced: roundtrip_ecdh_1[39m
[32m✔ ecc2.iced: roundtrip_sig_crypt_1[39m
[32m✔ ecc2.iced: generate_and_roundtrip[39m
[32m✔ ecc2.iced: generate_export_import[39m
[32m✔ ecc2.iced: generate_default_subkeys[39m
[32m✔ ecc3.iced: generate_p521[39m
[32m✔ ecc3.iced: export_key[39m
[32m✔ ecc3.iced: import_key[39m
[32m✔ eddsa.iced: import_key_1[39m
[32m✔ eddsa.iced: verify_sigs[39m
[32m✔ eddsa.iced: generate_key_and_sign[39m
[32m✔ eddsa.iced: sign_and_exchange[39m
[32m✔ eddsa.iced: invalid_signed_key[39m
[32m✔ eddsa.iced: invalid_signature_msg[39m
[32m✔ eddsa.iced: invalid_userid_sig[39m
[32m✔ eddsa.iced: malformed_signature_test[39m
[32m✔ elgamal_v3.iced: import_key[39m
[32m✔ elgamal_v3.iced: encrypt_with_key[39m
[32m  ☑ key import[39m
[32m  ☑ key unlock[39m
[32m  ☑ decrypted msg 0[39m
[32m  ☑ decrypted/verified msg 0[39m
[32m✔ elgamal.iced: decrypt_msgs[39m
[32m✔ elgamal.iced: elgamal_round_trip[39m
[32m✔ errors.iced: test_wrong_key[39m
[32m✔ fermat2.iced: test_small_primes[39m
[32m✔ fermat2.iced: test_small_composites[39m
[32m✔ fermat2.iced: test_carmichael_numbers[39m
[32m✔ fermat2.iced: test_larger_primes[39m
[32m✔ fermat2.iced: test_larger_composites[39m
[32m✔ fp.iced: test_mk_fp[39m
[32m✔ get_primary_uid.iced: test_gmax[39m
[32m✔ gh_issue_73.iced: github_issue_73[39m
[32m✔ google_end_to_end.iced: test_decrypt[39m
[32m  ☑ generated 1024 bit key![39m
[32m  ☑ Encrypted a random payload[39m
[32m✔ hide.iced: test_hide_rsa[39m
[32m✔ hide.iced: test_hide_elgamal[39m
[32m✔ kbbox.iced: box_unbox_with_nonce[39m
[32m✔ key_expirations.iced: read_max_key[39m
[32m✔ key_expirations.iced: read_jack_key[39m
[32m✔ key_expirations.iced: read_rillian_key[39m
[32m✔ key_expirations.iced: read_michel_slm_key[39m
[32m✔ key_expirations.iced: read_kourier_key[39m
[32m✔ keyfetcher.iced: verify_revoked_with_keyfetcher[39m
[32m✔ keyfetcher.iced: verify_keyfetcher[39m
[32m✔ keymanager.iced: step1_generate[39m
[32m  ☑ new OpenPGP password: B&8LZPYh0OInM[_[39m
[32m✔ keymanager.iced: step2_salt_triplesec[39m
[32m  ☑ Generated new PGP Private key: -----BEGIN PGP PRIVATE KEY BLOCK----- Version: Keybase OpenPGP v2.1.16[39m
[32m✔ keymanager.iced: step3_export_pgp_private[39m
[32m✔ keymanager.iced: step4_import_pgp_public[39m
[32m✔ keymanager.iced: step4a_test_failed_private_merge[39m
[32m✔ keymanager.iced: step5_merge_pgp_private[39m
[32m✔ keymanager.iced: step6_export_p3skb_private[39m
[32m✔ keymanager.iced: pgp_full_hash[39m
[32m✔ keymanager.iced: pgp_full_hash_nacl[39m
[32m✔ keymanager.iced: change_key_and_reexport[39m
[32m✔ keymanager.iced: generate_key_default_hash[39m
[32m✔ keymanager.iced: sign_key_with_hasher[39m
[32m✔ merge_pgp_public.iced: import_and_merge_zaher[39m
[32m✔ merge_pgp_public.iced: import_and_merge_max[39m
[32m✔ merge_pgp_public.iced: import_and_merge_kian[39m
[32m✔ merge_pgp_public.iced: check_merge_omits_revokes[39m
[32m✔ merge_pgp_public.iced: check_merge_omits_revokes_in_reverse[39m
[32m✔ merge_pgp_public.iced: check_merge_everything_includes_userids[39m
[32m✔ miller_rabin.iced: test_primes[39m
[32m✔ miller_rabin.iced: test_composites[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m✔ msg_roundtrip.iced: clear_sign_1[39m
[32m✔ msg_roundtrip.iced: clear_sign_2[39m
[32m✔ msg_roundtrip.iced: clear_sign_3[39m
[32m✔ msg_roundtrip.iced: clear_sign_4[39m
[32m✔ msg_roundtrip.iced: clear_sign_5[39m
[32m✔ msg_roundtrip.iced: clear_sign_6[39m
[32m✔ msg_roundtrip.iced: clear_sign_7[39m
[32m✔ msg_roundtrip.iced: clear_sign_8[39m
[32m✔ msg_roundtrip.iced: detached_sign_wholesale[39m
[32m✔ msg_roundtrip.iced: detached_sign_streaming[39m
[32m✔ msg_roundtrip.iced: encrypt[39m
[32m✔ msg_roundtrip.iced: sign[39m
[32m✔ msg_roundtrip.iced: encrypt_and_sign[39m
[32m✔ msg_roundtrip.iced: encrypt_and_sign_armor[39m
[32m  ☑ loaded key huey[39m
[32m  ☑ loaded key louie[39m
[32m  ☑ loaded key dewey[39m
[32m  ☑ loaded key scrooge[39m
[32m  ☑ unlocked Scrooge's key[39m
[32m✔ multiples.iced: load_key_managers_1[39m
[32m✔ multiples.iced: multi_encrypt[39m
[32m  ☑ unlocked keymanager for huey for decryption[39m
[32m  ☑ decrypted for huey[39m
[32m  ☑ unlocked keymanager for louie for decryption[39m
[32m  ☑ decrypted for louie[39m
[32m  ☑ unlocked keymanager for dewey for decryption[39m
[32m  ☑ decrypted for dewey[39m
[32m  ☑ decrypted for scrooge[39m
[32m✔ multiples.iced: decrypt_all[39m
[32m✔ nacl_export.iced: enc_generate_keys[39m
[32m✔ nacl_export.iced: encrypt[39m
[32m✔ nacl_export.iced: decrypt_1[39m
[32m✔ nacl_export.iced: enc_export_private_key[39m
[32m✔ nacl_export.iced: enc_import_private_key[39m
[32m✔ nacl_export.iced: decrypt_2[39m
[32m✔ nacl_export.iced: sig_generate_keys[39m
[32m✔ nacl_export.iced: sign_1[39m
[32m✔ nacl_export.iced: verify_1[39m
[32m✔ nacl_export.iced: sig_export_private_key[39m
[32m✔ nacl_export.iced: sig_import_private_key[39m
[32m✔ nacl_export.iced: sign_2[39m
[32m✔ nacl_export.iced: verify_2[39m
[32m✔ nacl1.iced: gen_eddsa[39m
[32m✔ nacl1.iced: sign_attached_1[39m
[32m✔ nacl1.iced: verify_attached_1[39m
[32m✔ nacl1.iced: sign_detached_1[39m
[32m✔ nacl1.iced: verify_dettached_1[39m
[32m✔ nacl1.iced: box1[39m
[32m✔ nacl1.iced: unbox1[39m
[32m✔ nacl1.iced: exim1[39m
[32m✔ nacl1.iced: bad_hex[39m
[32m✔ nacl1.iced: sigeng1[39m
[32m✔ nacl1.iced: sign_attached_2[39m
[32m✔ nacl1.iced: verify_attached_2[39m
[32m✔ nacl1.iced: sign_attached_3[39m
[32m✔ nacl1.iced: verify_attached_3[39m
[32m✔ nacl2.iced: gen_eddsa[39m
[32m✔ nacl2.iced: encrypt_1[39m
[32m✔ nacl2.iced: verify_attached_1[39m
[32m✔ nacl2.iced: box_1[39m
[32m✔ nacl2.iced: km[39m
[32m✔ nacl2.iced: unbox_1[39m
[32m✔ nacl2.iced: box_2[39m
[32m✔ nacl2.iced: unbox_2[39m
[32m✔ nacl2.iced: box_3[39m
[32m✔ nacl2.iced: unbox_3[39m
[32m✔ nacl2.iced: unbox_split_seed_1[39m
[32m✔ openpgp_js_cure53_audit.iced: op_01_019[39m
[32m  ☑ success 1[39m
[32m  ☑ fail 1[39m
[32m  ☑ fail 2[39m
[32m  ☑ fail 3[39m
[32m  ☑ fail 4[39m
[32m  ☑ success 2[39m
[32m  ☑ fail 5[39m
[32m  ☑ fail 6[39m
[32m  ☑ success 3[39m
[32m  ☑ fail Hash:SHA512[39m
[32m  ☑ fail <script>: SHA256[39m
[32m  ☑ fail Hash SHA512[39m
[32m✔ openpgp_js_cure53_audit.iced: op_01_009[39m
[32m✔ p3skb_r.iced: import_and_unlock_expired[39m
[32m✔ p3skb_r.iced: import_and_unlock_expired_no_check_keys[39m
[32m✔ p3skb.iced: gen_new_key[39m
[32m✔ p3skb.iced: lock_p3skb[39m
[32m✔ p3skb.iced: unlock_p3skb_bad_ppgen[39m
[32m✔ p3skb.iced: unlock_p3skb[39m
[32m✔ p521.iced: import_private_nistp521_key_from_gpg[39m
[32m✔ p521.iced: roundtrip_nistp521[39m
[32m✔ p521.iced: decrypt_padded_v_521[39m
[32m✔ p521.iced: decrypt_coord_byte_size_exact_521[39m
[32m  ☑ dens[39m
[32m  ☑ loaded key[39m
[32m✔ problem_sigs.iced: test_problem_sigs[39m
[32m✔ revoked_subkey.iced: import_public[39m
[32m  ☑ about to s2k with very big parameters...[39m
[32m✔ revoked_subkey.iced: import_private[39m
[32m✔ revoked_subkey.iced: encrypt[39m
[32m✔ revoked_subkey.iced: decrypt[39m
[32m✔ revokes.iced: fetch_subkey_from_revoked_bundle[39m
[32m✔ revokes.iced: fetch_subkey_from_revoked_bundle_with_keyring[39m
[32m✔ revokes.iced: revoked_identity[39m
[32m✔ revokes.iced: designated_revocation[39m
[32m✔ revokes.iced: designated_revocation2[39m
[32m✔ revokes.iced: test_designated_bad_sig[39m
[32m✔ revokes.iced: test_designated_bad_revoker[39m
[32m✔ revokes.iced: key_without_unverified_revocations[39m
[32m✔ revokes.iced: test_misplaced_revocation[39m
[32m  ☑ test s_4_1[39m
[32m  ☑ test s_4_2[39m
[32m  ☑ test s_4_3[39m
[32m  ☑ test s_4_4[39m
[32m  ☑ test s_4_5[39m
[32m  ☑ test s_4_6[39m
[32m✔ rfc3394.iced: run_test_vectors[39m
[32m✔ rsa_8192.iced: import_key[39m
[32m✔ rsa_8192.iced: encrypt[39m
[32m✔ rsa_8192.iced: decrypt[39m
[32m  ☑ generated 512 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m  ☑ did encrypt/decrypt #8[39m
[32m  ☑ did encrypt/decrypt #9[39m
[32m✔ rsa.iced: run_test_512[39m
[32m  ☑ generated 1024 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m  ☑ did encrypt/decrypt #8[39m
[32m  ☑ did encrypt/decrypt #9[39m
[32m✔ rsa.iced: run_test_1024[39m
[32m  ☑ generated 2048 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m✔ rsa.iced: run_test_2048[39m
[32m  ☑ generated 3072 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m✔ rsa.iced: run_test_3072[39m
[32m  ☑ generated 4096 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m✔ rsa.iced: run_test_4096[39m
[32m✔ secret_subkeys_incomplete.iced: load_pub[39m
[32m✔ secret_subkeys_incomplete.iced: load_priv[39m
[32m✔ secret_subkeys_incomplete.iced: unlock_priv[39m
[32m✔ secret_subkeys_incomplete.iced: merge[39m
[32m✔ secret_subkeys_incomplete.iced: unlock_merged[39m
[32m✔ secret_subkeys_incomplete.iced: sign[39m
[32m✔ secret_subkeys_incomplete.iced: encrypt[39m
[32m✔ secret_subkeys_incomplete.iced: decrypt[39m
[32m✔ secret_subkeys.iced: load_pub[39m
[32m✔ secret_subkeys.iced: load_priv[39m
[32m✔ secret_subkeys.iced: unlock_priv[39m
[32m✔ secret_subkeys.iced: merge[39m
[32m✔ secret_subkeys.iced: unlock_merged[39m
[32m✔ secret_subkeys.iced: sign[39m
[32m✔ secret_subkeys.iced: verify[39m
[32m✔ secret_subkeys.iced: encrypt_and_sign[39m
[32m✔ secret_subkeys.iced: decrypt_and_verify[39m
[32m✔ secret_subkeys.iced: encrypt_private_to_server[39m
[32m  ☑ unlocked[39m
[32m  ☑ decryption still worked[39m
[32m✔ secret_subkeys.iced: decrypt_private_from_sever[39m
[32m✔ sig_gocli.iced: verify[39m
[32m✔ sig_v3.iced: verify[39m
[32m  ☑ SHA384[39m
[32m  ☑ SHA224[39m
[32m  ☑ SHA256[39m
[32m  ☑ SHA1[39m
[32m  ☑ SHA512[39m
[32m✔ sig_various_hashes.iced: verify[39m
[32m✔ sigeng.iced: generate[39m
[32m✔ sigeng.iced: box[39m
[32m✔ sigeng.iced: unbox[39m
[32m✔ sigeng.iced: pgp_get_unverified_payload[39m
[32m✔ sigeng.iced: kb_generate[39m
[32m✔ sigeng.iced: kb_box[39m
[32m✔ sigeng.iced: kb_unbox[39m
[32m✔ sigeng.iced: kb_get_unverified_payload[39m
[32m✔ sigeng.iced: pgp_unbox_bcrypt[39m
[32m✔ sigeng.iced: sigeng_verify_encrypt_msg[39m
[32m✔ sigeng.iced: kb_generate_with_prefix[39m
[32m✔ sigeng.iced: assert_pgp_hash[39m
[32m✔ subkey_expiration.iced: key_1[39m
[32m✔ subkey_multiple_sigs.iced: load_multi_binding_key_and_verify[39m
[31m- Assertion failed: no error (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:64:5)[39m
[31m- Assertion failed: was signed! (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:65:5)[39m
[31m- In right message cae back: undefined != "hello cross signed world" (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:66:5)[39m
[31m[1m✖ TESTFAIL subkey_multiple_sigs.iced: load_with_only_right_sig_then_verify[22m[39m
[31m- Assertion failed: expecting a warning (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:80:5)[39m
[31m- Assertion failed: found the right warning (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:81:5)[39m
[31m[1m✖ TESTFAIL subkey_multiple_sigs.iced: do_not_merge_crosscertify[22m[39m
[32m✔ subkey_no_cross_sig.iced: test_subkey_without_cross_sig[39m
[32m✔ subkey_no_cross_sig.iced: test_subkey_with_cross_sig[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys_winner_did_not_expire[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys_winner_latest[39m
[32m  ☑ loaded key[39m
[32m✔ subpacket33.iced: test_subpacket33[39m
[32m✔ ukm.iced: test_kb[39m
[32m✔ ukm.iced: test_pgp[39m
[32m✔ unbox_cant_verify.iced: run[39m
[32m✔ userid.iced: test_parse[39m
[32m✔ userid.iced: test_make[39m
[32m  ☑ Sig 0 checked out[39m
[32m  ☑ Sig 1 checked out[39m
[32m  ☑ Sig 2 checked out[39m
[32m  ☑ Sig 3 checked out[39m
[32m  ☑ Sig 4 checked out[39m
[32m  ☑ Sig 5 checked out[39m
[32m  ☑ Sig 6 checked out[39m
[32m  ☑ Sig 7 checked out[39m
[32m  ☑ Sig 8 checked out[39m
[32m✔ verify_clearsign_sigs.iced: verify_good_sigs[39m
[32m  ☑ Sig 0 failed[39m
[32m  ☑ Sig 1 failed[39m
[32m  ☑ Sig 2 failed[39m
[32m  ☑ Sig 3 failed[39m
[32m  ☑ Sig 4 failed[39m
[32m  ☑ Sig 5 failed[39m
[32m✔ verify_clearsign_sigs.iced: reject_bad_sigs[39m
[32m✔ verify_clearsign_sigs.iced: reject_expired_keys[39m
[32m  ☑ Sig toonces / good checked out[39m
[32m  ☑ Sig krohn / good checked out[39m
[32m✔ verify_detached_sigs.iced: verify_good_sigs_all_at_once[39m
[32m  ☑ Sig toonces failed[39m
[32m  ☑ Sig krohn failed[39m
[32m✔ verify_detached_sigs.iced: nix_bad_sigs_all_at_once[39m
[32m  ☑ Sig toonces checked out[39m
[32m  ☑ Sig krohn checked out[39m
[32m✔ verify_detached_sigs.iced: verify_good_sigs_streaming[39m
[32m  ☑ Sig toonces failed[39m
[32m  ☑ Sig krohn failed[39m
[32m✔ verify_detached_sigs.iced: nix_bad_sigs_streaming[39m
[32m  ☑ Sig checked out[39m
[32m  ☑ Right error message beamed back from 2099: PGP key c984c3f57f5725fb8d3f8ec2f315783b68938a90 expired at 1538854906 but we checked for time 4090003200[39m
[32m✔ verify_detached_sigs.iced: verify_expired_detached[39m
[32m  ☑ loaded key[39m
[32m✔ verify_sigs.iced: verify_peter_bance[39m
[32m✔ zip.iced: unzip[39m
[31m[1mTests: 282/284 passed[22m[39m
[31mFailed in files (pass as arguments to runner to retry):[39m
  subkey_multiple_sigs.iced

npm uninstall

added 7 packages, changed 1 package, and audited 186 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (1 moderate, 2 high, 2 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> kbpgp@2.1.16 test
> make test

node_modules/.bin/iced test/run.iced
[32m✔ basex.iced: test_base58[39m
[32m✔ basex.iced: test_base32[39m
[32m✔ box.iced: box_unbox_1[39m
[32m✔ box.iced: box_unbox_2[39m
[32m✔ brainpool256.iced: import_brainpool256_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool256.iced: unlock_private_brainpool256[39m
[32m✔ brainpool256.iced: decrypt_brainpool256[39m
[32m✔ brainpool256.iced: roundtrip_brainpool256[39m
[32m✔ brainpool256.iced: roundtrip_sig_crypt_brainpool256[39m
[32m✔ brainpool384.iced: import_brainpool384_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool384.iced: unlock_private_brainpool384[39m
[32m✔ brainpool384.iced: decrypt_brainpool384[39m
[32m✔ brainpool384.iced: roundtrip_brainpool384[39m
[32m✔ brainpool384.iced: roundtrip_sig_crypt_brainpool384[39m
[32m✔ brainpool512.iced: import_brainpool512_key_with_private_gen_by_gnupg[39m
[32m✔ brainpool512.iced: unlock_private_brainpool512[39m
[32m✔ brainpool512.iced: decrypt_brainpool512[39m
[32m✔ brainpool512.iced: roundtrip_brainpool512[39m
[32m✔ brainpool512.iced: roundtrip_sig_crypt_brainpool512[39m
[32m✔ buffer_shift_right.iced: test_buffer_shift_right[39m
[32m✔ buffer_shift_right.iced: test_mpi_from_left_n_bits[39m
[32m✔ burner.iced: burn_with_hasher[39m
[32m✔ burner.iced: burn_with_hasher_2[39m
[32m✔ burner.iced: burner_default_hash[39m
[32m✔ burner.iced: assert_pgp_hash[39m
[32m  ☑ msg 0 checked out![39m
[32m  ☑ msg 1 checked out![39m
[32m✔ bzip2.iced: process[39m
[32m✔ cast5.iced: rfc_2144_B1[39m
[32m✔ cast5.iced: cfb[39m
[32m✔ cfb.iced: nist_sp800_38a__f_3_17[39m
[32m✔ critical_subpacket.iced: decode[39m
[32m✔ cv25519.iced: import_private_cv25519_key_from_gpg[39m
[32m✔ cv25519.iced: decrypt_cv25519_encrypted_msg_from_gpg[39m
[32m✔ cv25519.iced: roundtrip_cv25519[39m
[32m✔ cv25519.iced: roundtrip_cv25519_with_sign[39m
[32m✔ cv25519.iced: decrypt_padded_coord_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_short_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_big_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_too_big_2_cv25519[39m
[32m✔ cv25519.iced: decrypt_coord_byte_size_exact_cv25519[39m
[32m✔ cv25519.iced: decrypt_verify_gpg2_issued_payload[39m
[32m✔ cv25519.iced: generate_cv25519[39m
[32m✔ cv25519.iced: generate_cv25519_and_reimport[39m
[32m  ☑ parsed portwood[39m
[32m  ☑ parsed edbett[39m
[32m  ☑ parsed azet[39m
[32m  ☑ parsed bitfolk[39m
[32m  ☑ parsed ophelia[39m
[32m  ☑ parsed sneak[39m
[32m  ☑ parsed elitehaxor[39m
[32m  ☑ parsed gmax[39m
[32m  ☑ parsed finn[39m
[32m  ☑ parsed adam[39m
[32m  ☑ parsed ry4an[39m
[32m  ☑ parsed asymptotic[39m
[32m  ☑ parsed dbellizzi[39m
[32m  ☑ parsed fincham[39m
[32m  ☑ parsed thierry[39m
[32m  ☑ parsed babazka[39m
[32m  ☑ parsed zyphlar[39m
[32m  ☑ parsed grantolson[39m
[32m  ☑ parsed vanity[39m
[32m✔ decode_pgp.iced: public_keys_advanced[39m
[32m  ☑ parsed weston[39m
[32m✔ decode_pgp.iced: public_keys_now[39m
[32m  ☑ parsed[39m
[32m  ☑ signatures verified[39m
[32m  ☑ opened key 0[39m
[32m  ☑ sanity checked key 0[39m
[32m  ☑ opened key 3[39m
[32m  ☑ sanity checked key 3[39m
[32m✔ decode_pgp.iced: decode_pgp_secret_key_1[39m
[32m✔ decode_pgp.iced: dearmor[39m
[32m✔ decode_pgp.iced: public_key_round_trip[39m
[32m✔ decode_pgp.iced: public_key_with_multiple_signers[39m
[32m✔ decode_pgp.iced: public_key_with_pic[39m
[32m✔ decode_pgp.iced: public_key_expired_uid[39m
[32m✔ decode_pgp.iced: public_key_expired_subkey[39m
[32m✔ decode_pgp.iced: public_key_expired_both[39m
[32m✔ decode_pgp.iced: public_key_expired_uid_bypass[39m
[32m✔ decode_pgp.iced: test_ukm_decode_sig_pgp[39m
[32m✔ decode_pgp.iced: test_ukm_decode_sig_nacl[39m
[32m✔ decoder.iced: test_freestanding[39m
[32m✔ decoder.iced: test_context_1[39m
[32m✔ decoder.iced: test_context_2[39m
[32m✔ decoder.iced: test_context_3[39m
[32m✔ decoder.iced: failed_checksum_1[39m
[32m✔ decoder.iced: failed_checksum_2[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported verification key[39m
[32m  ☑ parsed incoming message[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported verification key[39m
[32m  ☑ decrypted the session key[39m
[32m  ☑ decrypted the message using the session key[39m
[32m  ☑ parsed the decrypted message body[39m
[32m  ☑ inflated the compressed message body[39m
[32m  ☑ parsed the inflated message body[39m
[32m  ☑ signature verified properly[39m
[32m✔ decrypt_verify_msg.iced: run_test_msg_0[39m
[32m✔ decrypt_verify_msg.iced: process_msg_0[39m
[32m✔ decrypt_verify_msg.iced: process_msg_1[39m
[32m✔ decrypt_verify_msg.iced: process_msg_2[39m
[32m✔ decrypt_verify_msg.iced: process_msg_3[39m
[32m✔ decrypt_verify_msg.iced: process_corrupted_armor[39m
[32m✔ dsa.iced: verify_sigs[39m
[32m✔ dsa.iced: dsa_round_trip[39m
[32m  ☑ addition S+T[39m
[32m  ☑ subtraction S-T[39m
[32m  ☑ twice 2S[39m
[32m  ☑ multiply dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p521_test[39m
[32m  ☑ add S+T[39m
[32m  ☑ add T+S[39m
[32m  ☑ subtract S-T[39m
[32m  ☑ scalar multiply 2S[39m
[32m  ☑ scalar multiply dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p384_test[39m
[32m  ☑ addition S+T[39m
[32m  ☑ subtraction S-T[39m
[32m  ☑ twice 2S[39m
[32m  ☑ multiplication dS[39m
[32m  ☑ multiply/add dS + eT[39m
[32m✔ ecc1.iced: p256_test[39m
[32m✔ ecc2.iced: import_ecc_key_with_private_gen_by_google_e2e_1[39m
[32m✔ ecc2.iced: unlock_private[39m
[32m✔ ecc2.iced: decrypt_ecdh_1[39m
[32m✔ ecc2.iced: roundtrip_ecdh_1[39m
[32m✔ ecc2.iced: roundtrip_sig_crypt_1[39m
[32m✔ ecc2.iced: generate_and_roundtrip[39m
[32m✔ ecc2.iced: generate_export_import[39m
[32m✔ ecc2.iced: generate_default_subkeys[39m
[32m✔ ecc3.iced: generate_p521[39m
[32m✔ ecc3.iced: export_key[39m
[32m✔ ecc3.iced: import_key[39m
[32m✔ eddsa.iced: import_key_1[39m
[32m✔ eddsa.iced: verify_sigs[39m
[32m✔ eddsa.iced: generate_key_and_sign[39m
[32m✔ eddsa.iced: sign_and_exchange[39m
[32m✔ eddsa.iced: invalid_signed_key[39m
[32m✔ eddsa.iced: invalid_signature_msg[39m
[32m✔ eddsa.iced: invalid_userid_sig[39m
[32m✔ eddsa.iced: malformed_signature_test[39m
[32m✔ elgamal_v3.iced: import_key[39m
[32m✔ elgamal_v3.iced: encrypt_with_key[39m
[32m  ☑ key import[39m
[32m  ☑ key unlock[39m
[32m  ☑ decrypted msg 0[39m
[32m  ☑ decrypted/verified msg 0[39m
[32m✔ elgamal.iced: decrypt_msgs[39m
[32m✔ elgamal.iced: elgamal_round_trip[39m
[32m✔ errors.iced: test_wrong_key[39m
[32m✔ fermat2.iced: test_small_primes[39m
[32m✔ fermat2.iced: test_small_composites[39m
[32m✔ fermat2.iced: test_carmichael_numbers[39m
[32m✔ fermat2.iced: test_larger_primes[39m
[32m✔ fermat2.iced: test_larger_composites[39m
[32m✔ fp.iced: test_mk_fp[39m
[32m✔ get_primary_uid.iced: test_gmax[39m
[32m✔ gh_issue_73.iced: github_issue_73[39m
[32m✔ google_end_to_end.iced: test_decrypt[39m
[32m  ☑ generated 1024 bit key![39m
[32m  ☑ Encrypted a random payload[39m
[32m✔ hide.iced: test_hide_rsa[39m
[32m✔ hide.iced: test_hide_elgamal[39m
[32m✔ kbbox.iced: box_unbox_with_nonce[39m
[32m✔ key_expirations.iced: read_max_key[39m
[32m✔ key_expirations.iced: read_jack_key[39m
[32m✔ key_expirations.iced: read_rillian_key[39m
[32m✔ key_expirations.iced: read_michel_slm_key[39m
[32m✔ key_expirations.iced: read_kourier_key[39m
[32m✔ keyfetcher.iced: verify_revoked_with_keyfetcher[39m
[32m✔ keyfetcher.iced: verify_keyfetcher[39m
[32m✔ keymanager.iced: step1_generate[39m
[32m  ☑ new OpenPGP password: D;OtOU1C4Qu~!15[39m
[32m✔ keymanager.iced: step2_salt_triplesec[39m
[32m  ☑ Generated new PGP Private key: -----BEGIN PGP PRIVATE KEY BLOCK----- Version: Keybase OpenPGP v2.1.16[39m
[32m✔ keymanager.iced: step3_export_pgp_private[39m
[32m✔ keymanager.iced: step4_import_pgp_public[39m
[32m✔ keymanager.iced: step4a_test_failed_private_merge[39m
[32m✔ keymanager.iced: step5_merge_pgp_private[39m
[32m✔ keymanager.iced: step6_export_p3skb_private[39m
[32m✔ keymanager.iced: pgp_full_hash[39m
[32m✔ keymanager.iced: pgp_full_hash_nacl[39m
[32m✔ keymanager.iced: change_key_and_reexport[39m
[32m✔ keymanager.iced: generate_key_default_hash[39m
[32m✔ keymanager.iced: sign_key_with_hasher[39m
[32m✔ merge_pgp_public.iced: import_and_merge_zaher[39m
[32m✔ merge_pgp_public.iced: import_and_merge_max[39m
[32m✔ merge_pgp_public.iced: import_and_merge_kian[39m
[32m✔ merge_pgp_public.iced: check_merge_omits_revokes[39m
[32m✔ merge_pgp_public.iced: check_merge_omits_revokes_in_reverse[39m
[32m✔ merge_pgp_public.iced: check_merge_everything_includes_userids[39m
[32m✔ miller_rabin.iced: test_primes[39m
[32m✔ miller_rabin.iced: test_composites[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m  ☑ imported decryption key[39m
[32m  ☑ unlocked decryption key[39m
[32m✔ msg_roundtrip.iced: clear_sign_1[39m
[32m✔ msg_roundtrip.iced: clear_sign_2[39m
[32m✔ msg_roundtrip.iced: clear_sign_3[39m
[32m✔ msg_roundtrip.iced: clear_sign_4[39m
[32m✔ msg_roundtrip.iced: clear_sign_5[39m
[32m✔ msg_roundtrip.iced: clear_sign_6[39m
[32m✔ msg_roundtrip.iced: clear_sign_7[39m
[32m✔ msg_roundtrip.iced: clear_sign_8[39m
[32m✔ msg_roundtrip.iced: detached_sign_wholesale[39m
[32m✔ msg_roundtrip.iced: detached_sign_streaming[39m
[32m✔ msg_roundtrip.iced: encrypt[39m
[32m✔ msg_roundtrip.iced: sign[39m
[32m✔ msg_roundtrip.iced: encrypt_and_sign[39m
[32m✔ msg_roundtrip.iced: encrypt_and_sign_armor[39m
[32m  ☑ loaded key huey[39m
[32m  ☑ loaded key louie[39m
[32m  ☑ loaded key dewey[39m
[32m  ☑ loaded key scrooge[39m
[32m  ☑ unlocked Scrooge's key[39m
[32m✔ multiples.iced: load_key_managers_1[39m
[32m✔ multiples.iced: multi_encrypt[39m
[32m  ☑ unlocked keymanager for huey for decryption[39m
[32m  ☑ decrypted for huey[39m
[32m  ☑ unlocked keymanager for louie for decryption[39m
[32m  ☑ decrypted for louie[39m
[32m  ☑ unlocked keymanager for dewey for decryption[39m
[32m  ☑ decrypted for dewey[39m
[32m  ☑ decrypted for scrooge[39m
[32m✔ multiples.iced: decrypt_all[39m
[32m✔ nacl_export.iced: enc_generate_keys[39m
[32m✔ nacl_export.iced: encrypt[39m
[32m✔ nacl_export.iced: decrypt_1[39m
[32m✔ nacl_export.iced: enc_export_private_key[39m
[32m✔ nacl_export.iced: enc_import_private_key[39m
[32m✔ nacl_export.iced: decrypt_2[39m
[32m✔ nacl_export.iced: sig_generate_keys[39m
[32m✔ nacl_export.iced: sign_1[39m
[32m✔ nacl_export.iced: verify_1[39m
[32m✔ nacl_export.iced: sig_export_private_key[39m
[32m✔ nacl_export.iced: sig_import_private_key[39m
[32m✔ nacl_export.iced: sign_2[39m
[32m✔ nacl_export.iced: verify_2[39m
[32m✔ nacl1.iced: gen_eddsa[39m
[32m✔ nacl1.iced: sign_attached_1[39m
[32m✔ nacl1.iced: verify_attached_1[39m
[32m✔ nacl1.iced: sign_detached_1[39m
[32m✔ nacl1.iced: verify_dettached_1[39m
[32m✔ nacl1.iced: box1[39m
[32m✔ nacl1.iced: unbox1[39m
[32m✔ nacl1.iced: exim1[39m
[32m✔ nacl1.iced: bad_hex[39m
[32m✔ nacl1.iced: sigeng1[39m
[32m✔ nacl1.iced: sign_attached_2[39m
[32m✔ nacl1.iced: verify_attached_2[39m
[32m✔ nacl1.iced: sign_attached_3[39m
[32m✔ nacl1.iced: verify_attached_3[39m
[32m✔ nacl2.iced: gen_eddsa[39m
[32m✔ nacl2.iced: encrypt_1[39m
[32m✔ nacl2.iced: verify_attached_1[39m
[32m✔ nacl2.iced: box_1[39m
[32m✔ nacl2.iced: km[39m
[32m✔ nacl2.iced: unbox_1[39m
[32m✔ nacl2.iced: box_2[39m
[32m✔ nacl2.iced: unbox_2[39m
[32m✔ nacl2.iced: box_3[39m
[32m✔ nacl2.iced: unbox_3[39m
[32m✔ nacl2.iced: unbox_split_seed_1[39m
[32m✔ openpgp_js_cure53_audit.iced: op_01_019[39m
[32m  ☑ success 1[39m
[32m  ☑ fail 1[39m
[32m  ☑ fail 2[39m
[32m  ☑ fail 3[39m
[32m  ☑ fail 4[39m
[32m  ☑ success 2[39m
[32m  ☑ fail 5[39m
[32m  ☑ fail 6[39m
[32m  ☑ success 3[39m
[32m  ☑ fail Hash:SHA512[39m
[32m  ☑ fail <script>: SHA256[39m
[32m  ☑ fail Hash SHA512[39m
[32m✔ openpgp_js_cure53_audit.iced: op_01_009[39m
[32m✔ p3skb_r.iced: import_and_unlock_expired[39m
[32m✔ p3skb_r.iced: import_and_unlock_expired_no_check_keys[39m
[32m✔ p3skb.iced: gen_new_key[39m
[32m✔ p3skb.iced: lock_p3skb[39m
[32m✔ p3skb.iced: unlock_p3skb_bad_ppgen[39m
[32m✔ p3skb.iced: unlock_p3skb[39m
[32m✔ p521.iced: import_private_nistp521_key_from_gpg[39m
[32m✔ p521.iced: roundtrip_nistp521[39m
[32m✔ p521.iced: decrypt_padded_v_521[39m
[32m✔ p521.iced: decrypt_coord_byte_size_exact_521[39m
[32m  ☑ dens[39m
[32m  ☑ loaded key[39m
[32m✔ problem_sigs.iced: test_problem_sigs[39m
[32m✔ revoked_subkey.iced: import_public[39m
[32m  ☑ about to s2k with very big parameters...[39m
[32m✔ revoked_subkey.iced: import_private[39m
[32m✔ revoked_subkey.iced: encrypt[39m
[32m✔ revoked_subkey.iced: decrypt[39m
[32m✔ revokes.iced: fetch_subkey_from_revoked_bundle[39m
[32m✔ revokes.iced: fetch_subkey_from_revoked_bundle_with_keyring[39m
[32m✔ revokes.iced: revoked_identity[39m
[32m✔ revokes.iced: designated_revocation[39m
[32m✔ revokes.iced: designated_revocation2[39m
[32m✔ revokes.iced: test_designated_bad_sig[39m
[32m✔ revokes.iced: test_designated_bad_revoker[39m
[32m✔ revokes.iced: key_without_unverified_revocations[39m
[32m✔ revokes.iced: test_misplaced_revocation[39m
[32m  ☑ test s_4_1[39m
[32m  ☑ test s_4_2[39m
[32m  ☑ test s_4_3[39m
[32m  ☑ test s_4_4[39m
[32m  ☑ test s_4_5[39m
[32m  ☑ test s_4_6[39m
[32m✔ rfc3394.iced: run_test_vectors[39m
[32m✔ rsa_8192.iced: import_key[39m
[32m✔ rsa_8192.iced: encrypt[39m
[32m✔ rsa_8192.iced: decrypt[39m
[32m  ☑ generated 512 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m  ☑ did encrypt/decrypt #8[39m
[32m  ☑ did encrypt/decrypt #9[39m
[32m✔ rsa.iced: run_test_512[39m
[32m  ☑ generated 1024 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m  ☑ did encrypt/decrypt #8[39m
[32m  ☑ did encrypt/decrypt #9[39m
[32m✔ rsa.iced: run_test_1024[39m
[32m  ☑ generated 2048 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m  ☑ did encrypt/decrypt #6[39m
[32m  ☑ did encrypt/decrypt #7[39m
[32m✔ rsa.iced: run_test_2048[39m
[32m  ☑ generated 3072 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m  ☑ did encrypt/decrypt #5[39m
[32m✔ rsa.iced: run_test_3072[39m
[32m  ☑ generated 4096 bit key![39m
[32m  ☑ did encrypt/decrypt #0[39m
[32m  ☑ did encrypt/decrypt #1[39m
[32m  ☑ did encrypt/decrypt #2[39m
[32m  ☑ did encrypt/decrypt #3[39m
[32m  ☑ did encrypt/decrypt #4[39m
[32m✔ rsa.iced: run_test_4096[39m
[32m✔ secret_subkeys_incomplete.iced: load_pub[39m
[32m✔ secret_subkeys_incomplete.iced: load_priv[39m
[32m✔ secret_subkeys_incomplete.iced: unlock_priv[39m
[32m✔ secret_subkeys_incomplete.iced: merge[39m
[32m✔ secret_subkeys_incomplete.iced: unlock_merged[39m
[32m✔ secret_subkeys_incomplete.iced: sign[39m
[32m✔ secret_subkeys_incomplete.iced: encrypt[39m
[32m✔ secret_subkeys_incomplete.iced: decrypt[39m
[32m✔ secret_subkeys.iced: load_pub[39m
[32m✔ secret_subkeys.iced: load_priv[39m
[32m✔ secret_subkeys.iced: unlock_priv[39m
[32m✔ secret_subkeys.iced: merge[39m
[32m✔ secret_subkeys.iced: unlock_merged[39m
[32m✔ secret_subkeys.iced: sign[39m
[32m✔ secret_subkeys.iced: verify[39m
[32m✔ secret_subkeys.iced: encrypt_and_sign[39m
[32m✔ secret_subkeys.iced: decrypt_and_verify[39m
[32m✔ secret_subkeys.iced: encrypt_private_to_server[39m
[32m  ☑ unlocked[39m
[32m  ☑ decryption still worked[39m
[32m✔ secret_subkeys.iced: decrypt_private_from_sever[39m
[32m✔ sig_gocli.iced: verify[39m
[32m✔ sig_v3.iced: verify[39m
[32m  ☑ SHA384[39m
[32m  ☑ SHA224[39m
[32m  ☑ SHA256[39m
[32m  ☑ SHA1[39m
[32m  ☑ SHA512[39m
[32m✔ sig_various_hashes.iced: verify[39m
[32m✔ sigeng.iced: generate[39m
[32m✔ sigeng.iced: box[39m
[32m✔ sigeng.iced: unbox[39m
[32m✔ sigeng.iced: pgp_get_unverified_payload[39m
[32m✔ sigeng.iced: kb_generate[39m
[32m✔ sigeng.iced: kb_box[39m
[32m✔ sigeng.iced: kb_unbox[39m
[32m✔ sigeng.iced: kb_get_unverified_payload[39m
[32m✔ sigeng.iced: pgp_unbox_bcrypt[39m
[32m✔ sigeng.iced: sigeng_verify_encrypt_msg[39m
[32m✔ sigeng.iced: kb_generate_with_prefix[39m
[32m✔ sigeng.iced: assert_pgp_hash[39m
[32m✔ subkey_expiration.iced: key_1[39m
[32m✔ subkey_multiple_sigs.iced: load_multi_binding_key_and_verify[39m
[31m- Assertion failed: no error (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:64:5)[39m
[31m- Assertion failed: was signed! (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:65:5)[39m
[31m- In right message cae back: undefined != "hello cross signed world" (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:66:5)[39m
[31m[1m✖ TESTFAIL subkey_multiple_sigs.iced: load_with_only_right_sig_then_verify[22m[39m
[31m- Assertion failed: expecting a warning (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:80:5)[39m
[31m- Assertion failed: found the right warning (at /data/js-variants/multee/Clients/deep-equal/kbpgp/test/files/subkey_multiple_sigs.iced:81:5)[39m
[31m[1m✖ TESTFAIL subkey_multiple_sigs.iced: do_not_merge_crosscertify[22m[39m
[32m✔ subkey_no_cross_sig.iced: test_subkey_without_cross_sig[39m
[32m✔ subkey_no_cross_sig.iced: test_subkey_with_cross_sig[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys_winner_did_not_expire[39m
[32m✔ subkey_preference.iced: test_multiple_encryption_subkeys_winner_latest[39m
[32m  ☑ loaded key[39m
[32m✔ subpacket33.iced: test_subpacket33[39m
[32m✔ ukm.iced: test_kb[39m
[32m✔ ukm.iced: test_pgp[39m
[32m✔ unbox_cant_verify.iced: run[39m
[32m✔ userid.iced: test_parse[39m
[32m✔ userid.iced: test_make[39m
[32m  ☑ Sig 0 checked out[39m
[32m  ☑ Sig 1 checked out[39m
[32m  ☑ Sig 2 checked out[39m
[32m  ☑ Sig 3 checked out[39m
[32m  ☑ Sig 4 checked out[39m
[32m  ☑ Sig 5 checked out[39m
[32m  ☑ Sig 6 checked out[39m
[32m  ☑ Sig 7 checked out[39m
[32m  ☑ Sig 8 checked out[39m
[32m✔ verify_clearsign_sigs.iced: verify_good_sigs[39m
[32m  ☑ Sig 0 failed[39m
[32m  ☑ Sig 1 failed[39m
[32m  ☑ Sig 2 failed[39m
[32m  ☑ Sig 3 failed[39m
[32m  ☑ Sig 4 failed[39m
[32m  ☑ Sig 5 failed[39m
[32m✔ verify_clearsign_sigs.iced: reject_bad_sigs[39m
[32m✔ verify_clearsign_sigs.iced: reject_expired_keys[39m
[32m  ☑ Sig toonces / good checked out[39m
[32m  ☑ Sig krohn / good checked out[39m
[32m✔ verify_detached_sigs.iced: verify_good_sigs_all_at_once[39m
[32m  ☑ Sig toonces failed[39m
[32m  ☑ Sig krohn failed[39m
[32m✔ verify_detached_sigs.iced: nix_bad_sigs_all_at_once[39m
[32m  ☑ Sig toonces checked out[39m
[32m  ☑ Sig krohn checked out[39m
[32m✔ verify_detached_sigs.iced: verify_good_sigs_streaming[39m
[32m  ☑ Sig toonces failed[39m
[32m  ☑ Sig krohn failed[39m
[32m✔ verify_detached_sigs.iced: nix_bad_sigs_streaming[39m
[32m  ☑ Sig checked out[39m
[32m  ☑ Right error message beamed back from 2099: PGP key c984c3f57f5725fb8d3f8ec2f315783b68938a90 expired at 1538854906 but we checked for time 4090003200[39m
[32m✔ verify_detached_sigs.iced: verify_expired_detached[39m
[32m  ☑ loaded key[39m
[32m✔ verify_sigs.iced: verify_peter_bance[39m
[32m✔ zip.iced: unzip[39m
[31m[1mTests: 282/284 passed[22m[39m
[31mFailed in files (pass as arguments to runner to retry):[39m
  subkey_multiple_sigs.iced

----------------------run test done----------------------
----------------------client react-mapbox-gl of deep-equal----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> react-mapbox-gl@5.1.1 test
> jest

npm uninstall

removed 1 package, and audited 613 packages in 7s

1 package is looking for funding
  run `npm fund` for details

38 vulnerabilities (20 moderate, 14 high, 4 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> react-mapbox-gl@5.1.1 test
> jest

----------------------run test done----------------------
----------------------client tape of deep-equal----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> tape@5.5.3 pretest
> npm run lint


> tape@5.5.3 prelint
> npm-run-posix-or-windows eclint


> tape@5.5.3 eclint
> FILES="$(npm run --silent prelint:files)" eclint check "${FILES:=package.json}"


> tape@5.5.3 lint
> eslint --ext .js,.cjs,.mjs . bin/*


/data/js-variants/multee/Clients/deep-equal/tape/bin/tape
   9:28  warning  Expected object keys to be in natural insensitive ascending order. 'i' should be before 'r'             sort-keys
  11:5   warning  Expected object keys to be in natural insensitive ascending order. 'boolean' should be before 'string'  sort-keys
  12:23  warning  Expected object keys to be in natural insensitive ascending order. 'i' should be before 'r'             sort-keys
  73:22  warning  'importFiles' was used before it was defined                                                            no-use-before-define
  78:1   warning  Expected a function expression                                                                          func-style

/data/js-variants/multee/Clients/deep-equal/tape/index.js
   19:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   27:19  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   33:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   40:13  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   40:42  warning  Expected object keys to be in natural insensitive ascending order. 'objectMode' should be before 'stream'  sort-keys
   47:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   51:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   54:27  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   58:5   warning  Expected a function expression                                                                             func-style
   59:22  warning  Assignment to function parameter 'opts'                                                                    no-param-reassign
   60:9   warning  Assignment to property of function parameter 'opts'                                                        no-param-reassign
   61:35  warning  'createExitHarness' was used before it was defined                                                         no-use-before-define
   66:1   warning  Expected a function expression                                                                             func-style
   68:19  warning  'createHarness' was used before it was defined                                                             no-use-before-define
   76:23  warning  'run' was used before it was defined                                                                       no-use-before-define
   78:9   warning  'run' was used before it was defined                                                                       no-use-before-define
   91:24  warning  Unexpected dangling '_' in '_only'                                                                         no-underscore-dangle
   91:24  warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
   92:33  warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
   93:25  warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
   95:21  warning  Unexpected dangling '_' in '_exit'                                                                         no-underscore-dangle
  102:30  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  107:5   warning  Expected a function expression                                                                             func-style
  115:45  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  121:32  warning  'createHarness' was used before it was defined                                                             no-use-before-define
  126:1   warning  Expected a function expression                                                                             func-style
  134:9   warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
  141:66  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  148:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  150:5   warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
  173:5   warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/lib/default_stream.js
   8:26  warning  'write' was used before it was defined  no-use-before-define
   8:33  warning  'flush' was used before it was defined  no-use-before-define
  11:5   warning  Expected a function expression          func-style
  17:17  warning  'flush' was used before it was defined  no-use-before-define
  24:5   warning  Expected a function expression          func-style

/data/js-variants/multee/Clients/deep-equal/tape/lib/results.js
   20:18  warning  'Results' was used before it was defined                                                           no-use-before-define
   21:10  warning  'Results' was used before it was defined                                                           no-use-before-define
   23:1   warning  Expected a function expression                                                                     func-style
   27:1   warning  Expected a function expression                                                                     func-style
   33:5   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
   35:5   warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
   36:5   warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   39:34  warning  Function has too many lines (59). Maximum allowed is 50                                            max-lines-per-function
   40:18  warning  Assignment to function parameter 'opts'                                                            no-param-reassign
   47:27  warning  Assignment to function parameter 'extra'                                                           no-param-reassign
   48:22  warning  Unary operator '++' used                                                                           no-plusplus
   52:21  warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'type'  sort-keys
   53:21  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'name'    sort-keys
   54:27  warning  Unexpected dangling '_' in '_skip'                                                                 no-underscore-dangle
   55:27  warning  Unexpected dangling '_' in '_todo'                                                                 no-underscore-dangle
   67:21  warning  Assignment to property of function parameter 'res'                                                 no-param-reassign
   68:21  warning  Assignment to property of function parameter 'res'                                                 no-param-reassign
   73:45  warning  Expected object keys to be in natural insensitive ascending order. 'test' should be before 'type'  sort-keys
   80:9   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
   83:10  warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   84:9   warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   87:20  warning  Expected a conditional expression and instead saw an assignment                                    no-cond-assign
   87:24  warning  'getNextTest' was used before it was defined                                                       no-use-before-define
  104:5   warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  109:5   warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  112:1   warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  114:32  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  117:13  warning  Unexpected dangling '_' in '_skip'                                                                 no-underscore-dangle
  119:20  warning  Unexpected dangling '_' in '_todo'                                                                 no-underscore-dangle
  130:15  warning  'encodeResult' was used before it was defined                                                      no-use-before-define
  131:9   warning  Unary operator '++' used                                                                           no-plusplus
  134:13  warning  Unary operator '++' used                                                                           no-plusplus
  136:13  warning  Unary operator '++' used                                                                           no-plusplus
  141:34  warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  146:24  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  148:32  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  160:5   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  163:1   warning  Expected a function expression                                                                     func-style
  163:1   warning  Function 'encodeResult' has too many statements (33). Maximum allowed is 30                        max-statements
  186:52  warning  'invalidYaml' was used before it was defined                                                       no-use-before-define
  186:71  warning  'invalidYaml' was used before it was defined                                                       no-use-before-define
  213:1   warning  Expected a function expression                                                                     func-style
  214:10  warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  220:18  warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  228:1   warning  Expected a function expression                                                                     func-style

/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
   29:18  warning  'Test' was used before it was defined                                                                              no-use-before-define
   37:10  warning  'Test' was used before it was defined                                                                              no-use-before-define
   59:9   warning  Expected object keys to be in natural insensitive ascending order. 'cb' should be before 'opts'                    sort-keys
   63:1   warning  Expected a function expression                                                                                     func-style
   74:5   warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
   75:5   warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
   76:5   warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
   77:5   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
   78:5   warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
   79:5   warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
   80:5   warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
   81:5   warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
   84:9   warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   87:13  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   89:13  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   92:9   warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
  109:10  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  109:22  warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
  110:9   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  113:9   warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
  113:23  warning  Expected '!==' and instead saw '!='                                                                                eqeqeq
  114:27  warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
  117:26  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  146:11  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  147:5   warning  Unary operator '++' used                                                                                           no-plusplus
  150:9   warning  Unary operator '++' used                                                                                           no-plusplus
  153:10  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  155:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  160:14  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  160:46  warning  Expected '===' and instead saw '=='                                                                                eqeqeq
  160:49  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  161:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  174:5   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  199:5   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  206:9   warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  210:1   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  213:10  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  213:23  warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
  213:38  warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
  217:9   warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  218:24  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  219:35  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  224:5   warning  Expected a function expression                                                                                     func-style
  225:13  warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  226:13  warning  'completeEnd' was used before it was defined                                                                       no-use-before-define
  229:18  warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  239:17  warning  Assignment to function parameter 'err'                                                                             no-param-reassign
  248:5   warning  Expected a function expression                                                                                     func-style
  250:30  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  251:14  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  251:33  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  252:13  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  254:27  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  255:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  262:1   warning  Unexpected dangling '_' in '_exit'                                                                                 no-underscore-dangle
  263:9   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  263:38  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  263:78  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  264:9   warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  266:23  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  267:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  277:1   warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  278:9   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  281:12  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  281:26  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  284:1   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  284:26  warning  Function 'assert' has too many lines (71). Maximum allowed is 50                                                   max-lines-per-function
  284:26  warning  Function 'assert' has too many statements (45). Maximum allowed is 30                                              max-statements
  288:5   warning  Assignment to function parameter 'ok'                                                                              no-param-reassign
  297:13  warning  Unary operator '++' used                                                                                           no-plusplus
  300:46  warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
  301:9   warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'todo'                  sort-keys
  303:9   warning  Expected object keys to be in natural insensitive ascending order. 'objectPrintDepth' should be before 'operator'  sort-keys
  303:27  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
  311:5   warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
  311:19  warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
  385:1   warning  File has too many lines (666). Maximum allowed is 300                                                              max-lines
  387:26  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  390:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  393:17  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  398:10  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  399:9   warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  401:23  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  402:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  402:21  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  408:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  411:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'operator'             sort-keys
  416:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  419:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'operator'             sort-keys
  424:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  428:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'skip'                 sort-keys
  433:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  436:9   warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'          sort-keys
  437:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  446:1   warning  Expected a function expression                                                                                     func-style
  447:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  450:9   warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'          sort-keys
  451:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  460:1   warning  Expected a function expression                                                                                     func-style
  461:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  464:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'operator'             sort-keys
  474:1   warning  Expected a function expression                                                                                     func-style
  478:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  481:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  494:1   warning  Expected a function expression                                                                                     func-style
  498:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  501:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  518:1   warning  Expected a function expression                                                                                     func-style
  522:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  522:20  warning  Expected '===' and instead saw '=='                                                                                eqeqeq
  525:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  535:1   warning  Expected a function expression                                                                                     func-style
  539:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  539:20  warning  Expected '!==' and instead saw '!='                                                                                eqeqeq
  542:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  551:1   warning  Expected a function expression                                                                                     func-style
  555:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  558:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  569:1   warning  Expected a function expression                                                                                     func-style
  573:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  576:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  592:1   warning  Expected a function expression                                                                                     func-style
  596:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  599:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  608:1   warning  Expected a function expression                                                                                     func-style
  612:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  615:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  623:28  warning  Function has too many lines (59). Maximum allowed is 50                                                            max-lines-per-function
  625:9   warning  Assignment to function parameter 'msg'                                                                             no-param-reassign
  626:9   warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  658:13  warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  679:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  682:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  684:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'expected'             sort-keys
  691:9   warning  Assignment to function parameter 'msg'                                                                             no-param-reassign
  692:9   warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  700:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  703:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  705:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'expected'             sort-keys
  712:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  715:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  720:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  723:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  733:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  736:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  745:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  748:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  753:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  756:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  766:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  769:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/anonymous-fn/test-wrapper.js
   6:9  warning  'setUp' was used before it was defined     no-use-before-define
   8:9  warning  'tearDown' was used before it was defined  no-use-before-define
  12:1  warning  Expected a function expression             func-style
  16:1  warning  Expected a function expression             func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-bug.js
   5:1   warning  Expected a function expression          func-style
  15:11  warning  'sleep' was used before it was defined  no-use-before-define
  27:1   warning  Expected a function expression          func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async5.js
  34:17  warning  Expected object keys to be in natural insensitive ascending order. 'path' should be before 'port'    sort-keys
  35:17  warning  Expected object keys to be in natural insensitive ascending order. 'method' should be before 'path'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/comment.js
  135:9  warning  Expected a function expression  func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/common.js
  86:9  warning  Expected object keys to be in natural insensitive ascending order. 'stderr' should be before 'stdout'    sort-keys
  87:9  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'stderr'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/create_multiple_streams.js
  28:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle
  29:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/deep-equal-failure.js
   47:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   48:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   55:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   57:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   59:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   60:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   63:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  109:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  110:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  117:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  119:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  122:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  125:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  171:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  172:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  179:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  181:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  184:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  187:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/double_end.js
  23:9   warning  Expected a function expression           func-style
  26:9   warning  Unexpected dangling '_' in '_onTimeout'  no-underscore-dangle
  31:13  warning  Unexpected dangling '_' in '_onTimeout'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/double_end/double.js
  6:5  warning  Expected a function expression  func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/end-as-callback.js
  21:13  warning  'getStackTrace' was used before it was defined       no-use-before-define
  32:9   warning  'fakeAsyncTask' was used before it was defined       no-use-before-define
  36:13  warning  'fakeAsyncWrite' was used before it was defined      no-use-before-define
  41:9   warning  'fakeAsyncTask' was used before it was defined       no-use-before-define
  45:13  warning  'fakeAsyncWriteFail' was used before it was defined  no-use-before-define
  50:1   warning  Expected a function expression                       func-style
  54:1   warning  Expected a function expression                       func-style
  58:1   warning  Expected a function expression                       func-style
  70:1   warning  Expected a function expression                       func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/exposed-harness.js
  10:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/import.js
   40:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
   75:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
   93:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
  115:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  117:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  123:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  127:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  129:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  133:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  135:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  139:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  141:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  145:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  147:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  151:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  153:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  157:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  159:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  163:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  165:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  169:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  171:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  175:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  177:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  191:1   warning  Expected a function expression                                                                         func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/no_only.js
  38:44  warning  Expected object keys to be in natural insensitive ascending order. 'NODE_TAPE_NO_ONLY_TEST' should be before 'PATH'  sort-keys
  55:44  warning  Expected object keys to be in natural insensitive ascending order. 'NODE_TAPE_NO_ONLY_TEST' should be before 'PATH'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/not-deep-equal-failure.js
   47:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   48:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   55:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   57:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   59:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   60:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   63:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  109:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  110:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  117:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  119:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  122:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  125:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  171:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  172:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  179:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  181:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  184:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  187:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/not-equal-failure.js
  45:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  46:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  53:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  55:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  57:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  58:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  61:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/objectModeWithComment.js
  24:17  warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'type'  sort-keys
  25:17  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'name'    sort-keys
  30:28  warning  Expected object keys to be in natural insensitive ascending order. 'test' should be before 'type'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/onFailure.js
  11:5  warning  Expected object keys to be in natural insensitive ascending order. 'emit' should be before 'removeListener'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/only-twice.js
  19:9  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/require.js
  30:14  warning  'tape' was used before it was defined  no-use-before-define
  62:14  warning  'tape' was used before it was defined  no-use-before-define
  69:1   warning  Expected a function expression         func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/stackTrace.js
   20:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   22:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   24:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
   25:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'operator'        sort-keys
   31:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
   50:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
   52:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
   70:5   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
   70:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
   91:5   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
   91:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  114:9   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
  114:9   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  139:9   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
  139:9   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  176:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  178:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  181:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  182:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  189:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
  209:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
  211:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  212:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  213:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  239:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  241:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  244:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  245:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  246:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  252:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
  272:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
  274:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  275:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  276:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  286:1   warning  Expected a function expression                                                                             func-style
  299:1   warning  Expected a function expression                                                                             func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/throws.js
  167:9   warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  178:17  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys
  179:17  warning  Expected object keys to be in natural insensitive ascending order. 'info' should be before 'message'  sort-keys
  181:21  warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  202:17  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys
  203:17  warning  Expected object keys to be in natural insensitive ascending order. 'foo' should be before 'message'   sort-keys
  207:21  warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  274:9   warning  Expected a function expression                                                                        func-style
  278:9   warning  Expected a function expression                                                                        func-style
  282:9   warning  Expected a function expression                                                                        func-style

✖ 397 problems (0 errors, 397 warnings)


> tape@5.5.3 test
> npm run tests-only


> tape@5.5.3 tests-only
> nyc tap 'test/*.js'

TAP version 13
# Subtest: test/add-subtest-async.js
    # parent
    ok 1 parent
    # child
    ok 2 child

    1..2
    # tests 2
    # pass  2

    # ok

ok 1 - test/add-subtest-async.js # time=1306.118ms

# Subtest: test/anonymous-fn.js
    # Subtest: inside anonymous functions
        1..1
        ok 1 - should be equivalent
    ok 1 - inside anonymous functions # time=11.799ms

    1..1
    # time=37.773ms
ok 2 - test/anonymous-fn.js # time=1183.791ms

# Subtest: test/array.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=26.683ms

    1..1
    # time=38.232ms
ok 3 - test/array.js # time=1205.825ms

# Subtest: test/async-await.js
    # Subtest: async1
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 1 - async1 # time=1157.517ms

    # Subtest: async2
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 2 - async2 # time=1117.534ms

    # Subtest: async3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 3 - async3 # time=1135.966ms

    # Subtest: async4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 4 - async4 # time=1121.239ms

    # Subtest: async5
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 5 - async5 # time=1218.627ms

    # Subtest: sync-error
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 6 - sync-error # time=1102.365ms

    # Subtest: async-error
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 7 - async-error # time=1150.483ms

    # Subtest: async-bug
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
        1..3
    ok 8 - async-bug # time=1220.784ms

    1..8
    # time=9238.454ms
ok 4 - test/async-await.js # time=9438.655ms

# Subtest: test/bound.js
    # bind works
    ok 1 should be strictly equal
    ok 2 should be deeply equivalent

    1..2
    # tests 2
    # pass  2

    # ok

ok 5 - test/bound.js # time=1185.583ms

# Subtest: test/child_ordering.js
    # parent
    # child
    ok 1 child ran
    # uncle
    ok 2 Child should run before next top-level test
    # grandparent
    ok 3 grand parent ran twice
    ok 4 grandparent ran
    # parent
    ok 5 parent ran twice
    ok 6 parent ran
    # grandchild
    ok 7 grand child ran twice
    ok 8 grand child ran
    # other parent
    ok 9 first parent runs before second parent
    ok 10 grandchild runs before second parent
    # second grandparent
    ok 11 grandparent ran
    ok 12 parent ran
    ok 13 grandchild ran
    ok 14 other grandparent ran

    1..14
    # tests 14
    # pass  14

    # ok

ok 6 - test/child_ordering.js # time=1171.558ms

# Subtest: test/circular-things.js
    # Subtest: circular test
        1..1
        ok 1 - should be equivalent
    ok 1 - circular test # time=12.164ms

    1..1
    # time=23.515ms
ok 7 - test/circular-things.js # time=1160.138ms

# Subtest: test/comment.js
    # Subtest: no comment
        1..1
        ok 1 - should be equivalent
    ok 1 - no comment # time=8.935ms

    # Subtest: missing argument
        1..1
        ok 1 - should be equal
    ok 2 - missing argument # time=1.681ms

    # Subtest: null argument
        1..1
        ok 1 - should be equal
    ok 3 - null argument # time=1.324ms

    # Subtest: whitespace
        1..1
        ok 1 - should be equal
    ok 4 - whitespace # time=2.061ms

    # Subtest: non-string types
        1..1
        ok 1 - should be equal
    ok 5 - non-string types # time=1.805ms

    # Subtest: multiline string
        1..1
        ok 1 - should be equal
    ok 6 - multiline string # time=1.551ms

    # Subtest: comment with createStream/objectMode
        1..1
        ok 1 - should be equal
    ok 7 - comment with createStream/objectMode # time=1.401ms

    1..7
    # time=990.305ms
ok 8 - test/comment.js # time=1208.522ms

# Subtest: test/common.js
    1..0
ok 9 - test/common.js # SKIP No tests found

# Subtest: test/create_multiple_streams.js
    # createMultipleStreams
    ok 1 harness test ran
    ok 2 harness test didn't fail

    1..2
    # tests 2
    # pass  2

    # ok

ok 10 - test/create_multiple_streams.js # time=1227.169ms

# Subtest: test/deep-equal-failure.js
    # Subtest: deep equal failure
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 1 - deep equal failure # time=19.806ms

    # Subtest: deep equal failure, depth 6, with option
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 2 - deep equal failure, depth 6, with option # time=5.263ms

    # Subtest: deep equal failure, depth 6, without option
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 3 - deep equal failure, depth 6, without option # time=4.135ms

    1..3
    # time=43.074ms
ok 11 - test/deep-equal-failure.js # time=1267.584ms

# Subtest: test/deep.js
    # deep strict equal
    ok 1 should not be deeply equivalent
    # deep loose equal
    ok 2 should be loosely deeply equivalent
    # requires 2 arguments
    ok 3 deepEqual: no args
    ok 4 deepEqual: one arg
    ok 5 deepLooseEqual: no args
    ok 6 deepLooseEqual: one arg
    ok 7 notDeepEqual: no args
    ok 8 notDeepEqual: one arg
    ok 9 notDeepLooseEqual: no args
    ok 10 notDeepLooseEqual: one arg
    ok 11 equal: no args
    ok 12 equal: one arg
    ok 13 notEqual: no args
    ok 14 notEqual: one arg

    1..14
    # tests 14
    # pass  14

    # ok

ok 12 - test/deep.js # time=1276.028ms

# Subtest: test/default-messages.js
    # Subtest: default messages
        1..1
        ok 1 - should be equivalent
    ok 1 - default messages # time=1160.866ms

    1..1
    # time=1173.347ms
ok 13 - test/default-messages.js # time=1379.28ms

# Subtest: test/double_end.js
    # Subtest: (unnamed test)
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 1 - (unnamed test) # time=1211.035ms

    1..1
    # time=1222.877ms
ok 14 - test/double_end.js # time=1432.252ms

# Subtest: test/edge-cases.js
    # Subtest: edge cases
        1..1
        ok 1 - should be equivalent
    ok 1 - edge cases # time=30.54ms

    1..1
    # time=51.58ms
ok 15 - test/edge-cases.js # time=1273.051ms

# Subtest: test/end-as-callback.js
    # Subtest: tape assert.end as callback
        ok 1 - should be equal
        1..1
    ok 1 - tape assert.end as callback # time=10.779ms

    1..1
    # time=954.233ms
ok 16 - test/end-as-callback.js # time=1165.731ms

# Subtest: test/error.js
    # Subtest: failures
        1..1
        ok 1 - should be equivalent
    ok 1 - failures # time=11.247ms

    1..1
    # time=22.768ms
ok 17 - test/error.js # time=1214.831ms

# Subtest: test/exit.js
    # Subtest: exit ok
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 1 - exit ok # time=1133.136ms

    # Subtest: exit fail
        1..2
        ok 1 - should be equivalent
        ok 2 - should not be equal
    ok 2 - exit fail # time=1281.958ms

    # Subtest: too few exit
        1..2
        ok 1 - should be equivalent
        ok 2 - should not be equal
    ok 3 - too few exit # time=1192.365ms

    # Subtest: more planned in a second test
        1..2
        ok 1 - should be equivalent
        ok 2 - should not be equal
    ok 4 - more planned in a second test # time=1194.656ms

    # Subtest: todo passing
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 5 - todo passing # time=1130.247ms

    # Subtest: todo failing
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 6 - todo failing # time=1117.785ms

    # Subtest: forgot to call t.end()
        1..2
        ok 1 - should be equivalent
        ok 2 - should not be equal
    ok 7 - forgot to call t.end() # time=1162.078ms

    1..7
    # time=8225.669ms
ok 18 - test/exit.js # time=8436.718ms

# Subtest: test/exposed-harness.js
    # Subtest: main harness object is exposed
        ok 1 - tape.getHarness is a function
        ok 2 - should be equal
        1..2
    ok 1 - main harness object is exposed # time=4.949ms

    1..1
    # time=10.646ms

    1..0
    # tests 0
    # pass  0

    # ok

ok 19 - test/exposed-harness.js # time=1261.357ms

# Subtest: test/fail.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=30.142ms

    1..1
    # time=42.502ms
ok 20 - test/fail.js # time=1255.918ms

# Subtest: test/has spaces.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=11.798ms

    1..1
    # time=32.642ms
ok 21 - test/has spaces.js # time=1189.162ms

# Subtest: test/ignore_from_gitignore.js
    # Subtest: Should pass with ignoring
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 1 - Should pass with ignoring # time=1226.694ms

    # Subtest: Should pass
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 2 - Should pass # time=1190.924ms

    # Subtest: Should fail when ignore file does not exist
        1..3
        ok 1 - expect truthy value
        ok 2 - should be equivalent
        ok 3 - should be equal
    ok 3 - Should fail when ignore file does not exist # time=151.883ms

    1..3
    # time=2581.841ms
ok 22 - test/ignore_from_gitignore.js # time=2799.414ms

# Subtest: test/import.js
    # Subtest: importing mjs files
        ok 1 - should be equivalent
        ok 2 - should be equal
        1..2
    ok 1 - importing mjs files # time=1187.533ms

    # Subtest: importing type: "module" files
        ok 1 - should be equivalent
        ok 2 - should be equal
        1..2
    ok 2 - importing type: "module" files # time=1172.671ms

    # Subtest: errors importing test files
        1..22
        ok 1 - should not have unhandled rejection warning: syntax error in esm file in `strict` mode`
        ok 2 - syntax error in esm file in `strict` mode` has exit code 1
        ok 3 - should have unhandled rejection warning: syntax error in esm file in `warn` mode`
        ok 4 - syntax error in esm file in `warn` mode` has exit code 1
        ok 5 - should not have unhandled rejection warning: thrown error in esm file in `strict` mode`
        ok 6 - thrown error in esm file in `strict` mode` has exit code 1
        ok 7 - should not have unhandled rejection warning: syntax error in cjs file in `strict` mode`
        ok 8 - syntax error in cjs file in `strict` mode` has exit code 1
        ok 9 - should have unhandled rejection warning: thrown errors in first imported esm file in `warn` mode`
        ok 10 - thrown errors in first imported esm file in `warn` mode` has exit code 0
        ok 11 - should not have unhandled rejection warning: thrown error in cjs file in `warn` mode`
        ok 12 - thrown error in cjs file in `warn` mode` has exit code 1
        ok 13 - should not have unhandled rejection warning: syntax error in cjs file in loading promise in `strict` mode`
        ok 14 - syntax error in cjs file in loading promise in `strict` mode` has exit code 1
        ok 15 - should not have unhandled rejection warning: syntax error in cjs file in `warn` mode`
        ok 16 - syntax error in cjs file in `warn` mode` has exit code 1
        ok 17 - should not have unhandled rejection warning: thrown error in cjs file in `strict` mode`
        ok 18 - thrown error in cjs file in `strict` mode` has exit code 1
        ok 19 - should have unhandled rejection warning: syntax errors in first imported esm file in `warn` mode`
        ok 20 - syntax errors in first imported esm file in `warn` mode` has exit code 0
        ok 21 - should have unhandled rejection warning: syntax error in cjs file in loading promise in `warn` mode`
        ok 22 - syntax error in cjs file in loading promise in `warn` mode` has exit code 1
    ok 3 - errors importing test files # time=11444.899ms

    1..3
    # time=13829.452ms
ok 23 - test/import.js # time=14031.85ms

# Subtest: test/many.js
    # many tests
    ok 1 (unnamed assert)
    ok 2 (unnamed assert)
    ok 3 (unnamed assert)
    ok 4 (unnamed assert)
    ok 5 (unnamed assert)
    ok 6 (unnamed assert)
    ok 7 (unnamed assert)
    ok 8 (unnamed assert)
    ok 9 (unnamed assert)
    ok 10 (unnamed assert)
    ok 11 (unnamed assert)
    ok 12 (unnamed assert)
    ok 13 (unnamed assert)
    ok 14 (unnamed assert)
    ok 15 (unnamed assert)
    ok 16 (unnamed assert)
    ok 17 (unnamed assert)
    ok 18 (unnamed assert)
    ok 19 (unnamed assert)
    ok 20 (unnamed assert)
    ok 21 (unnamed assert)
    ok 22 (unnamed assert)
    ok 23 (unnamed assert)
    ok 24 (unnamed assert)
    ok 25 (unnamed assert)
    ok 26 (unnamed assert)
    ok 27 (unnamed assert)
    ok 28 (unnamed assert)
    ok 29 (unnamed assert)
    ok 30 (unnamed assert)
    ok 31 (unnamed assert)
    ok 32 (unnamed assert)
    ok 33 (unnamed assert)
    ok 34 (unnamed assert)
    ok 35 (unnamed assert)
    ok 36 (unnamed assert)
    ok 37 (unnamed assert)
    ok 38 (unnamed assert)
    ok 39 (unnamed assert)
    ok 40 (unnamed assert)
    ok 41 (unnamed assert)
    ok 42 (unnamed assert)
    ok 43 (unnamed assert)
    ok 44 (unnamed assert)
    ok 45 (unnamed assert)
    ok 46 (unnamed assert)
    ok 47 (unnamed assert)
    ok 48 (unnamed assert)
    ok 49 (unnamed assert)
    ok 50 (unnamed assert)
    ok 51 (unnamed assert)
    ok 52 (unnamed assert)
    ok 53 (unnamed assert)
    ok 54 (unnamed assert)
    ok 55 (unnamed assert)
    ok 56 (unnamed assert)
    ok 57 (unnamed assert)
    ok 58 (unnamed assert)
    ok 59 (unnamed assert)
    ok 60 (unnamed assert)
    ok 61 (unnamed assert)
    ok 62 (unnamed assert)
    ok 63 (unnamed assert)
    ok 64 (unnamed assert)
    ok 65 (unnamed assert)
    ok 66 (unnamed assert)
    ok 67 (unnamed assert)
    ok 68 (unnamed assert)
    ok 69 (unnamed assert)
    ok 70 (unnamed assert)
    ok 71 (unnamed assert)
    ok 72 (unnamed assert)
    ok 73 (unnamed assert)
    ok 74 (unnamed assert)
    ok 75 (unnamed assert)
    ok 76 (unnamed assert)
    ok 77 (unnamed assert)
    ok 78 (unnamed assert)
    ok 79 (unnamed assert)
    ok 80 (unnamed assert)
    ok 81 (unnamed assert)
    ok 82 (unnamed assert)
    ok 83 (unnamed assert)
    ok 84 (unnamed assert)
    ok 85 (unnamed assert)
    ok 86 (unnamed assert)
    ok 87 (unnamed assert)
    ok 88 (unnamed assert)
    ok 89 (unnamed assert)
    ok 90 (unnamed assert)
    ok 91 (unnamed assert)
    ok 92 (unnamed assert)
    ok 93 (unnamed assert)
    ok 94 (unnamed assert)
    ok 95 (unnamed assert)
    ok 96 (unnamed assert)
    ok 97 (unnamed assert)
    ok 98 (unnamed assert)
    ok 99 (unnamed assert)
    ok 100 (unnamed assert)

    1..100
    # tests 100
    # pass  100

    # ok

ok 24 - test/many.js # time=1181.212ms

# Subtest: test/match.js
    # Subtest: match
        1..1
        ok 1 - should be equivalent
    ok 1 - match # time=15.867ms

    # Subtest: doesNotMatch
        1..1
        ok 1 - should be equivalent
    ok 2 - doesNotMatch # time=5.764ms

    1..2
    # time=41.59ms
ok 25 - test/match.js # time=1229.713ms

# Subtest: test/max_listeners.js
    # (anonymous)
    ok 1 true is truthy
    # (anonymous)
    ok 2 true is truthy
    # (anonymous)
    ok 3 true is truthy
    # (anonymous)
    ok 4 true is truthy
    # (anonymous)
    ok 5 true is truthy
    # (anonymous)
    ok 6 true is truthy
    # (anonymous)
    ok 7 true is truthy
    # (anonymous)
    ok 8 true is truthy
    # (anonymous)
    ok 9 true is truthy
    # (anonymous)
    ok 10 true is truthy
    # (anonymous)
    ok 11 true is truthy

    1..11
    # tests 11
    # pass  11

    # ok

ok 26 - test/max_listeners.js # time=1289.264ms

# Subtest: test/nested-async-plan-noend.js
    # Harness async test support
    ok 1 sync child A
    # sync child B
    # async grandchild A
    ok 2 should be truthy
    # async grandchild B
    ok 3 should be truthy
    # async child
    ok 4 sync grandchild in async child A
    # sync grandchild in async child B
    ok 5 should be truthy

    1..5
    # tests 5
    # pass  5

    # ok

ok 27 - test/nested-async-plan-noend.js # time=1444.236ms

# Subtest: test/nested-sync-noplan-noend.js
    # Subtest: nested sync test without plan or end
        1..1
        ok 1 - should be equivalent
    ok 1 - nested sync test without plan or end # time=31.694ms

    1..1
    # time=42.396ms
ok 28 - test/nested-sync-noplan-noend.js # time=1180.412ms

# Subtest: test/nested.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=180.558ms

    1..1
    # time=192.822ms
ok 29 - test/nested.js # time=1389.14ms

# Subtest: test/nested2.js
    # (anonymous)
    # setup
    ok 1 called once
    # teardown

    1..1
    # tests 1
    # pass  1

    # ok

ok 30 - test/nested2.js # time=1163.414ms

# Subtest: test/no_callback.js
    # Subtest: no callback
        1..1
        ok 1 - should be equivalent
    ok 1 - no callback # time=11.946ms

    1..1
    # time=23.186ms
ok 31 - test/no_callback.js # time=1192.77ms

# Subtest: test/no_only.js
    # Subtest: Should throw error when --no-only is passed via cli and there is a .only test
        1..3
        ok 1 - should be equivalent
        ok 2 - should match pattern provided
        ok 3 - should be equal
    ok 1 - Should throw error when --no-only is passed via cli and there is a .only test # time=1178.259ms

    # Subtest: Should throw error when NODE_TAPE_NO_ONLY_TEST is passed via envs and there is an .only test
        1..3
        ok 1 - should be equivalent
        ok 2 - should match pattern provided
        ok 3 - should be equal
    ok 2 - Should throw error when NODE_TAPE_NO_ONLY_TEST is passed via envs and there is an .only test # time=1101.082ms

    # Subtest: Should override NODE_TAPE_NO_ONLY_TEST env if --no-only is passed from cli
        1..3
        ok 1 - should be equivalent
        ok 2 - should match pattern provided
        ok 3 - should be equal
    ok 3 - Should override NODE_TAPE_NO_ONLY_TEST env if --no-only is passed from cli # time=1155.493ms

    # Subtest: Should run successfully if there is no only test
        1..3
        ok 1 - should match pattern provided
        ok 2 - should be equivalent
        ok 3 - should be equal
    ok 4 - Should run successfully if there is no only test # time=1152.041ms

    # Subtest: Should run successfully if there is an only test and no --no-only flag
        1..3
        ok 1 - should be equivalent
        ok 2 - should match pattern provided
        ok 3 - should be equal
    ok 5 - Should run successfully if there is an only test and no --no-only flag # time=1180.87ms

    1..5
    # time=5780.654ms
ok 32 - test/no_only.js # time=5986.638ms

# Subtest: test/not-deep-equal-failure.js
    # Subtest: deep equal failure
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 1 - deep equal failure # time=20.204ms

    # Subtest: not deep equal failure, depth 6, with option
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 2 - not deep equal failure, depth 6, with option # time=6.188ms

    # Subtest: not deep equal failure, depth 6, without option
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 3 - not deep equal failure, depth 6, without option # time=5.117ms

    1..3
    # time=43.907ms
ok 33 - test/not-deep-equal-failure.js # time=1228.017ms

# Subtest: test/not-equal-failure.js
    # Subtest: not equal failure
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 1 - not equal failure # time=18.672ms

    1..1
    # time=30.677ms
ok 34 - test/not-equal-failure.js # time=1196.439ms

# Subtest: test/numerics.js
    # Subtest: numerics
        1..1
        ok 1 - should be equivalent
    ok 1 - numerics # time=29.811ms

    1..1
    # time=45.75ms
ok 35 - test/numerics.js # time=1238.208ms

# Subtest: test/objectMode.js
    # Subtest: object results
        ok 1 - should be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        1..9
    ok 1 - object results # time=11.873ms

    1..1
    # time=962.159ms
ok 36 - test/objectMode.js # time=1176.911ms

# Subtest: test/objectModeWithComment.js
    # Subtest: test.comment() in objectMode
        ok 1 - should be equal
        ok 2 - should be equivalent
        1..2
    ok 1 - test.comment() in objectMode # time=8.025ms

    1..1
    # time=973.831ms
ok 37 - test/objectModeWithComment.js # time=1179.196ms

# Subtest: test/onFailure.js
    # Subtest: on failure
        1..1
        ok 1 - tape ended
    ok 1 - on failure # time=7.752ms

    1..1
    # time=994.967ms
ok 38 - test/onFailure.js # time=1203.074ms

# Subtest: test/onFinish.js
    # Subtest: on finish
        1..1
    # dummy test
        ok 1 - tape ended
    ok 1 - on finish # time=15.487ms

    1..1
    # time=1000.782ms

    1..0
    # tests 0
    # pass  0

    # ok

ok 39 - test/onFinish.js # time=1208.587ms

# Subtest: test/only-twice.js
    # Subtest: only twice error
        ok 1 - expected to throw
        1..1
    ok 1 - only twice error # time=7.299ms

    1..1
    # time=12.854ms
ok 40 - test/only-twice.js # time=1219.273ms

# Subtest: test/only.js
    # Subtest: tape only test
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        1..2
    ok 1 - tape only test # time=10.513ms

    1..1
    # time=1005.733ms
ok 41 - test/only.js # time=1225.253ms

# Subtest: test/only2.js
    # only2 test 2

    1..0
    # tests 0
    # pass  0

    # ok

ok 42 - test/only2.js # SKIP No tests found

# Subtest: test/only3.js
    # only3 test 2

    1..0
    # tests 0
    # pass  0

    # ok

ok 43 - test/only3.js # SKIP No tests found

# Subtest: test/only4.js
    # only4 duplicate test name

    1..0
    # tests 0
    # pass  0

    # ok

ok 44 - test/only4.js # SKIP No tests found

# Subtest: test/only5.js
    # only5 duplicate test name

    1..0
    # tests 0
    # pass  0

    # ok

ok 45 - test/only5.js # SKIP No tests found

# Subtest: test/order.js
    # (anonymous)
    ok 1 should be strictly equal
    # (anonymous)
    ok 2 should be strictly equal
    # (anonymous)
    ok 3 should be strictly equal

    1..3
    # tests 3
    # pass  3

    # ok

ok 46 - test/order.js # time=1275.849ms

# Subtest: test/plan_optional.js
    # plan should be optional
    ok 1 no plan here
    # no plan async
    ok 2 ok

    1..2
    # tests 2
    # pass  2

    # ok

ok 47 - test/plan_optional.js # time=1165.616ms

# Subtest: test/promise_fail.js
    # Subtest: callback returning rejected promise should cause that test (and only that test) to fail
        1..1
        ok 1 - should be equivalent
    ok 1 - callback returning rejected promise should cause that test (and only that test) to fail # time=1177.212ms

    # Subtest: subtest callback returning rejected promise should cause that subtest (and only that subtest) to fail
        1..1
        ok 1 - should be equivalent
    ok 2 - subtest callback returning rejected promise should cause that subtest (and only that subtest) to fail # time=1159.849ms

    1..2
    # time=2349.418ms
ok 48 - test/promise_fail.js # time=2555.201ms

# Subtest: test/require.js
    # Subtest: requiring a single module
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 1 - requiring a single module # time=1157.652ms

    # Subtest: requiring multiple modules
        1..2
        ok 1 - should be equivalent
        ok 2 - should be equal
    ok 2 - requiring multiple modules # time=1173.233ms

    1..2
    # time=2343.092ms
ok 49 - test/require.js # time=2553.299ms

# Subtest: test/skip_explanation.js
    # Subtest: test skip explanations
        1..1
        ok 1 - should be equivalent
    ok 1 - test skip explanations # time=20.353ms

    1..1
    # time=960.755ms
ok 50 - test/skip_explanation.js # time=1183.47ms

# Subtest: test/skip.js
    # Subtest: test SKIP comment
        1..1
        ok 1 - should be equal
    ok 1 - test SKIP comment # time=9.181ms

    # SKIP skip this
    # skip subtest
    # SKIP skip this
    1..1
    # time=15.134ms

    1..0
    # tests 0
    # pass  0

    # ok

ok 51 - test/skip.js # time=1226.773ms

# Subtest: test/stackTrace.js
    # Subtest: preserves stack trace with newlines
        1..3
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should be equivalent
    ok 1 - preserves stack trace with newlines # time=16.431ms

    # Subtest: parses function info from original stack
        1..4
        ok 1 - should be equal
        ok 2 - should match pattern provided
        ok 3 - expect truthy value
        ok 4 - expect truthy value
    ok 2 - parses function info from original stack # time=2.952ms

    # Subtest: parses function info from original stack for anonymous function
        1..4
        ok 1 - should be equal
        ok 2 - should match pattern provided
        ok 3 - expect truthy value
        ok 4 - expect truthy value
    ok 3 - parses function info from original stack for anonymous function # time=2.051ms

    # Subtest: parses function info from original stack for Promise scenario
        1..4
        ok 1 - should be equal
        ok 2 - should match pattern provided
        ok 3 - expect truthy value
        ok 4 - expect truthy value
    ok 4 - parses function info from original stack for Promise scenario # time=1.598ms

    # Subtest: parses function info from original stack for Promise scenario with anonymous function
        1..4
        ok 1 - should be equal
        ok 2 - should match pattern provided
        ok 3 - expect truthy value
        ok 4 - expect truthy value
    ok 5 - parses function info from original stack for Promise scenario with anonymous function # time=1.89ms

    # Subtest: preserves stack trace for failed assertions
        1..6
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - stack should be a stack
        ok 4 - should be equivalent
        ok 5 - should be equivalent
        ok 6 - should be equivalent
    ok 6 - preserves stack trace for failed assertions # time=6.169ms

    # Subtest: preserves stack trace for failed assertions where actual===falsy
        1..6
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - stack should be a stack
        ok 4 - should be equivalent
        ok 5 - should be equivalent
        ok 6 - should be equivalent
    ok 7 - preserves stack trace for failed assertions where actual===falsy # time=3.169ms

    1..7
    # time=48.093ms
ok 52 - test/stackTrace.js # time=1229.403ms

# Subtest: test/subcount.js
    # parent test
    # first child
    ok 1 pass first child
    # (anonymous)
    ok 2 pass second child

    1..2
    # tests 2
    # pass  2

    # ok

ok 53 - test/subcount.js # time=1161.563ms

# Subtest: test/subtest_and_async.js
    # master test
    # subtest 1
    ok 1 subtest 1 before async call
    ok 2 subtest 1 in async callback
    # subtest 2
    ok 3 subtest 2 before async call
    ok 4 subtest 2 in async callback

    1..4
    # tests 4
    # pass  4

    # ok

ok 54 - test/subtest_and_async.js # time=1133.996ms

# Subtest: test/subtest_plan.js
    # parent
    ok 1 assertion in parent
    # first child
    ok 2 pass first child
    # second child
    ok 3 first child ran first
    ok 4 pass second child

    1..4
    # tests 4
    # pass  4

    # ok

ok 55 - test/subtest_plan.js # time=1137.851ms

# Subtest: test/teardown.js
    # Subtest: teardowns
        1..1
        ok 1 - should be equivalent
    ok 1 - teardowns # time=60.781ms

    # Subtest: teardown with promise
        1..2
    # dummy test
        ok 1 - tape teardown
        ok 2 - should be equal
    ok 2 - teardown with promise # time=3.189ms

    # Subtest: teardown only runs once
        1..1
        ok 1 - should be equivalent
    ok 3 - teardown only runs once # time=2.107ms

    1..3
    # time=263.035ms

    1..0
    # tests 0
    # pass  0

    # ok

ok 56 - test/teardown.js # time=1430.333ms

# Subtest: test/throws.js
    # Subtest: failures
        1..1
        ok 1 - should be equivalent
    ok 1 - failures # time=23.022ms

    1..1
    # time=46.152ms
ok 57 - test/throws.js # time=1234.984ms

# Subtest: test/timeout.js
    # timeout
    ok 1 this should run
    # should still run
    ok 2 should be strictly equal

    1..2
    # tests 2
    # pass  2

    # ok

ok 58 - test/timeout.js # time=1224.222ms

# Subtest: test/timeoutAfter.js
    # Subtest: timeoutAfter test
        1..1
        ok 1 - should be equivalent
    ok 1 - timeoutAfter test # time=22.544ms

    # Subtest: timeoutAfter with Promises
        1..1
        ok 1 - should be equivalent
    ok 2 - timeoutAfter with Promises # time=4.79ms

    1..2
    # time=47.375ms
ok 59 - test/timeoutAfter.js # time=1266.456ms

# Subtest: test/todo_explanation.js
    # Subtest: tape todo test
        1..1
        ok 1 - should be equivalent
    ok 1 - tape todo test # time=12.829ms

    1..1
    # time=992.102ms
ok 60 - test/todo_explanation.js # time=1217.332ms

# Subtest: test/todo_single.js
    # Subtest: tape todo test
        1..1
        ok 1 - should be equivalent
    ok 1 - tape todo test # time=11.337ms

    1..1
    # time=1010.689ms
ok 61 - test/todo_single.js # time=1225.489ms

# Subtest: test/todo.js
    # Subtest: tape todo test
        1..1
        ok 1 - should be equivalent
    ok 1 - tape todo test # time=11.303ms

    1..1
    # time=999.743ms
ok 62 - test/todo.js # time=1214.542ms

# Subtest: test/too_many.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=20.748ms

    1..1
    # time=41.686ms
ok 63 - test/too_many.js # time=1233.711ms

# Subtest: test/undef.js
    # Subtest: array test
        1..1
        ok 1 - should be equivalent
    ok 1 - array test # time=13.607ms

    1..1
    # time=34.044ms
ok 64 - test/undef.js # time=1195.488ms

1..64
# time=114523.179ms

=============================== Coverage summary ===============================
Statements   : 95.29% ( 587/616 )
Branches     : 88.55% ( 317/358 )
Functions    : 95.96% ( 95/99 )
Lines        : 96.26% ( 566/588 )
================================================================================
--------------------|----------|----------|----------|----------|----------------|
File                |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
--------------------|----------|----------|----------|----------|----------------|
All files           |    95.29 |    88.55 |    95.96 |    96.26 |                |
 tape               |    94.69 |    87.93 |       92 |       98 |                |
  index.js          |    94.69 |    87.93 |       92 |       98 |          43,51 |
 tape/lib           |    95.43 |    88.67 |     97.3 |     95.9 |                |
  default_stream.js |    78.95 |       75 |      100 |    78.95 |    26,27,29,35 |
  results.js        |    98.73 |    94.74 |      100 |      100 |                |
  test.js           |     94.8 |    87.04 |    95.83 |    95.05 |... 665,674,698 |
--------------------|----------|----------|----------|----------|----------------|

> tape@5.5.3 posttest
> aud --production

found 0 vulnerabilities
npm uninstall

removed 1 package, and audited 947 packages in 9s

73 packages are looking for funding
  run `npm fund` for details

50 vulnerabilities (5 low, 22 moderate, 18 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> tape@5.5.3 pretest
> npm run lint


> tape@5.5.3 prelint
> npm-run-posix-or-windows eclint


> tape@5.5.3 eclint
> FILES="$(npm run --silent prelint:files)" eclint check "${FILES:=package.json}"


> tape@5.5.3 lint
> eslint --ext .js,.cjs,.mjs . bin/*


/data/js-variants/multee/Clients/deep-equal/tape/bin/tape
   9:28  warning  Expected object keys to be in natural insensitive ascending order. 'i' should be before 'r'             sort-keys
  11:5   warning  Expected object keys to be in natural insensitive ascending order. 'boolean' should be before 'string'  sort-keys
  12:23  warning  Expected object keys to be in natural insensitive ascending order. 'i' should be before 'r'             sort-keys
  73:22  warning  'importFiles' was used before it was defined                                                            no-use-before-define
  78:1   warning  Expected a function expression                                                                          func-style

/data/js-variants/multee/Clients/deep-equal/tape/index.js
   19:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   27:19  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   33:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   40:13  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   40:42  warning  Expected object keys to be in natural insensitive ascending order. 'objectMode' should be before 'stream'  sort-keys
   47:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   51:16  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   54:27  warning  'getHarness' was used before it was defined                                                                no-use-before-define
   58:5   warning  Expected a function expression                                                                             func-style
   59:22  warning  Assignment to function parameter 'opts'                                                                    no-param-reassign
   60:9   warning  Assignment to property of function parameter 'opts'                                                        no-param-reassign
   61:35  warning  'createExitHarness' was used before it was defined                                                         no-use-before-define
   66:1   warning  Expected a function expression                                                                             func-style
   68:19  warning  'createHarness' was used before it was defined                                                             no-use-before-define
   76:23  warning  'run' was used before it was defined                                                                       no-use-before-define
   78:9   warning  'run' was used before it was defined                                                                       no-use-before-define
   91:24  warning  Unexpected dangling '_' in '_only'                                                                         no-underscore-dangle
   91:24  warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
   92:33  warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
   93:25  warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
   95:21  warning  Unexpected dangling '_' in '_exit'                                                                         no-underscore-dangle
  102:30  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  107:5   warning  Expected a function expression                                                                             func-style
  115:45  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  121:32  warning  'createHarness' was used before it was defined                                                             no-use-before-define
  126:1   warning  Expected a function expression                                                                             func-style
  134:9   warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
  141:66  warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle
  148:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  150:5   warning  Unexpected dangling '_' in '_tests'                                                                        no-underscore-dangle
  173:5   warning  Unexpected dangling '_' in '_exitCode'                                                                     no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/lib/default_stream.js
   8:26  warning  'write' was used before it was defined  no-use-before-define
   8:33  warning  'flush' was used before it was defined  no-use-before-define
  11:5   warning  Expected a function expression          func-style
  17:17  warning  'flush' was used before it was defined  no-use-before-define
  24:5   warning  Expected a function expression          func-style

/data/js-variants/multee/Clients/deep-equal/tape/lib/results.js
   20:18  warning  'Results' was used before it was defined                                                           no-use-before-define
   21:10  warning  'Results' was used before it was defined                                                           no-use-before-define
   23:1   warning  Expected a function expression                                                                     func-style
   27:1   warning  Expected a function expression                                                                     func-style
   33:5   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
   35:5   warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
   36:5   warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   39:34  warning  Function has too many lines (59). Maximum allowed is 50                                            max-lines-per-function
   40:18  warning  Assignment to function parameter 'opts'                                                            no-param-reassign
   47:27  warning  Assignment to function parameter 'extra'                                                           no-param-reassign
   48:22  warning  Unary operator '++' used                                                                           no-plusplus
   52:21  warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'type'  sort-keys
   53:21  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'name'    sort-keys
   54:27  warning  Unexpected dangling '_' in '_skip'                                                                 no-underscore-dangle
   55:27  warning  Unexpected dangling '_' in '_todo'                                                                 no-underscore-dangle
   67:21  warning  Assignment to property of function parameter 'res'                                                 no-param-reassign
   68:21  warning  Assignment to property of function parameter 'res'                                                 no-param-reassign
   73:45  warning  Expected object keys to be in natural insensitive ascending order. 'test' should be before 'type'  sort-keys
   80:9   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
   83:10  warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   84:9   warning  Unexpected dangling '_' in '_isRunning'                                                            no-underscore-dangle
   87:20  warning  Expected a conditional expression and instead saw an assignment                                    no-cond-assign
   87:24  warning  'getNextTest' was used before it was defined                                                       no-use-before-define
  104:5   warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  109:5   warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  112:1   warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  114:32  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  117:13  warning  Unexpected dangling '_' in '_skip'                                                                 no-underscore-dangle
  119:20  warning  Unexpected dangling '_' in '_todo'                                                                 no-underscore-dangle
  130:15  warning  'encodeResult' was used before it was defined                                                      no-use-before-define
  131:9   warning  Unary operator '++' used                                                                           no-plusplus
  134:13  warning  Unary operator '++' used                                                                           no-plusplus
  136:13  warning  Unary operator '++' used                                                                           no-plusplus
  141:34  warning  Unexpected dangling '_' in '_watch'                                                                no-underscore-dangle
  146:24  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  148:32  warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  160:5   warning  Unexpected dangling '_' in '_stream'                                                               no-underscore-dangle
  163:1   warning  Expected a function expression                                                                     func-style
  163:1   warning  Function 'encodeResult' has too many statements (33). Maximum allowed is 30                        max-statements
  186:52  warning  'invalidYaml' was used before it was defined                                                       no-use-before-define
  186:71  warning  'invalidYaml' was used before it was defined                                                       no-use-before-define
  213:1   warning  Expected a function expression                                                                     func-style
  214:10  warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  220:18  warning  Unexpected dangling '_' in '_only'                                                                 no-underscore-dangle
  228:1   warning  Expected a function expression                                                                     func-style

/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
   29:18  warning  'Test' was used before it was defined                                                                              no-use-before-define
   37:10  warning  'Test' was used before it was defined                                                                              no-use-before-define
   59:9   warning  Expected object keys to be in natural insensitive ascending order. 'cb' should be before 'opts'                    sort-keys
   63:1   warning  Expected a function expression                                                                                     func-style
   74:5   warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
   75:5   warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
   76:5   warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
   77:5   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
   78:5   warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
   79:5   warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
   80:5   warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
   81:5   warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
   84:9   warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   87:13  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   89:13  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
   92:9   warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
  109:10  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  109:22  warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
  110:9   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  113:9   warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
  113:23  warning  Expected '!==' and instead saw '!='                                                                                eqeqeq
  114:27  warning  Unexpected dangling '_' in '_timeout'                                                                              no-underscore-dangle
  117:26  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  146:11  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  147:5   warning  Unary operator '++' used                                                                                           no-plusplus
  150:9   warning  Unary operator '++' used                                                                                           no-plusplus
  153:10  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  155:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  160:14  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  160:46  warning  Expected '===' and instead saw '=='                                                                                eqeqeq
  160:49  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  161:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  174:5   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  199:5   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  206:9   warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  210:1   warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  213:10  warning  Unexpected dangling '_' in '_cb'                                                                                   no-underscore-dangle
  213:23  warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
  213:38  warning  Unexpected dangling '_' in '_skip'                                                                                 no-underscore-dangle
  217:9   warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  218:24  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  219:35  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  224:5   warning  Expected a function expression                                                                                     func-style
  225:13  warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  226:13  warning  'completeEnd' was used before it was defined                                                                       no-use-before-define
  229:18  warning  Unexpected dangling '_' in '_teardown'                                                                             no-underscore-dangle
  239:17  warning  Assignment to function parameter 'err'                                                                             no-param-reassign
  248:5   warning  Expected a function expression                                                                                     func-style
  250:30  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  251:14  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  251:33  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  252:13  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  254:27  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  255:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  262:1   warning  Unexpected dangling '_' in '_exit'                                                                                 no-underscore-dangle
  263:9   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  263:38  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  263:78  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  264:9   warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  266:23  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  267:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  277:1   warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  278:9   warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  281:12  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  281:26  warning  Unexpected dangling '_' in '_progeny'                                                                              no-underscore-dangle
  284:1   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  284:26  warning  Function 'assert' has too many lines (71). Maximum allowed is 50                                                   max-lines-per-function
  284:26  warning  Function 'assert' has too many statements (45). Maximum allowed is 30                                              max-statements
  288:5   warning  Assignment to function parameter 'ok'                                                                              no-param-reassign
  297:13  warning  Unary operator '++' used                                                                                           no-plusplus
  300:46  warning  Unexpected dangling '_' in '_todo'                                                                                 no-underscore-dangle
  301:9   warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'todo'                  sort-keys
  303:9   warning  Expected object keys to be in natural insensitive ascending order. 'objectPrintDepth' should be before 'operator'  sort-keys
  303:27  warning  Unexpected dangling '_' in '_objectPrintDepth'                                                                     no-underscore-dangle
  311:5   warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
  311:19  warning  Unexpected dangling '_' in '_ok'                                                                                   no-underscore-dangle
  385:1   warning  File has too many lines (666). Maximum allowed is 300                                                              max-lines
  387:26  warning  Unexpected dangling '_' in '_pendingAsserts'                                                                       no-underscore-dangle
  390:13  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  393:17  warning  Unexpected dangling '_' in '_end'                                                                                  no-underscore-dangle
  398:10  warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  399:9   warning  Unexpected dangling '_' in '_planError'                                                                            no-underscore-dangle
  401:23  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  402:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  402:21  warning  Unexpected dangling '_' in '_plan'                                                                                 no-underscore-dangle
  408:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  411:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'operator'             sort-keys
  416:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  419:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'operator'             sort-keys
  424:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  428:9   warning  Expected object keys to be in natural insensitive ascending order. 'extra' should be before 'skip'                 sort-keys
  433:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  436:9   warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'          sort-keys
  437:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  446:1   warning  Expected a function expression                                                                                     func-style
  447:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  450:9   warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'          sort-keys
  451:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'            sort-keys
  460:1   warning  Expected a function expression                                                                                     func-style
  461:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  464:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'operator'             sort-keys
  474:1   warning  Expected a function expression                                                                                     func-style
  478:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  481:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  494:1   warning  Expected a function expression                                                                                     func-style
  498:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  501:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  518:1   warning  Expected a function expression                                                                                     func-style
  522:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  522:20  warning  Expected '===' and instead saw '=='                                                                                eqeqeq
  525:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  535:1   warning  Expected a function expression                                                                                     func-style
  539:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  539:20  warning  Expected '!==' and instead saw '!='                                                                                eqeqeq
  542:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  551:1   warning  Expected a function expression                                                                                     func-style
  555:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  558:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  569:1   warning  Expected a function expression                                                                                     func-style
  573:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  576:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  592:1   warning  Expected a function expression                                                                                     func-style
  596:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  599:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  608:1   warning  Expected a function expression                                                                                     func-style
  612:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  615:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  623:28  warning  Function has too many lines (59). Maximum allowed is 50                                                            max-lines-per-function
  625:9   warning  Assignment to function parameter 'msg'                                                                             no-param-reassign
  626:9   warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  658:13  warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  679:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  682:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  684:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'expected'             sort-keys
  691:9   warning  Assignment to function parameter 'msg'                                                                             no-param-reassign
  692:9   warning  Assignment to function parameter 'expected'                                                                        no-param-reassign
  700:5   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  703:9   warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  705:9   warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'expected'             sort-keys
  712:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  715:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  720:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  723:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  733:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  736:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  745:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  748:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  753:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  756:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys
  766:9   warning  Unexpected dangling '_' in '_assert'                                                                               no-underscore-dangle
  769:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'operator'            sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/anonymous-fn/test-wrapper.js
   6:9  warning  'setUp' was used before it was defined     no-use-before-define
   8:9  warning  'tearDown' was used before it was defined  no-use-before-define
  12:1  warning  Expected a function expression             func-style
  16:1  warning  Expected a function expression             func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-bug.js
   5:1   warning  Expected a function expression          func-style
  15:11  warning  'sleep' was used before it was defined  no-use-before-define
  27:1   warning  Expected a function expression          func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async5.js
  34:17  warning  Expected object keys to be in natural insensitive ascending order. 'path' should be before 'port'    sort-keys
  35:17  warning  Expected object keys to be in natural insensitive ascending order. 'method' should be before 'path'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/comment.js
  135:9  warning  Expected a function expression  func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/common.js
  86:9  warning  Expected object keys to be in natural insensitive ascending order. 'stderr' should be before 'stdout'    sort-keys
  87:9  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'stderr'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/create_multiple_streams.js
  28:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle
  29:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/deep-equal-failure.js
   47:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   48:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   55:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   57:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   59:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   60:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   63:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  109:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  110:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  117:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  119:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  122:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  125:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  171:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  172:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  179:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  181:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  184:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  187:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/double_end.js
  23:9   warning  Expected a function expression           func-style
  26:9   warning  Unexpected dangling '_' in '_onTimeout'  no-underscore-dangle
  31:13  warning  Unexpected dangling '_' in '_onTimeout'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/double_end/double.js
  6:5  warning  Expected a function expression  func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/end-as-callback.js
  21:13  warning  'getStackTrace' was used before it was defined       no-use-before-define
  32:9   warning  'fakeAsyncTask' was used before it was defined       no-use-before-define
  36:13  warning  'fakeAsyncWrite' was used before it was defined      no-use-before-define
  41:9   warning  'fakeAsyncTask' was used before it was defined       no-use-before-define
  45:13  warning  'fakeAsyncWriteFail' was used before it was defined  no-use-before-define
  50:1   warning  Expected a function expression                       func-style
  54:1   warning  Expected a function expression                       func-style
  58:1   warning  Expected a function expression                       func-style
  70:1   warning  Expected a function expression                       func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/exposed-harness.js
  10:18  warning  Unexpected dangling '_' in '_results'  no-underscore-dangle

/data/js-variants/multee/Clients/deep-equal/tape/test/import.js
   40:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
   75:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
   93:22  warning  'tape' was used before it was defined                                                                  no-use-before-define
  115:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  117:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  123:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  127:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  129:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  133:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  135:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  139:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  141:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  145:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  147:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  151:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  153:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  157:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  159:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  163:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  165:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  169:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  171:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  175:17  warning  Expected object keys to be in natural insensitive ascending order. 'error' should be before 'files'    sort-keys
  177:17  warning  Expected object keys to be in natural insensitive ascending order. 'exitCode' should be before 'mode'  sort-keys
  191:1   warning  Expected a function expression                                                                         func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/no_only.js
  38:44  warning  Expected object keys to be in natural insensitive ascending order. 'NODE_TAPE_NO_ONLY_TEST' should be before 'PATH'  sort-keys
  55:44  warning  Expected object keys to be in natural insensitive ascending order. 'NODE_TAPE_NO_ONLY_TEST' should be before 'PATH'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/not-deep-equal-failure.js
   47:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   48:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   55:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   57:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   59:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
   60:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
   63:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  109:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  110:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  117:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  119:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  121:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  122:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  125:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys
  171:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  172:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  179:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  181:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  184:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  187:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/not-equal-failure.js
  45:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  46:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  53:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  55:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  57:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  58:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  61:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'stack'           sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/objectModeWithComment.js
  24:17  warning  Expected object keys to be in natural insensitive ascending order. 'name' should be before 'type'  sort-keys
  25:17  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'name'    sort-keys
  30:28  warning  Expected object keys to be in natural insensitive ascending order. 'test' should be before 'type'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/onFailure.js
  11:5  warning  Expected object keys to be in natural insensitive ascending order. 'emit' should be before 'removeListener'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/only-twice.js
  19:9  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys

/data/js-variants/multee/Clients/deep-equal/tape/test/require.js
  30:14  warning  'tape' was used before it was defined  no-use-before-define
  62:14  warning  'tape' was used before it was defined  no-use-before-define
  69:1   warning  Expected a function expression         func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/stackTrace.js
   20:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
   22:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
   24:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
   25:17  warning  Expected object keys to be in natural insensitive ascending order. 'at' should be before 'operator'        sort-keys
   31:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
   50:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
   52:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
   70:5   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
   70:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
   91:5   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
   91:5   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  114:9   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
  114:9   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  139:9   warning  Unexpected dangling '_' in '_watch'                                                                        no-underscore-dangle
  139:9   warning  Unexpected dangling '_' in '_results'                                                                      no-underscore-dangle
  176:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  178:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  181:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  182:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  183:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  189:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
  209:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
  211:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  212:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  213:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  239:13  warning  Expected object keys to be in natural insensitive ascending order. 'id' should be before 'ok'              sort-keys
  241:13  warning  Expected object keys to be in natural insensitive ascending order. 'diag' should be before 'name'          sort-keys
  244:17  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  245:17  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  246:17  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  252:28  warning  'stripAt' was used before it was defined                                                                   no-use-before-define
  272:22  warning  'getDiag' was used before it was defined                                                                   no-use-before-define
  274:13  warning  Expected object keys to be in natural insensitive ascending order. 'operator' should be before 'stack'     sort-keys
  275:13  warning  Expected object keys to be in natural insensitive ascending order. 'expected' should be before 'operator'  sort-keys
  276:13  warning  Expected object keys to be in natural insensitive ascending order. 'actual' should be before 'expected'    sort-keys
  286:1   warning  Expected a function expression                                                                             func-style
  299:1   warning  Expected a function expression                                                                             func-style

/data/js-variants/multee/Clients/deep-equal/tape/test/throws.js
  167:9   warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  178:17  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys
  179:17  warning  Expected object keys to be in natural insensitive ascending order. 'info' should be before 'message'  sort-keys
  181:21  warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  202:17  warning  Expected object keys to be in natural insensitive ascending order. 'message' should be before 'name'  sort-keys
  203:17  warning  Expected object keys to be in natural insensitive ascending order. 'foo' should be before 'message'   sort-keys
  207:21  warning  Expected object keys to be in natural insensitive ascending order. 'baz' should be before 'nested'    sort-keys
  274:9   warning  Expected a function expression                                                                        func-style
  278:9   warning  Expected a function expression                                                                        func-style
  282:9   warning  Expected a function expression                                                                        func-style

✖ 397 problems (0 errors, 397 warnings)


> tape@5.5.3 test
> npm run tests-only


> tape@5.5.3 tests-only
> nyc tap 'test/*.js'

TAP version 13
# Subtest: test/add-subtest-async.js
    1..0
not ok 1 - test/add-subtest-async.js # time=942.533ms
  ---
  timeout: 30000
  file: test/add-subtest-async.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/add-subtest-async.js
  ...

# Subtest: test/anonymous-fn.js
    1..0
not ok 2 - test/anonymous-fn.js # time=1009.448ms
  ---
  timeout: 30000
  file: test/anonymous-fn.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/anonymous-fn.js
  ...

# Subtest: test/array.js
    1..0
not ok 3 - test/array.js # time=1011.985ms
  ---
  timeout: 30000
  file: test/array.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/array.js
  ...

# Subtest: test/async-await.js
    # Subtest: async1
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async1'
            - ok 1 before await
            - ok 2 after await
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  2'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 26
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:26:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.deepEqual(stripFullStack(r.stdout.toString('utf8')), [
          ...
        not ok 2 - should be equivalent
          ---
          found: 1
          wanted: 0
          at:
            line: 40
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:40:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.exitCode, 0);
          ...
        not ok 3 - should be equivalent
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async1.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async1.js'
              ]
            }
          wanted: ''
          at:
            line: 41
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:41:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.stderr.toString('utf8'), '');
          ...
        1..3
        # failed 3 of 3 tests
    not ok 1 - async1 # time=955.462ms
      ---
      at:
        line: 24
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 0
        ok: false
        fail: 3
        time: 955.462
      source: |
        tap.test('async1', function (t) {
      ...

    # Subtest: async2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async2'
            - ok 1 before await
            - not ok 2 after await
            - '  ---'
            - '    operator: ok'
            - '    expected: true'
            - '    actual:   false'
            - '    at: Test.myTest ($TEST/async-await/async2.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: after await'
            - '          [... stack stripped ...]'
            - '          at Test.myTest ($TEST/async-await/async2.js:$LINE:$COL)'
            - '  ...'
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  1'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 53
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:53:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.deepEqual(stripFullStack(lines.join('\n')), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async2.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async2.js'
              ]
            }
          wanted: ''
          at:
            line: 77
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:77:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.stderr.toString('utf8'), '');
          ...
        1..3
        # failed 2 of 3 tests
    not ok 2 - async2 # time=1001.616ms
      ---
      at:
        line: 46
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 1001.616
      source: |
        tap.test('async2', function (t) {
      ...

    # Subtest: async3
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async3'
            - ok 1 before await
            - ok 2 after await
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  2'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 84
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:84:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.deepEqual(stripFullStack(r.stdout.toString('utf8')), [
          ...
        not ok 2 - should be equivalent
          ---
          found: 1
          wanted: 0
          at:
            line: 98
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:98:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.exitCode, 0);
          ...
        not ok 3 - should be equivalent
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async3.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async3.js'
              ]
            }
          wanted: ''
          at:
            line: 99
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:99:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.stderr.toString('utf8'), '');
          ...
        1..3
        # failed 3 of 3 tests
    not ok 3 - async3 # time=962.768ms
      ---
      at:
        line: 82
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 0
        ok: false
        fail: 3
        time: 962.768
      source: |
        tap.test('async3', function (t) {
      ...

    # Subtest: async4
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async4'
            - ok 1 before await
            - 'not ok 2 Error: oops'
            - '  ---'
            - '    operator: error'
            - '    at: Test.myTest ($TEST/async-await/async4.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: oops'
            - '          at Timeout.myTimeout [as _onTimeout] ($TEST/async-await/async4.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  1'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 106
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:106:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.deepEqual(stripFullStack(r.stdout.toString('utf8')), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async4.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async4.js'
              ]
            }
          wanted: ''
          at:
            line: 128
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:128:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.stderr.toString('utf8'), '');
          ...
        1..3
        # failed 2 of 3 tests
    not ok 4 - async4 # time=1019.494ms
      ---
      at:
        line: 104
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 1019.494
      source: |
        tap.test('async4', function (t) {
      ...

    # Subtest: async5
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async5'
            - ok 1 before server
            - ok 2 after server
            - ok 3 before request
            - ok 4 after request
            - ok 5 res.statusCode is 200
            - 'not ok 6 .end() already called: mockDb.state is new'
            - '  ---'
            - '    operator: fail'
            - '    at: Timeout._onTimeout ($TEST/async-await/async5.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: .end() already called: mockDb.state is new'
            - '          [... stack stripped ...]'
            - '          at Timeout._onTimeout ($TEST/async-await/async5.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - 'not ok 7 .end() already called: error on close'
            - '  ---'
            - '    operator: fail'
            - '    at: Server.<anonymous> ($TEST/async-await/async5.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: .end() already called: error on close'
            - '          [... stack stripped ...]'
            - '          at Server.<anonymous> ($TEST/async-await/async5.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - not ok 8 .end() already called
            - '  ---'
            - '    operator: fail'
            - '    at: Server.<anonymous> ($TEST/async-await/async5.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: .end() already called'
            - '          [... stack stripped ...]'
            - '          at Server.<anonymous> ($TEST/async-await/async5.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..8
            - '# tests 8'
            - '# pass  5'
            - '# fail  3'
            - ''
            - ''
          at:
            line: 135
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:135:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stripFullStack(r.stdout.toString('utf8')), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async5.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async5.js'
              ]
            }
          wanted: ''
          at:
            line: 182
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:182:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(r.stderr.toString('utf8'), '');
          ...
        1..3
        # failed 2 of 3 tests
    not ok 5 - async5 # time=1013.881ms
      ---
      at:
        line: 133
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 1013.881
      source: |
        tap.test('async5', function (t) {
      ...

    # Subtest: sync-error
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# sync-error'
            - ok 1 before throw
            - ''
          at:
            line: 189
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:189:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stripFullStack(r.stdout.toString('utf8')), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found:
            - 'node:internal/modules/cjs/loader:959'
            - '  throw err;'
            - '  ^'
            - ''
            - 'Error: Cannot find module ''deep-equal'''
            - 'Require stack:'
            - '- $TAPE/lib/test.js'
            - '- $TAPE/index.js'
            - '- $TEST/async-await/sync-error.js'
            - '    at Object.<anonymous> ($TAPE/lib/test.js:$LINE:$COL)'
            - '    at Module.replacementCompile ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)'
            - '    at module.exports ($TAPE/node_modules/nyc/node_modules/default-require-extensions/js.js:$LINE:$COL)'
            - '    at Object.<anonymous> ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)'
            - '    at Module.load (node:internal/modules/cjs/loader:$LINE:$COL) {'
            - '  code: ''MODULE_NOT_FOUND'','
            - '  requireStack: ['
            - '    ''$TAPE/lib/test.js'','
            - '    ''$TAPE/index.js'','
            - '    ''$TEST/async-await/sync-error.js'''
            - '  ]'
            - '}'
            - ''
          wanted:
            - '$TEST/async-await/sync-error.js:7'
            - '    throw new Error(''oopsie'');'
            - '    ^'
            - ''
            - 'Error: oopsie'
            - '    at Test.myTest ($TEST/async-await/sync-error.js:$LINE:$COL)'
            - '    at Test.bound [as _cb] ($TAPE/lib/test.js:$LINE:$COL)'
            - '    at Test.run ($TAPE/lib/test.js:$LINE:$COL)'
            - '    at Test.bound [as run] ($TAPE/lib/test.js:$LINE:$COL)'
            - ''
          at:
            line: 206
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:206:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stripFullStack(stderr), [].concat(
          ...
        1..3
        # failed 2 of 3 tests
    not ok 6 - sync-error # time=997.662ms
      ---
      at:
        line: 187
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 997.662
      source: |
        tap.test('sync-error', function (t) {
      ...

    # Subtest: async-error
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async-error'
            - ok 1 before throw
            - 'not ok 2 Error: oopsie'
            - '  ---'
            - '    operator: error'
            - '    stack: |-'
            - '      Error: oopsie'
            - '          at Test.myTest ($TEST/async-await/async-error.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  1'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 235
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:235:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stripFullStack(stdout), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found: >
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'

            Require stack:

            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

            - /data/js-variants/multee/Clients/deep-equal/tape/index.js

            -
            /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-error.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-error.js'
              ]
            }
          wanted: ''
          at:
            line: 264
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:264:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stderrLines.join('\n'), '');
          ...
        1..3
        # failed 2 of 3 tests
    not ok 7 - async-error # time=960.144ms
      ---
      at:
        line: 226
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 960.144
      source: |
        tap.test('async-error', function (t) {
      ...

    # Subtest: async-bug
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# async-error'
            - ok 1 before throw
            - ok 2 should be strictly equal
            - 'not ok 3 TypeError: Cannot read properties of null (reading ''length'')'
            - '  ---'
            - '    operator: error'
            - '    stack: |-'
            - '      TypeError: Cannot read properties of null (reading ''length'')'
            - '          at myCode ($TEST/async-await/async-bug.js:$LINE:$COL)'
            - '          at Test.myTest ($TEST/async-await/async-bug.js:$LINE:$COL)'
            - '  ...'
            - ''
            - 1..3
            - '# tests 3'
            - '# pass  2'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 278
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:278:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stripFullStack(stdout), [
          ...
        ok 2 - should be equivalent
        not ok 3 - should be equivalent
          ---
          found: >
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'

            Require stack:

            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

            - /data/js-variants/multee/Clients/deep-equal/tape/index.js

            -
            /data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-bug.js
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/test/async-await/async-bug.js'
              ]
            }
          wanted: ''
          at:
            line: 303
            column: 11
            file: test/async-await.js
          stack: |
            test/async-await.js:303:11
            ChildProcess.<anonymous> (test/common.js:102:9)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.same(stderr, '');
          ...
        1..3
        # failed 2 of 3 tests
    not ok 8 - async-bug # time=988.696ms
      ---
      at:
        line: 269
        column: 5
        file: test/async-await.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 1
        ok: false
        fail: 2
        time: 988.696
      source: |
        tap.test('async-bug', function (t) {
      ...

    1..8
    # failed 8 of 8 tests
    # time=7921.702ms
not ok 4 - test/async-await.js # time=8123.712ms
  ---
  timeout: 30000
  file: test/async-await.js
  results:
    ok: false
    count: 8
    pass: 0
    fail: 8
    plan:
      start: 1
      end: 8
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/async-await.js
  ...

# Subtest: test/bound.js
    1..0
not ok 5 - test/bound.js # time=963.951ms
  ---
  timeout: 30000
  file: test/bound.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/bound.js
  ...

# Subtest: test/child_ordering.js
    1..0
not ok 6 - test/child_ordering.js # time=953.983ms
  ---
  timeout: 30000
  file: test/child_ordering.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/child_ordering.js
  ...

# Subtest: test/circular-things.js
    1..0
not ok 7 - test/circular-things.js # time=978.92ms
  ---
  timeout: 30000
  file: test/circular-things.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/circular-things.js
  ...

# Subtest: test/comment.js
    1..0
not ok 8 - test/comment.js # time=1095.439ms
  ---
  timeout: 30000
  file: test/comment.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/comment.js
  ...

# Subtest: test/common.js
    1..0
ok 9 - test/common.js # SKIP No tests found

# Subtest: test/create_multiple_streams.js
    1..0
not ok 10 - test/create_multiple_streams.js # time=961.701ms
  ---
  timeout: 30000
  file: test/create_multiple_streams.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/create_multiple_streams.js
  ...

# Subtest: test/deep-equal-failure.js
    1..0
not ok 11 - test/deep-equal-failure.js # time=978.499ms
  ---
  timeout: 30000
  file: test/deep-equal-failure.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/deep-equal-failure.js
  ...

# Subtest: test/deep.js
    1..0
not ok 12 - test/deep.js # time=975.894ms
  ---
  timeout: 30000
  file: test/deep.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/deep.js
  ...

# Subtest: test/default-messages.js
    # Subtest: default messages
        1..1
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# default messages'
            - ok 1 should be truthy
            - ok 2 should be falsy
            - ok 3 should be strictly equal
            - ok 4 should not be strictly equal
            - ok 5 should be loosely equal
            - ok 6 should not be loosely equal
            - ok 7 should be strictly equal
            - ok 8 should not be strictly equal
            - ok 9 should be deeply equivalent
            - not ok 10 should not be deeply equivalent
            - '  ---'
            - '    operator: notDeepEqual'
            - '    expected: true'
            - '    actual:   true'
            - '    at: Test.<anonymous> ($TEST/messages/defaults.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: should not be deeply equivalent'
            - '          [... stack stripped ...]'
            - '          at Test.<anonymous> ($TEST/messages/defaults.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ok 11 should be loosely deeply equivalent
            - ok 12 should not be loosely deeply equivalent
            - ''
            - 1..12
            - '# tests 12'
            - '# pass  11'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 16
            column: 11
            file: test/default-messages.js
          stack: >
            test/default-messages.js:16:11

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        # failed 1 of 1 tests
    not ok 1 - default messages # time=1027.455ms
      ---
      at:
        line: 10
        column: 5
        file: test/default-messages.js
      results:
        plan:
          start: 1
          end: 1
        count: 1
        pass: 0
        ok: false
        fail: 1
        time: 1027.455
      source: |
        tap.test('default messages', function (t) {
      ...

    1..1
    # failed 1 of 1 tests
    # time=1042.17ms
not ok 13 - test/default-messages.js # time=1241.444ms
  ---
  timeout: 30000
  file: test/default-messages.js
  results:
    ok: false
    count: 1
    pass: 0
    fail: 1
    plan:
      start: 1
      end: 1
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/default-messages.js
  ...

# Subtest: test/double_end.js
    # Subtest: (unnamed test)
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# double end'
            - ok 1 should be strictly equal
            - not ok 2 .end() already called
            - '  ---'
            - '    operator: fail'
            - '    at: Timeout.doEnd [as _onTimeout] ($TEST/double_end/double.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: .end() already called'
            - '          [... stack stripped ...]'
            - '          at Timeout.doEnd [as _onTimeout] ($TEST/double_end/double.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  1'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 40
            column: 12
            file: test/double_end.js
          stack: >
            test/double_end.js:40:12

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            tt.same(stripped, [
          ...
        ok 2 - should be equal
        # failed 1 of 2 tests
    not ok 1 - (unnamed test) # time=962.972ms
      ---
      at:
        line: 10
        column: 1
        file: test/double_end.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 962.972
      source: |
        test(function (tt) {
      ...

    1..1
    # failed 1 of 1 tests
    # time=975.959ms
not ok 14 - test/double_end.js # time=1179.699ms
  ---
  timeout: 30000
  file: test/double_end.js
  results:
    ok: false
    count: 1
    pass: 0
    fail: 1
    plan:
      start: 1
      end: 1
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/double_end.js
  ...

# Subtest: test/edge-cases.js
    1..0
not ok 15 - test/edge-cases.js # time=987.031ms
  ---
  timeout: 30000
  file: test/edge-cases.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/edge-cases.js
  ...

# Subtest: test/end-as-callback.js
    1..0
not ok 16 - test/end-as-callback.js # time=1019.731ms
  ---
  timeout: 30000
  file: test/end-as-callback.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/end-as-callback.js
  ...

# Subtest: test/error.js
    1..0
not ok 17 - test/error.js # time=985.472ms
  ---
  timeout: 30000
  file: test/error.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/error.js
  ...

# Subtest: test/exit.js
    # Subtest: exit ok
        1..2
        not ok 1 - should be equivalent
          ---
          found: ''
          wanted: |+
            TAP version 13
            # array
            # hi
            ok 1 should be deeply equivalent
            ok 2 should be deeply equivalent
            ok 3 should be deeply equivalent
            ok 4 should be deeply equivalent
            ok 5 should be deeply equivalent

            1..5
            # tests 5
            # pass  5

            # ok

          at:
            line: 14
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:14:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(rows.toString('utf8'), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 37
            column: 11
            file: test/exit.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/exit.js:37:11)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        # failed 2 of 2 tests
    not ok 1 - exit ok # time=1011.131ms
      ---
      at:
        line: 10
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 1011.131
      source: |
        tap.test('exit ok', function (t) {
      ...

    # Subtest: exit fail
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# array'
            - ok 1 should be deeply equivalent
            - ok 2 should be deeply equivalent
            - ok 3 should be deeply equivalent
            - ok 4 should be deeply equivalent
            - not ok 5 should be deeply equivalent
            - '  ---'
            - '    operator: deepEqual'
            - '    expected: [ [ 1, 2, [ 3, 4444 ] ], [ 5, 6 ] ]'
            - '    actual:   [ [ 1, 2, [ 3, 4 ] ], [ 5, 6 ] ]'
            - '    at: <anonymous> ($TEST/exit/fail.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: should be deeply equivalent'
            - '          [... stack stripped ...]'
            - '          at $TEST/exit/fail.js:$LINE:$COL'
            - '          at eval (eval at <anonymous> ($TEST/exit/fail.js:$LINE:$COL))'
            - '          at eval (eval at <anonymous> ($TEST/exit/fail.js:$LINE:$COL))'
            - '          at Test.<anonymous> ($TEST/exit/fail.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..5
            - '# tests 5'
            - '# pass  4'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 45
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:45:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        ok 2 - should not be equal
        # failed 1 of 2 tests
    not ok 2 - exit fail # time=1032.031ms
      ---
      at:
        line: 41
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 1032.031
      source: |
        tap.test('exit fail', function (t) {
      ...

    # Subtest: too few exit
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# array'
            - ok 1 should be deeply equivalent
            - ok 2 should be deeply equivalent
            - ok 3 should be deeply equivalent
            - ok 4 should be deeply equivalent
            - ok 5 should be deeply equivalent
            - not ok 6 plan != count
            - '  ---'
            - '    operator: fail'
            - '    expected: 6'
            - '    actual:   5'
            - '    at: process.<anonymous> ($TAPE/index.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: plan != count'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..6
            - '# tests 6'
            - '# pass  5'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 88
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:88:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        ok 2 - should not be equal
        # failed 1 of 2 tests
    not ok 3 - too few exit # time=972.17ms
      ---
      at:
        line: 84
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 972.17
      source: |
        tap.test('too few exit', function (t) {
      ...

    # Subtest: more planned in a second test
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# first'
            - ok 1 should be truthy
            - '# second'
            - ok 2 should be truthy
            - not ok 3 plan != count
            - '  ---'
            - '    operator: fail'
            - '    expected: 2'
            - '    actual:   1'
            - '    at: process.<anonymous> ($TAPE/index.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: plan != count'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..3
            - '# tests 3'
            - '# pass  2'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 127
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:127:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        ok 2 - should not be equal
        # failed 1 of 2 tests
    not ok 4 - more planned in a second test # time=1022.982ms
      ---
      at:
        line: 123
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 1022.982
      source: |
        tap.test('more planned in a second test', function (t) {
      ...

    # Subtest: todo passing
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# TODO todo pass'
            - 'ok 1 should be truthy # TODO'
            - ''
            - 1..1
            - '# tests 1'
            - '# pass  1'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 164
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:164:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 182
            column: 11
            file: test/exit.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/exit.js:182:11)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        # failed 2 of 2 tests
    not ok 5 - todo passing # time=947.122ms
      ---
      at:
        line: 160
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 947.122
      source: |
        tap.test('todo passing', function (t) {
      ...

    # Subtest: todo failing
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# TODO todo fail'
            - 'not ok 1 should be truthy # TODO'
            - '  ---'
            - '    operator: ok'
            - '    expected: true'
            - '    actual:   false'
            - '    at: Test.<anonymous> ($TEST/exit/todo_fail.js:$LINE:$COL)'
            - '  ...'
            - ''
            - 1..1
            - '# tests 1'
            - '# pass  1'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 190
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:190:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 214
            column: 11
            file: test/exit.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/exit.js:214:11)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        # failed 2 of 2 tests
    not ok 6 - todo failing # time=940.513ms
      ---
      at:
        line: 186
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 940.513
      source: |
        tap.test('todo failing', function (t) {
      ...

    # Subtest: forgot to call t.end()
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# first'
            - ok 1 should be truthy
            - '# oops forgot end'
            - ok 2 should be truthy
            - 'not ok 3 test exited without ending: oops forgot end'
            - '  ---'
            - '    operator: fail'
            - '    at: process.<anonymous> ($TAPE/index.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: test exited without ending: oops forgot end'
            - '          [... stack stripped ...]'
            - '  ...'
            - ''
            - 1..3
            - '# tests 3'
            - '# pass  2'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 222
            column: 11
            file: test/exit.js
            function: tc
          stack: >
            tc (test/exit.js:222:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        ok 2 - should not be equal
        # failed 1 of 2 tests
    not ok 7 - forgot to call t.end() # time=937.973ms
      ---
      at:
        line: 218
        column: 5
        file: test/exit.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 937.973
      source: |
        tap.test('forgot to call t.end()', function (t) {
      ...

    1..7
    # failed 7 of 7 tests
    # time=6885.081ms
not ok 18 - test/exit.js # time=7099.498ms
  ---
  timeout: 30000
  file: test/exit.js
  results:
    ok: false
    count: 7
    pass: 0
    fail: 7
    plan:
      start: 1
      end: 7
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/exit.js
  ...

# Subtest: test/exposed-harness.js
    1..0
not ok 19 - test/exposed-harness.js # time=936.756ms
  ---
  timeout: 30000
  file: test/exposed-harness.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/exposed-harness.js
  ...

# Subtest: test/fail.js
    1..0
not ok 20 - test/fail.js # time=970.917ms
  ---
  timeout: 30000
  file: test/fail.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/fail.js
  ...

# Subtest: test/has spaces.js
    1..0
not ok 21 - test/has spaces.js # time=938.921ms
  ---
  timeout: 30000
  file: test/has spaces.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/has spaces.js
  ...

# Subtest: test/ignore_from_gitignore.js
    # Subtest: Should pass with ignoring
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# (anonymous)'
            - ok 1 should be truthy
            - '# (anonymous)'
            - ok 2 test/stub1
            - '# (anonymous)'
            - ok 3 test/stub2
            - '# (anonymous)'
            - ok 4 test/sub/stub1
            - '# (anonymous)'
            - ok 5 test/sub/stub2
            - '# (anonymous)'
            - ok 6 Should print
            - ''
            - 1..6
            - '# tests 6'
            - '# pass  6'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 16
            column: 12
            file: test/ignore_from_gitignore.js
            function: tc
          stack: >
            tc (test/ignore_from_gitignore.js:16:12)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            tt.same(stripFullStack(rows.toString('utf8')), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 44
            column: 12
            file: test/ignore_from_gitignore.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/ignore_from_gitignore.js:44:12)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            tt.equal(code, 0); // code 0
          ...
        # failed 2 of 2 tests
    not ok 1 - Should pass with ignoring # time=996.385ms
      ---
      at:
        line: 12
        column: 5
        file: test/ignore_from_gitignore.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 996.385
      source: >
        tap.test('Should pass with ignoring', { skip: process.platform === 'win32' },
        function (tt) {
      ...

    # Subtest: Should pass
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# (anonymous)'
            - not ok 1 Should not print
            - '  ---'
            - '    operator: fail'
            - '    at: Test.<anonymous> ($TEST/ignore/fake_node_modules/stub1.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: Should not print'
            - '          [... stack stripped ...]'
            - '          at Test.<anonymous> ($TEST/ignore/fake_node_modules/stub1.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - '# (anonymous)'
            - not ok 2 Should not print
            - '  ---'
            - '    operator: fail'
            - '    at: Test.<anonymous> ($TEST/ignore/fake_node_modules/stub2.js:$LINE:$COL)'
            - '    stack: |-'
            - '      Error: Should not print'
            - '          [... stack stripped ...]'
            - '          at Test.<anonymous> ($TEST/ignore/fake_node_modules/stub2.js:$LINE:$COL)'
            - '          [... stack stripped ...]'
            - '  ...'
            - '# (anonymous)'
            - ok 3 should be truthy
            - '# (anonymous)'
            - ok 4 test/stub1
            - '# (anonymous)'
            - ok 5 test/stub2
            - '# (anonymous)'
            - ok 6 test/sub/stub1
            - '# (anonymous)'
            - ok 7 test/sub/stub2
            - '# (anonymous)'
            - ok 8 Should print
            - ''
            - 1..8
            - '# tests 8'
            - '# pass  6'
            - '# fail  2'
            - ''
            - ''
          at:
            line: 52
            column: 12
            file: test/ignore_from_gitignore.js
            function: tc
          stack: >
            tc (test/ignore_from_gitignore.js:52:12)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            tt.same(stripFullStack(rows.toString('utf8')), [
          ...
        ok 2 - should be equal
        # failed 1 of 2 tests
    not ok 2 - Should pass # time=1030.711ms
      ---
      at:
        line: 48
        column: 5
        file: test/ignore_from_gitignore.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 1
        ok: false
        fail: 1
        time: 1030.711
      source: >
        tap.test('Should pass', { skip: process.platform === 'win32' }, function (tt)
        {
      ...

    # Subtest: Should fail when ignore file does not exist
        1..3
        ok 1 - expect truthy value
        ok 2 - should be equivalent
        ok 3 - should be equal
    ok 3 - Should fail when ignore file does not exist # time=163.969ms

    1..3
    # failed 2 of 3 tests
    # time=2205.041ms
not ok 22 - test/ignore_from_gitignore.js # time=2438.463ms
  ---
  timeout: 30000
  file: test/ignore_from_gitignore.js
  results:
    ok: false
    count: 3
    pass: 1
    fail: 2
    plan:
      start: 1
      end: 3
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/ignore_from_gitignore.js
  ...

# Subtest: test/import.js
    # Subtest: importing mjs files
        not ok 1 - should be equivalent
          ---
          found: ''
          wanted: |+
            TAP version 13
            # mjs-a
            ok 1 test ran
            # mjs-b
            ok 2 test ran after mjs-a
            # mjs-c
            ok 3 test ran after mjs-b
            # mjs-d
            ok 4 test ran after mjs-c
            # mjs-e
            ok 5 test ran after mjs-d
            # mjs-f
            ok 6 test ran after mjs-e
            # mjs-g
            ok 7 test ran after mjs-f
            # mjs-h
            ok 8 test ran after mjs-g

            1..8
            # tests 8
            # pass  8

            # ok

          at:
            line: 13
            column: 19
            file: test/import.js
            function: tc
          stack: >
            tc (test/import.js:13:19)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(rows.toString('utf8'), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 44
            column: 19
            file: test/import.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/import.js:44:19)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        1..2
        # failed 2 of 2 tests
    not ok 1 - importing mjs files # time=999.598ms
      ---
      at:
        line: 9
        column: 5
        file: test/import.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 999.598
      source: |
        tap.test('importing mjs files', function (t) {
      ...

    # Subtest: importing type: "module" files
        not ok 1 - should be equivalent
          ---
          found: ''
          wanted: |+
            TAP version 13
            # package-type-a
            ok 1 test ran
            # package-type-b
            ok 2 test ran after package-type-a
            # package-type-c
            ok 3 test ran after package-type-b

            1..3
            # tests 3
            # pass  3

            # ok

          at:
            line: 58
            column: 19
            file: test/import.js
            function: tc
          stack: >
            tc (test/import.js:58:19)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(rows.toString('utf8'), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 79
            column: 19
            file: test/import.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/import.js:79:19)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        1..2
        # failed 2 of 2 tests
    not ok 2 - importing type: "module" files # time=1019.77ms
      ---
      at:
        line: 54
        column: 5
        file: test/import.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 1019.77
      source: |
        tap.test('importing type: "module" files', function (t) {
      ...

    # Subtest: errors importing test files
        1..22
        not ok 1 - should have unhandled rejection warning: thrown errors in first imported esm file in `warn` mode`
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: UnhandledPromiseRejectionWarning
          at:
            line: 102
            column: 19
            file: test/import.js
          stack: >
            test/import.js:102:19

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: >
            t.match(rows.toString('utf8'), 'UnhandledPromiseRejectionWarning', 'should
            have unhandled rejection warning: ' + message);
          ...
        not ok 2 - thrown errors in first imported esm file in `warn` mode` has exit code 0
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 96
            column: 19
            file: test/import.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/import.js:96:19)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: >
            t.equal(code, options.exitCode, message + ' has exit code ' +
            options.exitCode);
          ...
        not ok 3 - should have unhandled rejection warning: syntax error in esm file in `warn` mode`
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: UnhandledPromiseRejectionWarning
          at:
            line: 102
            column: 19
            file: test/import.js
          stack: >
            test/import.js:102:19

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: >
            t.match(rows.toString('utf8'), 'UnhandledPromiseRejectionWarning', 'should
            have unhandled rejection warning: ' + message);
          ...
        ok 4 - syntax error in esm file in `warn` mode` has exit code 1
        ok 5 - should not have unhandled rejection warning: syntax error in cjs file in loading promise in `strict` mode`
        not ok 6 - should have unhandled rejection warning: syntax errors in first imported esm file in `warn` mode`
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: UnhandledPromiseRejectionWarning
          at:
            line: 102
            column: 19
            file: test/import.js
          stack: >
            test/import.js:102:19

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: >
            t.match(rows.toString('utf8'), 'UnhandledPromiseRejectionWarning', 'should
            have unhandled rejection warning: ' + message);
          ...
        not ok 7 - syntax errors in first imported esm file in `warn` mode` has exit code 0
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 96
            column: 19
            file: test/import.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/import.js:96:19)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: >
            t.equal(code, options.exitCode, message + ' has exit code ' +
            options.exitCode);
          ...
        ok 8 - syntax error in cjs file in loading promise in `strict` mode` has exit code 1
        ok 9 - should not have unhandled rejection warning: thrown error in esm file in `strict` mode`
        ok 10 - thrown error in esm file in `strict` mode` has exit code 1
        ok 11 - should not have unhandled rejection warning: thrown error in cjs file in `warn` mode`
        ok 12 - should not have unhandled rejection warning: thrown error in cjs file in `strict` mode`
        ok 13 - thrown error in cjs file in `strict` mode` has exit code 1
        ok 14 - thrown error in cjs file in `warn` mode` has exit code 1
        ok 15 - should not have unhandled rejection warning: syntax error in cjs file in `strict` mode`
        ok 16 - syntax error in cjs file in `strict` mode` has exit code 1
        ok 17 - should not have unhandled rejection warning: syntax error in cjs file in `warn` mode`
        ok 18 - syntax error in cjs file in `warn` mode` has exit code 1
        ok 19 - should not have unhandled rejection warning: syntax error in esm file in `strict` mode`
        ok 20 - syntax error in esm file in `strict` mode` has exit code 1
        not ok 21 - should have unhandled rejection warning: syntax error in cjs file in loading promise in `warn` mode`
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: UnhandledPromiseRejectionWarning
          at:
            line: 102
            column: 19
            file: test/import.js
          stack: >
            test/import.js:102:19

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: >
            t.match(rows.toString('utf8'), 'UnhandledPromiseRejectionWarning', 'should
            have unhandled rejection warning: ' + message);
          ...
        ok 22 - syntax error in cjs file in loading promise in `warn` mode` has exit code 1
        # failed 6 of 22 tests
    not ok 3 - errors importing test files # time=9699.091ms
      ---
      at:
        line: 89
        column: 5
        file: test/import.js
      results:
        plan:
          start: 1
          end: 22
        count: 22
        pass: 16
        ok: false
        fail: 6
        time: 9699.091
      source: |
        tap.test('errors importing test files', function (t) {
      ...

    1..3
    # failed 3 of 3 tests
    # time=11744.37ms
not ok 23 - test/import.js # time=11952.782ms
  ---
  timeout: 30000
  file: test/import.js
  results:
    ok: false
    count: 3
    pass: 0
    fail: 3
    plan:
      start: 1
      end: 3
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/import.js
  ...

# Subtest: test/many.js
    1..0
not ok 24 - test/many.js # time=1032.441ms
  ---
  timeout: 30000
  file: test/many.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/many.js
  ...

# Subtest: test/match.js
    1..0
not ok 25 - test/match.js # time=987.065ms
  ---
  timeout: 30000
  file: test/match.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/match.js
  ...

# Subtest: test/max_listeners.js
    not ok node:internal/modules/cjs/loader:959
      throw err;
      ^

    Error: Cannot find module 'deep-equal'
    Require stack:
    - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
    - /data/js-variants/multee/Clients/deep-equal/tape/index.js
    - /data/js-variants/multee/Clients/deep-equal/tape/test/max_listeners/source.js
        at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
        at Function.Module._load (node:internal/modules/cjs/loader:804:27)
        at Module.require (node:internal/modules/cjs/loader:1028:19)
        at require (node:internal/modules/cjs/helpers:102:18)
        at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
        at Module._compile (node:internal/modules/cjs/loader:1126:14)
        at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
        at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
        at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
        at Module.load (node:internal/modules/cjs/loader:1004:32) {
      code: 'MODULE_NOT_FOUND',
      requireStack: [
        '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
        '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
        '/data/js-variants/multee/Clients/deep-equal/tape/test/max_listeners/source.js'
      ]
    }

    1..0
not ok 26 - test/max_listeners.js # time=1150.756ms
  ---
  timeout: 30000
  file: test/max_listeners.js
  results:
    ok: false
    count: 1
    pass: 0
    fail: 2
    plan:
      start: 1
      end: 0
      skipAll: true
    failures:
      - tapError: 'Plan of 1..0, but test points encountered'
  command: /usr/local/bin/node
  arguments:
    - test/max_listeners.js
  ...

# Subtest: test/nested-async-plan-noend.js
    1..0
not ok 27 - test/nested-async-plan-noend.js # time=947.204ms
  ---
  timeout: 30000
  file: test/nested-async-plan-noend.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/nested-async-plan-noend.js
  ...

# Subtest: test/nested-sync-noplan-noend.js
    1..0
not ok 28 - test/nested-sync-noplan-noend.js # time=996.454ms
  ---
  timeout: 30000
  file: test/nested-sync-noplan-noend.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/nested-sync-noplan-noend.js
  ...

# Subtest: test/nested.js
    1..0
not ok 29 - test/nested.js # time=971.871ms
  ---
  timeout: 30000
  file: test/nested.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/nested.js
  ...

# Subtest: test/nested2.js
    1..0
not ok 30 - test/nested2.js # time=975.61ms
  ---
  timeout: 30000
  file: test/nested2.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/nested2.js
  ...

# Subtest: test/no_callback.js
    1..0
not ok 31 - test/no_callback.js # time=938.32ms
  ---
  timeout: 30000
  file: test/no_callback.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/no_callback.js
  ...

# Subtest: test/no_only.js
    # Subtest: Should throw error when --no-only is passed via cli and there is a .only test
        1..3
        ok 1 - should be equivalent
        not ok 2 - should match pattern provided
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - $TAPE/lib/test.js
            - $TAPE/index.js
            - $TAPE/bin/tape
                at Object.<anonymous> ($TAPE/lib/test.js:$LINE:$COL)
                at Module.replacementCompile ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at module.exports ($TAPE/node_modules/nyc/node_modules/default-require-extensions/js.js:$LINE:$COL)
                at Object.<anonymous> ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at Module.load (node:internal/modules/cjs/loader:$LINE:$COL) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '$TAPE/lib/test.js',
                '$TAPE/index.js',
                '$TAPE/bin/tape'
              ]
            }
          pattern: '/Error: `only` tests are prohibited\n/'
          at:
            line: 24
            column: 16
            file: test/no_only.js
          stack: |
            test/no_only.js:24:16
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: >
            tt.match(stripFullStack(stderr.toString('utf8')).join('\n'), /Error: `only`
            tests are prohibited\n/);
          ...
        ok 3 - should be equal
        # failed 1 of 3 tests
    not ok 1 - Should throw error when --no-only is passed via cli and there is a .only test # time=1001.091ms
      ---
      at:
        line: 14
        column: 5
        file: test/no_only.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 2
        ok: false
        fail: 1
        time: 1001.091
      source: |
        tap.test(
      ...

    # Subtest: Should throw error when NODE_TAPE_NO_ONLY_TEST is passed via envs and there is an .only test
        1..3
        ok 1 - should be equivalent
        not ok 2 - should match pattern provided
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - $TAPE/lib/test.js
            - $TAPE/index.js
            - $TAPE/bin/tape
                at Object.<anonymous> ($TAPE/lib/test.js:$LINE:$COL)
                at Module.replacementCompile ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at module.exports ($TAPE/node_modules/nyc/node_modules/default-require-extensions/js.js:$LINE:$COL)
                at Object.<anonymous> ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at Module.load (node:internal/modules/cjs/loader:$LINE:$COL) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '$TAPE/lib/test.js',
                '$TAPE/index.js',
                '$TAPE/bin/tape'
              ]
            }
          pattern: '/Error: `only` tests are prohibited\n/'
          at:
            line: 41
            column: 16
            file: test/no_only.js
          stack: |
            test/no_only.js:41:16
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: >
            tt.match(stripFullStack(stderr.toString('utf8')).join('\n'), /Error: `only`
            tests are prohibited\n/);
          ...
        ok 3 - should be equal
        # failed 1 of 3 tests
    not ok 2 - Should throw error when NODE_TAPE_NO_ONLY_TEST is passed via envs and there is an .only test # time=991.82ms
      ---
      at:
        line: 30
        column: 5
        file: test/no_only.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 2
        ok: false
        fail: 1
        time: 991.82
      source: |
        tap.test(
      ...

    # Subtest: Should override NODE_TAPE_NO_ONLY_TEST env if --no-only is passed from cli
        1..3
        ok 1 - should be equivalent
        not ok 2 - should match pattern provided
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - $TAPE/lib/test.js
            - $TAPE/index.js
            - $TAPE/bin/tape
                at Object.<anonymous> ($TAPE/lib/test.js:$LINE:$COL)
                at Module.replacementCompile ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at module.exports ($TAPE/node_modules/nyc/node_modules/default-require-extensions/js.js:$LINE:$COL)
                at Object.<anonymous> ($TAPE/node_modules/nyc/node_modules/append-transform/index.js:$LINE:$COL)
                at Module.load (node:internal/modules/cjs/loader:$LINE:$COL) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '$TAPE/lib/test.js',
                '$TAPE/index.js',
                '$TAPE/bin/tape'
              ]
            }
          pattern: '/Error: `only` tests are prohibited\n/'
          at:
            line: 58
            column: 16
            file: test/no_only.js
          stack: |
            test/no_only.js:58:16
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: >
            tt.match(stripFullStack(stderr.toString('utf8')).join('\n'), /Error: `only`
            tests are prohibited\n/);
          ...
        ok 3 - should be equal
        # failed 1 of 3 tests
    not ok 3 - Should override NODE_TAPE_NO_ONLY_TEST env if --no-only is passed from cli # time=998.019ms
      ---
      at:
        line: 47
        column: 5
        file: test/no_only.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 2
        ok: false
        fail: 1
        time: 998.019
      source: |
        tap.test(
      ...

    # Subtest: Should run successfully if there is no only test
        1..3
        not ok 1 - should match pattern provided
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: >-
            /^\s*(\(node:\d+\) ExperimentalWarning: The ESM module loader is
            experimental\.)?\s*$/
          at:
            line: 70
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:70:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: >
            tt.match(stderr.toString('utf8'), /^\s*(\(node:\d+\) ExperimentalWarning: The
            ESM module loader is experimental\.)?\s*$/);
          ...
        not ok 2 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# should pass'
            - ok 1 should be truthy
            - ''
            - 1..1
            - '# tests 1'
            - '# pass  1'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 71
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:71:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: |
            tt.same(stripFullStack(stdout.toString('utf8')), [
          ...
        not ok 3 - should be equal
          ---
          found:
            name: Error
            stack: >-
              Error: Command failed: node
              /data/js-variants/multee/Clients/deep-equal/tape/bin/tape --no-only
              "**/test-a.js"

              node:internal/modules/cjs/loader:959
                throw err;
                ^

              Error: Cannot find module 'deep-equal'

              Require stack:

              - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

              - /data/js-variants/multee/Clients/deep-equal/tape/index.js

              - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                  at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                  at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                  at Module.require (node:internal/modules/cjs/loader:1028:19)
                  at require (node:internal/modules/cjs/helpers:102:18)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                  at Module._compile (node:internal/modules/cjs/loader:1126:14)
                  at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                  at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                  at Module.load (node:internal/modules/cjs/loader:1004:32) {
                code: 'MODULE_NOT_FOUND',
                requireStack: [
                  '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
                ]
              }

                  at ChildProcess.exithandler (node:child_process:400:12)
                  at ChildProcess.emit (node:events:513:28)
                  at maybeClose (node:internal/child_process:1093:16)
                  at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
            message: >
              Command failed: node
              /data/js-variants/multee/Clients/deep-equal/tape/bin/tape --no-only
              "**/test-a.js"

              node:internal/modules/cjs/loader:959
                throw err;
                ^

              Error: Cannot find module 'deep-equal'

              Require stack:

              - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

              - /data/js-variants/multee/Clients/deep-equal/tape/index.js

              - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                  at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                  at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                  at Module.require (node:internal/modules/cjs/loader:1028:19)
                  at require (node:internal/modules/cjs/helpers:102:18)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                  at Module._compile (node:internal/modules/cjs/loader:1126:14)
                  at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                  at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                  at Module.load (node:internal/modules/cjs/loader:1004:32) {
                code: 'MODULE_NOT_FOUND',
                requireStack: [
                  '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
                ]
              }
            code: 1
            killed: false
            signal: null
            cmd: >-
              node /data/js-variants/multee/Clients/deep-equal/tape/bin/tape --no-only
              "**/test-a.js"
          wanted: null
          compare: '==='
          at:
            line: 84
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:84:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: |
            tt.equal(err, null); // code 0
          ...
        # failed 3 of 3 tests
    not ok 4 - Should run successfully if there is no only test # time=998.142ms
      ---
      at:
        line: 64
        column: 5
        file: test/no_only.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 0
        ok: false
        fail: 3
        time: 998.142
      source: |
        tap.test('Should run successfully if there is no only test', function (tt) {
      ...

    # Subtest: Should run successfully if there is an only test and no --no-only flag
        1..3
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# should pass again'
            - ok 1 should be truthy
            - ''
            - 1..1
            - '# tests 1'
            - '# pass  1'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 94
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:94:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: |
            tt.same(stripFullStack(stdout.toString('utf8')), [
          ...
        not ok 2 - should match pattern provided
          ---
          found: |
            node:internal/modules/cjs/loader:959
              throw err;
              ^

            Error: Cannot find module 'deep-equal'
            Require stack:
            - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js
            - /data/js-variants/multee/Clients/deep-equal/tape/index.js
            - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                at Module.require (node:internal/modules/cjs/loader:1028:19)
                at require (node:internal/modules/cjs/helpers:102:18)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                at Module._compile (node:internal/modules/cjs/loader:1126:14)
                at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                at Module.load (node:internal/modules/cjs/loader:1004:32) {
              code: 'MODULE_NOT_FOUND',
              requireStack: [
                '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
              ]
            }
          pattern: >-
            /^\s*(\(node:\d+\) ExperimentalWarning: The ESM module loader is
            experimental\.)?\s*$/
          at:
            line: 107
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:107:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: >
            tt.match(stderr.toString('utf8'), /^\s*(\(node:\d+\) ExperimentalWarning: The
            ESM module loader is experimental\.)?\s*$/);
          ...
        not ok 3 - should be equal
          ---
          found:
            name: Error
            stack: >-
              Error: Command failed: node
              /data/js-variants/multee/Clients/deep-equal/tape/bin/tape "**/test-b.js"

              node:internal/modules/cjs/loader:959
                throw err;
                ^

              Error: Cannot find module 'deep-equal'

              Require stack:

              - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

              - /data/js-variants/multee/Clients/deep-equal/tape/index.js

              - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                  at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                  at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                  at Module.require (node:internal/modules/cjs/loader:1028:19)
                  at require (node:internal/modules/cjs/helpers:102:18)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                  at Module._compile (node:internal/modules/cjs/loader:1126:14)
                  at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                  at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                  at Module.load (node:internal/modules/cjs/loader:1004:32) {
                code: 'MODULE_NOT_FOUND',
                requireStack: [
                  '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
                ]
              }

                  at ChildProcess.exithandler (node:child_process:400:12)
                  at ChildProcess.emit (node:events:513:28)
                  at maybeClose (node:internal/child_process:1093:16)
                  at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
            message: >
              Command failed: node
              /data/js-variants/multee/Clients/deep-equal/tape/bin/tape "**/test-b.js"

              node:internal/modules/cjs/loader:959
                throw err;
                ^

              Error: Cannot find module 'deep-equal'

              Require stack:

              - /data/js-variants/multee/Clients/deep-equal/tape/lib/test.js

              - /data/js-variants/multee/Clients/deep-equal/tape/index.js

              - /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
                  at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
                  at Function.Module._load (node:internal/modules/cjs/loader:804:27)
                  at Module.require (node:internal/modules/cjs/loader:1028:19)
                  at require (node:internal/modules/cjs/helpers:102:18)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js:1:51040)
                  at Module._compile (node:internal/modules/cjs/loader:1126:14)
                  at Module.replacementCompile (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:63:13)
                  at module.exports (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
                  at Object.<anonymous> (/data/js-variants/multee/Clients/deep-equal/tape/node_modules/nyc/node_modules/append-transform/index.js:67:4)
                  at Module.load (node:internal/modules/cjs/loader:1004:32) {
                code: 'MODULE_NOT_FOUND',
                requireStack: [
                  '/data/js-variants/multee/Clients/deep-equal/tape/lib/test.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/index.js',
                  '/data/js-variants/multee/Clients/deep-equal/tape/bin/tape'
                ]
              }
            code: 1
            killed: false
            signal: null
            cmd: >-
              node /data/js-variants/multee/Clients/deep-equal/tape/bin/tape
              "**/test-b.js"
          wanted: null
          compare: '==='
          at:
            line: 108
            column: 12
            file: test/no_only.js
          stack: |
            test/no_only.js:108:12
            ChildProcess.exithandler (node:child_process:408:5)
            ChildProcess.emit (node:events:513:28)
            maybeClose (node:internal/child_process:1093:16)
            Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)
          source: |
            tt.equal(err, null); // code 0
          ...
        # failed 3 of 3 tests
    not ok 5 - Should run successfully if there is an only test and no --no-only flag # time=1044.921ms
      ---
      at:
        line: 88
        column: 5
        file: test/no_only.js
      results:
        plan:
          start: 1
          end: 3
        count: 3
        pass: 0
        ok: false
        fail: 3
        time: 1044.921
      source: >
        tap.test('Should run successfully if there is an only test and no --no-only
        flag', function (tt) {
      ...

    1..5
    # failed 5 of 5 tests
    # time=5050.571ms
not ok 32 - test/no_only.js # time=5255.865ms
  ---
  timeout: 30000
  file: test/no_only.js
  results:
    ok: false
    count: 5
    pass: 0
    fail: 5
    plan:
      start: 1
      end: 5
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/no_only.js
  ...

# Subtest: test/not-deep-equal-failure.js
    1..0
not ok 33 - test/not-deep-equal-failure.js # time=946.781ms
  ---
  timeout: 30000
  file: test/not-deep-equal-failure.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/not-deep-equal-failure.js
  ...

# Subtest: test/not-equal-failure.js
    1..0
not ok 34 - test/not-equal-failure.js # time=1057.953ms
  ---
  timeout: 30000
  file: test/not-equal-failure.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/not-equal-failure.js
  ...

# Subtest: test/numerics.js
    1..0
not ok 35 - test/numerics.js # time=918.849ms
  ---
  timeout: 30000
  file: test/numerics.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/numerics.js
  ...

# Subtest: test/objectMode.js
    1..0
not ok 36 - test/objectMode.js # time=1023.287ms
  ---
  timeout: 30000
  file: test/objectMode.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/objectMode.js
  ...

# Subtest: test/objectModeWithComment.js
    1..0
not ok 37 - test/objectModeWithComment.js # time=997.495ms
  ---
  timeout: 30000
  file: test/objectModeWithComment.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/objectModeWithComment.js
  ...

# Subtest: test/onFailure.js
    1..0
not ok 38 - test/onFailure.js # time=1031.963ms
  ---
  timeout: 30000
  file: test/onFailure.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/onFailure.js
  ...

# Subtest: test/onFinish.js
    1..0
not ok 39 - test/onFinish.js # time=1041.814ms
  ---
  timeout: 30000
  file: test/onFinish.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/onFinish.js
  ...

# Subtest: test/only-twice.js
    1..0
not ok 40 - test/only-twice.js # time=985.463ms
  ---
  timeout: 30000
  file: test/only-twice.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only-twice.js
  ...

# Subtest: test/only.js
    1..0
not ok 41 - test/only.js # time=989.103ms
  ---
  timeout: 30000
  file: test/only.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only.js
  ...

# Subtest: test/only2.js
    1..0
not ok 42 - test/only2.js # time=998.557ms
  ---
  timeout: 30000
  file: test/only2.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only2.js
  ...

# Subtest: test/only3.js
    1..0
not ok 43 - test/only3.js # time=974.38ms
  ---
  timeout: 30000
  file: test/only3.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only3.js
  ...

# Subtest: test/only4.js
    1..0
not ok 44 - test/only4.js # time=932.668ms
  ---
  timeout: 30000
  file: test/only4.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only4.js
  ...

# Subtest: test/only5.js
    1..0
not ok 45 - test/only5.js # time=981.087ms
  ---
  timeout: 30000
  file: test/only5.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/only5.js
  ...

# Subtest: test/order.js
    1..0
not ok 46 - test/order.js # time=932.155ms
  ---
  timeout: 30000
  file: test/order.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/order.js
  ...

# Subtest: test/plan_optional.js
    1..0
not ok 47 - test/plan_optional.js # time=1027.059ms
  ---
  timeout: 30000
  file: test/plan_optional.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/plan_optional.js
  ...

# Subtest: test/promise_fail.js
    # Subtest: callback returning rejected promise should cause that test (and only that test) to fail
        1..1
        not ok 1 - should be equivalent
          ---
          found: ''
          wanted: |+
            TAP version 13
            # promise
            not ok 1 Error: rejection message
              ---
                operator: error
                stack: |-
                  Error: rejection message
                      at $TEST/promises/fail.js:$LINE:$COL
                      [... stack stripped ...]
              ...
            # after
            ok 2 should be truthy

            1..2
            # tests 2
            # pass  1
            # fail  1

          at:
            line: 35
            column: 12
            file: test/promise_fail.js
          stack: >
            test/promise_fail.js:35:12

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            tt.same(strippedString, [
          ...
        # failed 1 of 1 tests
    not ok 1 - callback returning rejected promise should cause that test (and only that test) to fail # time=958.138ms
      ---
      at:
        line: 10
        column: 5
        file: test/promise_fail.js
      results:
        plan:
          start: 1
          end: 1
        count: 1
        pass: 0
        ok: false
        fail: 1
        time: 958.138
      source: >
        tap.test('callback returning rejected promise should cause that test (and only
        that test) to fail', function (tt) {
      ...

    # Subtest: subtest callback returning rejected promise should cause that subtest (and only that subtest) to fail
        1..1
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# promise'
            - '# sub test that should fail'
            - 'not ok 1 Error: rejection message'
            - '  ---'
            - '    operator: error'
            - '    stack: |-'
            - '      Error: rejection message'
            - '          at $TEST/promises/subTests.js:$LINE:$COL'
            - '          [... stack stripped ...]'
            - '  ...'
            - '# sub test that should pass'
            - ok 2 should be truthy
            - ''
            - 1..2
            - '# tests 2'
            - '# pass  1'
            - '# fail  1'
            - ''
            - ''
          at:
            line: 84
            column: 12
            file: test/promise_fail.js
          stack: >
            test/promise_fail.js:84:12

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            tt.same(stripFullStack(strippedString), [
          ...
        # failed 1 of 1 tests
    not ok 2 - subtest callback returning rejected promise should cause that subtest (and only that subtest) to fail # time=968.13ms
      ---
      at:
        line: 59
        column: 5
        file: test/promise_fail.js
      results:
        plan:
          start: 1
          end: 1
        count: 1
        pass: 0
        ok: false
        fail: 1
        time: 968.13
      source: >
        tap.test('subtest callback returning rejected promise should cause that
        subtest (and only that subtest) to fail', function (tt) {
      ...

    1..2
    # failed 2 of 2 tests
    # time=1942.094ms
not ok 48 - test/promise_fail.js # time=2149.02ms
  ---
  timeout: 30000
  file: test/promise_fail.js
  results:
    ok: false
    count: 2
    pass: 0
    fail: 2
    plan:
      start: 1
      end: 2
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/promise_fail.js
  ...

# Subtest: test/require.js
    # Subtest: requiring a single module
        1..2
        not ok 1 - should be equivalent
          ---
          found:
            - ''
          wanted:
            - TAP version 13
            - '# module-a'
            - ok 1 loaded module a
            - '# test-a'
            - ok 2 module-a loaded in same context
            - ok 3 test ran after module-a was loaded
            - ''
            - 1..3
            - '# tests 3'
            - '# pass  3'
            - ''
            - '# ok'
            - ''
            - ''
          at:
            line: 12
            column: 11
            file: test/require.js
            function: tc
          stack: >
            tc (test/require.js:12:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(stripFullStack(rows.toString('utf8')), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 33
            column: 11
            file: test/require.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/require.js:33:11)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        # failed 2 of 2 tests
    not ok 1 - requiring a single module # time=1059.437ms
      ---
      at:
        line: 8
        column: 5
        file: test/require.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 1059.437
      source: |
        tap.test('requiring a single module', function (t) {
      ...

    # Subtest: requiring multiple modules
        1..2
        not ok 1 - should be equivalent
          ---
          found: ''
          wanted: |+
            TAP version 13
            # module-a
            ok 1 loaded module a
            # module-b
            ok 2 loaded module b
            # test-a
            ok 3 module-a loaded in same context
            ok 4 test ran after module-a was loaded
            # test-b
            ok 5 module-b loaded in same context
            ok 6 test ran after module-b was loaded

            1..6
            # tests 6
            # pass  6

            # ok

          at:
            line: 41
            column: 11
            file: test/require.js
            function: tc
          stack: >
            tc (test/require.js:41:11)

            ConcatStream.<anonymous> (node_modules/concat-stream/index.js:37:43)

            ConcatStream.emit (node:events:525:35)

            finishMaybe (node_modules/readable-stream/lib/_stream_writable.js:630:14)

            endWritable (node_modules/readable-stream/lib/_stream_writable.js:638:3)

            ConcatStream.Writable.end
            (node_modules/readable-stream/lib/_stream_writable.js:594:41)

            Socket.onend (node:internal/streams/readable:693:10)

            Object.onceWrapper (node:events:627:28)

            Socket.emit (node:events:525:35)

            endReadableNT (node:internal/streams/readable:1358:12)

            processTicksAndRejections (node:internal/process/task_queues:83:21)
          source: |
            t.same(rows.toString('utf8'), [
          ...
        not ok 2 - should be equal
          ---
          found: 1
          wanted: 0
          compare: '==='
          at:
            line: 65
            column: 11
            file: test/require.js
            type: ChildProcess
          stack: |
            ChildProcess.<anonymous> (test/require.js:65:11)
            ChildProcess.emit (node:events:513:28)
            Process.ChildProcess._handle.onexit (node:internal/child_process:291:12)
          source: |
            t.equal(code, 0);
          ...
        # failed 2 of 2 tests
    not ok 2 - requiring multiple modules # time=967.071ms
      ---
      at:
        line: 37
        column: 5
        file: test/require.js
      results:
        plan:
          start: 1
          end: 2
        count: 2
        pass: 0
        ok: false
        fail: 2
        time: 967.071
      source: |
        tap.test('requiring multiple modules', function (t) {
      ...

    1..2
    # failed 2 of 2 tests
    # time=2040.252ms
not ok 49 - test/require.js # time=2249.484ms
  ---
  timeout: 30000
  file: test/require.js
  results:
    ok: false
    count: 2
    pass: 0
    fail: 2
    plan:
      start: 1
      end: 2
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/require.js
  ...

# Subtest: test/skip_explanation.js
    1..0
not ok 50 - test/skip_explanation.js # time=1046.161ms
  ---
  timeout: 30000
  file: test/skip_explanation.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/skip_explanation.js
  ...

# Subtest: test/skip.js
    1..0
not ok 51 - test/skip.js # time=940.661ms
  ---
  timeout: 30000
  file: test/skip.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/skip.js
  ...

# Subtest: test/stackTrace.js
    1..0
not ok 52 - test/stackTrace.js # time=953.552ms
  ---
  timeout: 30000
  file: test/stackTrace.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/stackTrace.js
  ...

# Subtest: test/subcount.js
    1..0
not ok 53 - test/subcount.js # time=1041.635ms
  ---
  timeout: 30000
  file: test/subcount.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/subcount.js
  ...

# Subtest: test/subtest_and_async.js
    1..0
not ok 54 - test/subtest_and_async.js # time=951.186ms
  ---
  timeout: 30000
  file: test/subtest_and_async.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/subtest_and_async.js
  ...

# Subtest: test/subtest_plan.js
    1..0
not ok 55 - test/subtest_plan.js # time=996.766ms
  ---
  timeout: 30000
  file: test/subtest_plan.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/subtest_plan.js
  ...

# Subtest: test/teardown.js
    1..0
not ok 56 - test/teardown.js # time=985.537ms
  ---
  timeout: 30000
  file: test/teardown.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/teardown.js
  ...

# Subtest: test/throws.js
    1..0
not ok 57 - test/throws.js # time=975.346ms
  ---
  timeout: 30000
  file: test/throws.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/throws.js
  ...

# Subtest: test/timeout.js
    1..0
not ok 58 - test/timeout.js # time=956.268ms
  ---
  timeout: 30000
  file: test/timeout.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/timeout.js
  ...

# Subtest: test/timeoutAfter.js
    1..0
not ok 59 - test/timeoutAfter.js # time=998.489ms
  ---
  timeout: 30000
  file: test/timeoutAfter.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/timeoutAfter.js
  ...

# Subtest: test/todo_explanation.js
    1..0
not ok 60 - test/todo_explanation.js # time=1028.938ms
  ---
  timeout: 30000
  file: test/todo_explanation.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/todo_explanation.js
  ...

# Subtest: test/todo_single.js
    1..0
not ok 61 - test/todo_single.js # time=1038.699ms
  ---
  timeout: 30000
  file: test/todo_single.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/todo_single.js
  ...

# Subtest: test/todo.js
    1..0
not ok 62 - test/todo.js # time=1013.091ms
  ---
  timeout: 30000
  file: test/todo.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/todo.js
  ...

# Subtest: test/too_many.js
    1..0
not ok 63 - test/too_many.js # time=991.873ms
  ---
  timeout: 30000
  file: test/too_many.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/too_many.js
  ...

# Subtest: test/undef.js
    1..0
not ok 64 - test/undef.js # time=922.642ms
  ---
  timeout: 30000
  file: test/undef.js
  results:
    ok: false
    count: 0
    pass: 0
    plan:
      start: 1
      end: 0
      skipAll: true
  exitCode: 1
  command: /usr/local/bin/node
  arguments:
    - test/undef.js
  ...

1..64
# failed 63 of 64 tests
# skip: 1
# time=95305.085ms

=============================== Coverage summary ===============================
Statements   : 1.14% ( 7/616 )
Branches     : 0% ( 0/358 )
Functions    : 0% ( 0/99 )
Lines        : 1.19% ( 7/588 )
================================================================================
--------------------|----------|----------|----------|----------|----------------|
File                |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
--------------------|----------|----------|----------|----------|----------------|
All files           |     1.14 |        0 |        0 |     1.19 |                |
 tape               |     2.65 |        0 |        0 |        3 |                |
  index.js          |     2.65 |        0 |        0 |        3 |... 173,175,177 |
 tape/lib           |      0.8 |        0 |        0 |     0.82 |                |
  default_stream.js |    15.79 |        0 |        0 |    15.79 |... 32,33,35,38 |
  results.js        |        0 |        0 |        0 |        0 |... 221,225,229 |
  test.js           |     0.31 |        0 |        0 |     0.31 |... 778,779,780 |
--------------------|----------|----------|----------|----------|----------------|
----------------------run test done----------------------
execa
subdir: fkill lint-staged pretty-quick semantic-release username
----------------------client fkill of execa----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> fkill@8.0.1 test
> xo && ava && tsd


  Uncaught exception in test.js

  file:///data/js-variants/multee/Clients/execa/fkill/index.js:3
  import execa from 'execa';
         ^^^^^
  SyntaxError: The requested module 'execa' does not provide an export named 'default'

  ✖ test.js exited with a non-zero exit code: 1
  ─

  1 uncaught exception
npm uninstall

removed 1 package, and audited 692 packages in 4s

172 packages are looking for funding
  run `npm fund` for details

5 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> fkill@8.0.1 test
> xo && ava && tsd


  Uncaught exception in test.js

  Error: Cannot find package 'execa' imported from /data/js-variants/multee/Clients/execa/fkill/index.js

  ✖ test.js exited with a non-zero exit code: 1
  ─

  1 uncaught exception
----------------------run test done----------------------
----------------------client lint-staged of execa----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> lint-staged@0.0.0-development test
> jest --coverage

jest-haste-map: duplicate manual mock found: my-config
  The following files share their name; please delete one of them:
    * <rootDir>/test/unit/__mocks__/my-config.cjs
    * <rootDir>/test/unit/__mocks__/my-config.json

-----------------------|---------|----------|---------|---------|-------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-----------------------|---------|----------|---------|---------|-------------------
All files              |     100 |      100 |     100 |     100 |                   
 chunkFiles.js         |     100 |      100 |     100 |     100 |                   
 dynamicImport.js      |     100 |      100 |     100 |     100 |                   
 execGit.js            |     100 |      100 |     100 |     100 |                   
 figures.js            |     100 |      100 |     100 |     100 |                   
 file.js               |     100 |      100 |     100 |     100 |                   
 generateTasks.js      |     100 |      100 |     100 |     100 |                   
 getDiffCommand.js     |     100 |      100 |     100 |     100 |                   
 getRenderer.js        |     100 |      100 |     100 |     100 |                   
 getStagedFiles.js     |     100 |      100 |     100 |     100 |                   
 gitWorkflow.js        |     100 |      100 |     100 |     100 |                   
 groupFilesByConfig.js |     100 |      100 |     100 |     100 |                   
 index.js              |     100 |      100 |     100 |     100 |                   
 loadConfig.js         |     100 |      100 |     100 |     100 |                   
 makeCmdTasks.js       |     100 |      100 |     100 |     100 |                   
 messages.js           |     100 |      100 |     100 |     100 |                   
 parseGitZOutput.js    |     100 |      100 |     100 |     100 |                   
 printTaskOutput.js    |     100 |      100 |     100 |     100 |                   
 resolveGitRepo.js     |     100 |      100 |     100 |     100 |                   
 resolveTaskFn.js      |     100 |      100 |     100 |     100 |                   
 runAll.js             |     100 |      100 |     100 |     100 |                   
 searchConfigs.js      |     100 |      100 |     100 |     100 |                   
 state.js              |     100 |      100 |     100 |     100 |                   
 symbols.js            |     100 |      100 |     100 |     100 |                   
 validateBraces.js     |     100 |      100 |     100 |     100 |                   
 validateConfig.js     |     100 |      100 |     100 |     100 |                   
 validateOptions.js    |     100 |      100 |     100 |     100 |                   
-----------------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 641 packages in 3s

83 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> lint-staged@0.0.0-development test
> jest --coverage

jest-haste-map: duplicate manual mock found: my-config
  The following files share their name; please delete one of them:
    * <rootDir>/test/unit/__mocks__/my-config.cjs
    * <rootDir>/test/unit/__mocks__/my-config.json

-----------------------|---------|----------|---------|---------|------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s      
-----------------------|---------|----------|---------|---------|------------------------
All files              |   49.05 |    40.92 |   46.21 |   48.67 |                        
 chunkFiles.js         |     100 |      100 |     100 |     100 |                        
 dynamicImport.js      |     100 |      100 |     100 |     100 |                        
 execGit.js            |       0 |        0 |       0 |       0 | 4-25                   
 figures.js            |     100 |      100 |     100 |     100 |                        
 file.js               |   73.68 |       40 |   66.66 |   73.68 | 19-20,38,51-52         
 generateTasks.js      |     100 |      100 |     100 |     100 |                        
 getDiffCommand.js     |     100 |      100 |     100 |     100 |                        
 getRenderer.js        |     100 |    91.66 |     100 |     100 | 22                     
 getStagedFiles.js     |       0 |        0 |       0 |       0 | 9-16                   
 gitWorkflow.js        |   25.19 |    20.58 |      16 |   24.79 | 35-43,63-65,93,123-347 
 groupFilesByConfig.js |       0 |        0 |       0 |       0 | 5-54                   
 index.js              |     100 |    84.61 |     100 |     100 | 65,81,119-121          
 loadConfig.js         |     100 |      100 |     100 |     100 |                        
 makeCmdTasks.js       |       0 |        0 |       0 |       0 | 7-70                   
 messages.js           |   90.47 |        0 |      75 |      90 | 33-39                  
 parseGitZOutput.js    |     100 |      100 |     100 |     100 |                        
 printTaskOutput.js    |   83.33 |       80 |     100 |      80 | 10                     
 resolveGitRepo.js     |       0 |        0 |       0 |       0 | 10-68                  
 resolveTaskFn.js      |       0 |        0 |       0 |       0 | 11-173                 
 runAll.js             |       0 |        0 |       0 |       0 | 41-323                 
 searchConfigs.js      |     100 |      100 |     100 |     100 |                        
 state.js              |   71.42 |    46.42 |    62.5 |      75 | 31-32,42-43,48,73      
 symbols.js            |     100 |      100 |     100 |     100 |                        
 validateBraces.js     |     100 |      100 |     100 |     100 |                        
 validateConfig.js     |     100 |      100 |     100 |     100 |                        
 validateOptions.js    |     100 |      100 |     100 |     100 |                        
-----------------------|---------|----------|---------|---------|------------------------
----------------------run test done----------------------
----------------------client pretty-quick of execa----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> pretty-quick@0.0.0-development test
> jest

npm uninstall

removed 1 package, and audited 740 packages in 6s

20 packages are looking for funding
  run `npm fund` for details

29 vulnerabilities (16 moderate, 10 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> pretty-quick@0.0.0-development test
> jest

----------------------run test done----------------------
----------------------client semantic-release of execa----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> semantic-release@0.0.0-development pretest
> npm run lint


> semantic-release@0.0.0-development lint
> xo


> semantic-release@0.0.0-development test
> nyc ava -v


  Uncaught exception in test/get-commits.test.js

  test/get-commits.test.js:3

   2: const {stub} = require('sinon');                                          
   3: const getCommits = require('../lib/get-commits');                         
   4: const {gitRepo, gitCommits, gitDetachedHead} = require('./helpers/git-uti…

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/get-commits.js:2:218)
  › Object.<anonymous> (test/get-commits.test.js:3:20)

  ✖ test/get-commits.test.js exited with a non-zero exit code: 1
  ✖ cli › Pass options to semantic-release API Rejected promise returned by test
  ✖ cli › Pass options to semantic-release API with alias arguments Rejected promise returned by test
  ✖ cli › Pass unknown options to semantic-release API Rejected promise returned by test
  ✖ cli › Pass empty Array to semantic-release API for list option set to "false" Rejected promise returned by test
  ✖ cli › Do not set properties in option for which arg is not in command line Rejected promise returned by test
  ✔ cli › Display help
  ✔ cli › Return error exitCode and prints help if called with a command
  ✔ cli › Return error exitCode if multiple plugin are set for single plugin
  ✖ cli › Return error exitCode if semantic-release throw error 
  ✖ cli › Hide sensitive environment variable values from the logs 

  Uncaught exception in test/get-config.test.js

  test/get-config.test.js:9

   8: const yaml = require('js-yaml');                                          
   9: const {gitRepo, gitTagVersion, gitCommits, gitShallowClone, gitAddConfig}…
   10:                                                                           

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/test/helpers/git-utils.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/test/helpers/git-utils.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in test/helpers/git-utils.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (test/helpers/git-utils.js:2:15)
  › Object.<anonymous> (test/get-config.test.js:9:77)

  ✖ test/get-config.test.js exited with a non-zero exit code: 1

  Uncaught exception in test/get-git-auth-url.test.js

  test/get-git-auth-url.test.js:2

   1: const test = require('ava');                          
   2: const getAuthUrl = require('../lib/get-git-auth-url');
   3: const {gitRepo} = require('./helpers/git-utils');     

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/get-git-auth-url.js:3:171)
  › Object.<anonymous> (test/get-git-auth-url.test.js:2:20)

  ✖ test/get-git-auth-url.test.js exited with a non-zero exit code: 1
  ✔ get-last-release › Get the highest non-prerelease valid tag
  ✔ get-last-release › Get the highest prerelease valid tag, ignoring other tags from other prerelease channels
  ✔ get-last-release › Return empty object if no valid tag is found
  ✔ get-last-release › Get the highest non-prerelease valid tag before a certain version
  ✔ get-logger › Expose "error", "success" and "log" functions
  ✔ get-next-version › Increase version for patch release
  ✔ get-next-version › Increase version for minor release
  ✔ get-next-version › Increase version for major release
  ✔ get-next-version › Return 1.0.0 if there is no previous release
  ✔ get-next-version › Increase version for patch release on prerelease branch
  ✔ get-next-version › Increase version for minor release on prerelease branch
  ✔ get-next-version › Increase version for major release on prerelease branch
  ✔ get-next-version › Return 1.0.0 if there is no previous release on prerelease branch
  ✔ get-next-version › Increase version for release on prerelease branch after previous commits were merged to release branch
  ✔ get-next-version › Increase version for release on prerelease branch based on highest commit type since last regular release
  ✔ get-next-version › Increase version for release on prerelease branch when there is no regular releases on other branches
  ✔ get-release-to-add › Return versions merged from release to maintenance branch, excluding lower than branch start range
  ✔ get-release-to-add › Return versions merged between release branches
  ✔ get-release-to-add › Return releases sorted by ascending order
  ✔ get-release-to-add › No lastRelease
  ✔ get-release-to-add › Ignore pre-release versions
  ✔ get-release-to-add › Exclude versions merged from release to maintenance branch if they have the same "channel"
  ✔ get-release-to-add › Exclude versions merged between release branches if they have the same "channel"
  ✔ get-release-to-add › Exclude versions merged between release branches if they all have "channel" set to "false"
  ✔ get-release-to-add › Exclude versions number less than the latest version already released on that branch

  Uncaught exception in test/git.test.js

  test/git.test.js:19

   18:   fetchNotes,             
   19: } = require('../lib/git');
   20: const {                   

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (test/git.test.js:19:5)

  ✖ test/git.test.js exited with a non-zero exit code: 1
  ✔ hide-sensitive › Replace multiple sensitive environment variable values
  ✔ hide-sensitive › Replace multiple occurences of sensitive environment variable values
  ✔ hide-sensitive › Replace sensitive environment variable matching specific regex for "private"
  ✔ hide-sensitive › Replace url-encoded environment variable
  ✔ hide-sensitive › Escape regexp special characters
  ✔ hide-sensitive › Escape regexp special characters in url-encoded environment variable
  ✔ hide-sensitive › Accept "undefined" input
  ✔ hide-sensitive › Return same string if no environment variable has to be replaced
  ✔ hide-sensitive › Exclude empty environment variables from the regexp
  ✔ hide-sensitive › Exclude empty environment variables from the regexp if there is only empty ones
  ✔ hide-sensitive › Exclude nonsensitive GOPRIVATE environment variable for Golang projects from the regexp
  ✔ hide-sensitive › Exclude environment variables with value shorter than SECRET_MIN_SIZE from the regexp

  Uncaught exception in test/index.test.js

  test/index.test.js:24

   23:   gitGetNote,                      
   24: } = require('./helpers/git-utils');
   25:                                    

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/test/helpers/git-utils.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/test/helpers/git-utils.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in test/helpers/git-utils.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (test/helpers/git-utils.js:2:15)
  › Object.<anonymous> (test/index.test.js:24:5)

  ✖ test/index.test.js exited with a non-zero exit code: 1

  Uncaught exception in test/integration.test.js

  test/integration.test.js:6

   5: const {writeJson, readJson} = require('fs-extra');       
   6: const execa = require('execa');                          
   7: const {WritableStreamBuffer} = require('stream-buffers');

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/test/integration.test.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/test/integration.test.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in test/integration.test.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (test/integration.test.js:6:15)

  ✖ test/integration.test.js exited with a non-zero exit code: 1
  ✔ utils › getLatestVersion
  ✔ utils › getEarliestVersion
  ✔ utils › extractErrors
  ✔ utils › tagsToVersions
  ✔ utils › isMajorRange
  ✔ utils › isMaintenanceRange
  ✔ utils › getUpperBound
  ✔ utils › getLowerBound
  ✔ utils › highest
  ✔ utils › lowest
  ✔ utils › getFirstVersion
  ✔ utils › getRange
  ✔ utils › makeTag
  ✔ utils › isSameChannel

  Uncaught exception in test/verify.test.js

  test/verify.test.js:3

   2: const tempy = require('tempy');                  
   3: const verify = require('../lib/verify');         
   4: const {gitRepo} = require('./helpers/git-utils');

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/verify.js:2:305)
  › Object.<anonymous> (test/verify.test.js:3:16)

  ✖ test/verify.test.js exited with a non-zero exit code: 1

  Uncaught exception in test/branches/expand.test.js

  test/branches/expand.test.js:2

   1: const test = require('ava');                                              
   2: const expand = require('../../lib/branches/expand');                      
   3: const {gitRepo, gitCommits, gitCheckout, gitPush} = require('../helpers/g…

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/branches/expand.js:2:292)
  › Object.<anonymous> (test/branches/expand.test.js:2:16)

  ✖ test/branches/expand.test.js exited with a non-zero exit code: 1
  ✖ branches › branches › Enforce ranges with branching release workflow Rejected promise returned by test
  ✖ branches › branches › Throw SemanticReleaseError for invalid configurations Rejected promise returned by test
  ✖ branches › branches › Throw a SemanticReleaseError if there is duplicate branches Rejected promise returned by test
  ✖ branches › branches › Throw a SemanticReleaseError for each invalid branch name Rejected promise returned by test

  Uncaught exception in test/branches/get-tags.test.js

  test/branches/get-tags.test.js:2

   1: const test = require('ava');                                              
   2: const getTags = require('../../lib/branches/get-tags');                   
   3: const {gitRepo, gitCommits, gitTagVersion, gitCheckout, gitAddNote} = req…

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/branches/get-tags.js:2:407)
  › Object.<anonymous> (test/branches/get-tags.test.js:2:17)

  ✖ test/branches/get-tags.test.js exited with a non-zero exit code: 1
  ✔ branches › normalize › Maintenance branches - initial state
  ✔ branches › normalize › Maintenance branches - cap range to first release present on default branch and not in any Maintenance one
  ✔ branches › normalize › Maintenance branches - cap range to default branch last release if all release are also present on maintenance branch
  ✔ branches › normalize › Release branches - initial state
  ✔ branches › normalize › Release branches - 3 release branches
  ✔ branches › normalize › Release branches - 2 release branches
  ✔ branches › normalize › Release branches - 1 release branches
  ✔ branches › normalize › Release branches - cap ranges to first release only present on following branch
  ✔ branches › normalize › Release branches - Handle missing previous tags in branch history
  ✔ branches › normalize › Release branches - limit releases on 2nd and 3rd branch based on 1st branch last release
  ✔ branches › normalize › Prerelease branches
  ✔ branches › normalize › Allow to set channel to "false" to prevent default
  ✔ definitions › branches › A "maintenance" branch is identified by having a "range" property or a "name" formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › A "maintenance" branches must have a "range" property formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › The "maintenance" branches must have unique ranges
  ✔ definitions › branches › A "prerelease" branch is identified by having a thruthy "prerelease" property
  ✔ definitions › branches › A "prerelease" branch must have a valid prerelease detonation in "prerelease" property or in "name" if "prerelease" is "true"
  ✔ definitions › branches › The "prerelease" branches must have unique "prerelease" property
  ✔ definitions › branches › A "release" branch is identified by not havin a "range" or "prerelease" property or a "name" formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › There must be between 1 and 3 release branches

  Uncaught exception in test/definitions/plugins.test.js

  test/definitions/plugins.test.js:2

   1: const test = require('ava');                                              
   2: const plugins = require('../../lib/definitions/plugins');                 
   3: const {RELEASE_NOTES_SEPARATOR, SECRET_REPLACEMENT} = require('../../lib/…

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/definitions/plugins.js:2:245)
  › Object.<anonymous> (test/definitions/plugins.test.js:2:17)

  ✖ test/definitions/plugins.test.js exited with a non-zero exit code: 1

  Uncaught exception in test/plugins/normalize.test.js

  test/plugins/normalize.test.js:4

   3: const {stub} = require('sinon');                         
   4: const normalize = require('../../lib/plugins/normalize');
   5:                                                          

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/definitions/plugins.js:2:245)
  › Object.<anonymous> (lib/plugins/normalize.js:2:454)
  › Object.<anonymous> (test/plugins/normalize.test.js:4:19)

  ✔ plugins › pipeline › Throw all errors from all steps throwing an AggregateError
  ✔ plugins › pipeline › Stop execution and throw error if a step rejects
  ✔ plugins › pipeline › Throw all errors from the first step throwing an AggregateError
  ✔ plugins › pipeline › Execute each function in series passing the same input
  ✔ plugins › pipeline › Execute all even if a Promise rejects
  ✔ plugins › pipeline › Execute each function in series passing a transformed input from "getNextInput"
  ✔ plugins › pipeline › Execute each function in series passing the "lastResult" and "result" to "getNextInput"
  ✔ plugins › pipeline › Execute each function in series calling "transform" to modify the results
  ✔ plugins › pipeline › Execute each function in series calling "transform" to modify the results with "settleAll"
  ✔ plugins › pipeline › Execute each function in series passing a transformed input even if a step rejects
  ✖ test/plugins/normalize.test.js exited with a non-zero exit code: 1
  ✔ plugins › utils › validatePlugin
  ✔ plugins › utils › validateStep: optional plugin configuration
  ✔ plugins › utils › validateStep: required plugin configuration
  ✔ plugins › utils › loadPlugin
  ✔ plugins › utils › parseConfig

  Uncaught exception in test/plugins/plugins.test.js

  test/plugins/plugins.test.js:6

   5: const tempy = require('tempy');                 
   6: const getPlugins = require('../../lib/plugins');
   7:                                                 

  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (lib/git.js:2:264)
  › Object.<anonymous> (lib/definitions/plugins.js:2:245)
  › Object.<anonymous> (lib/plugins/index.js:2:386)
  › Object.<anonymous> (test/plugins/plugins.test.js:6:20)

  ✖ test/plugins/plugins.test.js exited with a non-zero exit code: 1
  ─

  cli › Pass options to semantic-release API

  test/cli.test.js:70

   69:                                                                          
   70:   t.deepEqual(run.args[0][0].branches, ['master', 'next']);              
   71:   t.is(run.args[0][0].repositoryUrl, 'https://github/com/owner/repo.git'…

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'0\')',
  }

  › test/cli.test.js:70:26



  cli › Pass options to semantic-release API with alias arguments

  test/cli.test.js:112

   111:                                                                         
   112:   t.deepEqual(run.args[0][0].branches, ['master']);                     
   113:   t.is(run.args[0][0].repositoryUrl, 'https://github/com/owner/repo.git…

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'0\')',
  }

  › test/cli.test.js:112:26



  cli › Pass unknown options to semantic-release API

  test/cli.test.js:129

   128:                                              
   129:   t.is(run.args[0][0].bool, true);           
   130:   t.is(run.args[0][0].firstOption, 'value1');

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'0\')',
  }

  › test/cli.test.js:129:19



  cli › Pass empty Array to semantic-release API for list option set to "false"

  test/cli.test.js:143

   142:                                           
   143:   t.deepEqual(run.args[0][0].publish, []);
   144:                                           

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'0\')',
  }

  › test/cli.test.js:143:26



  cli › Do not set properties in option for which arg is not in command line

  test/cli.test.js:155

   154:                                   
   155:   t.false('ci' in run.args[0][0]);
   156:   t.false('d' in run.args[0][0]); 

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'0\')',
  }

  › test/cli.test.js:155:30



  cli › Return error exitCode if semantic-release throw error

  test/cli.test.js:207

   206:                                                       
   207:   t.regex(t.context.errors, /semantic-release error/);
   208:   t.is(exitCode, 1);                                  

  Value must match expression:

  `Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mlib/git.js:2:264[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mlib/get-config.js:2:512[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mindex.js:2:622[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Proxyquire._require [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mproxyquire[24m/lib/proxyquire.js:188:36[90m)[39m␊
      at module.exports [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mcli.js:7:110[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mtest/cli.test.js:205:26␊
      at Test.callFn [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/test.js:622:21[90m)[39m␊
      at Test.run [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/test.js:635:23[90m)[39m␊
      at Runner.runSingle [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:299:33[90m)[39m␊
      at Runner.runTest [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:376:30[90m)[39m␊
      at async [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:508:24␊
      at async Promise.all (index 1)␊
      at async Runner.start [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:547:15[90m)[39m {␊
    code: [32m'ERR_REQUIRE_ESM'[39m␊
  }`

  Regular expression:

  /semantic-release error/

  › test/cli.test.js:207:5



  cli › Hide sensitive environment variable values from the logs

  test/cli.test.js:219

   218:                                                                         
   219:   t.regex(t.context.errors, new RegExp(`Throw error: Exposing token ${e…
   220:   t.is(exitCode, 1);                                                    

  Value must match expression:

  `Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
  Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mlib/git.js:2:264[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mlib/get-config.js:2:512[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mindex.js:2:622[90m)[39m␊
      at Module.replacementCompile [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:60:13[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4␊
      at require.extensions.<computed> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/worker/dependency-tracker.js:42:4[90m)[39m␊
      at Object.<anonymous> [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mappend-transform[24m/index.js:64:4[90m)[39m␊
      at Proxyquire._require [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mproxyquire[24m/lib/proxyquire.js:188:36[90m)[39m␊
      at module.exports [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mcli.js:7:110[90m)[39m␊
      at [90m/data/js-variants/multee/Clients/execa/semantic-release/[39mtest/cli.test.js:217:26␊
      at Test.callFn [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/test.js:622:21[90m)[39m␊
      at Test.run [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/test.js:635:23[90m)[39m␊
      at Runner.runSingle [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:299:33[90m)[39m␊
      at Runner.runTest [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:376:30[90m)[39m␊
      at async Promise.all (index 1)␊
      at async Runner.start [90m(/data/js-variants/multee/Clients/execa/semantic-release/[39mnode_modules/[4mava[24m/lib/runner.js:547:15[90m)[39m {␊
    code: [32m'ERR_REQUIRE_ESM'[39m␊
  }`

  Regular expression:

  /Throw error: Exposing token \[secure\]/

  › test/cli.test.js:219:5



  branches › branches › Enforce ranges with branching release workflow

  test/branches/branches.test.js:25

   24:   ];                                                                     
   25:   const getBranches = proxyquire('../../lib/branches', {'./get-tags': ()…
   26:                                                                          

  Rejected promise returned by test. Reason:

  Error {
    code: 'ERR_REQUIRE_ESM',
    message: `require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.`,
  }

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/git.js:2:264)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/branches/index.js:2:514)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)
  › Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)
  › test/branches/branches.test.js:25:23



  branches › branches › Throw SemanticReleaseError for invalid configurations

  test/branches/branches.test.js:202

   201:   ];                                                                    
   202:   const getBranches = proxyquire('../../lib/branches', {'./get-tags': (…
   203:   const errors = [...(await t.throwsAsync(getBranches('repositoryUrl', …

  Rejected promise returned by test. Reason:

  Error {
    code: 'ERR_REQUIRE_ESM',
    message: `require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.`,
  }

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/git.js:2:264)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/branches/index.js:2:514)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)
  › Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)
  › test/branches/branches.test.js:202:23



  branches › branches › Throw a SemanticReleaseError if there is duplicate branches

  test/branches/branches.test.js:232

   231:   ];                                                                    
   232:   const getBranches = proxyquire('../../lib/branches', {'./get-tags': (…
   233:                                                                         

  Rejected promise returned by test. Reason:

  Error {
    code: 'ERR_REQUIRE_ESM',
    message: `require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.`,
  }

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/git.js:2:264)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/branches/index.js:2:514)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)
  › Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)
  › test/branches/branches.test.js:232:23



  branches › branches › Throw a SemanticReleaseError for each invalid branch name

  test/branches/branches.test.js:247

   246:   ];                                                                    
   247:   const getBranches = proxyquire('../../lib/branches', {'./get-tags': (…
   248:                                                                         

  Rejected promise returned by test. Reason:

  Error {
    code: 'ERR_REQUIRE_ESM',
    message: `require() of ES Module /data/js-variants/multee/Variants/execa/variant1/execa/index.js from /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/execa/semantic-release/lib/git.js to a dynamic import() which is available in all CommonJS modules.`,
  }

  › Instead change the require of index.js in lib/git.js to a dynamic import() which is available in all CommonJS modules.
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/git.js:2:264)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:201:19)
  › Object.<anonymous> (lib/branches/index.js:2:514)
  › require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)
  › Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)
  › Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)
  › test/branches/branches.test.js:247:23

  ─

  11 tests failed
  12 uncaught exceptions
----------------------------------|---------|----------|---------|---------|-------------------
File                              | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------------------------------|---------|----------|---------|---------|-------------------
All files                         |   36.17 |    40.67 |   33.85 |   35.78 |                   
 semantic-release                 |   16.96 |    13.95 |   33.33 |   16.77 |                   
  cli.js                          |   95.24 |      100 |     100 |      95 | 56                
  index.js                        |       6 |        0 |       0 |    6.12 | 10-279            
 semantic-release/lib             |   41.95 |    45.64 |   46.75 |   40.93 |                   
  get-commits.js                  |      20 |        0 |       0 |      20 | 11-22             
  get-config.js                   |   16.22 |        0 |       0 |   16.22 | 7-89              
  get-error.js                    |      60 |        0 |       0 |      60 | 5-6               
  get-git-auth-url.js             |     8.7 |        0 |       0 |    9.09 | 5-121             
  get-last-release.js             |     100 |      100 |     100 |     100 |                   
  get-logger.js                   |     100 |      100 |     100 |     100 |                   
  get-next-version.js             |     100 |      100 |     100 |     100 |                   
  get-release-to-add.js           |     100 |      100 |     100 |     100 |                   
  git.js                          |    5.77 |        0 |       0 |    5.77 | 4-331             
  hide-sensitive.js               |     100 |      100 |     100 |     100 |                   
  utils.js                        |   81.82 |    95.74 |   86.36 |   78.57 | 10-17             
  verify.js                       |      15 |        0 |       0 |      15 | 4-41              
 semantic-release/lib/branches    |   44.32 |    53.97 |   29.17 |   44.83 |                   
  expand.js                       |      30 |        0 |       0 |   33.33 | 5-13              
  get-tags.js                     |   38.46 |        0 |       0 |   38.46 | 7-29              
  index.js                        |   15.38 |        0 |       0 |   15.38 | 7-70              
  normalize.js                    |   96.15 |    97.14 |     100 |   96.15 | 60                
 semantic-release/lib/definitions |   38.14 |    32.56 |      15 |   37.89 |                   
  branches.js                     |     100 |    93.33 |     100 |     100 | 7                 
  constants.js                    |     100 |      100 |     100 |     100 |                   
  errors.js                       |   24.32 |        0 |       0 |      25 | 8,11,14-224       
  plugins.js                      |    5.88 |        0 |       0 |    5.88 | 5-106             
 semantic-release/lib/plugins     |   42.64 |    47.86 |   47.37 |   42.52 |                   
  index.js                        |     9.3 |        0 |       0 |     9.3 | 5-92              
  normalize.js                    |    12.5 |        0 |       0 |   12.82 | 6-66              
  pipeline.js                     |     100 |      100 |     100 |     100 |                   
  utils.js                        |     100 |      100 |     100 |     100 |                   
----------------------------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 2 packages, changed 1 package, and audited 1494 packages in 5s

147 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (6 moderate, 8 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> semantic-release@0.0.0-development pretest
> npm run lint


> semantic-release@0.0.0-development lint
> xo


> semantic-release@0.0.0-development test
> nyc ava -v


  ✔ cli › Pass options to semantic-release API (354ms)
  ✔ get-commits › Return empty array if there is no commits (275ms)
  ✔ cli › Pass options to semantic-release API with alias arguments
  ✔ cli › Pass unknown options to semantic-release API
  ✔ cli › Pass empty Array to semantic-release API for list option set to "false"
  ✔ cli › Do not set properties in option for which arg is not in command line
  ✔ cli › Display help
  ✔ get-commits › Get all commits when there is no last release (451ms)
  ✔ cli › Return error exitCode and prints help if called with a command
  ✔ get-commits › Return empty array if lastRelease.gitHead is the last commit (448ms)
  ✔ get-commits › Get all commits since gitHead (from lastRelease) (473ms)
  ✔ cli › Return error exitCode if multiple plugin are set for single plugin
  ✔ get-commits › Get all commits between lastRelease.gitHead and a shas (469ms)
  ✔ cli › Return error exitCode if semantic-release throw error
  ✔ cli › Hide sensitive environment variable values from the logs
  ✔ get-commits › Get all commits since gitHead (from lastRelease) on a detached head repo (557ms)
  ✔ get-git-auth-url › Do not add trailing ".git" if not present in the origian URL (1s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git" URL without user (1.1s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git" URL without user and with a custom port (1.1s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git" URL without user and with a custom port followed by a slash (1.1s)
  ✔ get-git-auth-url › Return the "http" formatted URL if "gitCredentials" is defined and repositoryUrl is a "http" URL with custom port (1.1s)
  ✔ get-git-auth-url › Return the "http" formatted URL if "gitCredentials" is defined and repositoryUrl is a "ssh" URL (1.1s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "GITHUB_ACTION" is set (1.1s)
  ✔ get-git-auth-url › Return the same "git" formatted URL if "gitCredentials" is not defined (1.3s)
  ✔ get-git-auth-url › Return the same "https" formatted URL if "gitCredentials" is not defined (1.3s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is not defined and repositoryUrl is a "git+https" URL (1.3s)
  ✔ get-git-auth-url › Handle "https" URL with group and subgroup (1.3s)
  ✔ get-git-auth-url › Handle "git" URL with group and subgroup (1.3s)
  ✔ get-git-auth-url › Convert shorthand URL (1.3s)
  ✔ get-git-auth-url › Convert GitLab shorthand URL (1.3s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git" URL (1.3s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "https" URL (1.3s)
  ✔ get-git-auth-url › Return the "http" formatted URL if "gitCredentials" is defined and repositoryUrl is a "http" URL (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git+https" URL (1.2s)
  ✔ get-git-auth-url › Return the "http" formatted URL if "gitCredentials" is defined and repositoryUrl is a "git+http" URL (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "GH_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "GITHUB_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "GL_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "GITLAB_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "BB_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "BITBUCKET_TOKEN" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "BB_TOKEN_BASIC_AUTH" (1.2s)
  ✔ get-git-auth-url › Return the "https" formatted URL if "gitCredentials" is defined with "BITBUCKET_TOKEN_BASIC_AUTH" (1.2s)
  ✔ get-git-auth-url › Handle "git" URL with group and subgroup, with "GIT_CREDENTIALS (1.2s)
  ✔ get-git-auth-url › Handle "https" URL with group and subgroup, with "GIT_CREDENTIALS" (1.2s)
  ✔ get-config › Convert "ci" option to "noCi" (1.1s)
  ✔ get-git-auth-url › Do not add git credential to repositoryUrl if push is allowed (1.6s)
  ✔ get-config › Throw an Error if one of the shareable config cannot be found (1s)
  ✔ get-config › Read options from package.json (1.1s)
  ✔ get-config › Read options from .releaserc.json (1.1s)
  ✔ get-config › Read options from .releaserc.yml (1.2s)
  ✔ get-config › Read options from .releaserc.js (1.2s)
  ✔ get-config › Read options from .releaserc.cjs (1.2s)
  ✔ get-config › Read options from release.config.js (1.2s)
  ✔ get-config › Read configuration from file path in "extends" (1.2s)
  ✔ get-config › Prioritize configuration from config file over "extends" (1.2s)
  ✔ get-config › Allow to unset properties defined in shareable config with "null" (1.2s)
  ✔ get-config › Read options from release.config.cjs (1.2s)
  ✔ get-config › Convert "ci" option to "noCi" when set from extended config (1.2s)
  ✔ get-config › Read configuration from module path in "extends" (1.3s)
  ✔ get-config › Read configuration from an array of paths in "extends" (1.3s)
  ✔ get-config › Prioritize configuration from cli/API options over "extends" (1.3s)
  ✔ get-config › Allow to unset properties defined in shareable config with "undefined" (1.3s)
  ✔ get-config › Prioritise CLI/API parameters over file configuration and git repo (1.3s)
  ✔ get-config › Default values, reading repositoryUrl (http url) from package.json if not set in repo (1.4s)
  ✔ get-config › Default values, reading repositoryUrl from package.json (1.4s)
  ✔ get-config › Default values, reading repositoryUrl from repo if not set in package.json (1.4s)
  ✔ get-last-release › Get the highest non-prerelease valid tag
  ✔ get-last-release › Get the highest prerelease valid tag, ignoring other tags from other prerelease channels
  ✔ get-last-release › Return empty object if no valid tag is found
  ✔ get-last-release › Get the highest non-prerelease valid tag before a certain version
  ✔ get-logger › Expose "error", "success" and "log" functions
  ✔ get-next-version › Increase version for patch release
  ✔ get-next-version › Increase version for minor release
  ✔ get-next-version › Increase version for major release
  ✔ get-next-version › Return 1.0.0 if there is no previous release
  ✔ get-next-version › Increase version for patch release on prerelease branch
  ✔ get-next-version › Increase version for minor release on prerelease branch
  ✔ get-next-version › Increase version for major release on prerelease branch
  ✔ get-next-version › Return 1.0.0 if there is no previous release on prerelease branch
  ✔ get-next-version › Increase version for release on prerelease branch after previous commits were merged to release branch
  ✔ get-next-version › Increase version for release on prerelease branch based on highest commit type since last regular release
  ✔ get-next-version › Increase version for release on prerelease branch when there is no regular releases on other branches
  ✔ get-release-to-add › Return versions merged from release to maintenance branch, excluding lower than branch start range
  ✔ get-release-to-add › Return versions merged between release branches
  ✔ get-release-to-add › Return releases sorted by ascending order
  ✔ get-release-to-add › No lastRelease
  ✔ get-release-to-add › Ignore pre-release versions
  ✔ get-release-to-add › Exclude versions merged from release to maintenance branch if they have the same "channel"
  ✔ get-release-to-add › Exclude versions merged between release branches if they have the same "channel"
  ✔ get-release-to-add › Exclude versions merged between release branches if they all have "channel" set to "false"
  ✔ get-release-to-add › Exclude versions number less than the latest version already released on that branch
  ✔ hide-sensitive › Replace multiple sensitive environment variable values
  ✔ hide-sensitive › Replace multiple occurences of sensitive environment variable values
  ✔ hide-sensitive › Replace sensitive environment variable matching specific regex for "private"
  ✔ hide-sensitive › Replace url-encoded environment variable
  ✔ hide-sensitive › Escape regexp special characters
  ✔ hide-sensitive › Escape regexp special characters in url-encoded environment variable
  ✔ hide-sensitive › Accept "undefined" input
  ✔ hide-sensitive › Return same string if no environment variable has to be replaced
  ✔ hide-sensitive › Exclude empty environment variables from the regexp
  ✔ hide-sensitive › Exclude empty environment variables from the regexp if there is only empty ones
  ✔ hide-sensitive › Exclude nonsensitive GOPRIVATE environment variable for Golang projects from the regexp
  ✔ hide-sensitive › Exclude environment variables with value shorter than SECRET_MIN_SIZE from the regexp
  ✔ git › Return falsy if not in a Git repository (320ms)
  ✔ git › Throws error if obtaining the tags fails (320ms)
  ✔ git › Return empty array if there are no branches (915ms)
  ✔ git › Return "true" for valid tag names (1.2s)
  ✔ git › Return falsy for invalid tag names (1.2s)
  ✔ git › Throw error if the last commit sha cannot be found (1.5s)
  ✔ git › Return falsy if git repository url is not set (1.4s)
  ✔ git › Return git remote repository url from config (1.8s)
  ✔ git › Get the last commit sha (1.9s)
  ✔ git › Get the commit sha for a given tag (2.3s)
  ✔ git › Add tag on head commit (2.3s)
  ✔ git › Return empty object if there is no commit note (2.3s)
  ✔ git › Return git remote repository url set while cloning (2.5s)
  ✔ git › Get a commit note (2.4s)
  ✔ git › Throw error if a commit note in invalid (2.5s)
  ✔ git › Add a commit note (2.5s)
  ✔ git › Return "true" if in a Git repository (2.8s)
  ✔ git › Overwrite a commit note (2.7s)
  ✔ git › Verify if a branch exists (3.3s)
  ✔ git › Unshallow and fetch repository (3.5s)
  ✔ git › Push tag to remote repository (3.6s)
  ✔ git › Return "true" if repository is up to date (3.5s)
  ✔ git › Unshallow and fetch repository with notes (3.9s)
  ✔ git › Return falsy if detached head repository is not up to date (4s)
  ✔ git › Push tag to remote repository with remote branch ahead (4.3s)
  ✔ git › Do not throw error when unshallow a complete repository (4.4s)
  ✔ git › Fetch all tags on a detached head repository (4.4s)
  ✔ git › Get all branches (4.4s)
  ✔ git › Fetch all notes on a detached head repository (4.3s)
  ✔ git › Return falsy if repository is not up to date (4.4s)
  ✔ git › Fetch all tags on a detached head repository with outdated cached repo (GitLab CI) (4.5s)
  ✔ git › Fetch all tags on a repository with a detached head from branch (CircleCI) (4.7s)
  ✖ integration › before hook Rejected promise returned by test
  ✖ integration › after.always hook Rejected promise returned by test
  ✖ 14 tests remaining in test/integration.test.js
  ✔ utils › getLatestVersion
  ✔ utils › getEarliestVersion
  ✔ utils › extractErrors
  ✔ utils › tagsToVersions
  ✔ utils › isMajorRange
  ✔ utils › isMaintenanceRange
  ✔ utils › getUpperBound
  ✔ utils › getLowerBound
  ✔ utils › highest
  ✔ utils › lowest
  ✔ utils › getFirstVersion
  ✔ utils › getRange
  ✔ utils › makeTag
  ✔ utils › isSameChannel
  ✔ verify › Throw a SemanticReleaseError if does not run on a git repository (139ms)
  ✔ verify › Throw a AggregateError (525ms)
  ✔ verify › Throw a SemanticReleaseError if the "tagFormat" contains multiple "version" variables (1s)
  ✔ verify › Throw a SemanticReleaseError if the "tagFormat" is not valid (1s)
  ✔ verify › Throw a SemanticReleaseError if the "tagFormat" does not contains the "version" variable (1s)
  ✔ verify › Return "true" if all verification pass (1s)
  ✔ verify › Throw a SemanticReleaseError for each invalid branch (1s)
  ✔ branches › branches › Throw a SemanticReleaseError if there is duplicate branches (222ms)
  ✔ branches › branches › Throw a SemanticReleaseError for each invalid branch name (217ms)
  ✔ branches › branches › Throw SemanticReleaseError for invalid configurations (300ms)
  ✔ branches › branches › Enforce ranges with branching release workflow (2.3s)
  ✔ index › Returns false if triggered by a PR (11.6s)
  ✔ branches › expand › Expand branches defined with globs (979ms)
  ✔ index › Throw SemanticReleaseError if repositoryUrl is not set and cannot be found from repo config (13.3s)
  ✔ index › Returns false if not running from the configured branch (13.6s)
  ✔ branches › get-tags › Return branches with and empty tags array if no valid tag is found (698ms)
  ✔ branches › get-tags › Get the valid tags (1s)
  ✔ branches › get-tags › Return branches with and empty tags array if no valid tag is found in history of configured branches (1s)
  ✔ branches › get-tags › Get the highest valid tag corresponding to the "tagFormat" (1.1s)
  ✔ branches › get-tags › Get the valid tags from multiple branches (1.3s)
  ✔ index › Log both plugins errors and errors thrown by "fail" plugin (14.6s)
  ✔ index › Call "fail" only if a plugin returns a SemanticReleaseError (14.6s)
  ✔ index › Hide sensitive information passed to "fail" plugin (14.6s)
  ✔ index › Log all "verifyConditions" errors (14.8s)
  ✔ branches › normalize › Maintenance branches - initial state
  ✔ branches › normalize › Maintenance branches - cap range to first release present on default branch and not in any Maintenance one
  ✔ branches › normalize › Maintenance branches - cap range to default branch last release if all release are also present on maintenance branch
  ✔ branches › normalize › Release branches - initial state
  ✔ branches › normalize › Release branches - 3 release branches
  ✔ branches › normalize › Release branches - 2 release branches
  ✔ branches › normalize › Release branches - 1 release branches
  ✔ branches › normalize › Release branches - cap ranges to first release only present on following branch
  ✔ branches › normalize › Release branches - Handle missing previous tags in branch history
  ✔ branches › normalize › Release branches - limit releases on 2nd and 3rd branch based on 1st branch last release
  ✔ branches › normalize › Prerelease branches
  ✔ branches › normalize › Allow to set channel to "false" to prevent default
  ✔ index › Returns false if there is no relevant changes (15.7s)
  ✔ definitions › branches › A "maintenance" branch is identified by having a "range" property or a "name" formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › A "maintenance" branches must have a "range" property formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › The "maintenance" branches must have unique ranges
  ✔ definitions › branches › A "prerelease" branch is identified by having a thruthy "prerelease" property
  ✔ definitions › branches › A "prerelease" branch must have a valid prerelease detonation in "prerelease" property or in "name" if "prerelease" is "true"
  ✔ definitions › branches › The "prerelease" branches must have unique "prerelease" property
  ✔ definitions › branches › A "release" branch is identified by not havin a "range" or "prerelease" property or a "name" formatted like "N.x", "N.x.x" or "N.N.x"
  ✔ definitions › branches › There must be between 1 and 3 release branches
  ✔ index › Dry-run skips fail (16s)
  ✔ definitions › plugins › The "analyzeCommits" plugin output must be either undefined or a valid semver release type
  ✔ definitions › plugins › The "generateNotes" plugin output, if defined, must be a string
  ✔ definitions › plugins › The "publish" plugin output, if defined, must be an object or "false"
  ✔ definitions › plugins › The "addChannel" plugin output, if defined, must be an object
  ✔ definitions › plugins › The "generateNotes" plugins output are concatenated with separator and sensitive data is hidden
  ✔ definitions › plugins › The "analyzeCommits" plugins output are reduced to the highest release type
  ✔ index › Log all "verifyRelease" errors (16.9s)
  ✔ index › Throw an Error if plugin returns an unexpected value (16.8s)
  ✔ index › Returns false value if triggered on an outdated clone (17.4s)
  ✔ index › Force a dry-run if not on a CI and "noCi" is not explicitly set (17.6s)
  ✔ index › Dry-run does not print changelog if "generateNotes" return "undefined" (17.6s)
  ✔ plugins › normalize › Normalize and load plugin from string
  ✔ plugins › normalize › Normalize and load plugin from object
  ✔ plugins › normalize › Normalize and load plugin from a base file path
  ✔ plugins › normalize › Normalize and load plugin from function
  ✔ plugins › normalize › Normalize and load plugin that retuns multiple functions
  ✔ plugins › normalize › Return noop if the plugin is not defined
  ✔ plugins › normalize › Throws an error if the plugin return an object without the expected plugin function
  ✔ plugins › normalize › Throws an error if the plugin is not found
  ✔ plugins › normalize › Plugin is called with "pluginConfig" (with object definition) and input
  ✔ plugins › normalize › Plugin is called with "pluginConfig" (with array definition) and input
  ✔ plugins › normalize › Prevent plugins to modify "pluginConfig"
  ✔ plugins › normalize › Prevent plugins to modify its input
  ✔ plugins › normalize › Always pass a defined "pluginConfig" for plugin defined with string
  ✔ plugins › normalize › Always pass a defined "pluginConfig" for plugin defined with path
  ✔ plugins › normalize › Wrap plugin in a function that add the "pluginName" to the error"
  ✔ plugins › normalize › Wrap plugin in a function that add the "pluginName" to multiple errors"
  ✔ plugins › normalize › Wrap "analyzeCommits" plugin in a function that validate the output of the plugin
  ✔ plugins › normalize › Wrap "generateNotes" plugin in a function that validate the output of the plugin
  ✔ plugins › normalize › Wrap "publish" plugin in a function that validate the output of the plugin
  ✔ plugins › normalize › Wrap "addChannel" plugin in a function that validate the output of the plugin
  ✔ index › Exclude commits with [skip release] or [release skip] from analysis (17.9s)
  ✔ plugins › pipeline › Throw all errors from all steps throwing an AggregateError
  ✔ plugins › pipeline › Stop execution and throw error if a step rejects
  ✔ plugins › pipeline › Throw all errors from the first step throwing an AggregateError
  ✔ plugins › pipeline › Execute each function in series passing the same input
  ✔ plugins › pipeline › Execute all even if a Promise rejects
  ✔ plugins › pipeline › Execute each function in series passing a transformed input from "getNextInput"
  ✔ plugins › pipeline › Execute each function in series passing the "lastResult" and "result" to "getNextInput"
  ✔ plugins › pipeline › Execute each function in series calling "transform" to modify the results
  ✔ plugins › pipeline › Execute each function in series calling "transform" to modify the results with "settleAll"
  ✔ plugins › pipeline › Execute each function in series passing a transformed input even if a step rejects
  ✔ index › Call all "success" plugins even if one errors out (18.8s)
  ✔ index › Hide sensitive information passed to "success" plugin (18.8s)
  ✔ index › Allow local releases with "noCi" option (18.9s)
  ✔ index › Use custom tag format (19.3s)
  ✔ index › Get all commits including the ones not in the shallow clone (19.8s)
  ✔ plugins › plugins › Export default plugins (280ms)
  ✔ plugins › plugins › Export plugins based on steps config (234ms)
  ✔ plugins › plugins › Unknown steps of plugins configured in "plugins" are ignored (215ms)
  ✔ plugins › plugins › Use default when only options are passed for a single plugin (209ms)
  ✔ plugins › plugins › Throw an error for each invalid plugin configuration
  ✔ plugins › plugins › Throw EPLUGINSCONF error if the "plugins" option contains an old plugin definition (returns a function)
  ✔ plugins › plugins › Throw EPLUGINSCONF error for each invalid definition if the "plugins" option
  ✔ plugins › plugins › Merge global options with plugin options
  ✔ plugins › plugins › Export plugins based on "plugins" config (single definition) (246ms)
  ✔ plugins › plugins › Export plugins based on "plugins" config (array) (252ms)
  ✔ plugins › plugins › Merge global options, "plugins" options and step options (239ms)
  ✔ plugins › plugins › Export plugins loaded from the dependency of a shareable config file (243ms)
  ✔ plugins › plugins › Export plugins loaded from the dependency of a shareable config module (252ms)
  ✔ index › Use new gitHead, and recreate release notes if a prepare plugin create a commit (20.4s)
  ✔ index › Throws "EINVALIDNEXTVERSION" if next release is out of range of the current maintenance branch (20.6s)
  ✔ plugins › utils › validatePlugin
  ✔ plugins › utils › validateStep: optional plugin configuration
  ✔ plugins › utils › validateStep: required plugin configuration
  ✔ plugins › utils › loadPlugin
  ✔ plugins › utils › parseConfig
  ✔ index › Dry-run skips addChannel, prepare, publish and success (21s)
  ✔ index › Plugins are called with expected values (22s)
  ✔ index › Throws "EINVALIDNEXTVERSION" if next release is out of range of the current release branch (21.9s)
  ✔ index › Accept "undefined" value returned by "generateNotes" and "false" by "publish" and "addChannel" (21.9s)
  ✔ index › Do not add pre-releases to a different channel (22.1s)
  ✔ index › Make a new release when a commit is forward-ported to an upper branch (22.2s)
  ✔ index › Throws "EINVALIDMAINTENANCEMERGE" if merge an out of range release in a maintenance branch (22.2s)
  ✔ index › Add version to a channel after a merge (fast-forward) (22.5s)
  ✔ index › Add version to a channel after a merge (rebase) (22.5s)
  ✔ index › Add version to a channel after a merge (non fast-forward) (22.5s)
  ✔ index › Publish pre-releases the same channel as regular releases (23.5s)
  ✔ index › Publish a pre-release version (23.5s)
  ✔ index › Publish releases from different branch on the same channel (24.4s)
  ─

  integration › before hook

  Rejected promise returned by test. Reason:

  Error {
    address: '/var/run/docker.sock',
    code: 'ENOENT',
    errno: -2,
    syscall: 'connect',
    message: 'connect ENOENT /var/run/docker.sock',
  }



  integration › after.always hook

  Rejected promise returned by test. Reason:

  TypeError {
    message: 'Cannot read properties of undefined (reading \'stop\')',
  }

  › Object.stop (test/helpers/gitbox.js:42:19)
  › test/integration.test.js:62:29

  ─

  2 hooks failed
----------------------------------|---------|----------|---------|---------|-------------------
File                              | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------------------------------|---------|----------|---------|---------|-------------------
All files                         |   97.21 |    97.42 |   98.46 |   97.28 |                   
 semantic-release                 |   98.25 |    91.86 |     100 |    98.2 |                   
  cli.js                          |     100 |      100 |     100 |     100 |                   
  index.js                        |      98 |    90.54 |     100 |   97.96 | 94-98             
 semantic-release/lib             |   93.63 |    96.92 |    97.4 |   93.82 |                   
  get-commits.js                  |     100 |      100 |     100 |     100 |                   
  get-config.js                   |     100 |    96.67 |     100 |     100 | 89                
  get-error.js                    |     100 |      100 |     100 |     100 |                   
  get-git-auth-url.js             |   63.04 |    86.84 |      60 |   63.64 | 40-45,103-116     
  get-last-release.js             |     100 |      100 |     100 |     100 |                   
  get-logger.js                   |     100 |      100 |     100 |     100 |                   
  get-next-version.js             |     100 |      100 |     100 |     100 |                   
  get-release-to-add.js           |     100 |      100 |     100 |     100 |                   
  git.js                          |     100 |      100 |     100 |     100 |                   
  hide-sensitive.js               |     100 |      100 |     100 |     100 |                   
  utils.js                        |     100 |      100 |     100 |     100 |                   
  verify.js                       |     100 |      100 |     100 |     100 |                   
 semantic-release/lib/branches    |     100 |      100 |     100 |     100 |                   
  expand.js                       |     100 |      100 |     100 |     100 |                   
  get-tags.js                     |     100 |      100 |     100 |     100 |                   
  index.js                        |     100 |      100 |     100 |     100 |                   
  normalize.js                    |     100 |      100 |     100 |     100 |                   
 semantic-release/lib/definitions |   98.97 |      100 |   98.33 |   98.95 |                   
  branches.js                     |     100 |      100 |     100 |     100 |                   
  constants.js                    |     100 |      100 |     100 |     100 |                   
  errors.js                       |    97.3 |      100 |   96.43 |   97.22 | 32                
  plugins.js                      |     100 |      100 |     100 |     100 |                   
 semantic-release/lib/plugins     |     100 |      100 |     100 |     100 |                   
  index.js                        |     100 |      100 |     100 |     100 |                   
  normalize.js                    |     100 |      100 |     100 |     100 |                   
  pipeline.js                     |     100 |      100 |     100 |     100 |                   
  utils.js                        |     100 |      100 |     100 |     100 |                   
----------------------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client username of execa----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> username@6.0.0 test
> xo && ava && tsd


  Uncaught exception in test-fallback.js

  file:///data/js-variants/multee/Clients/execa/username/index.js:3
  import execa from 'execa';
         ^^^^^
  SyntaxError: The requested module 'execa' does not provide an export named 'default'

  Uncaught exception in test.js

  file:///data/js-variants/multee/Clients/execa/username/index.js:3
  import execa from 'execa';
         ^^^^^
  SyntaxError: The requested module 'execa' does not provide an export named 'default'

  ✖ test.js exited with a non-zero exit code: 1
  ✖ test-fallback.js exited with a non-zero exit code: 1

  Uncaught exception in test-userinfo.js

  file:///data/js-variants/multee/Clients/execa/username/index.js:3
  import execa from 'execa';
         ^^^^^
  SyntaxError: The requested module 'execa' does not provide an export named 'default'

  ✖ test-userinfo.js exited with a non-zero exit code: 1
  ─

  3 uncaught exceptions
npm uninstall

removed 1 package, and audited 678 packages in 4s

160 packages are looking for funding
  run `npm fund` for details

5 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> username@6.0.0 test
> xo && ava && tsd


  Uncaught exception in test.js

  Error: Cannot find package 'execa' imported from /data/js-variants/multee/Clients/execa/username/index.js

  Uncaught exception in test-fallback.js

  Error: Cannot find package 'execa' imported from /data/js-variants/multee/Clients/execa/username/index.js

  ✖ test.js exited with a non-zero exit code: 1
  ✖ test-fallback.js exited with a non-zero exit code: 1

  Uncaught exception in test-userinfo.js

  Error: Cannot find package 'execa' imported from /data/js-variants/multee/Clients/execa/username/index.js

  ✖ test-userinfo.js exited with a non-zero exit code: 1
  ─

  3 uncaught exceptions
----------------------run test done----------------------
express
subdir: firebase-functions hubot loopback probot routing-controllers
----------------------client firebase-functions of express----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> firebase-functions@3.22.0 test
> mocha --file ./mocha/setup.ts "spec/**/*.spec.ts"



  Change
    applyFieldMask
      ✓ should handle deleted values
      ✓ should handle created values
      ✓ should handle mutated values
    fromJSON
      ✓ should create a Change object with a `before` and `after`
      ✓ should apply the customizer function to `before` and `after`

  convertInvoker
    ✓ should raise an error on empty array
    ✓ should raise an error on empty string
    ✓ should raise an error on empty string with service accounts
    ✓ should raise an error on mixing public and service accounts
    ✓ should raise an error on mixing private and service accounts
    ✓ should return the correct public invoker
    ✓ should return the correct private invoker
    ✓ should return the correct scalar invoker
    ✓ should return the correct array invoker

  onCallHandler
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle success
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle null data and return
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle void return
    ✓ should reject bad method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should ignore charset
    ✓ should reject bad content type
    ✓ should reject extra body fields
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle unhandled error (53ms)
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle unknown error status
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle well-formed error
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle auth (400ms)
    ✓ should reject bad auth
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle AppCheck token (57ms)
    ✓ should reject bad AppCheck token
    ✓ should handle bad AppCheck token with callable option
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle instance id
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should expose raw request
    skip token verification debug mode support
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
      ✓ should skip auth token verification
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
      ✓ should skip app check token verification

  encoding/decoding
    ✓ encodes null
    ✓ encodes int
    ✓ decodes int
    ✓ encodes long
    ✓ decodes long
    ✓ encodes unsigned long
    ✓ decodes unsigned long
    ✓ encodes double
    ✓ decodes double
    ✓ encodes string
    ✓ decodes string
    ✓ encodes array
    ✓ decodes array
    ✓ encodes object
    ✓ decodes object
    ✓ encodes function as an empty object

  decode tokens
    ✓ decodes valid Auth ID Token
    ✓ decodes invalid Auth ID Token
    ✓ decodes valid App Check Token
    ✓ decodes invalid App Check Token

  identity
    userRecordConstructor
      ✓ will provide falsey values for fields that are not in raw wire data
      ✓ will not interfere with fields that are in raw wire data
      ✓ will convert raw wire fields createdAt and lastSignedInAt to creationTime and lastSignInTime
      ✓ should stringify the record
    isValidRequest
      ✓ should error on non-post
      ✓ should error on bad Content-Type
      ✓ should error without req body
      ✓ should error without req body data
      ✓ should error without req body
      ✓ should not error on valid request
    parseMetadata
      ✓ should parse an undefined object
      ✓ should parse a decoded metadata object
    parseProviderData
      ✓ should parse the user info
      ✓ should parse the user info with phone
    parseDate
      ✓ should return null if tokens undefined
      ✓ should parse the date
    parseMultiFactor
      ✓ should return null on undefined factor
      ✓ should return null without enrolled factors
      ✓ should error on an invalid factor
      ✓ should correctly parse factors
    parseUserRecord
      ✓ should error if decoded does not have uid
      ✓ should parse user record
    parseAuthEventContext
      ✓ should parse an unknown event
      ✓ should parse a beforeSignIn event
      ✓ should parse a beforeCreate event
    validateAuthResponse
      ✓ should not throw on undefined request
      ✓ should throw an error if customClaims have a blocked claim
      ✓ should throw an error if customClaims size is too big
      ✓ should throw an error if sessionClaims have a blocked claim
      ✓ should throw an error if sessionClaims size is too big
      ✓ should throw an error if the combined customClaims & sessionClaims size is too big
    getUpdateMask
      ✓ should return empty string on undefined response
      ✓ should return empty on only customClaims and sessionClaims
      ✓ should return the right claims on a response

  onEnqueueHandler
    ✓ should handle success
    ✓ should reject bad method
    ✓ should ignore charset
    ✓ should reject bad content type
    ✓ should reject extra body fields
    ✓ should handle unhandled error
    ✓ should handle unknown error status
    ✓ should handle well-formed error
    ✓ should handle auth
    ✓ should accept unsigned auth too
    ✓ should skip auth in emulated environment

  logger (structured)
    logging methods
{"severity":"INFO","message":"hello { middle: 'obj' } end message"}
      ✓ should coalesce arguments into the message
{"additional":"context","severity":"INFO","message":"hello world"}
      ✓ should merge structured data from the last argument
{"severity":"INFO","message":"hello world null"}
      ✓ should not recognize null as a structured logging object
    write
      structured logging
        write
          ✓ should remove circular references
          ✓ should remove circular references in arrays
          ✓ should not break on objects that override toJSON
          ✓ should not alter parameters that are logged
{"severity":"DEBUG","message":"test"}
          ✓ should output DEBUG severity to stdout
{"severity":"INFO","message":"test"}
          ✓ should output INFO severity to stdout
{"severity":"NOTICE","message":"test"}
          ✓ should output NOTICE severity to stdout
          ✓ should output WARNING severity to stderr
          ✓ should output ERROR severity to stderr
          ✓ should output CRITICAL severity to stderr
          ✓ should output ALERT severity to stderr
          ✓ should output EMERGENCY severity to stderr

  extractStack
    ✓ extracts stack from a simple module
    ✓ extracts stack with required APIs
    ✓ extracts stack from a module with group functions
    with GCLOUD_PROJECT env var
      ✓ extracts stack from a simple module
      ✓ extracts stack with required APIs

  mergedRequiredAPIs
    ✓ leaves required APIs unchanged if nothing to merge
    ✓ merges reasons given overlapping required api
    ✓ merges reasons given overlapping required api
    ✓ does not repeat the same reason

  loadStack
    commonjs
      basic
        ✓ loads stack given relative path (78ms)
        ✓ loads stack given absolute path
      has main
        ✓ loads stack given relative path
        ✓ loads stack given absolute path
      grouped
        ✓ loads stack given relative path
        ✓ loads stack given absolute path
      has params
        ✓ loads stack given relative path
        ✓ loads stack given absolute path

  path-pattern
    trimParam
      ✓ should trim a capture param without equals
      ✓ should trim a capture param with equals
    extractMatches
      ✓ should parse without multi segment
      ✓ should parse multi segment with params after
      ✓ should parse multi segment param with params after
      ✓ should parse multi segment with params before
      ✓ should parse multi segment param with params before
      ✓ should parse multi segment with params before and after
      ✓ should parse multi segment param with params before
      ✓ should parse an instance

  utilities
    path
      #normalizePath
        ✓ should strip leading and trailing slash
      #pathParts
        ✓ should turn a path into an array of strings
        ✓ should turn a root path, empty string, or null path into an empty array

  apps
    retain/release
      ✓ should retain/release ref counters appropriately
      ✓ should only decrement counter after garbageCollectionInterval is up
      ✓ should call _destroyApp if app no longer used
      ✓ should not call _destroyApp if app used again while waiting for release
      ✓ should increment ref counter for each subsequent retain
      ✓ should work with staggering sets of retain/release

  makeCloudFunction
    ✓ should put a __trigger/__endpoint on the returned CloudFunction
    ✓ should have legacy event type in __trigger/__endpoint if provided
    ✓ should include converted options in __endpoint
    ✓ should set retry given failure policy in __endpoint
    ✓ should setup a scheduleTrigger in __endpoint given a schedule
    ✓ should construct the right context for event
    ✓ should throw error when context.params accessed in handler environment

  makeParams
    ✓ should construct params from the event resource of events

  makeAuth and makeAuthType
    ✓ should construct correct auth and authType for admin user
    ✓ should construct correct auth and authType for unauthenticated user
    ✓ should construct correct auth and authType for a user

  config()
    ✓ will never load in GCFv2
    ✓ loads config values from .runtimeconfig.json
    ✓ does not provide firebase config if .runtimeconfig.json not invalid
    ✓ does not provide firebase config if .ruuntimeconfig.json has no firebase property
    ✓ loads Firebase configs from FIREBASE_CONFIG env variable
    ✓ loads Firebase configs from FIREBASE_CONFIG env variable pointing to a file
    ✓ accepts alternative locations for config file
    ✓ accepts full JSON in env.CLOUD_RUNTIME_CONFIG

  FunctionBuilder
    ✓ should allow supported region to be set
    ✓ should allow multiple supported regions to be set
    ✓ should allow all supported regions to be set
    ✓ should allow valid runtime options to be set
    ✓ should apply a default failure policy if it's aliased with `true`
    ✓ should allow both supported region and valid runtime options to be set
    ✓ should allow both valid runtime options and supported region to be set in reverse order
    ✓ should fail if supported region but invalid runtime options are set (reverse order)
    ✓ should throw an error if user chooses a failurePolicy which is neither an object nor a boolean
    ✓ should throw an error if user chooses a failurePolicy.retry which is not an object
    ✓ should throw an error if user chooses an invalid memory allocation
    ✓ should throw an error if user chooses an invalid timeoutSeconds
    ✓ should throw an error if user chooses no region when using .region()
    ✓ should allow a ingressSettings to be set
    ✓ should throw an error if user chooses an invalid ingressSettings
    ✓ should allow a vpcConnector to be set
    ✓ should allow a vpcConnectorEgressSettings to be set
    ✓ should throw an error if user chooses an invalid vpcConnectorEgressSettings
    ✓ should allow a serviceAccount to be set as-is
    ✓ should allow a serviceAccount to be set with generated service account email
    ✓ should set a null serviceAccountEmail if service account is set to `default`
    ✓ should throw an error if serviceAccount is set to an invalid value
    ✓ should allow setting 4GB memory option
    ✓ should allow labels to be set
    ✓ should throw an error if more than 58 labels are set
    ✓ should throw an error if labels has a key that is too long
    ✓ should throw an error if labels has key that is too short
    ✓ should throw an error if labels has a value that is too long
    ✓ should throw an error if labels has a key that contains invalid characters
    ✓ should throw an error if labels has a value that contains invalid characters
    ✓ should throw an error if a label key starts with a reserved namespace
    ✓ should throw an error if invoker is an empty string
    ✓ should throw an error if invoker is an empty array
    ✓ should throw an error if invoker has an empty string
    ✓ should throw an error if public identifier is in the invoker array
    ✓ should throw an error if private identifier is in the invoker array
    ✓ should allow valid secret config expressed using short form
    ✓ should throw error given secrets expressed with full resource name
    ✓ should throw error given invalid secret config
    ✓ should throw error given invalid secret with versions

  Analytics Functions
    EventBuilder
      ✓ should allow both region and runtime options to be set
      #onLog
        ✓ should return a trigger/endpoint with appropriate values
      #dataConstructor
        ✓ should handle an event with the appropriate fields
        ✓ should remove xValues
        ✓ should change microsecond timestamps to ISO strings, and offsets to millis
        ✓ should populate currency fields
        ✓ should recognize all the fields the payload can contain
    handler namespace
      #onLog
        ✓ should return an empty trigger/endpoint
        ✓ should handle an event with the appropriate fields
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should not throw when #run is called

  Auth Functions
    AuthBuilder
      ✓ should allow both region and runtime options to be set
      #onCreate
        ✓ should return a trigger/endpoint with appropriate values
      #onDelete
        ✓ should return a trigger/endpoint with appropriate values
      beforeCreate
        ✓ should create the function without options
        ✓ should create the function with options
      beforeSignIn
        ✓ should create the function without options
        ✓ should create the function with options
      #_dataConstructor
        ✓ should handle wire format as of v5.0.0 of firebase-admin
    handler namespace
      #onCreate
        ✓ should return an empty trigger
        ✓ should return an empty endpoint
      #onDelete
        ✓ should return an empty trigger
        ✓ should return an empty endpoint
        ✓ should handle wire format as of v5.0.0 of firebase-admin
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  Database Functions
    DatabaseBuilder
      ✓ should allow both region and runtime options to be set
      #onWrite()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onCreate()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onUpdate()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onDelete()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
    handler namespace
      #onWrite()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onCreate()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onUpdate()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onDelete()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
    process.env.FIREBASE_CONFIG not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called
    extractInstanceAndPath
      ✓ should return correct us-central prod instance and path strings if domain is missing
      ✓ should return the correct staging instance and path strings if domain is present
      ✓ should return the correct instance and path strings if root path is /refs
      ✓ should return the correct instance and path strings if a child path contain /refs
      ✓ should return the correct multi-region instance and path strings if domain is present
      ✓ should throw an error if the given instance name contains anything except alphanumerics and dashes
      ✓ should use the emulator host when present
    DataSnapshot
      #ref: firebase.database.Reference
        ✓ should return a ref for correct instance, not the default instance (65ms)
      #val(): any
        ✓ should return child values based on the child path
        ✓ should return null for children past a leaf
        ✓ should return a leaf value
        ✓ should coerce object into array if all keys are integers
        ✓ should deal with zero-values appropriately
        ✓ should return correct values when data has "length" property
      #child(): DataSnapshot
        ✓ should work with multiple calls
      #exists(): boolean
        ✓ should be true for an object value
        ✓ should be true for a leaf value
        ✓ should be false for a non-existent value
        ✓ should be false for a value pathed beyond a leaf
      #forEach(action: (a: DataSnapshot) => boolean): boolean
        ✓ should iterate through child snapshots
        ✓ should have correct key values for child snapshots
        ✓ should not execute for leaf or null nodes
        ✓ should cancel further enumeration if callback returns true
        ✓ should not cancel further enumeration if callback returns a truthy value
        ✓ should not cancel further enumeration if callback does not return
      #numChildren()
        ✓ should be key count for objects
        ✓ should be 0 for non-objects
      #hasChild(childPath): boolean
        ✓ should return true for a child or deep child
        ✓ should return false if a child is missing
      #key: string
        ✓ should return the key name
        ✓ should return null for the root
        ✓ should work for child paths
      #toJSON(): Object
        ✓ should return the current value
        ✓ should be stringifyable

  Firestore Functions
    document builders and event types
      ✓ should allow terse constructors
      ✓ should allow custom namespaces
      ✓ should allow custom databases
      ✓ should allow both custom database and namespace
      ✓ should allow both region and runtime options to be set
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called
    dataConstructor
      ✓ constructs appropriate fields and getters for event.data on "document.write" events (74ms)
      ✓ constructs appropriate fields and getters for event.data on "document.create" events
      ✓ constructs appropriate fields and getters for event.data on "document.update" events
      ✓ constructs appropriate fields and getters for event.data on "document.delete" events
    handler namespace
      ✓ constructs correct data type and sets trigger to {} on "document.write" events
      ✓ constructs correct data type and sets trigger to {} on "document.create" events
      ✓ constructs correct data type and sets trigger to {} on "document.update" events
      ✓ constructs correct data type and sets trigger to {} on "document.delete" events
    SnapshotConstructor
      #data()
        ✓ should parse int values
        ✓ should parse double values
        ✓ should parse null values
        ✓ should parse boolean values
        ✓ should parse string values
        ✓ should parse array values
        ✓ should parse object values
        ✓ should parse GeoPoint values
        ✓ should parse reference values
        ✓ should parse timestamp values with precision to the millisecond
        ✓ should parse timestamp values with precision to the second
        ✓ should parse binary values
      Other DocumentSnapshot methods
        ✓ should support #exists
        ✓ should support #ref
        ✓ should support #id
        ✓ should support #createTime
        ✓ should support #updateTime
        ✓ should support #readTime
      Handle empty and non-existent documents
        ✓ constructs non-existent DocumentSnapshot when whole document deleted
        ✓ constructs existent DocumentSnapshot with empty data when all fields of document deleted

  CloudHttpsBuilder
    #onRequest
      ✓ should return a trigger with appropriate values
      ✓ should allow both region and runtime options to be set

  handler namespace
    #onRequest
      ✓ should return an empty trigger
    #onCall
      ✓ should return an empty trigger

  #onCall
    ✓ should return a trigger/endpoint with appropriate values
    ✓ should allow both region and runtime options to be set
    ✓ has a .run method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should lock to the v1 API even with function.length == 1

  callable CORS
    ✓ handles OPTIONS preflight
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ adds CORS headers

  Pubsub Functions
    pubsub.Message
      #json
        ✓ should return json decoded from base64
        ✓ should preserve passed in json
      #toJSON
        ✓ should be JSON stringify-able
    pubsub.FunctionBuilder
      ✓ should allow both region and runtime options to be set
      #onPublish
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should throw with improperly formatted topics
        ✓ should properly handle a new-style event
      #schedule
        ✓ should return a trigger/endpoint with schedule
        ✓ should return a trigger/endpoint with schedule and timeZone when one is chosen
        ✓ should return a trigger/endpoint with schedule and retry config when called with retryConfig
        ✓ should return a trigger/endpoint with schedule, timeZone and retry configwhen called with retryConfig and timeout
        ✓ should return an appropriate trigger/endpoint when called with region and options
        ✓ should return an appropriate trigger/endpoint when called with region, timeZone, and options
        ✓ should return an appropriate trigger/endpoint when called with region, options and retryConfig
        ✓ should return an appropriate trigger/endpoint when called with region, options, retryConfig, and timeZone
    handler namespace
      #onPublish
        #topic
          ✓ should return an empty trigger
          ✓ should properly handle a new-style event
        #schedule
          ✓ should return an empty trigger
          ✓ should return a handler with a proper event context
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  RemoteConfig Functions
    #onUpdate
      ✓ should have the correct trigger
      ✓ should allow both region and runtime options to be set
    unwraps TemplateVersion
      ✓ should unwrap the version in the event
    handler namespace
      #onUpdate
        ✓ should have an empty trigger
        ✓ should correctly unwrap the event

  Storage Functions
    ObjectBuilder
      ✓ should allow both region and runtime options to be set
      #onArchive
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onDelete
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onFinalize
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onMetadataUpdate
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
    namespace handler
      #onArchive
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onDelete
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onFinalize
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onMetadataUpdate
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
    process.env.FIREBASE_CONFIG not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  #onDispatch
    ✓ should return a trigger/endpoint with appropriate values
    ✓ should allow both region and runtime options to be set
    ✓ has a .run method
    ✓ should lock to the v1 API even with function.length == 1

  handler namespace
    ✓ should return an empty trigger

  Test Lab Functions
    #onComplete
      with process.env.GCLOUD_PROJECT set
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should parse TestMatrix in "INVALID" state
        ✓ should parse TestMatrix in "FINISHED" state
      process.env.GCLOUD_PROJECT not set
        ✓ should not throw if trigger is not accessed
        ✓ should throw when trigger is accessed
        ✓ should throw when endpoint is accessed
    TestMatrix
      constructor
        ✓ should populate basic fields
    ClientInfo
      constructor
        ✓ should populate basic fields
        ✓ should populate key/value details
    ResultStorage
      constructor
        ✓ should populate basic fields
        ✓ should not throw on unset fields

  setup()
    ✓ sets GCLOUD_PROJECT from FIREBASE_CONFIG
    ✓ does not set GCLOUD_PROJECT if already defined

  utils
    .applyChange(from: any, to: any): any
      ✓ should return the to value for non-object values of from and to
      ✓ should return the merged value of two objects

  params
    ✓ should add a param to the declared params
    ✓ should replace a samed-name param in the declared params
    defineString().value
      ✓ should return a '' zero value when no value and no undefined
      ✓ should return the default when no value and one is provided
      ✓ should return the value over the default
    defineInt().value
      ✓ should return 0 zero value
      ✓ should coerce a matching string into an int
      ✓ should return a matching default value
      ✓ should throw when invalid value is passed
    defineFloat().value
      ✓ should return 0 zero value
      ✓ should coerce a matching string into a float
      ✓ should return a matching default value
      ✓ should throw when invalid value is passed
    defineBoolean().value
      ✓ should return false zero value
      ✓ should coerce "true" into true
      ✓ should coerce "TrUe" into true
      ✓ should coerce "yes" into true
      ✓ should coerce "1" into true
      ✓ should coerce "false" into false
      ✓ should coerce "FaLsE" into false
      ✓ should coerce "no" into false
      ✓ should coerce "0" into false
      ✓ should return a matching default value
      ✓ should error with non-true/false value
    defineList().value
      ✓ should return [] zero value
      ✓ should coerce comma-separated values into a string list
      ✓ should coerce a comma-and-space-separated values into a string list
      ✓ should return a matching default value
    defineJSON().value
      ✓ should return {} zero value
      ✓ should coerce objects from JSON
      ✓ should coerce arrays from JSON
      ✓ should return a matching default value
      ✓ should throw with invalid JSON
    Param
      #toSpec()
        ✓ should cast non-string defaults to strings
        ✓ should passthrough supplied options
        ✓ ListParam should properly stringify its default

  alerts
    onAlertPublished
      ✓ should create the function without opts
      ✓ should create the function with opts
      ✓ should have a .run method
    getEndpointAnnotation
      ✓ should define the endpoint without appId and opts
      ✓ should define a complex endpoint without appId
      ✓ should define a complex endpoint
      ✓ should merge global & specific opts
    getOptsAndAlertTypeAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  appDistribution
    onNewTesterIosDevicePublished
      ✓ should create a function with alertType & appId
      ✓ should create a function with opts
      ✓ should create a function with appid in opts
      ✓ should create a function without opts or appId
      ✓ should create a function with a run method
    onInAppfeedbackPublished
      ✓ should create a function with alertType & appId
      ✓ should create a function with opts
      ✓ should create a function with appid in opts
      ✓ should create a function without opts or appId
      ✓ should create a function with a run method
    getOptsAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  billing
    onPlanUpdatePublished
      ✓ should create a function with only handler
      ✓ should create a function with opts & handler
    onPlanAutomatedUpdatePublished
      ✓ should create a function with only handler
      ✓ should create a function with opts & handler
    onOperation
      ✓ should create a function with alertType only
      ✓ should create a function with opts
      ✓ should create a function with a run method

  crashlytics
    onNewFatalIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onNewNonfatalIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onRegressionAlertPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onStabilityDigestPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onVelocityAlertPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onNewAnrIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onOperation
      ✓ should create a function with alertType only
      ✓ should create a function with alertType & appId
      ✓ should create a function with base opts
      ✓ should create a function with appid in opts
      ✓ should create a function with a run method
    getOptsAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  database
    makeParams
      ✓ should make params with basic path
      ✓ should make params with multi segment path
      ✓ should make params with multi segment path capture
      ✓ should make params for a full path and instance
    getOpts
      ✓ should return opts when passed in a path
      ✓ should return opts when passed in an options object
    makeEndpoint
      ✓ should create an endpoint with an instance wildcard
      ✓ should create an endpoint without an instance wildcard
    onChangedOperation
      ✓ should create a function for a written event
      ✓ should create a function for a updated event
      ✓ should create a complex function
    onOperation
      ✓ should create a function for a created event
      ✓ should create a function for a deleted event
      ✓ should create a complex function
    onValueWritten
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueCreated
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueUpdated
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueDeleted
      ✓ should create a function with a reference
      ✓ should create a function with opts

  v2/eventarc
    onCustomEventPublished
      ✓ should create a minimal trigger/endpoint with default channel
      ✓ should create a minimal trigger/endpoint with opts
      ✓ should create a minimal trigger with channel with opts
      ✓ should create a complex trigger/endpoint with appropriate values
      ✓ should merge options and globalOptions

  onRequest
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ should be an express handler
    ✓ should enforce CORS options
    ✓ should add CORS headers if debug feature is enabled

  onCall
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ has a .run method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should be an express handler
    ✓ should enforce CORS options
    ✓ overrides CORS headers if debug feature is enabled
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ adds CORS headers
    ✓ allows desirable syntax

  identity
    beforeUserCreated
      ✓ should accept a handler
      ✓ should accept options and a handler
    beforeUserSignedIn
      ✓ should accept a handler
      ✓ should accept options and a handler
    beforeOperation
      ✓ should handle eventType and handler for before create events
      ✓ should handle eventType and handler for before sign in events
      ✓ should handle eventType, options, and handler for before create events
      ✓ should handle eventType, options, and handler for before sign in events
    getOpts
      ✓ should parse an empty object
      ✓ should parse global options
      ✓ should a full options

  onMessagePublished
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ should convert retry option if appropriate
    ✓ should have a .run method
    ✓ should parse pubsub messages
    ✓ allows desirable syntax

  v2/storage
    getOptsAndBucket
      ✓ should return the default bucket with empty opts
      ✓ should return the default bucket with opts param
      ✓ should return the given bucket
      ✓ should return the given bucket and opts
    onOperation
      ✓ should create a minimal trigger/endpoint with bucket
      ✓ should create a minimal trigger/endpoint with opts
      ✓ should create a minimal trigger with bucket with opts and bucket
      ✓ should create a complex trigger/endpoint with appropriate values
      ✓ should merge options and globalOptions
    onObjectArchived
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectFinalized
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectDeleted
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectMetadataUpdated
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket

  onTaskDispatched
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ has a .run method
    ✓ should be an express handler
    ✓ allows desirable syntax


  617 passing (1s)

npm uninstall

removed 1 package, and audited 553 packages in 5s

53 packages are looking for funding
  run `npm fund` for details

5 moderate severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> firebase-functions@3.22.0 test
> mocha --file ./mocha/setup.ts "spec/**/*.spec.ts"



  Change
    applyFieldMask
      ✓ should handle deleted values
      ✓ should handle created values
      ✓ should handle mutated values
    fromJSON
      ✓ should create a Change object with a `before` and `after`
      ✓ should apply the customizer function to `before` and `after`

  convertInvoker
    ✓ should raise an error on empty array
    ✓ should raise an error on empty string
    ✓ should raise an error on empty string with service accounts
    ✓ should raise an error on mixing public and service accounts
    ✓ should raise an error on mixing private and service accounts
    ✓ should return the correct public invoker
    ✓ should return the correct private invoker
    ✓ should return the correct scalar invoker
    ✓ should return the correct array invoker

  onCallHandler
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle success
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle null data and return
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle void return
    ✓ should reject bad method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should ignore charset
    ✓ should reject bad content type
    ✓ should reject extra body fields
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle unhandled error
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle unknown error status
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle well-formed error
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle auth (91ms)
    ✓ should reject bad auth
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle AppCheck token
    ✓ should reject bad AppCheck token
    ✓ should handle bad AppCheck token with callable option
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should handle instance id
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should expose raw request
    skip token verification debug mode support
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
      ✓ should skip auth token verification
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
{"verifications":{"app":"VALID","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
      ✓ should skip app check token verification

  encoding/decoding
    ✓ encodes null
    ✓ encodes int
    ✓ decodes int
    ✓ encodes long
    ✓ decodes long
    ✓ encodes unsigned long
    ✓ decodes unsigned long
    ✓ encodes double
    ✓ decodes double
    ✓ encodes string
    ✓ decodes string
    ✓ encodes array
    ✓ decodes array
    ✓ encodes object
    ✓ decodes object
    ✓ encodes function as an empty object

  decode tokens
    ✓ decodes valid Auth ID Token
    ✓ decodes invalid Auth ID Token
    ✓ decodes valid App Check Token
    ✓ decodes invalid App Check Token

  identity
    userRecordConstructor
      ✓ will provide falsey values for fields that are not in raw wire data
      ✓ will not interfere with fields that are in raw wire data
      ✓ will convert raw wire fields createdAt and lastSignedInAt to creationTime and lastSignInTime
      ✓ should stringify the record
    isValidRequest
      ✓ should error on non-post
      ✓ should error on bad Content-Type
      ✓ should error without req body
      ✓ should error without req body data
      ✓ should error without req body
      ✓ should not error on valid request
    parseMetadata
      ✓ should parse an undefined object
      ✓ should parse a decoded metadata object
    parseProviderData
      ✓ should parse the user info
      ✓ should parse the user info with phone
    parseDate
      ✓ should return null if tokens undefined
      ✓ should parse the date
    parseMultiFactor
      ✓ should return null on undefined factor
      ✓ should return null without enrolled factors
      ✓ should error on an invalid factor
      ✓ should correctly parse factors
    parseUserRecord
      ✓ should error if decoded does not have uid
      ✓ should parse user record
    parseAuthEventContext
      ✓ should parse an unknown event
      ✓ should parse a beforeSignIn event
      ✓ should parse a beforeCreate event
    validateAuthResponse
      ✓ should not throw on undefined request
      ✓ should throw an error if customClaims have a blocked claim
      ✓ should throw an error if customClaims size is too big
      ✓ should throw an error if sessionClaims have a blocked claim
      ✓ should throw an error if sessionClaims size is too big
      ✓ should throw an error if the combined customClaims & sessionClaims size is too big
    getUpdateMask
      ✓ should return empty string on undefined response
      ✓ should return empty on only customClaims and sessionClaims
      ✓ should return the right claims on a response

  onEnqueueHandler
    ✓ should handle success
    ✓ should reject bad method
    ✓ should ignore charset
    ✓ should reject bad content type
    ✓ should reject extra body fields
    ✓ should handle unhandled error
    ✓ should handle unknown error status
    ✓ should handle well-formed error
    ✓ should handle auth
    ✓ should accept unsigned auth too
    ✓ should skip auth in emulated environment

  logger (structured)
    logging methods
{"severity":"INFO","message":"hello { middle: 'obj' } end message"}
      ✓ should coalesce arguments into the message
{"additional":"context","severity":"INFO","message":"hello world"}
      ✓ should merge structured data from the last argument
{"severity":"INFO","message":"hello world null"}
      ✓ should not recognize null as a structured logging object
    write
      structured logging
        write
          ✓ should remove circular references
          ✓ should remove circular references in arrays
          ✓ should not break on objects that override toJSON
          ✓ should not alter parameters that are logged
{"severity":"DEBUG","message":"test"}
          ✓ should output DEBUG severity to stdout
{"severity":"INFO","message":"test"}
          ✓ should output INFO severity to stdout
{"severity":"NOTICE","message":"test"}
          ✓ should output NOTICE severity to stdout
          ✓ should output WARNING severity to stderr
          ✓ should output ERROR severity to stderr
          ✓ should output CRITICAL severity to stderr
          ✓ should output ALERT severity to stderr
          ✓ should output EMERGENCY severity to stderr

  extractStack
    ✓ extracts stack from a simple module
    ✓ extracts stack with required APIs
    ✓ extracts stack from a module with group functions
    with GCLOUD_PROJECT env var
      ✓ extracts stack from a simple module
      ✓ extracts stack with required APIs

  mergedRequiredAPIs
    ✓ leaves required APIs unchanged if nothing to merge
    ✓ merges reasons given overlapping required api
    ✓ merges reasons given overlapping required api
    ✓ does not repeat the same reason

  loadStack
    commonjs
      basic
        ✓ loads stack given relative path (57ms)
        ✓ loads stack given absolute path
      has main
        ✓ loads stack given relative path
        ✓ loads stack given absolute path
      grouped
        ✓ loads stack given relative path
        ✓ loads stack given absolute path
      has params
        ✓ loads stack given relative path
        ✓ loads stack given absolute path

  path-pattern
    trimParam
      ✓ should trim a capture param without equals
      ✓ should trim a capture param with equals
    extractMatches
      ✓ should parse without multi segment
      ✓ should parse multi segment with params after
      ✓ should parse multi segment param with params after
      ✓ should parse multi segment with params before
      ✓ should parse multi segment param with params before
      ✓ should parse multi segment with params before and after
      ✓ should parse multi segment param with params before
      ✓ should parse an instance

  utilities
    path
      #normalizePath
        ✓ should strip leading and trailing slash
      #pathParts
        ✓ should turn a path into an array of strings
        ✓ should turn a root path, empty string, or null path into an empty array

  apps
    retain/release
      ✓ should retain/release ref counters appropriately
      ✓ should only decrement counter after garbageCollectionInterval is up
      ✓ should call _destroyApp if app no longer used
      ✓ should not call _destroyApp if app used again while waiting for release
      ✓ should increment ref counter for each subsequent retain
      ✓ should work with staggering sets of retain/release

  makeCloudFunction
    ✓ should put a __trigger/__endpoint on the returned CloudFunction
    ✓ should have legacy event type in __trigger/__endpoint if provided
    ✓ should include converted options in __endpoint
    ✓ should set retry given failure policy in __endpoint
    ✓ should setup a scheduleTrigger in __endpoint given a schedule
    ✓ should construct the right context for event
    ✓ should throw error when context.params accessed in handler environment

  makeParams
    ✓ should construct params from the event resource of events

  makeAuth and makeAuthType
    ✓ should construct correct auth and authType for admin user
    ✓ should construct correct auth and authType for unauthenticated user
    ✓ should construct correct auth and authType for a user

  config()
    ✓ will never load in GCFv2
    ✓ loads config values from .runtimeconfig.json
    ✓ does not provide firebase config if .runtimeconfig.json not invalid
    ✓ does not provide firebase config if .ruuntimeconfig.json has no firebase property
    ✓ loads Firebase configs from FIREBASE_CONFIG env variable
    ✓ loads Firebase configs from FIREBASE_CONFIG env variable pointing to a file
    ✓ accepts alternative locations for config file
    ✓ accepts full JSON in env.CLOUD_RUNTIME_CONFIG

  FunctionBuilder
    ✓ should allow supported region to be set
    ✓ should allow multiple supported regions to be set
    ✓ should allow all supported regions to be set
    ✓ should allow valid runtime options to be set
    ✓ should apply a default failure policy if it's aliased with `true`
    ✓ should allow both supported region and valid runtime options to be set
    ✓ should allow both valid runtime options and supported region to be set in reverse order
    ✓ should fail if supported region but invalid runtime options are set (reverse order)
    ✓ should throw an error if user chooses a failurePolicy which is neither an object nor a boolean
    ✓ should throw an error if user chooses a failurePolicy.retry which is not an object
    ✓ should throw an error if user chooses an invalid memory allocation
    ✓ should throw an error if user chooses an invalid timeoutSeconds
    ✓ should throw an error if user chooses no region when using .region()
    ✓ should allow a ingressSettings to be set
    ✓ should throw an error if user chooses an invalid ingressSettings
    ✓ should allow a vpcConnector to be set
    ✓ should allow a vpcConnectorEgressSettings to be set
    ✓ should throw an error if user chooses an invalid vpcConnectorEgressSettings
    ✓ should allow a serviceAccount to be set as-is
    ✓ should allow a serviceAccount to be set with generated service account email
    ✓ should set a null serviceAccountEmail if service account is set to `default`
    ✓ should throw an error if serviceAccount is set to an invalid value
    ✓ should allow setting 4GB memory option
    ✓ should allow labels to be set
    ✓ should throw an error if more than 58 labels are set
    ✓ should throw an error if labels has a key that is too long
    ✓ should throw an error if labels has key that is too short
    ✓ should throw an error if labels has a value that is too long
    ✓ should throw an error if labels has a key that contains invalid characters
    ✓ should throw an error if labels has a value that contains invalid characters
    ✓ should throw an error if a label key starts with a reserved namespace
    ✓ should throw an error if invoker is an empty string
    ✓ should throw an error if invoker is an empty array
    ✓ should throw an error if invoker has an empty string
    ✓ should throw an error if public identifier is in the invoker array
    ✓ should throw an error if private identifier is in the invoker array
    ✓ should allow valid secret config expressed using short form
    ✓ should throw error given secrets expressed with full resource name
    ✓ should throw error given invalid secret config
    ✓ should throw error given invalid secret with versions

  Analytics Functions
    EventBuilder
      ✓ should allow both region and runtime options to be set
      #onLog
        ✓ should return a trigger/endpoint with appropriate values
      #dataConstructor
        ✓ should handle an event with the appropriate fields
        ✓ should remove xValues
        ✓ should change microsecond timestamps to ISO strings, and offsets to millis
        ✓ should populate currency fields
        ✓ should recognize all the fields the payload can contain
    handler namespace
      #onLog
        ✓ should return an empty trigger/endpoint
        ✓ should handle an event with the appropriate fields
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should not throw when #run is called

  Auth Functions
    AuthBuilder
      ✓ should allow both region and runtime options to be set
      #onCreate
        ✓ should return a trigger/endpoint with appropriate values
      #onDelete
        ✓ should return a trigger/endpoint with appropriate values
      beforeCreate
        ✓ should create the function without options
        ✓ should create the function with options
      beforeSignIn
        ✓ should create the function without options
        ✓ should create the function with options
      #_dataConstructor
        ✓ should handle wire format as of v5.0.0 of firebase-admin
    handler namespace
      #onCreate
        ✓ should return an empty trigger
        ✓ should return an empty endpoint
      #onDelete
        ✓ should return an empty trigger
        ✓ should return an empty endpoint
        ✓ should handle wire format as of v5.0.0 of firebase-admin
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  Database Functions
    DatabaseBuilder
      ✓ should allow both region and runtime options to be set
      #onWrite()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onCreate()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onUpdate()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onDelete()
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should let developers choose a database instance
        ✓ should return a handler that emits events with a proper DataSnapshot
    handler namespace
      #onWrite()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onCreate()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onUpdate()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
      #onDelete()
        ✓ correctly sets trigger to {}
        ✓ should be able to use the instance entry point
        ✓ should return a handler that emits events with a proper DataSnapshot
    process.env.FIREBASE_CONFIG not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called
    extractInstanceAndPath
      ✓ should return correct us-central prod instance and path strings if domain is missing
      ✓ should return the correct staging instance and path strings if domain is present
      ✓ should return the correct instance and path strings if root path is /refs
      ✓ should return the correct instance and path strings if a child path contain /refs
      ✓ should return the correct multi-region instance and path strings if domain is present
      ✓ should throw an error if the given instance name contains anything except alphanumerics and dashes
      ✓ should use the emulator host when present
    DataSnapshot
      #ref: firebase.database.Reference
        ✓ should return a ref for correct instance, not the default instance (55ms)
      #val(): any
        ✓ should return child values based on the child path
        ✓ should return null for children past a leaf
        ✓ should return a leaf value
        ✓ should coerce object into array if all keys are integers
        ✓ should deal with zero-values appropriately
        ✓ should return correct values when data has "length" property
      #child(): DataSnapshot
        ✓ should work with multiple calls
      #exists(): boolean
        ✓ should be true for an object value
        ✓ should be true for a leaf value
        ✓ should be false for a non-existent value
        ✓ should be false for a value pathed beyond a leaf
      #forEach(action: (a: DataSnapshot) => boolean): boolean
        ✓ should iterate through child snapshots
        ✓ should have correct key values for child snapshots
        ✓ should not execute for leaf or null nodes
        ✓ should cancel further enumeration if callback returns true
        ✓ should not cancel further enumeration if callback returns a truthy value
        ✓ should not cancel further enumeration if callback does not return
      #numChildren()
        ✓ should be key count for objects
        ✓ should be 0 for non-objects
      #hasChild(childPath): boolean
        ✓ should return true for a child or deep child
        ✓ should return false if a child is missing
      #key: string
        ✓ should return the key name
        ✓ should return null for the root
        ✓ should work for child paths
      #toJSON(): Object
        ✓ should return the current value
        ✓ should be stringifyable

  Firestore Functions
    document builders and event types
      ✓ should allow terse constructors
      ✓ should allow custom namespaces
      ✓ should allow custom databases
      ✓ should allow both custom database and namespace
      ✓ should allow both region and runtime options to be set
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called
    dataConstructor
      ✓ constructs appropriate fields and getters for event.data on "document.write" events
      ✓ constructs appropriate fields and getters for event.data on "document.create" events
      ✓ constructs appropriate fields and getters for event.data on "document.update" events
      ✓ constructs appropriate fields and getters for event.data on "document.delete" events
    handler namespace
      ✓ constructs correct data type and sets trigger to {} on "document.write" events
      ✓ constructs correct data type and sets trigger to {} on "document.create" events
      ✓ constructs correct data type and sets trigger to {} on "document.update" events
      ✓ constructs correct data type and sets trigger to {} on "document.delete" events
    SnapshotConstructor
      #data()
        ✓ should parse int values
        ✓ should parse double values
        ✓ should parse null values
        ✓ should parse boolean values
        ✓ should parse string values
        ✓ should parse array values
        ✓ should parse object values
        ✓ should parse GeoPoint values
        ✓ should parse reference values
        ✓ should parse timestamp values with precision to the millisecond
        ✓ should parse timestamp values with precision to the second
        ✓ should parse binary values
      Other DocumentSnapshot methods
        ✓ should support #exists
        ✓ should support #ref
        ✓ should support #id
        ✓ should support #createTime
        ✓ should support #updateTime
        ✓ should support #readTime
      Handle empty and non-existent documents
        ✓ constructs non-existent DocumentSnapshot when whole document deleted
        ✓ constructs existent DocumentSnapshot with empty data when all fields of document deleted

  CloudHttpsBuilder
    #onRequest
      ✓ should return a trigger with appropriate values
      ✓ should allow both region and runtime options to be set

  handler namespace
    #onRequest
      ✓ should return an empty trigger
    #onCall
      ✓ should return an empty trigger

  #onCall
    ✓ should return a trigger/endpoint with appropriate values
    ✓ should allow both region and runtime options to be set
    ✓ has a .run method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should lock to the v1 API even with function.length == 1

  callable CORS
    ✓ handles OPTIONS preflight
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ adds CORS headers

  Pubsub Functions
    pubsub.Message
      #json
        ✓ should return json decoded from base64
        ✓ should preserve passed in json
      #toJSON
        ✓ should be JSON stringify-able
    pubsub.FunctionBuilder
      ✓ should allow both region and runtime options to be set
      #onPublish
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should throw with improperly formatted topics
        ✓ should properly handle a new-style event
      #schedule
        ✓ should return a trigger/endpoint with schedule
        ✓ should return a trigger/endpoint with schedule and timeZone when one is chosen
        ✓ should return a trigger/endpoint with schedule and retry config when called with retryConfig
        ✓ should return a trigger/endpoint with schedule, timeZone and retry configwhen called with retryConfig and timeout
        ✓ should return an appropriate trigger/endpoint when called with region and options
        ✓ should return an appropriate trigger/endpoint when called with region, timeZone, and options
        ✓ should return an appropriate trigger/endpoint when called with region, options and retryConfig
        ✓ should return an appropriate trigger/endpoint when called with region, options, retryConfig, and timeZone
    handler namespace
      #onPublish
        #topic
          ✓ should return an empty trigger
          ✓ should properly handle a new-style event
        #schedule
          ✓ should return an empty trigger
          ✓ should return a handler with a proper event context
    process.env.GCLOUD_PROJECT not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  RemoteConfig Functions
    #onUpdate
      ✓ should have the correct trigger
      ✓ should allow both region and runtime options to be set
    unwraps TemplateVersion
      ✓ should unwrap the version in the event
    handler namespace
      #onUpdate
        ✓ should have an empty trigger
        ✓ should correctly unwrap the event

  Storage Functions
    ObjectBuilder
      ✓ should allow both region and runtime options to be set
      #onArchive
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onDelete
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onFinalize
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
      #onMetadataUpdate
        ✓ should return a TriggerDefinition with appropriate values
        ✓ should use the default bucket when none is provided
        ✓ should allow fully qualified bucket names
        ✓ should throw with improperly formatted buckets
        ✓ should not mess with media links using non-literal slashes
    namespace handler
      #onArchive
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onDelete
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onFinalize
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
      #onMetadataUpdate
        ✓ should return an empty trigger
        ✓ should not mess with media links using non-literal slashes
    process.env.FIREBASE_CONFIG not set
      ✓ should not throw if __trigger is not accessed
      ✓ should throw when trigger is accessed
      ✓ should throw when endpoint is accessed
      ✓ should not throw when #run is called

  #onDispatch
    ✓ should return a trigger/endpoint with appropriate values
    ✓ should allow both region and runtime options to be set
    ✓ has a .run method
    ✓ should lock to the v1 API even with function.length == 1

  handler namespace
    ✓ should return an empty trigger

  Test Lab Functions
    #onComplete
      with process.env.GCLOUD_PROJECT set
        ✓ should return a trigger/endpoint with appropriate values
        ✓ should parse TestMatrix in "INVALID" state
        ✓ should parse TestMatrix in "FINISHED" state
      process.env.GCLOUD_PROJECT not set
        ✓ should not throw if trigger is not accessed
        ✓ should throw when trigger is accessed
        ✓ should throw when endpoint is accessed
    TestMatrix
      constructor
        ✓ should populate basic fields
    ClientInfo
      constructor
        ✓ should populate basic fields
        ✓ should populate key/value details
    ResultStorage
      constructor
        ✓ should populate basic fields
        ✓ should not throw on unset fields

  setup()
    ✓ sets GCLOUD_PROJECT from FIREBASE_CONFIG
    ✓ does not set GCLOUD_PROJECT if already defined

  utils
    .applyChange(from: any, to: any): any
      ✓ should return the to value for non-object values of from and to
      ✓ should return the merged value of two objects

  params
    ✓ should add a param to the declared params
    ✓ should replace a samed-name param in the declared params
    defineString().value
      ✓ should return a '' zero value when no value and no undefined
      ✓ should return the default when no value and one is provided
      ✓ should return the value over the default
    defineInt().value
      ✓ should return 0 zero value
      ✓ should coerce a matching string into an int
      ✓ should return a matching default value
      ✓ should throw when invalid value is passed
    defineFloat().value
      ✓ should return 0 zero value
      ✓ should coerce a matching string into a float
      ✓ should return a matching default value
      ✓ should throw when invalid value is passed
    defineBoolean().value
      ✓ should return false zero value
      ✓ should coerce "true" into true
      ✓ should coerce "TrUe" into true
      ✓ should coerce "yes" into true
      ✓ should coerce "1" into true
      ✓ should coerce "false" into false
      ✓ should coerce "FaLsE" into false
      ✓ should coerce "no" into false
      ✓ should coerce "0" into false
      ✓ should return a matching default value
      ✓ should error with non-true/false value
    defineList().value
      ✓ should return [] zero value
      ✓ should coerce comma-separated values into a string list
      ✓ should coerce a comma-and-space-separated values into a string list
      ✓ should return a matching default value
    defineJSON().value
      ✓ should return {} zero value
      ✓ should coerce objects from JSON
      ✓ should coerce arrays from JSON
      ✓ should return a matching default value
      ✓ should throw with invalid JSON
    Param
      #toSpec()
        ✓ should cast non-string defaults to strings
        ✓ should passthrough supplied options
        ✓ ListParam should properly stringify its default

  alerts
    onAlertPublished
      ✓ should create the function without opts
      ✓ should create the function with opts
      ✓ should have a .run method
    getEndpointAnnotation
      ✓ should define the endpoint without appId and opts
      ✓ should define a complex endpoint without appId
      ✓ should define a complex endpoint
      ✓ should merge global & specific opts
    getOptsAndAlertTypeAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  appDistribution
    onNewTesterIosDevicePublished
      ✓ should create a function with alertType & appId
      ✓ should create a function with opts
      ✓ should create a function with appid in opts
      ✓ should create a function without opts or appId
      ✓ should create a function with a run method
    onInAppfeedbackPublished
      ✓ should create a function with alertType & appId
      ✓ should create a function with opts
      ✓ should create a function with appid in opts
      ✓ should create a function without opts or appId
      ✓ should create a function with a run method
    getOptsAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  billing
    onPlanUpdatePublished
      ✓ should create a function with only handler
      ✓ should create a function with opts & handler
    onPlanAutomatedUpdatePublished
      ✓ should create a function with only handler
      ✓ should create a function with opts & handler
    onOperation
      ✓ should create a function with alertType only
      ✓ should create a function with opts
      ✓ should create a function with a run method

  crashlytics
    onNewFatalIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onNewNonfatalIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onRegressionAlertPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onStabilityDigestPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onVelocityAlertPublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onNewAnrIssuePublished
      ✓ should create a function only handler
      ✓ should create a function with appId
      ✓ should create a function with base opts
      ✓ should create a function with opts
    onOperation
      ✓ should create a function with alertType only
      ✓ should create a function with alertType & appId
      ✓ should create a function with base opts
      ✓ should create a function with appid in opts
      ✓ should create a function with a run method
    getOptsAndApp
      ✓ should parse a string
      ✓ should parse an options object without appId
      ✓ should parse an options object with appId

  database
    makeParams
      ✓ should make params with basic path
      ✓ should make params with multi segment path
      ✓ should make params with multi segment path capture
      ✓ should make params for a full path and instance
    getOpts
      ✓ should return opts when passed in a path
      ✓ should return opts when passed in an options object
    makeEndpoint
      ✓ should create an endpoint with an instance wildcard
      ✓ should create an endpoint without an instance wildcard
    onChangedOperation
      ✓ should create a function for a written event
      ✓ should create a function for a updated event
      ✓ should create a complex function
    onOperation
      ✓ should create a function for a created event
      ✓ should create a function for a deleted event
      ✓ should create a complex function
    onValueWritten
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueCreated
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueUpdated
      ✓ should create a function with a reference
      ✓ should create a function with opts
    onValueDeleted
      ✓ should create a function with a reference
      ✓ should create a function with opts

  v2/eventarc
    onCustomEventPublished
      ✓ should create a minimal trigger/endpoint with default channel
      ✓ should create a minimal trigger/endpoint with opts
      ✓ should create a minimal trigger with channel with opts
      ✓ should create a complex trigger/endpoint with appropriate values
      ✓ should merge options and globalOptions

  onRequest
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ should be an express handler
    ✓ should enforce CORS options
    ✓ should add CORS headers if debug feature is enabled

  onCall
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ has a .run method
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ should be an express handler
    ✓ should enforce CORS options
    ✓ overrides CORS headers if debug feature is enabled
{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"INFO","message":"Callable request verification passed"}
    ✓ adds CORS headers
    ✓ allows desirable syntax

  identity
    beforeUserCreated
      ✓ should accept a handler
      ✓ should accept options and a handler
    beforeUserSignedIn
      ✓ should accept a handler
      ✓ should accept options and a handler
    beforeOperation
      ✓ should handle eventType and handler for before create events
      ✓ should handle eventType and handler for before sign in events
      ✓ should handle eventType, options, and handler for before create events
      ✓ should handle eventType, options, and handler for before sign in events
    getOpts
      ✓ should parse an empty object
      ✓ should parse global options
      ✓ should a full options

  onMessagePublished
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ should convert retry option if appropriate
    ✓ should have a .run method
    ✓ should parse pubsub messages
    ✓ allows desirable syntax

  v2/storage
    getOptsAndBucket
      ✓ should return the default bucket with empty opts
      ✓ should return the default bucket with opts param
      ✓ should return the given bucket
      ✓ should return the given bucket and opts
    onOperation
      ✓ should create a minimal trigger/endpoint with bucket
      ✓ should create a minimal trigger/endpoint with opts
      ✓ should create a minimal trigger with bucket with opts and bucket
      ✓ should create a complex trigger/endpoint with appropriate values
      ✓ should merge options and globalOptions
    onObjectArchived
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectFinalized
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectDeleted
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket
    onObjectMetadataUpdated
      ✓ should accept only handler
      ✓ should accept bucket and handler
      ✓ should accept opts and handler
      ✓ should accept opts and handler, default bucket

  onTaskDispatched
    ✓ should return a minimal trigger/endpoint with appropriate values
    ✓ should create a complex trigger/endpoint with appropriate values
    ✓ should merge options and globalOptions
    ✓ has a .run method
    ✓ should be an express handler
    ✓ allows desirable syntax


  617 passing (799ms)

----------------------run test done----------------------
----------------------client hubot of express----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (386ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
npm uninstall

removed 1 package, and audited 1248 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          1) "before each" hook for "is the listener object that matched"
          2) "after each" hook for "is the listener object that matched"

  Robot
    Unit Tests
      #http
        3) "before each" hook for "creates a new ScopedHttpClient"
        4) "after each" hook for "creates a new ScopedHttpClient"

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  121 passing (99ms)
  1 pending
  4 failing

  1) Middleware
       Public Middleware APIs
         "before each" hook for "is the listener object that matched":
     Cannot find module 'express'
Require stack:
- /data/js-variants/multee/Clients/express/hubot/src/robot.js
- /data/js-variants/multee/Clients/express/hubot/es2015.js
- /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'express'
  Require stack:
  - /data/js-variants/multee/Clients/express/hubot/src/robot.js
  - /data/js-variants/multee/Clients/express/hubot/es2015.js
  - /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Module._load (node:internal/modules/cjs/loader:804:27)
      at Function.hookedLoader [as _load] (node_modules/mockery/mockery.js:111:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Robot.setupExpress (src/robot.js:181:895)
      at new Robot (src/robot.js:9:1261)
      at Context.<anonymous> (test/middleware_test.js:354:20)
      at processImmediate (node:internal/timers:466:21)

  2) Middleware
       Public Middleware APIs
         "after each" hook for "is the listener object that matched":
     TypeError: Cannot read properties of undefined (reading 'shutdown')
      at Context.<anonymous> (test/middleware_test.js:381:18)
      at processImmediate (node:internal/timers:466:21)

  3) Robot
       "before each" hook for "creates a new ScopedHttpClient":
     Cannot find module 'express'
Require stack:
- /data/js-variants/multee/Clients/express/hubot/src/robot.js
- /data/js-variants/multee/Clients/express/hubot/es2015.js
- /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'express'
  Require stack:
  - /data/js-variants/multee/Clients/express/hubot/src/robot.js
  - /data/js-variants/multee/Clients/express/hubot/es2015.js
  - /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Module._load (node:internal/modules/cjs/loader:804:27)
      at Function.hookedLoader [as _load] (node_modules/mockery/mockery.js:111:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Robot.setupExpress (src/robot.js:181:895)
      at new Robot (src/robot.js:9:1261)
      at Context.<anonymous> (test/robot_test.js:31:18)
      at processImmediate (node:internal/timers:466:21)

  4) Robot
       "after each" hook for "creates a new ScopedHttpClient":
     TypeError: Cannot read properties of undefined (reading 'shutdown')
      at Context.<anonymous> (test/robot_test.js:53:16)
      at processImmediate (node:internal/timers:466:21)



----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    55.09 |    55.14 |    48.75 |    55.71 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |    52.21 |    54.64 |    46.41 |    52.78 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    93.62 |    84.62 |      100 |    93.33 |          27,40,71 |
  message.js          |    91.67 |      100 |    83.33 |    91.67 |                46 |
  middleware.js       |      100 |      100 |    85.71 |      100 |                   |
  response.js         |    14.71 |        0 |     7.69 |    14.71 |... 20,129,136,146 |
  robot.js            |    24.59 |    21.25 |     9.52 |    25.53 |... 47,750,751,755 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
----------------------run test done----------------------
----------------------client loopback of express----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> loopback@3.28.0 test
> nyc grunt mocha-and-karma

Running "eslint:gruntfile" (eslint) task

Running "eslint:lib" (eslint) task

Running "eslint:common" (eslint) task

Running "eslint:server" (eslint) task

Running "eslint:test" (eslint) task

Running "mochaTest:unit" (mochaTest) task


  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․,․․․․․․
  ․․․․․․․․․․,,․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,,․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․

  1008 passing (21s)
  14 pending


Running "karma:unit-once" (karma) task
Deprecated private createPreprocessor() API
[32m25 08 2022 16:41:10.412:INFO [framework.browserify]: [39mbundle built
[32m25 08 2022 16:41:10.448:INFO [karma-server]: [39mKarma v4.4.1 server started at http://0.0.0.0:9876/
[32m25 08 2022 16:41:10.448:INFO [launcher]: [39mLaunching browsers ChromeDocker with concurrency unlimited
[32m25 08 2022 16:41:10.452:INFO [launcher]: [39mStarting browser ChromeHeadless
[91m25 08 2022 16:41:10.453:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
Warning: Task "karma:unit-once" failed. Use --force to continue.

Aborted due to warnings.
------------------------------|----------|----------|----------|----------|-------------------|
File                          |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
------------------------------|----------|----------|----------|----------|-------------------|
All files                     |     88.6 |    80.74 |    88.01 |    90.31 |                   |
 loopback                     |      100 |      100 |      100 |      100 |                   |
  index.js                    |      100 |      100 |      100 |      100 |                   |
 loopback/common/models       |    89.18 |    83.03 |    91.67 |    91.76 |                   |
  access-token.js             |     84.4 |    81.25 |    86.67 |    85.05 |... 50,251,276,277 |
  acl.js                      |     88.5 |    84.39 |    83.87 |    90.55 |... 74,575,576,578 |
  application.js              |    88.57 |    71.88 |      100 |    89.71 |... 54,155,182,183 |
  change.js                   |    83.94 |    77.08 |    97.14 |    89.77 |... 62,563,564,815 |
  checkpoint.js               |     91.3 |       50 |      100 |      100 |             59,64 |
  email.js                    |    66.67 |      100 |    33.33 |    66.67 |             49,56 |
  key-value-model.js          |    77.42 |      100 |       30 |    76.67 |... 84,106,154,224 |
  role-mapping.js             |     90.7 |    81.25 |       75 |     90.7 |     50,51,100,101 |
  role.js                     |    90.37 |    79.67 |    94.55 |    92.05 |... 03,627,640,641 |
  scope.js                    |     87.5 |       50 |      100 |    93.33 |                47 |
  user.js                     |    93.63 |    88.56 |      100 |    95.76 |... 1260,1391,1433 |
 loopback/lib                 |     88.3 |    78.33 |     86.8 |    89.34 |                   |
  access-context.js           |    78.69 |    72.52 |    94.74 |    78.53 |... 15,416,417,418 |
  application.js              |    88.79 |    76.62 |     87.1 |    89.33 |... 31,534,544,644 |
  builtin-models.js           |      100 |      100 |      100 |      100 |                   |
  configure-shared-methods.js |    97.14 |    92.59 |      100 |    97.14 |                36 |
  current-context.js          |       70 |      100 |       25 |       70 |          15,23,31 |
  globalize.js                |      100 |      100 |      100 |      100 |                   |
  loopback.js                 |    96.43 |       84 |    90.48 |    97.56 |             61,64 |
  model.js                    |    89.73 |    79.32 |      100 |    90.66 |... 1007,1047,1048 |
  persisted-model.js          |    84.58 |    70.36 |    78.13 |    86.78 |... 1931,1932,1955 |
  registry.js                 |     95.3 |    94.23 |      100 |    95.14 |... 68,270,385,386 |
  runtime.js                  |      100 |      100 |      100 |      100 |                   |
  server-app.js               |    95.45 |    89.55 |    93.33 |    96.03 |   94,95,96,98,193 |
  utils.js                    |    92.73 |    84.38 |    91.67 |    92.59 |     29,67,110,137 |
 loopback/lib/connectors      |    81.18 |     69.7 |       50 |    81.18 |                   |
  base-connector.js           |    64.29 |      100 |        0 |    64.29 |    31,32,34,48,49 |
  mail.js                     |    82.26 |     69.7 |    77.78 |    82.26 |... 61,169,171,172 |
  memory.js                   |      100 |      100 |        0 |      100 |                   |
 loopback/server/middleware   |    89.25 |    89.47 |    81.25 |       90 |                   |
  context.js                  |    66.67 |      100 |        0 |    66.67 |                10 |
  error-handler.js            |      100 |      100 |      100 |      100 |                   |
  favicon.js                  |       60 |        0 |        0 |       60 |             15,16 |
  rest.js                     |    95.45 |    83.33 |      100 |    95.45 |                45 |
  static.js                   |      100 |      100 |      100 |      100 |                   |
  status.js                   |      100 |      100 |      100 |      100 |                   |
  token.js                    |    94.12 |    95.35 |      100 |    95.83 |           104,105 |
  url-not-found.js            |       40 |      100 |       50 |       40 |          21,22,23 |
------------------------------|----------|----------|----------|----------|-------------------|
npm uninstall

up to date, audited 1497 packages in 6s

98 packages are looking for funding
  run `npm fund` for details

25 vulnerabilities (5 moderate, 15 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> loopback@3.28.0 test
> nyc grunt mocha-and-karma

Running "eslint:gruntfile" (eslint) task

Running "eslint:lib" (eslint) task

Running "eslint:common" (eslint) task

Running "eslint:server" (eslint) task

Running "eslint:test" (eslint) task

Running "mochaTest:unit" (mochaTest) task


  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․,․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,․․,․․․․․․
  ․․․․․․․․․․,,․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,,․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․,,․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․
  ․․․․․․․․․․․․․․

  1008 passing (21s)
  14 pending


Running "karma:unit-once" (karma) task
Deprecated private createPreprocessor() API
[32m25 08 2022 16:41:55.349:INFO [framework.browserify]: [39mbundle built
[32m25 08 2022 16:41:55.385:INFO [karma-server]: [39mKarma v4.4.1 server started at http://0.0.0.0:9876/
[32m25 08 2022 16:41:55.386:INFO [launcher]: [39mLaunching browsers ChromeDocker with concurrency unlimited
[32m25 08 2022 16:41:55.390:INFO [launcher]: [39mStarting browser ChromeHeadless
[91m25 08 2022 16:41:55.390:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
Warning: Task "karma:unit-once" failed. Use --force to continue.

Aborted due to warnings.
------------------------------|----------|----------|----------|----------|-------------------|
File                          |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
------------------------------|----------|----------|----------|----------|-------------------|
All files                     |     88.6 |    80.74 |    88.01 |    90.31 |                   |
 loopback                     |      100 |      100 |      100 |      100 |                   |
  index.js                    |      100 |      100 |      100 |      100 |                   |
 loopback/common/models       |    89.18 |    83.03 |    91.67 |    91.76 |                   |
  access-token.js             |     84.4 |    81.25 |    86.67 |    85.05 |... 50,251,276,277 |
  acl.js                      |     88.5 |    84.39 |    83.87 |    90.55 |... 74,575,576,578 |
  application.js              |    88.57 |    71.88 |      100 |    89.71 |... 54,155,182,183 |
  change.js                   |    83.94 |    77.08 |    97.14 |    89.77 |... 62,563,564,815 |
  checkpoint.js               |     91.3 |       50 |      100 |      100 |             59,64 |
  email.js                    |    66.67 |      100 |    33.33 |    66.67 |             49,56 |
  key-value-model.js          |    77.42 |      100 |       30 |    76.67 |... 84,106,154,224 |
  role-mapping.js             |     90.7 |    81.25 |       75 |     90.7 |     50,51,100,101 |
  role.js                     |    90.37 |    79.67 |    94.55 |    92.05 |... 03,627,640,641 |
  scope.js                    |     87.5 |       50 |      100 |    93.33 |                47 |
  user.js                     |    93.63 |    88.56 |      100 |    95.76 |... 1260,1391,1433 |
 loopback/lib                 |     88.3 |    78.33 |     86.8 |    89.34 |                   |
  access-context.js           |    78.69 |    72.52 |    94.74 |    78.53 |... 15,416,417,418 |
  application.js              |    88.79 |    76.62 |     87.1 |    89.33 |... 31,534,544,644 |
  builtin-models.js           |      100 |      100 |      100 |      100 |                   |
  configure-shared-methods.js |    97.14 |    92.59 |      100 |    97.14 |                36 |
  current-context.js          |       70 |      100 |       25 |       70 |          15,23,31 |
  globalize.js                |      100 |      100 |      100 |      100 |                   |
  loopback.js                 |    96.43 |       84 |    90.48 |    97.56 |             61,64 |
  model.js                    |    89.73 |    79.32 |      100 |    90.66 |... 1007,1047,1048 |
  persisted-model.js          |    84.58 |    70.36 |    78.13 |    86.78 |... 1931,1932,1955 |
  registry.js                 |     95.3 |    94.23 |      100 |    95.14 |... 68,270,385,386 |
  runtime.js                  |      100 |      100 |      100 |      100 |                   |
  server-app.js               |    95.45 |    89.55 |    93.33 |    96.03 |   94,95,96,98,193 |
  utils.js                    |    92.73 |    84.38 |    91.67 |    92.59 |     29,67,110,137 |
 loopback/lib/connectors      |    81.18 |     69.7 |       50 |    81.18 |                   |
  base-connector.js           |    64.29 |      100 |        0 |    64.29 |    31,32,34,48,49 |
  mail.js                     |    82.26 |     69.7 |    77.78 |    82.26 |... 61,169,171,172 |
  memory.js                   |      100 |      100 |        0 |      100 |                   |
 loopback/server/middleware   |    89.25 |    89.47 |    81.25 |       90 |                   |
  context.js                  |    66.67 |      100 |        0 |    66.67 |                10 |
  error-handler.js            |      100 |      100 |      100 |      100 |                   |
  favicon.js                  |       60 |        0 |        0 |       60 |             15,16 |
  rest.js                     |    95.45 |    83.33 |      100 |    95.45 |                45 |
  static.js                   |      100 |      100 |      100 |      100 |                   |
  status.js                   |      100 |      100 |      100 |      100 |                   |
  token.js                    |    94.12 |    95.35 |      100 |    95.83 |           104,105 |
  url-not-found.js            |       40 |      100 |       50 |       40 |          21,22,23 |
------------------------------|----------|----------|----------|----------|-------------------|
----------------------run test done----------------------
----------------------client probot of express----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> probot@0.0.0-development pretest
> tsc --noEmit -p test


> probot@0.0.0-development test
> jest

npm uninstall

removed 1 package, and audited 1223 packages in 4s

85 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (7 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> probot@0.0.0-development pretest
> tsc --noEmit -p test


> probot@0.0.0-development test
> jest

----------------------run test done----------------------
----------------------client routing-controllers of express----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.questionErrorMiddleware (test/fakes/global-options/FakeService.ts:25:13)

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

npm uninstall

removed 1 package, and audited 984 packages in 7s

49 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (9 moderate, 14 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/questions',
        method: 'get',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'User-Agent': 'axios/0.21.1'
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus],
        data: undefined
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/questions',
          method: 'GET',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/questions'
        },
        _ended: true,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 0,
        _requestBodyBuffers: [],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: false,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: 0,
          _hasBody: true,
          _trailer: '',
          finished: true,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'GET /questions HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'GET',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/questions',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/questions',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/container.spec.ts:108:17)

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/questions',
        method: 'get',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'User-Agent': 'axios/0.21.1'
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus],
        data: undefined
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/questions',
          method: 'GET',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/questions'
        },
        _ended: true,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 0,
        _requestBodyBuffers: [],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: false,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: 0,
          _hasBody: true,
          _trailer: '',
          finished: true,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'GET /questions HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'GET',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/questions',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/questions',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/container.spec.ts:216:17)

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/questions',
        method: 'get',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'User-Agent': 'axios/0.21.1'
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus],
        data: undefined
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/questions',
          method: 'GET',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/questions'
        },
        _ended: true,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 0,
        _requestBodyBuffers: [],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: false,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: 0,
          _hasBody: true,
          _trailer: '',
          finished: true,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'GET /questions HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'GET',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/questions',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/questions',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/container.spec.ts:350:17)

  console.error
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/questions',
        method: 'get',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'User-Agent': 'axios/0.21.1'
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus],
        data: undefined
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/questions',
          method: 'GET',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/questions'
        },
        _ended: true,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 0,
        _requestBodyBuffers: [],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: false,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: 0,
          _hasBody: true,
          _trailer: '',
          finished: true,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'GET /questions HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'GET',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/questions',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/questions',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      485 |       } catch (err) {
      486 |         // Handle Error Here
    > 487 |         console.error(err);
          |                 ^
      488 |       }
      489 |     });
      490 |   });

      at Object.<anonymous> (test/functional/container.spec.ts:487:17)
      at processTicksAndRejections (node:internal/process/task_queues:96:5)

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/default',
        method: 'post',
        data: '{"firstName":"Umed","lastName":"Khudoiberdiev"}',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'Content-Type': 'application/json;charset=utf-8',
          'User-Agent': 'axios/0.21.1',
          'Content-Length': 47
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus]
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/default',
          method: 'POST',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/default'
        },
        _ended: false,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 47,
        _requestBodyBuffers: [ [Object] ],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: true,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: null,
          _hasBody: true,
          _trailer: '',
          finished: false,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'POST /default HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'Content-Type: application/json;charset=utf-8\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Content-Length: 47\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'POST',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/default',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/default',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/controller-options.spec.ts:81:17)

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/transform',
        method: 'post',
        data: '{"firstName":"Umed","lastName":"Khudoiberdiev"}',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'Content-Type': 'application/json;charset=utf-8',
          'User-Agent': 'axios/0.21.1',
          'Content-Length': 47
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus]
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/transform',
          method: 'POST',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/transform'
        },
        _ended: false,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 47,
        _requestBodyBuffers: [ [Object] ],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: true,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: null,
          _hasBody: true,
          _trailer: '',
          finished: false,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'POST /transform HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'Content-Type: application/json;charset=utf-8\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Content-Length: 47\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'POST',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/transform',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/transform',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/controller-options.spec.ts:94:17)

  console.log
    Error: connect ECONNREFUSED 127.0.0.1:3001
        at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1247:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 3001,
      config: {
        url: '/noTransform',
        method: 'post',
        data: '{"firstName":"Umed","lastName":"Khudoiberdiev"}',
        headers: {
          Accept: 'application/json, text/plain, */*',
          'Content-Type': 'application/json;charset=utf-8',
          'User-Agent': 'axios/0.21.1',
          'Content-Length': 47
        },
        baseURL: 'http://localhost:3001/',
        transformRequest: [ [Function: transformRequest] ],
        transformResponse: [ [Function: transformResponse] ],
        timeout: 0,
        adapter: [Function: httpAdapter],
        xsrfCookieName: 'XSRF-TOKEN',
        xsrfHeaderName: 'X-XSRF-TOKEN',
        maxContentLength: -1,
        maxBodyLength: -1,
        validateStatus: [Function: validateStatus]
      },
      request: <ref *1> Writable {
        _writableState: WritableState {
          objectMode: false,
          highWaterMark: 16384,
          finalCalled: false,
          needDrain: false,
          ending: false,
          ended: false,
          finished: false,
          destroyed: false,
          decodeStrings: true,
          defaultEncoding: 'utf8',
          length: 0,
          writing: false,
          corked: 0,
          sync: true,
          bufferProcessing: false,
          onwrite: [Function: bound onwrite],
          writecb: null,
          writelen: 0,
          afterWriteTickInfo: null,
          buffered: [],
          bufferedIndex: 0,
          allBuffers: true,
          allNoop: true,
          pendingcb: 0,
          constructed: true,
          prefinished: false,
          errorEmitted: false,
          emitClose: true,
          autoDestroy: true,
          errored: null,
          closed: false,
          closeEmitted: false,
          [Symbol(kOnFinished)]: []
        },
        _events: [Object: null prototype] {
          response: [Function: handleResponse],
          error: [Function: handleRequestError]
        },
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: {
          maxRedirects: 21,
          maxBodyLength: 10485760,
          protocol: 'http:',
          path: '/noTransform',
          method: 'POST',
          headers: [Object],
          agent: undefined,
          agents: [Object],
          auth: undefined,
          hostname: 'localhost',
          port: '3001',
          nativeProtocols: [Object],
          pathname: '/noTransform'
        },
        _ended: false,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 47,
        _requestBodyBuffers: [ [Object] ],
        _onNativeResponse: [Function (anonymous)],
        _currentRequest: ClientRequest {
          _events: [Object: null prototype],
          _eventsCount: 7,
          _maxListeners: undefined,
          outputData: [],
          outputSize: 0,
          writable: true,
          destroyed: false,
          _last: true,
          chunkedEncoding: false,
          shouldKeepAlive: false,
          maxRequestsOnConnectionReached: false,
          _defaultKeepAlive: true,
          useChunkedEncodingByDefault: true,
          sendDate: false,
          _removedConnection: false,
          _removedContLen: false,
          _removedTE: false,
          _contentLength: null,
          _hasBody: true,
          _trailer: '',
          finished: false,
          _headerSent: true,
          _closed: false,
          socket: [Socket],
          _header: 'POST /noTransform HTTP/1.1\r\n' +
            'Accept: application/json, text/plain, */*\r\n' +
            'Content-Type: application/json;charset=utf-8\r\n' +
            'User-Agent: axios/0.21.1\r\n' +
            'Content-Length: 47\r\n' +
            'Host: localhost:3001\r\n' +
            'Connection: close\r\n' +
            '\r\n',
          _keepAliveTimeout: 0,
          _onPendingData: [Function: nop],
          agent: [Agent],
          socketPath: undefined,
          method: 'POST',
          maxHeaderSize: undefined,
          insecureHTTPParser: undefined,
          path: '/noTransform',
          _ended: false,
          res: null,
          aborted: false,
          timeoutCb: null,
          upgradeOrConnect: false,
          parser: null,
          maxHeadersCount: null,
          reusedSocket: false,
          host: 'localhost',
          protocol: 'http:',
          _redirectable: [Circular *1],
          [Symbol(kCapture)]: false,
          [Symbol(kNeedDrain)]: false,
          [Symbol(corked)]: 0,
          [Symbol(kOutHeaders)]: [Object: null prototype],
          [Symbol(kUniqueHeaders)]: null
        },
        _currentUrl: 'http://localhost:3001/noTransform',
        [Symbol(kCapture)]: false
      },
      response: undefined,
      isAxiosError: true,
      toJSON: [Function: toJSON]
    }

      at Object.<anonymous> (test/functional/controller-options.spec.ts:107:17)

----------------------run test done----------------------
fastify
subdir: fastify-helpers fastify-micro fastify-vhost pubsub-http-handler tydb
----------------------client fastify-helpers of fastify----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> fastify-helpers@0.2.6 test
> jest --config ./tests/e2e.config.json

npm uninstall

removed 1 package, and audited 730 packages in 4s

60 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (5 moderate, 4 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> fastify-helpers@0.2.6 test
> jest --config ./tests/e2e.config.json

----------------------run test done----------------------
----------------------client fastify-micro of fastify----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> fastify-micro@0.0.0-semantically-released test
> jest --coverage --runInBand

-----------------------|---------|----------|---------|---------|-----------------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                       
-----------------------|---------|----------|---------|---------|-----------------------------------------
All files              |    36.7 |    24.36 |    22.5 |   36.75 |                                         
 src                   |   34.54 |    24.34 |   22.58 |   34.35 |                                         
  graceful-shutdown.ts |   22.72 |        0 |       0 |   22.72 | 47-80                                   
  index.ts             |   52.77 |    43.75 |   36.36 |   52.77 | 152-157,189,200-205,211,220-253,274-288 
  logger.ts            |   32.35 |    41.17 |    37.5 |    30.3 | 16-17,51-85,96-116                      
  sentry.ts            |     8.1 |        0 |       0 |    8.33 | 62-147                                  
 tests/jigs            |      50 |       25 |      25 |   52.63 |                                         
  delay.ts             |   33.33 |      100 |       0 |      50 | 2                                       
  log-testing.ts       |   52.94 |       25 |   33.33 |   52.94 | 14-25                                   
 tests/jigs/plugins    |   66.66 |      100 |       0 |   66.66 |                                         
  decorator.ts         |   66.66 |      100 |       0 |   66.66 | 11                                      
-----------------------|---------|----------|---------|---------|-----------------------------------------
npm uninstall

removed 1 package, and audited 645 packages in 4s

40 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (1 moderate, 3 high, 2 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> fastify-micro@0.0.0-semantically-released test
> jest --coverage --runInBand

----------------|---------|----------|---------|---------|-------------------
File            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------------|---------|----------|---------|---------|-------------------
All files       |   52.94 |       25 |   33.33 |   52.94 |                   
 log-testing.ts |   52.94 |       25 |   33.33 |   52.94 | 14-25             
----------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client fastify-vhost of fastify----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30040.313ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=144.89ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.737ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.737ms
}

1..2
# failed 1 of 2 tests
# time=30073.705ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=224.061ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  exitCode: 1
  ...
{
    1..0 # no tests found
}

ok 2 - lib/matches.test.js # time=7.56ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=7.56ms
}

1..2
# failed 1 of 2 tests
# time=402.746ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client pubsub-http-handler of fastify----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> pubsub-http-handler@4.2.0 test
> jest --coverage src

---------------------|---------|----------|---------|---------|-------------------
File                 | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------|---------|----------|---------|---------|-------------------
All files            |   98.18 |    89.47 |     100 |   98.14 |                   
 src                 |     100 |    66.66 |     100 |     100 |                   
  common.ts          |     100 |    66.66 |     100 |     100 | 25                
  index.ts           |     100 |      100 |     100 |     100 |                   
  types.ts           |     100 |      100 |     100 |     100 |                   
 src/methods         |   97.36 |    93.75 |     100 |   97.29 |                   
  cloud-functions.ts |     100 |      100 |     100 |     100 |                   
  fastify-plugin.ts  |     100 |      100 |     100 |     100 |                   
  server.ts          |    90.9 |     87.5 |     100 |    90.9 | 49                
---------------------|---------|----------|---------|---------|-------------------
npm uninstall

added 32 packages, changed 1 package, and audited 613 packages in 3s

105 packages are looking for funding
  run `npm fund` for details

3 high severity vulnerabilities

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> pubsub-http-handler@4.2.0 test
> jest --coverage src

---------------------|---------|----------|---------|---------|-------------------
File                 | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------|---------|----------|---------|---------|-------------------
All files            |   98.18 |    89.47 |     100 |   98.14 |                   
 src                 |     100 |    66.66 |     100 |     100 |                   
  common.ts          |     100 |    66.66 |     100 |     100 | 25                
  index.ts           |     100 |      100 |     100 |     100 |                   
  types.ts           |     100 |      100 |     100 |     100 |                   
 src/methods         |   97.36 |    93.75 |     100 |   97.29 |                   
  cloud-functions.ts |     100 |      100 |     100 |     100 |                   
  fastify-plugin.ts  |     100 |      100 |     100 |     100 |                   
  server.ts          |    90.9 |     87.5 |     100 |    90.9 | 49                
---------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client tydb of fastify----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> tydb@0.1.5 test
> mocha



  AVL tree
    ✓ Can use undefined as key and value
    ✓ Can use null as key and value
    Sanity checks
      ✓ Checking that all nodes heights are correct
      ✓ Calculate the balance factor
      ✓ Can check that a tree is balanced
    Insertion
      ✓ The root has a height of 1
      ✓ Insert at the root if its the first insertion
      ✓ If uniqueness constraint not enforced, we can insert different data for same key
      ✓ If uniqueness constraint is enforced, we cannot insert different data for same key
      ✓ Can insert 0 or the empty string
      ✓ Auto-balancing insertions
      ✓ Can insert a lot of keys and still get an AVLT (sanity check) (224ms)
    Search
      ✓ Can find data in an AVLT
      ✓ If no data can be found, return an empty array
      ✓ Can search for data between two bounds
      ✓ Bounded search can handle cases where query contains both $lt and $lte, or both $gt and $gte
      ✓ Bounded search can work when one or both boundaries are missing
    Deletion
      ✓ Deletion does nothing on an empty tree
      ✓ Deleting a non-existent key doesnt have any effect
      ✓ Able to delete the root if it is also a leaf
      ✓ Able to delete leaf nodes that are non-root
      ✓ Able to delete the root if it has only one child
      ✓ Able to delete non root nodes that have only one child
      ✓ Can delete the root if it has 2 children
      ✓ Can delete a non-root node that has two children
      ✓ If no value is provided, it will delete the entire node even if there are multiple pieces of data
      ✓ Can remove only one value from an array
      ✓ Removes nothing if value doesnt match
      ✓ If value provided but node contains only one value, remove entire node
      ✓ Can remove the root from a tree with height 2 when the root has two children (special case)
      ✓ Can remove the root from a tree with height 3 when the root has two children (special case where the two children themselves have children)
      ✓ Removing falsy values does not delete the entire key
    Execute on every node (=tree traversal)
      ✓ Can execute a function on every node
    Randomized test (takes much longer than the rest of the test suite)
      ✓ Inserting and deleting entire nodes (381ms)

  Binary search tree
    ✓ Upon creation, left, right are null, key and data can be set
    ✓ Can use undefined as key but not value
    ✓ Can use null as key and value
    Sanity checks
      ✓ Can get maxkey and minkey descendants
      ✓ Can check a condition against every node in a tree
      ✓ Can check that a tree verifies node ordering
      ✓ Checking if a tree's internal pointers (i.e. parents) are correct
      ✓ Can get the number of inserted keys
    Insertion
      ✓ Insert at the root if its the first insertion
      ✓ Insert on the left if key is less than the root's
      ✓ Insert on the right if key is greater than the root's
      ✓ Recursive insertion on the left works
      ✓ Recursive insertion on the right works
      ✓ If uniqueness constraint not enforced, we can insert different data for same key
      ✓ If uniqueness constraint is enforced, we cannot insert different data for same key
      ✓ Can insert 0 or the empty string
      ✓ Can insert a lot of keys and still get a BST (sanity check)
      ✓ All children get a pointer to their parent, the root doesnt
    Search
      ✓ Can find data in a BST
      ✓ If no data can be found, return an empty array
      ✓ Can find ascending ordered data in a BST
      ✓ Can find descending ordered data in a BST
      ✓ Can find nearest key in a BST
      ✓ Can find nearest key greater than search key in a BST
      ✓ Can find nearest key less than search key in a BST
      ✓ Can find nearest key with two equal keys in BST
      ✓ Can search for data between two bounds
      ✓ Bounded search can handle cases where query contains both $lt and $lte, or both $gt and $gte
      ✓ Bounded search can work when one or both boundaries are missing
    Deletion
      ✓ Deletion does nothing on an empty tree
      ✓ Deleting a non-existent key doesnt have any effect
      ✓ Able to delete the root if it is also a leaf
      ✓ Able to delete leaf nodes that are non-root
      ✓ Able to delete the root if it has only one child
      ✓ Able to delete non root nodes that have only one child
      ✓ Can delete the root if it has 2 children
      ✓ Can delete a non-root node that has two children
      ✓ If no value is provided, it will delete the entire node even if there are multiple pieces of data
      ✓ Can remove only one value from an array
      ✓ Removes nothing if value doesnt match
      ✓ If value provided but node contains only one value, remove entire node
      ✓ Can remove the root from a tree with height 2 when the root has two children (special case)
      ✓ Can remove the root from a tree with height 3 when the root has two children (special case where the two children themselves have children)
    Execute on every node (=tree traversal)
      ✓ Can execute a function on every node
    Randomized test (takes much longer than the rest of the test suite)
      ✓ Inserting and deleting entire nodes (335ms)

  Cursor
    Without sorting
      ✓ Without query, an empty query or a simple query and no skip or limit
      ✓ With an empty collection
      ✓ With a limit
      ✓ With a skip
      ✓ With a limit and a skip and method chaining
    Sorting of the results
      ✓ Using one sort
      ✓ With an empty collection
      ✓ Ability to chain sorting and exec
      ✓ Using limit and sort
      ✓ Using a limit higher than total number of docs shouldnt cause an error
      ✓ Using limit and skip with sort
      ✓ Using too big a limit and a skip with sort
      ✓ Using too big a skip with sort should return no result
      ✓ Sorting strings
      ✓ Sorting nested fields with dates
      ✓ Sorting when some fields are undefined
      ✓ Sorting when all fields are undefined
      ✓ Multiple consecutive sorts
      ✓ Similar data, multiple consecutive sorts
    Projections
      ✓ Takes all results if no projection or empty object given
      ✓ Can take only the expected fields
      ✓ Can omit only the expected fields
      ✓ Cannot use both modes except for _id
      ✓ Projections on embedded documents - omit type
      ✓ Projections on embedded documents - pick type

  customUtils
    uid
      ✓ Generated uids should not be the same
      ✓ Generated random strings should not be the same

  Database
    Insert
      ✓ Able to insert a document in the database, setting an _id if none provided, and retrieve it even after a reload
      ✓ Can insert multiple documents in the database
      ✓ Can insert and get back from DB complex objects with all primitive and secondary types
      ✓ If an object returned from the DB is modified and refetched, the original value should be found
      ✓ Cannot insert a doc that has a field beginning with a $ sign
      ✓ If an _id is already given when we insert a document, use that instead of generating a random one
      ✓ Modifying the insertedDoc after an insert doesnt change the copy saved in the database
      ✓ Can insert an array of documents at once
      ✓ If a bulk insert violates a constraint, all changes are rolled back
      ✓ CreatedAt field is added and persisted
      ✓ If createdAt is specified by user, don't change it
      ✓ If updatedAt is specified by user, don't change it
      ✓ Can insert a doc with id 0
    #getCandidates
      ✓ Can use an index to get docs with a basic match
      ✓ Can use an index to get docs with a $in match
      ✓ Can use an index to get docs with a $eq match
      ✓ If no index can be used, return the whole database
      ✓ Can use indexes for comparison matches
      ✓ Can set a TTL index that expires documents (239ms)
      ✓ TTL indexes can expire multiple documents and only what needs to be expired (307ms)
      ✓ Document where indexed field is absent or not a date are ignored (205ms)
    Find
      ✓ Can find all documents if an empty query is used
      ✓ Can find all documents matching a basic query
      ✓ Can find dates and objects (non JS-native types)
      ✓ Can use dot-notation to query subfields
      ✓ Array fields match if any element matches
      ✓ Returns an error if the query is not well formed
      ✓ Changing the documents returned by find or findOne do not change the database state
    Count
      ✓ Count all documents if an empty query is used
      ✓ Count all documents matching a basic query
      ✓ Array fields match if any element matches
      ✓ Returns an error if the query is not well formed
    Update
      ✓ If the query doesn't match anything, database is not modified
      ✓ Update the updatedAt field (104ms)
      ✓ Can update multiple documents matching the query
      ✓ Cannot perform update if the update query is not either registered-modifiers-only or copy-only, or contain badly formatted fields
      ✓ Can update documents using multiple modifiers
      ✓ CUpserting using $setOnInsert
      ✓ When using modifiers, the only way to update subdocs is with the dot-notation
      ✓ Returns an error if the query is not well formed
      ✓ If an error is thrown by a modifier, the database state is not changed
      ✓ Cant change the _id of a document
      ✓ Non-multi updates are persistent
      ✓ Multi updates are persistent
      ✓ If a multi update fails on one document, previous updates should be rolled back
      ✓ If an index constraint is violated by an update, all changes should be rolled back
      ✓ return all updated docs
      ✓ createdAt property is unchanged and updatedAt correct after an update, even a complete document replacement (70ms)
      Upserts
        ✓ Can perform upserts if needed
        ✓ If the update query is a normal object with no modifiers, it is the doc that will be upserted
        ✓ If the update query contains modifiers, it is applied to the object resulting from removing all operators from the find query 1
        ✓ Performing upsert without $setOnInsert yields a standard error not an exception
    Remove
      ✓ Can remove multiple documents
      ✓ Remove can be called multiple times in parallel and everything that needs to be removed will be
      ✓ Returns an error if the query is not well formed
      ✓ Non-multi removes are persistent
      ✓ Multi removes are persistent
    Using indexes
      ✓ Results of getMatching should never contain duplicates
      ensureIndex and index initialization in database loading
        ✓ ensureIndex can be called right after a loadDatabase and be initialized and filled correctly
        ✓ ensureIndex can be called twice on the same field, the second call will ahve no effect
        ✓ ensureIndex can be called after the data set was modified and the index still be correct
        ✓ ensureIndex can be called before a loadDatabase and still be initialized and filled correctly
        ✓ Can initialize multiple indexes on a database load
        ✓ If a unique constraint is not respected, database loading will throw but the valid data will be still be usable
        ✓ If a unique constraint is not respected, ensureIndex will return an error and not create an index
        ✓ Can remove an index
      Indexing newly inserted documents
        ✓ Newly inserted documents are indexed
        ✓ If multiple indexes are defined, the document is inserted in all of them
        ✓ Can insert two docs at the same key for a non unique index
        ✓ If the index has a unique constraint, an error is thrown if it is violated and the data is not modified
        ✓ If an index has a unique constraint, other indexes cannot be modified when it raises an error
        ✓ Unique indexes prevent you from inserting two docs where the field is undefined except if theyre sparse
        ✓ Insertion still works as before with indexing
        ✓ All indexes point to the same data as the main index on _id
        ✓ If a unique constraint is violated, no index is changed, including the main one
      Updating indexes upon document update
        ✓ Updating docs still works as before with indexing
        ✓ Indexes get updated when a document (or multiple documents) is updated
        ✓ If a simple update violates a contraint, all changes are rolled back and an error is thrown
        ✓ If a multi update violates a contraint, all changes are rolled back and an error is thrown
      Updating indexes upon document remove
        ✓ Removing docs still works as before with indexing
        ✓ Indexes get updated when a document (or multiple documents) is removed
      Persisting indexes
        1) Indexes are persisted to a separate file and recreated upon reload
        2) Indexes are persisted with their options and recreated even if some db operation happen between loads
        3) Indexes can also be removed and the remove persisted

  Indexes
    ✓ Get all elements in the index
    Insertion
      ✓ Can insert pointers to documents in the index correctly when they have the field
      ✓ Inserting twice for the same fieldName in a unique index will result in an error thrown
      ✓ Inserting twice for a fieldName the docs dont have with a unique index results in an error thrown
      ✓ Inserting twice for a fieldName the docs dont have with a unique and sparse index will not throw, since the docs will be non indexed
      ✓ Works with dot notation
      ✓ Can insert an array of documents
      ✓ When inserting an array of elements, if an error is thrown all inserts need to be rolled back
      Array fields
        ✓ Inserts one entry per array element in the index
        ✓ Inserts one entry per array element in the index, type-checked
        ✓ Inserts one entry per unique array element in the index, the unique constraint only holds across documents
        ✓ The unique constraint holds across documents
        ✓ When removing a document, remove it from the index at all unique array elements
        ✓ If a unique constraint is violated when inserting an array key, roll back all inserts before the key
    Removal
      ✓ Can remove pointers from the index, even when multiple documents have the same key
      ✓ If we have a sparse index, removing a non indexed doc has no effect
      ✓ Works with dot notation
      ✓ Can remove an array of documents
    Update
      ✓ Can update a document whose key did or didnt change
      ✓ If a simple update violates a unique constraint, changes are rolled back and an error thrown
      ✓ Can update an array of documents
      ✓ If a unique constraint is violated during an array-update, all changes are rolled back and an error thrown
      ✓ If an update doesnt change a document, the unique constraint is not violated
      ✓ Can revert simple and batch updates
    Get matching documents
      ✓ Get all documents where fieldName is equal to the given value, or an empty array if no match
      ✓ Can get all documents for a given key in a unique index
      ✓ Can get all documents for which a field is undefined
      ✓ Can get all documents for which a field is null
      ✓ Can get all documents for a given key in a sparse index, but not unindexed docs (= field undefined)
      ✓ Can get all documents whose key is in an array of keys
      ✓ Can get all documents whose key is between certain bounds
    Resetting
      ✓ Can reset an index without any new data, the index will be empty afterwards
      ✓ Can reset an index and initialize it with one document
      ✓ Can reset an index and initialize it with an array of documents

  Model
    Serialization, deserialization
      ✓ Can serialize and deserialize strings
      ✓ Can serialize and deserialize booleans
      ✓ Can serialize and deserialize numbers
      ✓ Can serialize and deserialize null
      ✓ undefined fields are removed when serialized
      ✓ Can serialize and deserialize a date
      ✓ Can serialize and deserialize sub objects
      ✓ Can serialize and deserialize sub arrays
      ✓ Reject field names beginning with a $ sign or containing a dot, except the four edge cases
      ✓ Can serialize string fields with a new line without breaking the DB
      ✓ Can accept objects whose keys are numbers
    Object checking
      ✓ Field names beginning with a $ sign are forbidden
      ✓ Field names cannot contain a .
      ✓ Properties with a null value dont trigger an error
      ✓ Can check if an object is a primitive or not
    Deep copying
      ✓ Should be able to deep copy any serializable model
      ✓ Should deep copy the contents of an array
      ✓ Without the strictKeys option, everything gets deep copied
      ✓ With the strictKeys option, only valid keys gets deep copied
    Modifying documents
      ✓ Queries not containing any modifier just replace the document by the contents of the query but keep its _id
      ✓ Throw an error if trying to change the _id field in a copy-type modification
      ✓ Throw an error if trying to use modify in a mixed copy+modify way
      ✓ Throw an error if trying to use an inexistent modifier
      ✓ Throw an error if a modifier is used with a non-object argument
      $set modifier
        ✓ Can change already set fields without modfifying the underlying object
        ✓ Creates fields to set if they dont exist yet
        ✓ Can set sub-fields and create them if necessary
        ✓ Doesn't replace a falsy field by an object when recursively following dot notation
      $unset modifier
        ✓ Can delete a field, not throwing an error if the field doesnt exist
        ✓ Can unset sub-fields and entire nested documents
        ✓ When unsetting nested fields, should not create an empty parent to nested field
      $inc modifier
        ✓ Throw an error if you try to use it with a non-number or on a non number field
        ✓ Can increment number fields or create and initialize them if needed
        ✓ Works recursively
      $push modifier
        ✓ Can push an element to the end of an array
        ✓ Can push an element to a non-existent field and will create the array
        ✓ Can push on nested fields
        ✓ Throw if we try to push to a non-array
        ✓ Can use the $each modifier to add multiple values to an array at once
        ✓ Can use the $slice modifier to limit the number of array elements
      $addToSet modifier
        ✓ Can add an element to a set
        ✓ Can add an element to a non-existent set and will create the array
        ✓ Throw if we try to addToSet to a non-array
        ✓ Use deep-equality to check whether we can add a value to a set
        ✓ Can use the $each modifier to add multiple values to a set at once
      $pop modifier
        ✓ Throw if called on a non array, a non defined field or a non integer
        ✓ Can remove the first and last element of an array
      $pull modifier
        ✓ Can remove an element from a set
        ✓ Can remove multiple matching elements
        ✓ Throw if we try to pull from a non-array
        ✓ Use deep-equality to check whether we can remove a value from a set
        ✓ Can use any kind of nedb query with $pull
      $max modifier
        ✓ Will set the field to the updated value if value is greater than current one, without modifying the original object
        ✓ Will not update the field if new value is smaller than current one
        ✓ Will create the field if it does not exist
        ✓ Works on embedded documents
      $min modifier
        ✓ Will set the field to the updated value if value is smaller than current one, without modifying the original object
        ✓ Will not update the field if new value is greater than current one
        ✓ Will create the field if it does not exist
        ✓ Works on embedded documents
    Comparing things
      ✓ undefined is the smallest
      ✓ Then null
      ✓ Then numbers
      ✓ Then strings
      ✓ Then booleans
      ✓ Then dates
      ✓ Then arrays
      ✓ And finally objects
      ✓ Can specify custom string comparison function
    Querying
      Comparing things
        ✓ Two things of different types cannot be equal, two identical native things are equal
        ✓ Can test native types null undefined string number boolean date equality
        ✓ If one side is an array or undefined, comparison fails
        ✓ Can test objects equality
      Getting a fields value in dot notation
        ✓ Return first-level and nested values
        ✓ Return undefined if the field cannot be found in the object
        ✓ Can navigate inside arrays with dot notation, and return the array of values in that case
        ✓ Can get a single value out of an array using its index
      Field equality
        ✓ Can find documents with simple fields
        ✓ Can find documents with the dot-notation
        ✓ Cannot find undefined
        ✓ Nested objects are deep-equality matched and not treated as sub-queries
        ✓ Can match for field equality inside an array with the dot notation
      Regular expression matching
        ✓ Matching a non-string to a regular expression always yields false
        ✓ Can match strings using basic querying
        ✓ Can match strings using the $regex operator
        ✓ Will throw if $regex operator is used with a non regex value
        ✓ Can use the $regex operator in cunjunction with other operators
        ✓ Can use dot-notation
      $lt
        ✓ Cannot compare a field to an object, an array, null or a boolean, it will return false
        ✓ Can compare numbers, with or without dot notation
        ✓ Can compare strings, with or without dot notation
        ✓ If field is an array field, a match means a match on at least one element
        ✓ Works with dates too
      Other comparison operators: $lte, $gt, $gte, $ne, $in, $exists
        ✓ $lte
        ✓ $gt
        ✓ $gte
        ✓ $ne
        ✓ $in
        ✓ $nin
        ✓ $exists
      Comparing on arrays
        ✓ Can perform a direct array match
        ✓ Can query on the size of an array field
        ✓ $size operator works with empty arrays
        ✓ Should throw an error if a query operator is used without comparing to an integer
        ✓ Using $size operator on a non-array field should prevent match but not throw
        ✓ Can use $size several times in the same matcher
        ✓ Can query array documents with multiple simultaneous conditions
        ✓ $elemMatch operator works with empty arrays
        ✓ Can use more complex comparisons inside nested query documents
      Logical operators $or, $and, $not
        ✓ Any of the subqueries should match for an $or to match
        ✓ All of the subqueries should match for an $and to match
        ✓ Subquery should not match for a $not to match
        ✓ Logical operators are all top-level, only other logical operators can be above
        ✓ Logical operators can be combined as long as they are on top of the decision tree
        ✓ Should throw an error if a logical operator is used without an array or if an unknown logical operator is used
      Comparison operator $where
        ✓ Function should match and not match correctly
        ✓ Should throw an error if the $where function is not, in fact, a function
        ✓ Should throw an error if the $where function returns a non-boolean
        ✓ Should be able to do the complex matching it must be used for
      Array fields
        ✓ Field equality
        ✓ With one comparison operator
        ✓ Works with arrays that are in subdocuments
        ✓ Can query inside arrays thanks to dot notation
        ✓ Can query for a specific element inside arrays thanks to dot notation
        ✓ A single array-specific operator and the query is treated as array specific
        ✓ Can mix queries on array fields and non array filds with array specific operators

  Persistence
    ✓ Every line represents a document
    ✓ Badly formatted lines have no impact on the treated data
    ✓ Well formatted lines that have no _id are not included in the data
    ✓ If two lines concern the same doc (= same _id), the last one is the good version
    ✓ If a doc contains $$deleted: true, that means we need to remove it from the data
    ✓ If a doc contains $$deleted: true, no error is thrown if the doc wasnt in the list before
    ✓ If a doc contains $$indexCreated, no error is thrown during treatRawData and we can get the index options
    ✓ Compact database manually
    ✓ Calling loadDatabase after the data was modified doesnt change its contents
    ✓ Calling loadDatabase after the datafile was removed will reset the database
    ✓ Calling loadDatabase after the datafile was modified loads the new data
    ✓ When treating raw data, refuse to proceed if too much data is corrupt, to avoid data loss
    Serialization hooks
      ✓ Declaring only one hook will throw an exception to prevent data loss
      ✓ Declaring two hooks that are not reverse of one another will cause an exception to prevent data loss
      ✓ A serialization hook can be used to transform data before writing new state to disk
      ✓ Use serialization hook when persisting cached database or compacting (55ms)
      ✓ Deserialization hook is correctly used when loading data
    Prevent dataloss when persisting data
      ✓ Creating a persistent datastore with a bad filename will cause an error
      ✓ If no file exists, ensureDataFileIntegrity creates an empty datafile
      ✓ If only datafile exists, ensureDataFileIntegrity will use it
      ✓ If temp datafile exists and datafile doesnt, ensureDataFileIntegrity will use it (cannot happen except upon first use)
      ✓ If both temp and current datafiles exist, ensureDataFileIntegrity will use the datafile, as it means that the write of the temp file failed
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state
      ✓ After a persistCachedDatabase, there should be no temp or old filename
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state even if there is a temp datafile
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state even if there is a temp datafile
      ✓ Persistence works as expected when everything goes fine
Error: Command failed: ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts
Error: EMFILE: too many open files, open './test/core/test_lac/openFdsTestFile'

    at ChildProcess.exithandler (node:child_process:400:12)
    at ChildProcess.emit (node:events:513:28)
    at maybeClose (node:internal/child_process:1093:16)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts'
}
      4) Cannot cause EMFILE errors by opening too many file descriptors
    ensureFileDoesntExist
      ✓ Doesnt do anything if file already doesnt exist
      ✓ Deletes file if it exists
    Dealing with large databases
      - Loading the database
      - Writing the database

  Actions
    Connection
      ✓ Connection with an object param
      ✓ Connection with an already created DB
    Operations
      Creating
        ✓ Basic creation
        ✓ Creating while giving an ID
        ✓ Creating multiple in single call
        ✓ Test signature
        ✓ Modeling
      Read
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ limiting
        ✓ skipping
        ✓ projecting
        ✓ deep projecting
        ✓ sorting
        ✓ deep sorting
        Modeling
          ✓ Is in fact an instance of the model
          ✓ Methods exists
          ✓ filter by getter
          ✓ sort by getter
          ✓ projecting a getter
          ✓ run function
      Update
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ Multi update
        ✓ Test signature & modeling
      Upserting
        ✓ When the document is found
        ✓ When the document is not found
      Counting
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
      Delete
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ multi delete

  External (through the network) instance
    Creating
      5) "before each" hook for "Basic creation"

  Operators tests
    Query Selectors
      Comparison
        ✓ $eq
        ✓ $ne
        ✓ $gt
        ✓ $lt
        ✓ $gte
        ✓ $lte
        ✓ $in
        ✓ $nin
      Element
        ✓ $exists
        ✓ $type
      Evaluation
        ✓ $mod
        ✓ $regex
        ✓ $where
      Array
        ✓ $all
        ✓ $elemMatch
        ✓ $size
      Logical
        ✓ $and
        ✓ $nor
        ✓ $not
        ✓ $or
    Update Operators
      Field update operators
        ✓ $currentDate
        ✓ $inc
        ✓ $mul
        ✓ $min
        ✓ $max
        ✓ $rename
        ✓ $set
        ✓ $unset
        ✓ $setOnInsert
      Array update operators
        ✓ $addToSet
        ✓ $pop
        ✓ $pull
        ✓ $pull $eq
        ✓ $pullAll
        ✓ $push
        ✓ $push $each
        ✓ $push $each $position
        ✓ $push $each $slice
        ✓ $push $each $sort
        variations on the sort mechanism
          ✓ $push $each $sort 1
          ✓ $push $each $sort 2
          ✓ $push $each $sort 3
          ✓ $push $each $sort 4


  455 passing (7s)
  2 pending
  5 failing

  1) Database
       Using indexes
         Persisting indexes
           Indexes are persisted to a separate file and recreated upon reload:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:2798:8)
      at processImmediate (node:internal/timers:466:21)

  2) Database
       Using indexes
         Persisting indexes
           Indexes are persisted with their options and recreated even if some db operation happen between loads:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:2888:8)
      at processImmediate (node:internal/timers:466:21)

  3) Database
       Using indexes
         Persisting indexes
           Indexes can also be removed and the remove persisted:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:3050:8)
      at processImmediate (node:internal/timers:466:21)

  4) Persistence
       Prevent dataloss when persisting data
         Cannot cause EMFILE errors by opening too many file descriptors:
     Error: Command failed: ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts
Error: EMFILE: too many open files, open './test/core/test_lac/openFdsTestFile'

      at ChildProcess.exithandler (node:child_process:400:12)
      at ChildProcess.emit (node:events:513:28)
      at maybeClose (node:internal/child_process:1093:16)
      at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)

  5) External (through the network) instance
       "before each" hook for "Basic creation":
     FetchError: request to http://localhost:3000/mydb/reload failed, reason: connect ECONNREFUSED 127.0.0.1:3000
      at ClientRequest.<anonymous> (node_modules/node-fetch/lib/index.js:1455:11)
      at ClientRequest.emit (node:events:513:28)
      at Socket.socketErrorListener (node:_http_client:481:9)
      at Socket.emit (node:events:513:28)
      at emitErrorNT (node:internal/streams/destroy:157:8)
      at emitErrorCloseNT (node:internal/streams/destroy:122:3)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)



npm uninstall

removed 1 package, and audited 337 packages in 5s

29 packages are looking for funding
  run `npm fund` for details

15 vulnerabilities (4 moderate, 10 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> tydb@0.1.5 test
> mocha



  AVL tree
    ✓ Can use undefined as key and value
    ✓ Can use null as key and value
    Sanity checks
      ✓ Checking that all nodes heights are correct
      ✓ Calculate the balance factor
      ✓ Can check that a tree is balanced
    Insertion
      ✓ The root has a height of 1
      ✓ Insert at the root if its the first insertion
      ✓ If uniqueness constraint not enforced, we can insert different data for same key
      ✓ If uniqueness constraint is enforced, we cannot insert different data for same key
      ✓ Can insert 0 or the empty string
      ✓ Auto-balancing insertions
      ✓ Can insert a lot of keys and still get an AVLT (sanity check) (224ms)
    Search
      ✓ Can find data in an AVLT
      ✓ If no data can be found, return an empty array
      ✓ Can search for data between two bounds
      ✓ Bounded search can handle cases where query contains both $lt and $lte, or both $gt and $gte
      ✓ Bounded search can work when one or both boundaries are missing
    Deletion
      ✓ Deletion does nothing on an empty tree
      ✓ Deleting a non-existent key doesnt have any effect
      ✓ Able to delete the root if it is also a leaf
      ✓ Able to delete leaf nodes that are non-root
      ✓ Able to delete the root if it has only one child
      ✓ Able to delete non root nodes that have only one child
      ✓ Can delete the root if it has 2 children
      ✓ Can delete a non-root node that has two children
      ✓ If no value is provided, it will delete the entire node even if there are multiple pieces of data
      ✓ Can remove only one value from an array
      ✓ Removes nothing if value doesnt match
      ✓ If value provided but node contains only one value, remove entire node
      ✓ Can remove the root from a tree with height 2 when the root has two children (special case)
      ✓ Can remove the root from a tree with height 3 when the root has two children (special case where the two children themselves have children)
      ✓ Removing falsy values does not delete the entire key
    Execute on every node (=tree traversal)
      ✓ Can execute a function on every node
    Randomized test (takes much longer than the rest of the test suite)
      ✓ Inserting and deleting entire nodes (403ms)

  Binary search tree
    ✓ Upon creation, left, right are null, key and data can be set
    ✓ Can use undefined as key but not value
    ✓ Can use null as key and value
    Sanity checks
      ✓ Can get maxkey and minkey descendants
      ✓ Can check a condition against every node in a tree
      ✓ Can check that a tree verifies node ordering
      ✓ Checking if a tree's internal pointers (i.e. parents) are correct
      ✓ Can get the number of inserted keys
    Insertion
      ✓ Insert at the root if its the first insertion
      ✓ Insert on the left if key is less than the root's
      ✓ Insert on the right if key is greater than the root's
      ✓ Recursive insertion on the left works
      ✓ Recursive insertion on the right works
      ✓ If uniqueness constraint not enforced, we can insert different data for same key
      ✓ If uniqueness constraint is enforced, we cannot insert different data for same key
      ✓ Can insert 0 or the empty string
      ✓ Can insert a lot of keys and still get a BST (sanity check)
      ✓ All children get a pointer to their parent, the root doesnt
    Search
      ✓ Can find data in a BST
      ✓ If no data can be found, return an empty array
      ✓ Can find ascending ordered data in a BST
      ✓ Can find descending ordered data in a BST
      ✓ Can find nearest key in a BST
      ✓ Can find nearest key greater than search key in a BST
      ✓ Can find nearest key less than search key in a BST
      ✓ Can find nearest key with two equal keys in BST
      ✓ Can search for data between two bounds
      ✓ Bounded search can handle cases where query contains both $lt and $lte, or both $gt and $gte
      ✓ Bounded search can work when one or both boundaries are missing
    Deletion
      ✓ Deletion does nothing on an empty tree
      ✓ Deleting a non-existent key doesnt have any effect
      ✓ Able to delete the root if it is also a leaf
      ✓ Able to delete leaf nodes that are non-root
      ✓ Able to delete the root if it has only one child
      ✓ Able to delete non root nodes that have only one child
      ✓ Can delete the root if it has 2 children
      ✓ Can delete a non-root node that has two children
      ✓ If no value is provided, it will delete the entire node even if there are multiple pieces of data
      ✓ Can remove only one value from an array
      ✓ Removes nothing if value doesnt match
      ✓ If value provided but node contains only one value, remove entire node
      ✓ Can remove the root from a tree with height 2 when the root has two children (special case)
      ✓ Can remove the root from a tree with height 3 when the root has two children (special case where the two children themselves have children)
    Execute on every node (=tree traversal)
      ✓ Can execute a function on every node
    Randomized test (takes much longer than the rest of the test suite)
      ✓ Inserting and deleting entire nodes (391ms)

  Cursor
    Without sorting
      ✓ Without query, an empty query or a simple query and no skip or limit
      ✓ With an empty collection
      ✓ With a limit
      ✓ With a skip
      ✓ With a limit and a skip and method chaining
    Sorting of the results
      ✓ Using one sort
      ✓ With an empty collection
      ✓ Ability to chain sorting and exec
      ✓ Using limit and sort
      ✓ Using a limit higher than total number of docs shouldnt cause an error
      ✓ Using limit and skip with sort
      ✓ Using too big a limit and a skip with sort
      ✓ Using too big a skip with sort should return no result
      ✓ Sorting strings
      ✓ Sorting nested fields with dates
      ✓ Sorting when some fields are undefined
      ✓ Sorting when all fields are undefined
      ✓ Multiple consecutive sorts
      ✓ Similar data, multiple consecutive sorts
    Projections
      ✓ Takes all results if no projection or empty object given
      ✓ Can take only the expected fields
      ✓ Can omit only the expected fields
      ✓ Cannot use both modes except for _id
      ✓ Projections on embedded documents - omit type
      ✓ Projections on embedded documents - pick type

  customUtils
    uid
      ✓ Generated uids should not be the same
      ✓ Generated random strings should not be the same

  Database
    Insert
      ✓ Able to insert a document in the database, setting an _id if none provided, and retrieve it even after a reload
      ✓ Can insert multiple documents in the database
      ✓ Can insert and get back from DB complex objects with all primitive and secondary types
      ✓ If an object returned from the DB is modified and refetched, the original value should be found
      ✓ Cannot insert a doc that has a field beginning with a $ sign
      ✓ If an _id is already given when we insert a document, use that instead of generating a random one
      ✓ Modifying the insertedDoc after an insert doesnt change the copy saved in the database
      ✓ Can insert an array of documents at once
      ✓ If a bulk insert violates a constraint, all changes are rolled back
      ✓ CreatedAt field is added and persisted
      ✓ If createdAt is specified by user, don't change it
      ✓ If updatedAt is specified by user, don't change it
      ✓ Can insert a doc with id 0
    #getCandidates
      ✓ Can use an index to get docs with a basic match
      ✓ Can use an index to get docs with a $in match
      ✓ Can use an index to get docs with a $eq match
      ✓ If no index can be used, return the whole database
      ✓ Can use indexes for comparison matches
      ✓ Can set a TTL index that expires documents (246ms)
      ✓ TTL indexes can expire multiple documents and only what needs to be expired (308ms)
      ✓ Document where indexed field is absent or not a date are ignored (205ms)
    Find
      ✓ Can find all documents if an empty query is used
      ✓ Can find all documents matching a basic query
      ✓ Can find dates and objects (non JS-native types)
      ✓ Can use dot-notation to query subfields
      ✓ Array fields match if any element matches
      ✓ Returns an error if the query is not well formed
      ✓ Changing the documents returned by find or findOne do not change the database state
    Count
      ✓ Count all documents if an empty query is used
      ✓ Count all documents matching a basic query
      ✓ Array fields match if any element matches
      ✓ Returns an error if the query is not well formed
    Update
      ✓ If the query doesn't match anything, database is not modified
      ✓ Update the updatedAt field (104ms)
      ✓ Can update multiple documents matching the query
      ✓ Cannot perform update if the update query is not either registered-modifiers-only or copy-only, or contain badly formatted fields
      ✓ Can update documents using multiple modifiers
      ✓ CUpserting using $setOnInsert
      ✓ When using modifiers, the only way to update subdocs is with the dot-notation
      ✓ Returns an error if the query is not well formed
      ✓ If an error is thrown by a modifier, the database state is not changed
      ✓ Cant change the _id of a document
      ✓ Non-multi updates are persistent
      ✓ Multi updates are persistent
      ✓ If a multi update fails on one document, previous updates should be rolled back
      ✓ If an index constraint is violated by an update, all changes should be rolled back
      ✓ return all updated docs
      ✓ createdAt property is unchanged and updatedAt correct after an update, even a complete document replacement
      Upserts
        ✓ Can perform upserts if needed
        ✓ If the update query is a normal object with no modifiers, it is the doc that will be upserted
        ✓ If the update query contains modifiers, it is applied to the object resulting from removing all operators from the find query 1
        ✓ Performing upsert without $setOnInsert yields a standard error not an exception
    Remove
      ✓ Can remove multiple documents
      ✓ Remove can be called multiple times in parallel and everything that needs to be removed will be
      ✓ Returns an error if the query is not well formed
      ✓ Non-multi removes are persistent
      ✓ Multi removes are persistent
    Using indexes
      ✓ Results of getMatching should never contain duplicates
      ensureIndex and index initialization in database loading
        ✓ ensureIndex can be called right after a loadDatabase and be initialized and filled correctly
        ✓ ensureIndex can be called twice on the same field, the second call will ahve no effect
        ✓ ensureIndex can be called after the data set was modified and the index still be correct
        ✓ ensureIndex can be called before a loadDatabase and still be initialized and filled correctly
        ✓ Can initialize multiple indexes on a database load
        ✓ If a unique constraint is not respected, database loading will throw but the valid data will be still be usable
        ✓ If a unique constraint is not respected, ensureIndex will return an error and not create an index
        ✓ Can remove an index
      Indexing newly inserted documents
        ✓ Newly inserted documents are indexed
        ✓ If multiple indexes are defined, the document is inserted in all of them
        ✓ Can insert two docs at the same key for a non unique index
        ✓ If the index has a unique constraint, an error is thrown if it is violated and the data is not modified
        ✓ If an index has a unique constraint, other indexes cannot be modified when it raises an error
        ✓ Unique indexes prevent you from inserting two docs where the field is undefined except if theyre sparse
        ✓ Insertion still works as before with indexing
        ✓ All indexes point to the same data as the main index on _id
        ✓ If a unique constraint is violated, no index is changed, including the main one
      Updating indexes upon document update
        ✓ Updating docs still works as before with indexing
        ✓ Indexes get updated when a document (or multiple documents) is updated
        ✓ If a simple update violates a contraint, all changes are rolled back and an error is thrown
        ✓ If a multi update violates a contraint, all changes are rolled back and an error is thrown
      Updating indexes upon document remove
        ✓ Removing docs still works as before with indexing
        ✓ Indexes get updated when a document (or multiple documents) is removed
      Persisting indexes
        1) Indexes are persisted to a separate file and recreated upon reload
        2) Indexes are persisted with their options and recreated even if some db operation happen between loads
        3) Indexes can also be removed and the remove persisted

  Indexes
    ✓ Get all elements in the index
    Insertion
      ✓ Can insert pointers to documents in the index correctly when they have the field
      ✓ Inserting twice for the same fieldName in a unique index will result in an error thrown
      ✓ Inserting twice for a fieldName the docs dont have with a unique index results in an error thrown
      ✓ Inserting twice for a fieldName the docs dont have with a unique and sparse index will not throw, since the docs will be non indexed
      ✓ Works with dot notation
      ✓ Can insert an array of documents
      ✓ When inserting an array of elements, if an error is thrown all inserts need to be rolled back
      Array fields
        ✓ Inserts one entry per array element in the index
        ✓ Inserts one entry per array element in the index, type-checked
        ✓ Inserts one entry per unique array element in the index, the unique constraint only holds across documents
        ✓ The unique constraint holds across documents
        ✓ When removing a document, remove it from the index at all unique array elements
        ✓ If a unique constraint is violated when inserting an array key, roll back all inserts before the key
    Removal
      ✓ Can remove pointers from the index, even when multiple documents have the same key
      ✓ If we have a sparse index, removing a non indexed doc has no effect
      ✓ Works with dot notation
      ✓ Can remove an array of documents
    Update
      ✓ Can update a document whose key did or didnt change
      ✓ If a simple update violates a unique constraint, changes are rolled back and an error thrown
      ✓ Can update an array of documents
      ✓ If a unique constraint is violated during an array-update, all changes are rolled back and an error thrown
      ✓ If an update doesnt change a document, the unique constraint is not violated
      ✓ Can revert simple and batch updates
    Get matching documents
      ✓ Get all documents where fieldName is equal to the given value, or an empty array if no match
      ✓ Can get all documents for a given key in a unique index
      ✓ Can get all documents for which a field is undefined
      ✓ Can get all documents for which a field is null
      ✓ Can get all documents for a given key in a sparse index, but not unindexed docs (= field undefined)
      ✓ Can get all documents whose key is in an array of keys
      ✓ Can get all documents whose key is between certain bounds
    Resetting
      ✓ Can reset an index without any new data, the index will be empty afterwards
      ✓ Can reset an index and initialize it with one document
      ✓ Can reset an index and initialize it with an array of documents

  Model
    Serialization, deserialization
      ✓ Can serialize and deserialize strings
      ✓ Can serialize and deserialize booleans
      ✓ Can serialize and deserialize numbers
      ✓ Can serialize and deserialize null
      ✓ undefined fields are removed when serialized
      ✓ Can serialize and deserialize a date
      ✓ Can serialize and deserialize sub objects
      ✓ Can serialize and deserialize sub arrays
      ✓ Reject field names beginning with a $ sign or containing a dot, except the four edge cases
      ✓ Can serialize string fields with a new line without breaking the DB
      ✓ Can accept objects whose keys are numbers
    Object checking
      ✓ Field names beginning with a $ sign are forbidden
      ✓ Field names cannot contain a .
      ✓ Properties with a null value dont trigger an error
      ✓ Can check if an object is a primitive or not
    Deep copying
      ✓ Should be able to deep copy any serializable model
      ✓ Should deep copy the contents of an array
      ✓ Without the strictKeys option, everything gets deep copied
      ✓ With the strictKeys option, only valid keys gets deep copied
    Modifying documents
      ✓ Queries not containing any modifier just replace the document by the contents of the query but keep its _id
      ✓ Throw an error if trying to change the _id field in a copy-type modification
      ✓ Throw an error if trying to use modify in a mixed copy+modify way
      ✓ Throw an error if trying to use an inexistent modifier
      ✓ Throw an error if a modifier is used with a non-object argument
      $set modifier
        ✓ Can change already set fields without modfifying the underlying object
        ✓ Creates fields to set if they dont exist yet
        ✓ Can set sub-fields and create them if necessary
        ✓ Doesn't replace a falsy field by an object when recursively following dot notation
      $unset modifier
        ✓ Can delete a field, not throwing an error if the field doesnt exist
        ✓ Can unset sub-fields and entire nested documents
        ✓ When unsetting nested fields, should not create an empty parent to nested field
      $inc modifier
        ✓ Throw an error if you try to use it with a non-number or on a non number field
        ✓ Can increment number fields or create and initialize them if needed
        ✓ Works recursively
      $push modifier
        ✓ Can push an element to the end of an array
        ✓ Can push an element to a non-existent field and will create the array
        ✓ Can push on nested fields
        ✓ Throw if we try to push to a non-array
        ✓ Can use the $each modifier to add multiple values to an array at once
        ✓ Can use the $slice modifier to limit the number of array elements
      $addToSet modifier
        ✓ Can add an element to a set
        ✓ Can add an element to a non-existent set and will create the array
        ✓ Throw if we try to addToSet to a non-array
        ✓ Use deep-equality to check whether we can add a value to a set
        ✓ Can use the $each modifier to add multiple values to a set at once
      $pop modifier
        ✓ Throw if called on a non array, a non defined field or a non integer
        ✓ Can remove the first and last element of an array
      $pull modifier
        ✓ Can remove an element from a set
        ✓ Can remove multiple matching elements
        ✓ Throw if we try to pull from a non-array
        ✓ Use deep-equality to check whether we can remove a value from a set
        ✓ Can use any kind of nedb query with $pull
      $max modifier
        ✓ Will set the field to the updated value if value is greater than current one, without modifying the original object
        ✓ Will not update the field if new value is smaller than current one
        ✓ Will create the field if it does not exist
        ✓ Works on embedded documents
      $min modifier
        ✓ Will set the field to the updated value if value is smaller than current one, without modifying the original object
        ✓ Will not update the field if new value is greater than current one
        ✓ Will create the field if it does not exist
        ✓ Works on embedded documents
    Comparing things
      ✓ undefined is the smallest
      ✓ Then null
      ✓ Then numbers
      ✓ Then strings
      ✓ Then booleans
      ✓ Then dates
      ✓ Then arrays
      ✓ And finally objects
      ✓ Can specify custom string comparison function
    Querying
      Comparing things
        ✓ Two things of different types cannot be equal, two identical native things are equal
        ✓ Can test native types null undefined string number boolean date equality
        ✓ If one side is an array or undefined, comparison fails
        ✓ Can test objects equality
      Getting a fields value in dot notation
        ✓ Return first-level and nested values
        ✓ Return undefined if the field cannot be found in the object
        ✓ Can navigate inside arrays with dot notation, and return the array of values in that case
        ✓ Can get a single value out of an array using its index
      Field equality
        ✓ Can find documents with simple fields
        ✓ Can find documents with the dot-notation
        ✓ Cannot find undefined
        ✓ Nested objects are deep-equality matched and not treated as sub-queries
        ✓ Can match for field equality inside an array with the dot notation
      Regular expression matching
        ✓ Matching a non-string to a regular expression always yields false
        ✓ Can match strings using basic querying
        ✓ Can match strings using the $regex operator
        ✓ Will throw if $regex operator is used with a non regex value
        ✓ Can use the $regex operator in cunjunction with other operators
        ✓ Can use dot-notation
      $lt
        ✓ Cannot compare a field to an object, an array, null or a boolean, it will return false
        ✓ Can compare numbers, with or without dot notation
        ✓ Can compare strings, with or without dot notation
        ✓ If field is an array field, a match means a match on at least one element
        ✓ Works with dates too
      Other comparison operators: $lte, $gt, $gte, $ne, $in, $exists
        ✓ $lte
        ✓ $gt
        ✓ $gte
        ✓ $ne
        ✓ $in
        ✓ $nin
        ✓ $exists
      Comparing on arrays
        ✓ Can perform a direct array match
        ✓ Can query on the size of an array field
        ✓ $size operator works with empty arrays
        ✓ Should throw an error if a query operator is used without comparing to an integer
        ✓ Using $size operator on a non-array field should prevent match but not throw
        ✓ Can use $size several times in the same matcher
        ✓ Can query array documents with multiple simultaneous conditions
        ✓ $elemMatch operator works with empty arrays
        ✓ Can use more complex comparisons inside nested query documents
      Logical operators $or, $and, $not
        ✓ Any of the subqueries should match for an $or to match
        ✓ All of the subqueries should match for an $and to match
        ✓ Subquery should not match for a $not to match
        ✓ Logical operators are all top-level, only other logical operators can be above
        ✓ Logical operators can be combined as long as they are on top of the decision tree
        ✓ Should throw an error if a logical operator is used without an array or if an unknown logical operator is used
      Comparison operator $where
        ✓ Function should match and not match correctly
        ✓ Should throw an error if the $where function is not, in fact, a function
        ✓ Should throw an error if the $where function returns a non-boolean
        ✓ Should be able to do the complex matching it must be used for
      Array fields
        ✓ Field equality
        ✓ With one comparison operator
        ✓ Works with arrays that are in subdocuments
        ✓ Can query inside arrays thanks to dot notation
        ✓ Can query for a specific element inside arrays thanks to dot notation
        ✓ A single array-specific operator and the query is treated as array specific
        ✓ Can mix queries on array fields and non array filds with array specific operators

  Persistence
    ✓ Every line represents a document
    ✓ Badly formatted lines have no impact on the treated data
    ✓ Well formatted lines that have no _id are not included in the data
    ✓ If two lines concern the same doc (= same _id), the last one is the good version
    ✓ If a doc contains $$deleted: true, that means we need to remove it from the data
    ✓ If a doc contains $$deleted: true, no error is thrown if the doc wasnt in the list before
    ✓ If a doc contains $$indexCreated, no error is thrown during treatRawData and we can get the index options
    ✓ Compact database manually
    ✓ Calling loadDatabase after the data was modified doesnt change its contents
    ✓ Calling loadDatabase after the datafile was removed will reset the database
    ✓ Calling loadDatabase after the datafile was modified loads the new data
    ✓ When treating raw data, refuse to proceed if too much data is corrupt, to avoid data loss
    Serialization hooks
      ✓ Declaring only one hook will throw an exception to prevent data loss
      ✓ Declaring two hooks that are not reverse of one another will cause an exception to prevent data loss
      ✓ A serialization hook can be used to transform data before writing new state to disk
      ✓ Use serialization hook when persisting cached database or compacting
      ✓ Deserialization hook is correctly used when loading data
    Prevent dataloss when persisting data
      ✓ Creating a persistent datastore with a bad filename will cause an error
      ✓ If no file exists, ensureDataFileIntegrity creates an empty datafile
      ✓ If only datafile exists, ensureDataFileIntegrity will use it
      ✓ If temp datafile exists and datafile doesnt, ensureDataFileIntegrity will use it (cannot happen except upon first use)
      ✓ If both temp and current datafiles exist, ensureDataFileIntegrity will use the datafile, as it means that the write of the temp file failed
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state
      ✓ After a persistCachedDatabase, there should be no temp or old filename
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state even if there is a temp datafile
      ✓ persistCachedDatabase should update the contents of the datafile and leave a clean state even if there is a temp datafile
      ✓ Persistence works as expected when everything goes fine
Error: Command failed: ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts
Error: EMFILE: too many open files, open './test/core/test_lac/openFdsTestFile'

    at ChildProcess.exithandler (node:child_process:400:12)
    at ChildProcess.emit (node:events:513:28)
    at maybeClose (node:internal/child_process:1093:16)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5) {
  code: 1,
  killed: false,
  signal: null,
  cmd: 'ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts'
}
      4) Cannot cause EMFILE errors by opening too many file descriptors
    ensureFileDoesntExist
      ✓ Doesnt do anything if file already doesnt exist
      ✓ Deletes file if it exists
    Dealing with large databases
      - Loading the database
      - Writing the database

  Actions
    Connection
      ✓ Connection with an object param
      ✓ Connection with an already created DB
    Operations
      Creating
        ✓ Basic creation
        ✓ Creating while giving an ID
        ✓ Creating multiple in single call
        ✓ Test signature
        ✓ Modeling
      Read
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ limiting
        ✓ skipping
        ✓ projecting
        ✓ deep projecting
        ✓ sorting
        ✓ deep sorting
        Modeling
          ✓ Is in fact an instance of the model
          ✓ Methods exists
          ✓ filter by getter
          ✓ sort by getter
          ✓ projecting a getter
          ✓ run function
      Update
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ Multi update
        ✓ Test signature & modeling
      Upserting
        ✓ When the document is found
        ✓ When the document is not found
      Counting
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
      Delete
        ✓ Basic filter
        ✓ Deep filter
        ✓ with no filter
        ✓ multi delete

  External (through the network) instance
    Creating
      5) "before each" hook for "Basic creation"

  Operators tests
    Query Selectors
      Comparison
        ✓ $eq
        ✓ $ne
        ✓ $gt
        ✓ $lt
        ✓ $gte
        ✓ $lte
        ✓ $in
        ✓ $nin
      Element
        ✓ $exists
        ✓ $type
      Evaluation
        ✓ $mod
        ✓ $regex
        ✓ $where
      Array
        ✓ $all
        ✓ $elemMatch
        ✓ $size
      Logical
        ✓ $and
        ✓ $nor
        ✓ $not
        ✓ $or
    Update Operators
      Field update operators
        ✓ $currentDate
        ✓ $inc
        ✓ $mul
        ✓ $min
        ✓ $max
        ✓ $rename
        ✓ $set
        ✓ $unset
        ✓ $setOnInsert
      Array update operators
        ✓ $addToSet
        ✓ $pop
        ✓ $pull
        ✓ $pull $eq
        ✓ $pullAll
        ✓ $push
        ✓ $push $each
        ✓ $push $each $position
        ✓ $push $each $slice
        ✓ $push $each $sort
        variations on the sort mechanism
          ✓ $push $each $sort 1
          ✓ $push $each $sort 2
          ✓ $push $each $sort 3
          ✓ $push $each $sort 4


  455 passing (7s)
  2 pending
  5 failing

  1) Database
       Using indexes
         Persisting indexes
           Indexes are persisted to a separate file and recreated upon reload:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:2798:8)
      at processImmediate (node:internal/timers:466:21)

  2) Database
       Using indexes
         Persisting indexes
           Indexes are persisted with their options and recreated even if some db operation happen between loads:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:2888:8)
      at processImmediate (node:internal/timers:466:21)

  3) Database
       Using indexes
         Persisting indexes
           Indexes can also be removed and the remove persisted:
     Error: ENOENT: no such file or directory, unlink 'workspace/persistIndexes.db'
      at Object.unlinkSync (node:fs:1772:3)
      at Context.<anonymous> (test/core/db.test.ts:3050:8)
      at processImmediate (node:internal/timers:466:21)

  4) Persistence
       Prevent dataloss when persisting data
         Cannot cause EMFILE errors by opening too many file descriptors:
     Error: Command failed: ulimit -n 128 && ts-node test/core/test_lac/openFds.test.ts
Error: EMFILE: too many open files, open './test/core/test_lac/openFdsTestFile'

      at ChildProcess.exithandler (node:child_process:400:12)
      at ChildProcess.emit (node:events:513:28)
      at maybeClose (node:internal/child_process:1093:16)
      at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)

  5) External (through the network) instance
       "before each" hook for "Basic creation":
     FetchError: request to http://localhost:3000/mydb/reload failed, reason: connect ECONNREFUSED 127.0.0.1:3000
      at ClientRequest.<anonymous> (node_modules/node-fetch/lib/index.js:1455:11)
      at ClientRequest.emit (node:events:513:28)
      at Socket.socketErrorListener (node:_http_client:481:9)
      at Socket.emit (node:events:513:28)
      at emitErrorNT (node:internal/streams/destroy:157:8)
      at emitErrorCloseNT (node:internal/streams/destroy:122:3)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)



----------------------run test done----------------------
finalhandler
subdir: connect droplib express proxy zigbee2mqtt
----------------------client connect of finalhandler----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> connect@3.7.0 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/

npm uninstall

removed 1 package, and audited 328 packages in 2s

46 packages are looking for funding
  run `npm fund` for details

2 moderate severity vulnerabilities

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> connect@3.7.0 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/

----------------------run test done----------------------
----------------------client droplib of finalhandler----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> @helgoboss/droplib@0.9.0 test
> jest

npm uninstall

removed 1 package, changed 2 packages, and audited 903 packages in 4s

28 packages are looking for funding
  run `npm fund` for details

20 vulnerabilities (7 moderate, 8 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> @helgoboss/droplib@0.9.0 test
> jest

----------------------run test done----------------------
----------------------client express of finalhandler----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> express@4.18.1 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/ test/acceptance/

npm uninstall

removed 1 package, and audited 415 packages in 2s

48 packages are looking for funding
  run `npm fund` for details

3 high severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> express@4.18.1 test
> mocha --require test/support/env --reporter spec --bail --check-leaks test/ test/acceptance/

----------------------run test done----------------------
----------------------client proxy of finalhandler----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> @ladjs/proxy@3.0.0 pretest
> npm run lint


> @ladjs/proxy@3.0.0 lint
> xo --fix && remark . -qfo && fixpack

package.json already clean!

> @ladjs/proxy@3.0.0 test
> cross-env NODE_ENV=test nyc ava


  Uncaught exception in test/test.js

  TypeError: require(...) is not a function

  › Object.<anonymous> (/data/js-variants/multee/VariantsDeps/finalhandler/variant1/finalhandler/index.js:14:29)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › node_modules/append-transform/index.js:64:4
  › Object.<anonymous> (node_modules/append-transform/index.js:64:4)

  ✖ test/test.js exited with a non-zero exit code: 1
  ─

  1 uncaught exception
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |   18.75 |        0 |       0 |   18.75 |                   
 index.js |   18.75 |        0 |       0 |   18.75 | 8-84              
----------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 1146 packages in 4s

365 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> @ladjs/proxy@3.0.0 pretest
> npm run lint


> @ladjs/proxy@3.0.0 lint
> xo --fix && remark . -qfo && fixpack

package.json already clean!

> @ladjs/proxy@3.0.0 test
> cross-env NODE_ENV=test nyc ava


  Uncaught exception in test/test.js

  Error: Cannot find module 'finalhandler'
  Require stack:
  - /data/js-variants/multee/Clients/finalhandler/proxy/index.js
  - /data/js-variants/multee/Clients/finalhandler/proxy/test/test.js
  - /data/js-variants/multee/Clients/finalhandler/proxy/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Object.<anonymous> (index.js:7:22)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › node_modules/append-transform/index.js:64:4

  ✖ test/test.js exited with a non-zero exit code: 1
  ─

  1 uncaught exception
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |   18.75 |        0 |       0 |   18.75 |                   
 index.js |   18.75 |        0 |       0 |   18.75 | 8-84              
----------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client zigbee2mqtt of finalhandler----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> zigbee2mqtt@1.27.0 test
> jest test

npm uninstall

removed 1 package, and audited 824 packages in 3s

81 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> zigbee2mqtt@1.27.0 test
> jest test

----------------------run test done----------------------
levelup
subdir: dynalite multileveldown packager pouchdb subleveldown
----------------------client dynalite of levelup----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> dynalite@3.2.2 test
> mocha --require should --reporter spec -t $([ $REMOTE ] && echo 30s || echo 4s)

npm uninstall

removed 1 package, changed 1 package, and audited 155 packages in 3s

33 packages are looking for funding
  run `npm fund` for details

3 vulnerabilities (2 high, 1 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> dynalite@3.2.2 test
> mocha --require should --reporter spec -t $([ $REMOTE ] && echo 30s || echo 4s)



  batchGetItem
    serializations
      ✓ should return SerializationException when RequestItems is not a map
      ✓ should return SerializationException when RequestItems.Attr is not a struct
      ✓ should return SerializationException when RequestItems.Attr.Keys is not a list
      ✓ should return SerializationException when RequestItems.Attr.Keys.0 is not a map
      ✓ should return SerializationException when RequestItems.Attr.Keys.0.Attr is not an attr struct (207ms)
      ✓ should return SerializationException when RequestItems.Attr.AttributesToGet is not a list
      ✓ should return SerializationException when RequestItems.Attr.ConsistentRead is not a boolean
      ✓ should return SerializationException when RequestItems.Attr.ExpressionAttributeNames is not a map
      ✓ should return SerializationException when RequestItems.Attr.ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when RequestItems.Attr.ProjectionExpression is not a string
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
    validations
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for missing RequestItems
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for short table name with no keys
      ✓ should return ValidationException for empty keys
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException for short table name with keys
      ✓ should return ValidationException when fetching more than 100 keys
      ✓ should return ValidationException if filter expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ProjectionExpression
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException when fetching more than 100 keys over multiple tables
      ✓ should return ResourceNotFoundException when fetching exactly 100 keys and table does not exist
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for duplicated keys
      ✓ should return ValidationException for duplicated mixed up keys
      ✓ should return ValidationException duplicate values in AttributesToGet
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should return empty responses if keys do not exist
      ✓ should return only items that do exist
      ✓ should return only requested attributes of items that do exist
      ✓ should return ConsumedCapacity from each specified table with no consistent read and small item
      ✓ should return ConsumedCapacity from each specified table with no consistent read and larger item
      ✓ should return ConsumedCapacity from each specified table with consistent read and small item
      ✓ should return ConsumedCapacity from each specified table with consistent read and larger item
      - should return all items if just under limit
      - should return an unprocessed item if just over limit
      - should return many unprocessed items if very over the limit

  batchWriteItem
    serializations
      ✓ should return SerializationException when RequestItems is not a map
      ✓ should return SerializationException when RequestItems.Attr is not a list
      ✓ should return SerializationException when RequestItems.Attr.0 is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest.Key is not a map
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest.Key.Attr is not an attr struct (149ms)
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest.Item is not a map
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest.Item.Attr is not an attr struct (123ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
    validations
      ✓ should return ValidationException for empty body
      ✓ should return ValidationException for missing RequestItems
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for empty list in RequestItems
      ✓ should return ValidationException for empty item in RequestItems
      ✓ should return ValidationException for short table name and missing requests
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException when putting more than 25 items
      ✓ should return ResourceNotFoundException when fetching exactly 25 items and table does not exist
      ✓ should check table exists first before checking for duplicate keys
      ✓ should return ValidationException for puts and deletes of the same item with put first
      ✓ should return ValidationException for puts and deletes of the same item with delete first
      ✓ should return ValidationException for short table name
      ✓ should return ValidationException for unsupported datatype in Item
      ✓ should return ValidationException for invalid values in Item
      ✓ should return ValidationException for empty/invalid numbers in Item
      ✓ should return ValidationException for multiple datatypes in Item
      ✓ should return ValidationException if item is too big with small attribute
      ✓ should return ResourceNotFoundException if item is just small enough with small attribute
      ✓ should return ValidationException if item is too big with larger attribute
      ✓ should return ResourceNotFoundException if item is just small enough with larger attribute
      ✓ should return ValidationException if item is too big with multi attributes
      ✓ should return ResourceNotFoundException if item is just small enough with multi attributes
      ✓ should return ValidationException if item is too big with big number attribute
      ✓ should return ValidationException if item is too big with smallest number attribute
      ✓ should return ValidationException if item is too big with smaller number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with multi number attribute
      ✓ should return ResourceNotFoundException if item is just small enough with multi number attribute
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if secondary index key is incorrect type
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should write a single item to each table
      ✓ should delete an item from each table
      ✓ should deal with puts and deletes together
      ✓ should return ConsumedCapacity from each specified table when putting and deleting small item
      ✓ should return ConsumedCapacity from each specified table when putting and deleting larger item
      - should return UnprocessedItems if over limit

  benchmarks
    - should batch write
    - should scan

  dynalite connections
    basic
      ✓ should return 413 if request too large (2885ms)
      ✓ should not return 413 if request not too large (2330ms)
      ✓ should return 404 if OPTIONS with no auth
      ✓ should return 200 if a GET
      ✓ should return 404 if a PUT
      ✓ should return 404 if a DELETE
      ✓ should return 404 if body but no content-type
      ✓ should return 404 if body but incorrect content-type
      ✓ should return 404 if body and application/x-amz-json-1.1
      ✓ should return 404 if body but slightly different content-type
      ✓ should connect to SSL
    JSON
      ✓ should return SerializationException if body is application/json but not JSON
      ✓ should return SerializationException if body is application/x-amz-json-1.0 but not JSON
      ✓ should return SerializationException if body is application/json and semicolon but not JSON
      ✓ should return SerializationException if body is application/json and spaces and semicolon but not JSON
      ✓ should return SerializationException if body is application/json and nonsense but not JSON
      ✓ should return SerializationException if body is application/x-amz-json-1.0 and nonsense but not JSON
      ✓ should return UnknownOperationException if no target
      ✓ should return UnknownOperationException and set CORS if using Origin
      ✓ should return UnknownOperationException if body is application/json
      ✓ should return UnknownOperationException if body is application/x-amz-json-1.0
      ✓ should return UnknownOperationException if body is application/json;charset=asfdsaf
      ✓ should return UnknownOperationException if incorrect target
      ✓ should return UnknownOperationException if incorrect target operation
      ✓ should return MissingAuthenticationTokenException if no Authorization header
      ✓ should return MissingAuthenticationTokenException if incomplete Authorization header
      ✓ should return MissingAuthenticationTokenException if incomplete Authorization header and X-Amz-Algorithm query
      ✓ should return MissingAuthenticationTokenException if all query params except X-Amz-Algorithm
      ✓ should return InvalidSignatureException if both Authorization header and X-Amz-Algorithm query
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4-"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b Credential=a"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b,Credential=a"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b, Credential=a"
      ✓ should return IncompleteSignatureException if empty X-Amz-Algorithm query
      ✓ should return IncompleteSignatureException if missing X-Amz-SignedHeaders query
      ✓ should set CORS if OPTIONS and Origin
      ✓ should set CORS if OPTIONS and Origin and Headers
      ✓ should set CORS if OPTIONS and Origin and Headers and Method

  createTable
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when AttributeDefinitions is not a list
      ✓ should return SerializationException when KeySchema is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes is not a list
      ✓ should return SerializationException when ProvisionedThroughput is not a struct
      ✓ should return SerializationException when ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when KeySchema.0 is not a struct
      ✓ should return SerializationException when KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when AttributeDefinitions.0 is not a struct
      ✓ should return SerializationException when AttributeDefinitions.0.AttributeName is not a string
      ✓ should return SerializationException when AttributeDefinitions.0.AttributeType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0 is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.IndexName is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0 is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.ProjectionType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.ProjectionType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when BillingMode is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ValidationException for empty AttributeDefinitions
      ✓ should return ValidationException for empty ProvisionedThroughput
      ✓ should return ValidationException for low ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for key element names
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits and neg
      ✓ should return ValidationException for missing ProvisionedThroughput
      ✓ should return ValidationException if ProvisionedThroughput set when BillingMode is PAY_PER_REQUEST
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits second
      ✓ should return ValidationException for high ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for missing key attribute definitions
      ✓ should return ValidationException for missing key attribute definitions if BillingMode is PAY_PER_REQUEST
      ✓ should return ValidationException for attribute definitions member nulls
      ✓ should return ValidationException for SS in attr definition
      ✓ should return ValidationException for random attr definition
      ✓ should return ValidationException for missing key attr definition when double
      ✓ should return ValidationException for missing key attr definition
      ✓ should return ValidationException for missing key attr definition when double and valid
      ✓ should return ValidationException for missing key attr definition when double and same
      ✓ should return ValidationException for hash key and range key having same name
      ✓ should return ValidationException for second key not being range
      ✓ should return ValidationException for second key being hash
      ✓ should return ValidationException for both being range key
      ✓ should return ValidationException for extra attribute in definitions when range
      ✓ should return ValidationException for extra attribute in definitions when hash
      ✓ should return ValidationException for empty LocalSecondaryIndexes list
      ✓ should return ValidationException for more than five empty LocalSecondaryIndexes
      ✓ should return ValidationException for bad LocalSecondaryIndex names
      ✓ should return ValidationException for no range key with LocalSecondaryIndex
      ✓ should return ValidationException for missing attribute definitions in LocalSecondaryIndex
      ✓ should return ValidationException for first key in LocalSecondaryIndex not being hash
      ✓ should return ValidationException for same names of keys in LocalSecondaryIndex
      ✓ should return ValidationException for second key of LocalSecondaryIndex not being range
      ✓ should return ValidationException for no range key in LocalSecondaryIndex
      ✓ should return ValidationException for different hash key between LocalSecondaryIndex and table
      ✓ should return ValidationException for same named keys in LocalSecondaryIndex when one hash and one range
      ✓ should return ValidationException for missing attribute definitions when hash is same in LocalSecondaryIndex
      ✓ should return ValidationException for empty Projection in LocalSecondaryIndex
      ✓ should return ValidationException for invalid properties in LocalSecondaryIndex
      ✓ should return ValidationException for missing ProjectionType in LocalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType ALL in LocalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType KEYS_ONLY in LocalSecondaryIndex
      ✓ should return ValidationException for duplicate index names in LocalSecondaryIndexes
      ✓ should return ValidationException for extraneous values in LocalSecondaryIndexes
      ✓ should return ValidationException for more than five valid LocalSecondaryIndexes
      ✓ should return ValidationException for empty GlobalSecondaryIndexes list
      ✓ should return ValidationException for more than five empty GlobalSecondaryIndexes
      ✓ should return ValidationException for bad GlobalSecondaryIndex names
      ✓ should return ValidationException for missing attribute definition with only range key with GlobalSecondaryIndex
      ✓ should return ValidationException for missing attribute definitions in GlobalSecondaryIndex
      ✓ should return ValidationException for first key in GlobalSecondaryIndex not being hash
      ✓ should return ValidationException for same names of keys in GlobalSecondaryIndex
      ✓ should return ValidationException for second key of GlobalSecondaryIndex not being range
      ✓ should return ValidationException about Projection if no range key in GlobalSecondaryIndex
      ✓ should return ValidationException about Projection for different hash key between GlobalSecondaryIndex and table
      ✓ should return ValidationException for same named keys in GlobalSecondaryIndex when one hash and one range
      ✓ should return ValidationException for missing attribute definitions when hash is same in GlobalSecondaryIndex
      ✓ should return ValidationException for empty Projection in GlobalSecondaryIndex
      ✓ should return ValidationException for invalid properties in GlobalSecondaryIndex
      ✓ should return ValidationException for missing ProjectionType in GlobalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType ALL in GlobalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType KEYS_ONLY in GlobalSecondaryIndex
      ✓ should return ValidationException for duplicate index names in GlobalSecondaryIndexes
      ✓ should return ValidationException for extraneous values in GlobalSecondaryIndexes
      ✓ should return ValidationException for more than twenty valid GlobalSecondaryIndexes
      ✓ should return ValidationException for duplicate index names between LocalSecondaryIndexes and GlobalSecondaryIndexes
      ✓ should return LimitExceededException for more than one table with LocalSecondaryIndexes at a time
      ✓ should not allow ProvisionedThroughput with PAY_PER_REQUEST and GlobalSecondaryIndexes
    functionality
      ✓ should succeed for basic
      ✓ should succeed for basic PAY_PER_REQUEST
      ✓ should change state to ACTIVE after a period (1006ms)
      ✓ should succeed for LocalSecondaryIndexes
      ✓ should succeed for multiple GlobalSecondaryIndexes (1011ms)
      ✓ should succeed for PAY_PER_REQUEST GlobalSecondaryIndexes (1009ms)

  deleteItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (181ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (119ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (167ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid keys in ExpressionAttributeValues
      ✓ should return ValidationException for unsupported datatype in ExpressionAttributeValues
      ✓ should return ValidationException for invalid values in ExpressionAttributeValues
      ✓ should return ValidationException for empty/invalid numbers in ExpressionAttributeValues
      ✓ should return ValidationException for multiple datatypes in ExpressionAttributeValues
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ValidationException for incorrect ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException if ComparisonOperator used alone
      ✓ should return ValidationException if ComparisonOperator and Exists are used together
      ✓ should return ValidationException if AttributeValueList is used alone
      ✓ should return ValidationException if AttributeValueList and Exists are used together
      ✓ should return ValidationException if AttributeValueList and Value are used together
      ✓ should return ValidationException if Value provides incorrect number of attributes: BETWEEN
      ✓ should return ValidationException if Value provides incorrect number of attributes: NULL
      ✓ should return ValidationException if AttributeValueList has different types
      ✓ should return ValidationException if BETWEEN arguments are in the incorrect order
      ✓ should return ValidationException if ConditionExpression BETWEEN args have different types
      ✓ should return ValidationException if ConditionExpression BETWEEN args are in the incorrect order
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
    functionality
      ✓ should return nothing if item does not exist
      ✓ should return ConsumedCapacity if specified and item does not exist
      ✓ should delete item successfully
      ✓ should delete item successfully and return old values
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should return ConditionalCheckFailedException if expecting existing key to not exist
      ✓ should succeed if conditional key is different and exists is false
      ✓ should succeed if conditional key is same and exists is true
      ✓ should succeed if expecting non-existant value to not exist
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist
      ✓ should succeed for multiple conditional checks if all are valid
      ✓ should return ConditionalCheckFailedException for multiple conditional checks if one is invalid
      ✓ should return ConsumedCapacity for small item
      ✓ should return ConsumedCapacity for larger item

  deleteTable
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist
    functionality
      ✓ should eventually delete (2013ms)

  describeTable
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist

  describeTimeToLive
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist
    functionality
      ✓ should succeed if table exists

  getItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (100ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ConsistentRead is not a boolean
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ProjectionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException duplicate values in AttributesToGet
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for syntax error in ProjectionExpression
      ✓ should return ValidationException for reserved keywords in ProjectionExpression
      ✓ should return ValidationException for missing names in ProjectionExpression
      ✓ should return ValidationException for overlapping paths in ProjectionExpression
      ✓ should return ValidationException for conflicting paths in ProjectionExpression
      ✓ should return ValidationException for unused names in ProjectionExpression
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if string key has empty string
      ✓ should return ValidationException if binary key has empty string
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ValidationException for non-scalar key access in ProjectionExpression
      ✓ should return ValidationException for non-scalar index access in ProjectionExpression
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should return empty response if key does not exist
      ✓ should return ConsumedCapacity if specified
      ✓ should return full ConsumedCapacity if specified
      ✓ should return object by hash key
      ✓ should return object by range key
      ✓ should only return requested attributes
      ✓ should only return requested nested attributes
      ✓ should return ConsumedCapacity for small item with no ConsistentRead
      ✓ should return ConsumedCapacity for larger item with no ConsistentRead
      ✓ should return ConsumedCapacity for small item with ConsistentRead
      ✓ should return ConsumedCapacity for larger item with ConsistentRead

  listTables
    serializations
      ✓ should return 400 if no body
      ✓ should return SerializationException when ExclusiveStartTableName is not a string
      ✓ should return SerializationException when Limit is not an integer
    validations
      ✓ should return ValidationException for empty ExclusiveStartTableName
      ✓ should return ValidationExceptions for short ExclusiveStartTableName
      ✓ should return ValidationException for long ExclusiveStartTableName
      ✓ should return ValidationException for low Limit
      ✓ should return ValidationException for high Limit
    functionality
      ✓ should return 200 if no params and application/json
      ✓ should return 200 if no params and application/x-amz-json-1.0
      ✓ should return 200 and CORS if Origin specified
      ✓ should return 200 if random attributes are supplied
      ✓ should return 200 if null attributes are supplied
      ✓ should return 200 if correct types are supplied
      ✓ should return 200 if using query string signing
      ✓ should return list with new table in it
      ✓ should return list using ExclusiveStartTableName and Limit
      ✓ should have no LastEvaluatedTableName if the limit is large enough

  listTagsOfResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for unauthorized ResourceArn
      ✓ should return AccessDeniedException for no ResourceArn
      ✓ should return AccessDeniedException for no ResourceArn
      ✓ should return ValidationException for no ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if ResourceArn does not exist
    functionality
      ✓ should succeed if valid resource and has no tags
      ✓ should succeed if valid resource and has multiple tags

  putItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Item is not a map
      ✓ should return SerializationException when Item.Attr is not an attr struct (92ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (99ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (94ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Item
      ✓ should return ValidationException for invalid values in Item
      ✓ should return ValidationException for empty/invalid numbers in Item
      ✓ should return ValidationException for multiple datatypes in Item
      ✓ should return ValidationException if item is too big with small attribute
      ✓ should return ResourceNotFoundException if item is just small enough with small attribute
      ✓ should return ValidationException if item is too big with larger attribute
      ✓ should return ResourceNotFoundException if item is just small enough with larger attribute
      ✓ should return ValidationException if item is too big with multi attributes
      ✓ should return ResourceNotFoundException if item is just small enough with multi attributes
      ✓ should return ValidationException if item is too big with big number attribute
      ✓ should return ValidationException if item is too big with smallest number attribute
      ✓ should return ValidationException if item is too big with smaller number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with multi number attribute
      ✓ should return ResourceNotFoundException if item is just small enough with multi number attribute
      ✓ should return ValidationException if no value and no exists
      ✓ should return ValidationException for Exists true with no value
      ✓ should return ValidationException for Exists false with value
      ✓ should return ValidationException for incorrect ReturnValues
      ✓ should return ValidationException if ComparisonOperator used alone
      ✓ should return ValidationException if ComparisonOperator and Exists are used together
      ✓ should return ValidationException if AttributeValueList and Value are used together
      ✓ should return ValidationException if AttributeValueList used without ComparisonOperator
      ✓ should return ValidationException if AttributeValueList used with Exists
      ✓ should return ValidationException if AttributeValueList is incorrect length: EQ
      ✓ should return ValidationException if AttributeValueList is incorrect length: NULL
      ✓ should return ValidationException if AttributeValueList is incorrect length: IN
      ✓ should return ValidationException if AttributeValueList is incorrect length: BETWEEN
      ✓ should return ValidationException if Value provides incorrect number of attributes: NULL
      ✓ should return ValidationException if Value provides incorrect number of attributes: BETWEEN
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if missing key
      ✓ should return ValidationException if type mismatch for key
      ✓ should return ValidationException if empty string key
      ✓ should return ValidationException if empty binary key
      ✓ should return ValidationException if missing range key
      ✓ should return ValidationException if secondary index key is incorrect type
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should put basic item
      ✓ should put empty values
      ✓ should put really long numbers
      ✓ should put multi attribute item
      ✓ should return empty when there are no old values
      ✓ should return correct old values when they exist
      ✓ should put basic range item
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should return ConditionalCheckFailedException if expecting existing key to not exist
      ✓ should succeed if conditional key is different and exists is false
      ✓ should succeed if conditional key is same
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if different value specified
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if value not specified
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if same value specified
      ✓ should succeed for multiple conditional checks if all are valid
      ✓ should return ConditionalCheckFailedException for multiple conditional checks if one is invalid
      ✓ should succeed for multiple conditional checks if one is invalid and OR is specified
      ✓ should succeed if condition is valid: NE
      ✓ should fail if condition is invalid: NE
      ✓ should succeed if condition is valid: LE
      ✓ should fail if condition is invalid: LE
      ✓ should succeed if condition is valid: LT
      ✓ should fail if condition is invalid: LT
      ✓ should succeed if condition is valid: GE
      ✓ should fail if condition is invalid: GE
      ✓ should succeed if condition is valid: GT
      ✓ should fail if condition is invalid: GT
      ✓ should succeed if condition is valid: CONTAINS
      ✓ should fail if condition is invalid: CONTAINS
      ✓ should succeed if condition is valid: BEGINS_WITH
      ✓ should fail if condition is invalid: BEGINS_WITH
      ✓ should succeed if condition is valid: NOT_CONTAINS
      ✓ should fail if condition is invalid: NOT_CONTAINS
      ✓ should succeed if condition is valid: IN
      ✓ should fail if condition is invalid: IN
      ✓ should succeed if condition is valid: BETWEEN
      ✓ should fail if condition is invalid: BETWEEN
      ✓ should return ConsumedCapacity for small item
      ✓ should return ConsumedCapacity for larger item

  query
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ExclusiveStartKey is not a map
      ✓ should return SerializationException when ExclusiveStartKey.Attr is not an attr struct (91ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ConsistentRead is not a boolean
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when QueryFilter is not a map
      ✓ should return SerializationException when QueryFilter.Attr is not a struct
      ✓ should return SerializationException when QueryFilter.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when QueryFilter.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when QueryFilter.Attr.AttributeValueList.0 is not an attr struct (92ms)
      ✓ should return SerializationException when IndexName is not a string
      ✓ should return SerializationException when ScanIndexForward is not a boolean
      ✓ should return SerializationException when Select is not a string
      ✓ should return SerializationException when Limit is not an integer
      ✓ should return SerializationException when ConditionalOperator is not a string
      ✓ should return SerializationException when KeyConditions is not a map
      ✓ should return SerializationException when KeyConditions.Attr is not a struct
      ✓ should return SerializationException when KeyConditions.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when KeyConditions.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when KeyConditions.Attr.AttributeValueList.0 is not an attr struct (79ms)
      ✓ should return SerializationException when KeyConditionExpression is not a string
      ✓ should return SerializationException when FilterExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (62ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for empty IndexName
      ✓ should return ValidationException for short IndexName
      ✓ should return ValidationException for long IndexName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if all expressions and non-expression
      ✓ should return ValidationException if all expressions and non-expression without KeyConditionExpression
      ✓ should return ValidationException if all expressions and non-expression without KeyConditions
      ✓ should return ValidationException if ExpressionAttributeNames but no expressions
      ✓ should return ValidationException if ExpressionAttributeValues but no expressions
      ✓ should return ValidationException for bad attribute values in QueryFilter
      ✓ should return ValidationException for invalid values in QueryFilter
      ✓ should return ValidationException for empty/invalid numbers in QueryFilter
      ✓ should return ValidationException for multiple datatypes in QueryFilter
      ✓ should return ValidationException for incorrect number of QueryFilter arguments
      ✓ should return ValidationException for duplicate values in AttributesToGet
      ✓ should return ValidationException for unsupported datatype in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey without provided message
      ✓ should return ValidationException for empty/invalid numbers in ExclusiveStartKey
      ✓ should return ValidationException for multiple datatypes in ExclusiveStartKey
      ✓ should return ValidationException for bad attribute values in KeyConditions
      ✓ should return ValidationException for invalid values in KeyConditions
      ✓ should return ValidationException for empty/invalid numbers in KeyConditions
      ✓ should return ValidationException for multiple datatypes in KeyConditions
      ✓ should return ValidationException for incorrect number of KeyConditions arguments
      ✓ should return ValidationException for incorrect number of KeyConditions
      ✓ should return ValidationException for invalid ComparisonOperator types
      ✓ should return ValidationException for invalid CONTAINS ComparisonOperator types
      ✓ should return ValidationException for invalid BETWEEN ComparisonOperator types
      ✓ should return ValidationException for invalid BEGINS_WITH ComparisonOperator types
      ✓ should return ValidationException if AttributeValueList has different types
      ✓ should return ValidationException if BETWEEN arguments are in the incorrect order
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty KeyConditionExpression
      ✓ should return ValidationException for syntax errors in KeyConditionExpression
      ✓ should return ValidationException for invalid operand types
      ✓ should return ValidationException for invalid operand types with attributes
      ✓ should return ValidationException for empty FilterExpression
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for invalid operator
      ✓ should return ValidationException for invalid operators
      ✓ should return ValidationException no key attribute as first operator
      ✓ should return ValidationException for nested operations
      ✓ should return ValidationException for multiple attribute names
      ✓ should return ValidationException for nested attributes
      ✓ should return ValidationException for no key attribute
      ✓ should return ValidationException for multiple conditions per key
      ✓ should return ValidationException if KeyConditionExpression BETWEEN args have different types
      ✓ should return ValidationException if KeyConditionExpression BETWEEN args are in the incorrect order
      ✓ should check table exists before checking key validity
      ✓ should return ValidationException for non-existent index name
      ✓ should return ValidationException for querying global index with ConsistentRead
      ✓ should return ValidationException if ExclusiveStartKey is invalid
      ✓ should return ValidationException if ExclusiveStartKey for range table is invalid
      ✓ should return ValidationException if ExclusiveStartKey is invalid for local index
      ✓ should return ValidationException if ExclusiveStartKey is invalid for global index
      ✓ should return ValidationException if ExclusiveStartKey does not match hash schema
      ✓ should return ValidationException if ExclusiveStartKey does not match range schema
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for local index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global index
      ✓ should return ValidationException if hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if local hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if global hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if local range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if global range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if hash in ExclusiveStartKey and KeyConditions but range has incorrect schema
      ✓ should return ValidationException if hash in ExclusiveStartKey and KeyConditions but local has incorrect schema
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid, but hash and local are ok
      ✓ should return ValidationException if global hash in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if global range in ExclusiveStartKey but bad in query
      ✓ should return ValidationException for missing range element
      ✓ should return ValidationException for ExclusiveStartKey with local index and missing part
      ✓ should return ValidationException for ExclusiveStartKey with global index and missing part
      ✓ should return ValidationException if querying with non-indexable operations
      ✓ should return ValidationException for unsupported comparison on range
      ✓ should return ValidationException for incorrect comparison operator on index
      ✓ should return ValidationException for mismatching param type
      ✓ should return ValidationException if querying with unsupported conditions
      ✓ should return ValidationException if querying global with unsupported conditions
      ✓ should return ValidationException for ExclusiveStartKey with out-of-bounds hash key
      ✓ should return ValidationException for ExclusiveStartKey with local index and out-of-bounds hash key
      ✓ should return ValidationException if global hash in ExclusiveStartKey but outside range
      ✓ should return ValidationException if second global hash in ExclusiveStartKey but outside range
      ✓ should return ValidationException for ExclusiveStartKey with non-matching range key
      ✓ should return ValidationException for ExclusiveStartKey with local index and not matching predicate
      ✓ should return ValidationException if global hash in ExclusiveStartKey but not matching predicate
      ✓ should return ValidationException for ExclusiveStartKey with matching range but non-matching hash key
      ✓ should return ValidationException if global hash in ExclusiveStartKey but exact match
      ✓ should return ValidationException if hash key in QueryFilter
      ✓ should return ValidationException if hash key in FilterExpression
      ✓ should return ValidationException if range key in QueryFilter
      ✓ should return ValidationException if global range key in QueryFilter
      ✓ should return ValidationException if range key in FilterExpression
      ✓ should return ValidationException for non-scalar index access in FilterExpression
      ✓ should return ValidationException for specifying ALL_ATTRIBUTES when global index does not have ALL
    functionality
      ✓ should query a hash table when empty
      ✓ should query a hash table with items
      ✓ should query a range table with EQ on just hash key
      ✓ should query a range table with EQ
      ✓ should query a range table with LE
      ✓ should query a range table with LT
      ✓ should query a range table with GE
      ✓ should query a range table with GT
      ✓ should query a range table with BEGINS_WITH
      ✓ should query a range table with BETWEEN
      ✓ should only return requested attributes
      ✓ should only return requested nested attributes
      ✓ should filter items by query filter
      ✓ should only return projected attributes by default for secondary indexes
      ✓ should return all attributes when specified for secondary indexes
      ✓ should return COUNT if requested
      ✓ should only return Limit items if requested
      ✓ should only return Limit items if requested and QueryFilter
      ✓ should return LastEvaluatedKey even if only Count is selected
      ✓ should return LastEvaluatedKey even if only Count is selected and QueryFilter
      ✓ should not return LastEvaluatedKey if Limit is at least size of response
      ✓ should return items in order for strings
      ✓ should return items in order for secondary index strings
      ✓ should calculate comparisons correctly for secondary indexes
      ✓ should return items in order for numbers
      ✓ should return items in order for binary
      ✓ should return items in reverse order for strings
      ✓ should return items in reverse order with Limit for strings
      ✓ should return items in reverse order with ExclusiveStartKey for strings
      ✓ should return items in reverse order for numbers
      ✓ should return items in reverse order with Limit for numbers
      ✓ should return items in reverse order for binary
      ✓ should return items in reverse order with Limit for binary
      ✓ should query on basic hash global index
      ✓ should query in reverse on basic hash global index
      ✓ should query on range global index
      ✓ should query in reverse on range global index
      ✓ should query with ExclusiveStartKey on basic hash global index
      ✓ should query in reverse with ExclusiveStartKey on basic hash global index
      ✓ should query with ExclusiveStartKey on range global index
      ✓ should query in reverse with ExclusiveStartKey on range global index
      ✓ should query on a global index if values are equal
      - should not return LastEvaluatedKey if just under limit
      - should return LastEvaluatedKey if just over limit
      - should return all if just under limit
      - should return one less than all if just over limit

  scan
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ExclusiveStartKey is not a map
      ✓ should return SerializationException when ExclusiveStartKey.Attr is not an attr struct (65ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when Select is not a string
      ✓ should return SerializationException when Limit is not an integer
      ✓ should return SerializationException when Segment is not an integer
      ✓ should return SerializationException when ConditionalOperator is not a string
      ✓ should return SerializationException when TotalSegments is not an integer
      ✓ should return SerializationException when ScanFilter is not a map
      ✓ should return SerializationException when ScanFilter.Attr is not a struct
      ✓ should return SerializationException when ScanFilter.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when ScanFilter.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when ScanFilter.Attr.AttributeValueList.0 is not an attr struct (86ms)
      ✓ should return SerializationException when FilterExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (63ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
      ✓ should return SerializationException when IndexName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no FilterExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no FilterExpression
      ✓ should return ValidationException for duplicate values in AttributesToGet
      ✓ should return ValidationException for bad attribute values in ScanFilter
      ✓ should return ValidationException for invalid values in ScanFilter
      ✓ should return ValidationException for empty/invalid numbers in ScanFilter
      ✓ should return ValidationException for multiple datatypes in ScanFilter
      ✓ should return ValidationException for incorrect number of ScanFilter arguments
      ✓ should return ValidationException for invalid ComparisonOperator types
      ✓ should return ValidationException for invalid CONTAINS ComparisonOperator types
      ✓ should return ValidationException for invalid BETWEEN ComparisonOperator types
      ✓ should return ValidationException for invalid BEGINS_WITH ComparisonOperator types
      ✓ should return ValidationException on ExclusiveStartKey if ScanFilter ok with EQ on type SS when table does not exist
      ✓ should return ValidationException for unsupported datatype in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey with no provided message
      ✓ should return ValidationException for empty/invalid numbers in ExclusiveStartKey
      ✓ should return ValidationException for multiple datatypes in ExclusiveStartKey
      ✓ should return ValidationException for missing TotalSegments
      ✓ should return ValidationException for missing Segment
      ✓ should return ValidationException for Segment more than TotalSegments
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty FilterExpression
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for syntax errors
      ✓ should return ValidationException for redundant parentheses
      ✓ should return ValidationException for invalid function names
      ✓ should return ValidationException for functions used incorrectly
      ✓ should return ValidationException for reserved keywords
      ✓ should return ValidationException for missing attribute names
      ✓ should return ValidationException for missing attribute values
      ✓ should return ValidationException for functions with incorrect operands
      ✓ should return ValidationException for functions with incorrect operand type (51ms)
      ✓ should return ValidationException for attribute_type with incorrect value
      ✓ should return ValidationException for functions with attr values instead of paths
      ✓ should return ValidationException for non-distinct expressions
      ✓ should check table exists before checking key validity
      ✓ should return ValidationException if unknown index and bad ExclusiveStartKey in hash table
      ✓ should return ValidationException if unknown index and bad ExclusiveStartKey in range table
      ✓ should return ValidationException if ExclusiveStartKey is invalid for local index
      ✓ should return ValidationException if ExclusiveStartKey is invalid for global index
      ✓ should return ValidationException if global range in ExclusiveStartKey is invalid
      ✓ should return ValidationException for non-existent index name
      ✓ should return ValidationException for specifying ALL_ATTRIBUTES when global index does not have ALL
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for local index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global compound index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema
      ✓ should return ValidationException if ExclusiveStartKey for range table is invalid
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid, but hash and local are ok
      ✓ should return ValidationException if global hash in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if global range in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if ExclusiveStartKey is from different segment
      ✓ should return ValidationException for non-scalar key access
    functionality
      ✓ should scan with no filter
      ✓ should scan by id (type S)
      ✓ should return empty if no match
      ✓ should scan by a non-id property (type N)
      ✓ should scan by multiple properties
      ✓ should scan by EQ on type B
      ✓ should scan by EQ on type SS
      ✓ should scan by EQ on type NS
      ✓ should scan by EQ on type BS
      ✓ should scan by EQ on different types
      ✓ should scan by NE on different types
      ✓ should scan by NE on type SS
      ✓ should scan by NE on type NS
      ✓ should scan by NE on type BS
      ✓ should scan by LE on type S
      ✓ should scan by LE on type N with decimals
      ✓ should scan by LE on type N without decimals
      ✓ should scan by LE on type B
      ✓ should scan by LT on type S
      ✓ should scan by LT on type N
      ✓ should scan by LT on type B
      ✓ should scan by GE on type S
      ✓ should scan by GE on type N
      ✓ should scan by GE on type B
      ✓ should scan by GT on type S
      ✓ should scan by GT on type N
      ✓ should scan by GT on type B
      ✓ should scan by NOT_NULL
      ✓ should scan by NULL
      ✓ should scan by CONTAINS on type S
      ✓ should scan by CONTAINS on type N
      ✓ should scan by CONTAINS on type B
      ✓ should scan by NOT_CONTAINS on type S
      ✓ should scan by NOT_CONTAINS on type N
      ✓ should scan by NOT_CONTAINS on type B
      ✓ should scan by BEGINS_WITH on type S
      ✓ should scan by BEGINS_WITH on type B
      ✓ should scan by IN on type S
      ✓ should scan by IN on type N
      ✓ should scan by IN on type B
      ✓ should scan by BETWEEN on type S
      ✓ should scan by BETWEEN on type N
      ✓ should scan by BETWEEN on type B
      ✓ should scan by nested properties
      ✓ should calculate size function correctly
      ✓ should only return requested attributes
      ✓ should return COUNT if requested
      ✓ should return after but not including ExclusiveStartKey
      ✓ should succeed even if ExclusiveStartKey does not match scan filter
      ✓ should return LastEvaluatedKey if Limit not reached
      ✓ should return LastEvaluatedKey even if selecting Count
      ✓ should return LastEvaluatedKey while filtering, even if Limit is smaller than the expected return list (78ms)
      ✓ should not return LastEvaluatedKey if Limit is large
      ✓ should return items in same segment order
      ✓ should return items in string hash order
      ✓ should return items in number hash order
      ✓ should return items from correct string hash segments
      ✓ should return items from correct number hash segments
      - should not return LastEvaluatedKey if just under limit for range table
      - should return LastEvaluatedKey if just over limit for range table
      - should not return LastEvaluatedKey if just under limit for number range table
      - should return LastEvaluatedKey if just over limit for number range table
      - should return all if just under limit with small attribute for hash table
      - should return all if just under limit with large attribute
      - should return one less than all if just over limit with small attribute for hash table
      - should return all if just under limit for range table
      - should return all if just over limit with less items for range table
      - should return all if just over limit for range table
      - should return one less than all if just over limit with large attribute
      ✓ should allow scans at least for 27500 args to IN (173ms)

  tagResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
      ✓ should return SerializationException when Tags is not a list
      ✓ should return SerializationException when Tags.0 is not a struct
      ✓ should return SerializationException when Tags.0.Key is not a string
      ✓ should return SerializationException when Tags.0.Value is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for short unauthorized ResourceArn
      ✓ should return AccessDeniedException for long unauthorized ResourceArn
      ✓ should return AccessDeniedException for longer unauthorized ResourceArn
      ✓ should return ValidationException for null Tags
      ✓ should return ValidationException for invalid ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if Tags are empty
      ✓ should return ResourceNotFoundException if ResourceArn does not exist

  untagResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
      ✓ should return SerializationException when TagKeys is not a list
      ✓ should return SerializationException when TagKeys.0 is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for short unauthorized ResourceArn
      ✓ should return AccessDeniedException for long unauthorized ResourceArn
      ✓ should return AccessDeniedException for longer unauthorized ResourceArn
      ✓ should return ValidationException for null TagKeys
      ✓ should return ValidationException for invalid ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if TagKeys are empty
      ✓ should return ResourceNotFoundException if ResourceArn does not exist

  updateItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (61ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (69ms)
      ✓ should return SerializationException when AttributeUpdates is not a map
      ✓ should return SerializationException when AttributeUpdates.Attr is not a struct
      ✓ should return SerializationException when AttributeUpdates.Attr.Action is not a string
      ✓ should return SerializationException when AttributeUpdates.Attr.Value is not an attr struct (113ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when UpdateExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (123ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException if update has no value
      ✓ should return ValidationException if trying to delete incorrect types
      ✓ should return ValidationException if trying to add incorrect types
      ✓ should return ValidationException if trying to add type B
      ✓ should return ValidationException if no value and no exists
      ✓ should return ValidationException for Exists true with no value
      ✓ should return ValidationException for Exists false with value
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid keys in ExpressionAttributeValues
      ✓ should return ValidationException for unsupported datatype in ExpressionAttributeValues
      ✓ should return ValidationException for invalid values in ExpressionAttributeValues
      ✓ should return ValidationException for empty/invalid numbers in ExpressionAttributeValues
      ✓ should return ValidationException for multiple datatypes in ExpressionAttributeValues
      ✓ should return ValidationException for empty UpdateExpression
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ValidationException for syntax errors in UpdateExpression
      ✓ should return ValidationException for reserved keywords
      ✓ should return ValidationException for invalid functions in UpdateExpression
      ✓ should return ValidationException for multiple sections
      ✓ should return ValidationException for undefined attribute names in UpdateExpression
      ✓ should return ValidationException for undefined attribute values in UpdateExpression
      ✓ should return ValidationException for overlapping paths in UpdateExpression
      ✓ should return ValidationException for conflicting paths in UpdateExpression
      ✓ should return ValidationException for incorrect types in UpdateExpression
      ✓ should return ValidationException for incorrect number of operands to functions in UpdateExpression
      ✓ should return ValidationException for incorrect operand path type to functions in UpdateExpression
      ✓ should return ValidationException for incorrect types to functions in UpdateExpression
      ✓ should return ValidationException for extra ExpressionAttributeNames
      ✓ should return ValidationException for extra ExpressionAttributeValues
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if Key does not match schema
      ✓ should return ValidationException if Key does not match range schema
      ✓ should return ResourceNotFoundException if table is being created
      ✓ should return ValidationException if trying to update key
      ✓ should return ValidationException if trying to update range key
      ✓ should return ValidationException if trying to update wrong type on index
      ✓ should return ValidationException if trying to update index map
      ✓ should return ValidationException if trying to delete/add incorrect types
      ✓ should return ValidationException if using expression to delete/add incorrect types
      ✓ should return ValidationException if trying to reference non-existent attribute
      ✓ should return ValidationException if trying to update non-existent nested attribute in non-existent item
      ✓ should return ValidationException if trying to update non-existent nested attribute in existing item
      ✓ should return ValidationException if trying to update existing index
      ✓ should return ValidationException if update item is too big
    functionality
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should just add item with key if no action
      ✓ should return empty when there are no old values
      ✓ should return all old values when they exist
      ✓ should return updated old values when they exist
      ✓ should return updated old nested values when they exist
      ✓ should return all new values when they exist
      ✓ should return updated new values when they exist
      ✓ should just add valid ADD actions if nothing exists
      ✓ should delete normal values and return updated new
      ✓ should delete normal values and return updated on index table
      ✓ should delete set values and return updated new
      ✓ should add numerical value and return updated new
      ✓ should add set value and return updated new
      ✓ should add list value and return updated new
      ✓ should throw away duplicate string values
      ✓ should throw away duplicate numeric values
      ✓ should throw away duplicate binary values
      ✓ should return ConsumedCapacity for creating small item
      ✓ should return ConsumedCapacity for creating larger item
      ✓ should return ConsumedCapacity for creating and updating small item
      ✓ should return ConsumedCapacity for creating and updating larger item
      ✓ should update when boolean value expect matches
      ✓ should update values from other attributes
      ✓ should update nested attributes
      ✓ should update indexed attributes (45ms)

  updateTable
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ProvisionedThroughput is not a struct
      ✓ should return SerializationException when ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.ProjectionType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Delete is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Delete.IndexName is not a strin
      ✓ should return SerializationException when BillingMode is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ValidationException for empty ProvisionedThroughput
      ✓ should return ValidationException for low ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits and neg
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits second
      ✓ should return ValidationException for high ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for empty GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for empty Update
      ✓ should return ValidationException for bad IndexName and ProvisionedThroughput
      ✓ should return ValidationException for empty index struct
      ✓ should return ValidationException for too many empty GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for repeated GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for ProvisionedThroughput update when PAY_PER_REQUEST
      ✓ should return ValidationException for PROVISIONED without ProvisionedThroughput
      ✓ should return ResourceNotFoundException if table does not exist
      ✓ should return NotFoundException for high index ReadCapacityUnits when table does not exist
      ✓ should return NotFoundException for high index WriteCapacityUnits when table does not exist
      ✓ should return ValidationException for high index ReadCapacityUnits when index does not exist
      ✓ should return ValidationException for high index WriteCapacityUnits when index does not exist
      ✓ should return ValidationException if read and write are same
      ✓ should return LimitExceededException for too many GlobalSecondaryIndexUpdates
    functionality
      ✓ should triple rates and then reduce if requested (2008ms)
      - should allow table to be converted to PAY_PER_REQUEST and back again


  1037 passing (22s)
  22 pending

----------------------run test done----------------------
----------------------client multileveldown of levelup----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> multileveldown@5.0.1 test
> standard && hallmark && (nyc -s tape test/*.js | faucet) && nyc report

not ok [1m[31m1[0m no plan found
not ok [1m[31m2[0m no assertions found

[1m[31m⨯ fail  2[0m[K
npm uninstall

added 3 packages, changed 1 package, and audited 736 packages in 3s

220 packages are looking for funding
  run `npm fund` for details

2 vulnerabilities (1 moderate, 1 critical)

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> multileveldown@5.0.1 test
> standard && hallmark && (nyc -s tape test/*.js | faucet) && nyc report


# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# testCommon.factory() returns a unique database[K

  ok [1m[32m1[0m no error while opening db1[K
  ok [1m[32m2[0m no error while opening db2[K
  ok [1m[32m3[0m put key in db1[K
  ok [1m[32m4[0m got items from db2[K
  ok [1m[32m5[0m db2 should be empty[K
  ok [1m[32m6[0m no error while closing db1[K
  ok [1m[32m7[0m no error while closing db2[K
[1A[1G[1m[32m✓ testCommon.factory() returns a unique database[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# db has manifest[K

  ok [1m[32m8[0m manifest is object[K
  ok [1m[32m9[0m additionalMethods is object[K
  ok [1m[32m10[0m truthy: bufferKeys[K
  ok [1m[32m11[0m truthy: snapshots[K
  ok [1m[32m12[0m truthy: permanence[K
  ok [1m[32m13[0m false: seek[K
  ok [1m[32m14[0m truthy: clear[K
  ok [1m[32m15[0m truthy: getMany[K
  ok [1m[32m16[0m false: createIfMissing[K
  ok [1m[32m17[0m false: errorIfExists[K
  ok [1m[32m18[0m truthy: status[K
  ok [1m[32m19[0m false: keyIterator[K
  ok [1m[32m20[0m false: valueIterator[K
  ok [1m[32m21[0m false: iteratorNextv[K
  ok [1m[32m22[0m false: iteratorAll[K
  ok [1m[32m23[0m false: idempotentOpen[K
  ok [1m[32m24[0m false: passiveOpen[K
  ok [1m[32m25[0m false: serialize[K
  ok [1m[32m26[0m truthy: deferredOpen[K
  ok [1m[32m27[0m truthy: openCallback[K
  ok [1m[32m28[0m truthy: promises[K
  ok [1m[32m29[0m truthy: streams[K
  ok [1m[32m30[0m truthy: encodings[K
  ok [1m[32m31[0m false: events[K
  ok [1m[32m32[0m truthy: additionalMethods[K
  ok [1m[32m33[0m manifest has unique identity[K
  ok [1m[32m34[0m manifest.encodings has unique identity[K
  ok [1m[32m35[0m manifest.additionalMethods has unique identity[K
  ok [1m[32m36[0m no open error[K
  ok [1m[32m37[0m manifest did not change after open[K
  ok [1m[32m38[0m no close error[K
  ok [1m[32m39[0m manifest did not change after close[K
[1A[1G[1m[32m✓ db has manifest[0m[1B[1G
# manifest has status[K

  ok [1m[32m40[0m should be strictly equal[K
  ok [1m[32m41[0m no open error[K
[1A[1G[1m[32m✓ manifest has status[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# test database open method exists[K

  ok [1m[32m42[0m database object returned[K
  ok [1m[32m43[0m open() function exists[K
[1A[1G[1m[32m✓ test database open method exists[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp[K

[1A[1G[1m[32m✓ setUp[0m[1B[1G
# test database open, no options[K

  ok [1m[32m44[0m null[K
[1A[1G[1m[32m✓ test database open, no options[0m[1B[1G
# test database open, options and callback[K

  ok [1m[32m45[0m null[K
[1A[1G[1m[32m✓ test database open, options and callback[0m[1B[1G
# test database open, close and open[K

  ok [1m[32m46[0m null[K
  ok [1m[32m47[0m undefined[K
  ok [1m[32m48[0m null[K
[1A[1G[1m[32m✓ test database open, close and open[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test close()[K

  ok [1m[32m49[0m undefined[K
[1A[1G[1m[32m✓ test close()[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test simple put()[K

  ok [1m[32m50[0m undefined[K
  ok [1m[32m51[0m null[K
  ok [1m[32m52[0m should be strictly equal[K
[1A[1G[1m[32m✓ test simple put()[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test simple get()[K

  ok [1m[32m53[0m undefined[K
  ok [1m[32m54[0m null[K
  ok [1m[32m55[0m should be strictly equal[K
  ok [1m[32m56[0m null[K
  ok [1m[32m57[0m should be strictly equal[K
  ok [1m[32m58[0m null[K
  ok [1m[32m59[0m should be string if not buffer[K
  ok [1m[32m60[0m should be strictly equal[K
[1A[1G[1m[32m✓ test simple get()[0m[1B[1G
# test simultaneous get()[K

  ok [1m[32m61[0m undefined[K
  ok [1m[32m62[0m null[K
  ok [1m[32m63[0m should be strictly equal[K
  ok [1m[32m64[0m null[K
  ok [1m[32m65[0m should be strictly equal[K
  ok [1m[32m66[0m null[K
  ok [1m[32m67[0m should be strictly equal[K
  ok [1m[32m68[0m null[K
  ok [1m[32m69[0m should be strictly equal[K
  ok [1m[32m70[0m null[K
  ok [1m[32m71[0m should be strictly equal[K
  ok [1m[32m72[0m null[K
  ok [1m[32m73[0m should be strictly equal[K
  ok [1m[32m74[0m null[K
  ok [1m[32m75[0m should be strictly equal[K
  ok [1m[32m76[0m null[K
  ok [1m[32m77[0m should be strictly equal[K
  ok [1m[32m78[0m null[K
  ok [1m[32m79[0m should be strictly equal[K
  ok [1m[32m80[0m null[K
  ok [1m[32m81[0m should be strictly equal[K
  ok [1m[32m82[0m should error[K
  ok [1m[32m83[0m should have correct error message[K
  ok [1m[32m84[0m value is undefined[K
  ok [1m[32m85[0m should error[K
  ok [1m[32m86[0m should have correct error message[K
  ok [1m[32m87[0m value is undefined[K
  ok [1m[32m88[0m should error[K
  ok [1m[32m89[0m should have correct error message[K
  ok [1m[32m90[0m value is undefined[K
  ok [1m[32m91[0m should error[K
  ok [1m[32m92[0m should have correct error message[K
  ok [1m[32m93[0m value is undefined[K
  ok [1m[32m94[0m should error[K
  ok [1m[32m95[0m should have correct error message[K
  ok [1m[32m96[0m value is undefined[K
  ok [1m[32m97[0m should error[K
  ok [1m[32m98[0m should have correct error message[K
  ok [1m[32m99[0m value is undefined[K
  ok [1m[32m100[0m should error[K
  ok [1m[32m101[0m should have correct error message[K
  ok [1m[32m102[0m value is undefined[K
  ok [1m[32m103[0m should error[K
  ok [1m[32m104[0m should have correct error message[K
  ok [1m[32m105[0m value is undefined[K
  ok [1m[32m106[0m should error[K
  ok [1m[32m107[0m should have correct error message[K
  ok [1m[32m108[0m value is undefined[K
  ok [1m[32m109[0m should error[K
  ok [1m[32m110[0m should have correct error message[K
  ok [1m[32m111[0m value is undefined[K
[1A[1G[1m[32m✓ test simultaneous get()[0m[1B[1G
# test get() not found error is asynchronous[K

  ok [1m[32m112[0m should error[K
  ok [1m[32m113[0m should have correct error message[K
  ok [1m[32m114[0m value is undefined[K
  ok [1m[32m115[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() not found error is asynchronous[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test simple del()[K

  ok [1m[32m116[0m undefined[K
  ok [1m[32m117[0m undefined[K
  ok [1m[32m118[0m entry properly deleted[K
  ok [1m[32m119[0m value is undefined[K
  ok [1m[32m120[0m NotFound error[K
[1A[1G[1m[32m✓ test simple del()[0m[1B[1G
# test del on non-existent key[K

  ok [1m[32m121[0m undefined[K
[1A[1G[1m[32m✓ test del on non-existent key[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test get() with null key causes error[K

  ok [1m[32m122[0m has error[K
  ok [1m[32m123[0m should be truthy[K
  ok [1m[32m124[0m correct error message[K
  ok [1m[32m125[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() with null key causes error[0m[1B[1G
# test del() with null key causes error[K

  ok [1m[32m126[0m has error[K
  ok [1m[32m127[0m should be truthy[K
  ok [1m[32m128[0m correct error message[K
  ok [1m[32m129[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test del() with null key causes error[0m[1B[1G
# test getMany() with null key causes error[K

  ok [1m[32m130[0m callback (anonymous) is asynchronous[K
  ok [1m[32m131[0m callback (anonymous) is asynchronous[K
  ok [1m[32m132[0m has error[K
  ok [1m[32m133[0m should be truthy[K
  ok [1m[32m134[0m correct error message[K
  ok [1m[32m135[0m has error[K
  ok [1m[32m136[0m should be truthy[K
  ok [1m[32m137[0m correct error message[K
[1A[1G[1m[32m✓ test getMany() with null key causes error[0m[1B[1G
# test put() with null key causes error[K

  ok [1m[32m138[0m has error[K
  ok [1m[32m139[0m should be truthy[K
  ok [1m[32m140[0m correct error message[K
  ok [1m[32m141[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with null key causes error[0m[1B[1G
# test get() with undefined key causes error[K

  ok [1m[32m142[0m has error[K
  ok [1m[32m143[0m should be truthy[K
  ok [1m[32m144[0m correct error message[K
  ok [1m[32m145[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() with undefined key causes error[0m[1B[1G
# test del() with undefined key causes error[K

  ok [1m[32m146[0m has error[K
  ok [1m[32m147[0m should be truthy[K
  ok [1m[32m148[0m correct error message[K
  ok [1m[32m149[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test del() with undefined key causes error[0m[1B[1G
# test getMany() with undefined key causes error[K

  ok [1m[32m150[0m callback (anonymous) is asynchronous[K
  ok [1m[32m151[0m callback (anonymous) is asynchronous[K
  ok [1m[32m152[0m has error[K
  ok [1m[32m153[0m should be truthy[K
  ok [1m[32m154[0m correct error message[K
  ok [1m[32m155[0m has error[K
  ok [1m[32m156[0m should be truthy[K
  ok [1m[32m157[0m correct error message[K
[1A[1G[1m[32m✓ test getMany() with undefined key causes error[0m[1B[1G
# test put() with undefined key causes error[K

  ok [1m[32m158[0m has error[K
  ok [1m[32m159[0m should be truthy[K
  ok [1m[32m160[0m correct error message[K
  ok [1m[32m161[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with undefined key causes error[0m[1B[1G
# test get() with empty String key causes error[K

  ok [1m[32m162[0m has error[K
  ok [1m[32m163[0m should be truthy[K
  ok [1m[32m164[0m correct error message[K
  ok [1m[32m165[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() with empty String key causes error[0m[1B[1G
# test del() with empty String key causes error[K

  ok [1m[32m166[0m has error[K
  ok [1m[32m167[0m should be truthy[K
  ok [1m[32m168[0m correct error message[K
  ok [1m[32m169[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test del() with empty String key causes error[0m[1B[1G
# test getMany() with empty String key causes error[K

  ok [1m[32m170[0m callback (anonymous) is asynchronous[K
  ok [1m[32m171[0m callback (anonymous) is asynchronous[K
  ok [1m[32m172[0m has error[K
  ok [1m[32m173[0m should be truthy[K
  ok [1m[32m174[0m correct error message[K
  ok [1m[32m175[0m has error[K
  ok [1m[32m176[0m should be truthy[K
  ok [1m[32m177[0m correct error message[K
[1A[1G[1m[32m✓ test getMany() with empty String key causes error[0m[1B[1G
# test put() with empty String key causes error[K

  ok [1m[32m178[0m has error[K
  ok [1m[32m179[0m should be truthy[K
  ok [1m[32m180[0m correct error message[K
  ok [1m[32m181[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with empty String key causes error[0m[1B[1G
# test get() with empty Buffer key causes error[K

  ok [1m[32m182[0m has error[K
  ok [1m[32m183[0m should be truthy[K
  ok [1m[32m184[0m correct error message[K
  ok [1m[32m185[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() with empty Buffer key causes error[0m[1B[1G
# test del() with empty Buffer key causes error[K

  ok [1m[32m186[0m has error[K
  ok [1m[32m187[0m should be truthy[K
  ok [1m[32m188[0m correct error message[K
  ok [1m[32m189[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test del() with empty Buffer key causes error[0m[1B[1G
# test getMany() with empty Buffer key causes error[K

  ok [1m[32m190[0m callback (anonymous) is asynchronous[K
  ok [1m[32m191[0m callback (anonymous) is asynchronous[K
  ok [1m[32m192[0m has error[K
  ok [1m[32m193[0m should be truthy[K
  ok [1m[32m194[0m correct error message[K
  ok [1m[32m195[0m has error[K
  ok [1m[32m196[0m should be truthy[K
  ok [1m[32m197[0m correct error message[K
[1A[1G[1m[32m✓ test getMany() with empty Buffer key causes error[0m[1B[1G
# test put() with empty Buffer key causes error[K

  ok [1m[32m198[0m has error[K
  ok [1m[32m199[0m should be truthy[K
  ok [1m[32m200[0m correct error message[K
  ok [1m[32m201[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with empty Buffer key causes error[0m[1B[1G
# test get() with empty Array key causes error[K

  ok [1m[32m202[0m has error[K
  ok [1m[32m203[0m should be truthy[K
  ok [1m[32m204[0m correct error message[K
  ok [1m[32m205[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test get() with empty Array key causes error[0m[1B[1G
# test del() with empty Array key causes error[K

  ok [1m[32m206[0m has error[K
  ok [1m[32m207[0m should be truthy[K
  ok [1m[32m208[0m correct error message[K
  ok [1m[32m209[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test del() with empty Array key causes error[0m[1B[1G
# test getMany() with empty Array key causes error[K

  ok [1m[32m210[0m callback (anonymous) is asynchronous[K
  ok [1m[32m211[0m callback (anonymous) is asynchronous[K
  ok [1m[32m212[0m has error[K
  ok [1m[32m213[0m should be truthy[K
  ok [1m[32m214[0m correct error message[K
  ok [1m[32m215[0m has error[K
  ok [1m[32m216[0m should be truthy[K
  ok [1m[32m217[0m correct error message[K
[1A[1G[1m[32m✓ test getMany() with empty Array key causes error[0m[1B[1G
# test put() with empty Array key causes error[K

  ok [1m[32m218[0m has error[K
  ok [1m[32m219[0m should be truthy[K
  ok [1m[32m220[0m correct error message[K
  ok [1m[32m221[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with empty Array key causes error[0m[1B[1G
# test put() with null value causes error[K

  ok [1m[32m222[0m has error[K
  ok [1m[32m223[0m should be truthy[K
  ok [1m[32m224[0m correct error message[K
  ok [1m[32m225[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with null value causes error[0m[1B[1G
# test put() with undefined value causes error[K

  ok [1m[32m226[0m has error[K
  ok [1m[32m227[0m should be truthy[K
  ok [1m[32m228[0m correct error message[K
  ok [1m[32m229[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put() with undefined value causes error[0m[1B[1G
# test put()/get()/del() with `0` key[K

  ok [1m[32m230[0m undefined[K
  ok [1m[32m231[0m no error, has key/value for ``0` key`[K
  ok [1m[32m232[0m is a string[K
  ok [1m[32m233[0m should be strictly equal[K
  ok [1m[32m234[0m no error, deleted key/value for ``0` key`[K
  ok [1m[32m235[0m entry properly deleted[K
  ok [1m[32m236[0m should have correct error message[K
  ok [1m[32m237[0m value is undefined[K
  ok [1m[32m238[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with `0` key[0m[1B[1G
# test put()/get()/del() with long String key[K

  ok [1m[32m239[0m undefined[K
  ok [1m[32m240[0m no error, has key/value for `long String key`[K
  ok [1m[32m241[0m is a string[K
  ok [1m[32m242[0m should be strictly equal[K
  ok [1m[32m243[0m no error, deleted key/value for `long String key`[K
  ok [1m[32m244[0m entry properly deleted[K
  ok [1m[32m245[0m should have correct error message[K
  ok [1m[32m246[0m value is undefined[K
  ok [1m[32m247[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with long String key[0m[1B[1G
# test put()/get()/del() with Buffer key[K

  ok [1m[32m248[0m undefined[K
  ok [1m[32m249[0m no error, has key/value for `Buffer key`[K
  ok [1m[32m250[0m is a string[K
  ok [1m[32m251[0m should be strictly equal[K
  ok [1m[32m252[0m no error, deleted key/value for `Buffer key`[K
  ok [1m[32m253[0m entry properly deleted[K
  ok [1m[32m254[0m should have correct error message[K
  ok [1m[32m255[0m value is undefined[K
  ok [1m[32m256[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with Buffer key[0m[1B[1G
# test put()/get()/del() with Array value[K

  ok [1m[32m257[0m undefined[K
  ok [1m[32m258[0m no error, has key/value for `Array value`[K
  ok [1m[32m259[0m is a string[K
  ok [1m[32m260[0m should be strictly equal[K
  ok [1m[32m261[0m no error, deleted key/value for `Array value`[K
  ok [1m[32m262[0m entry properly deleted[K
  ok [1m[32m263[0m should have correct error message[K
  ok [1m[32m264[0m value is undefined[K
  ok [1m[32m265[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with Array value[0m[1B[1G
# test put()/get()/del() with `false` value[K

  ok [1m[32m266[0m undefined[K
  ok [1m[32m267[0m no error, has key/value for ``false` value`[K
  ok [1m[32m268[0m is a string[K
  ok [1m[32m269[0m should be strictly equal[K
  ok [1m[32m270[0m no error, deleted key/value for ``false` value`[K
  ok [1m[32m271[0m entry properly deleted[K
  ok [1m[32m272[0m should have correct error message[K
  ok [1m[32m273[0m value is undefined[K
  ok [1m[32m274[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with `false` value[0m[1B[1G
# test put()/get()/del() with `0` value[K

  ok [1m[32m275[0m undefined[K
  ok [1m[32m276[0m no error, has key/value for ``0` value`[K
  ok [1m[32m277[0m is a string[K
  ok [1m[32m278[0m should be strictly equal[K
  ok [1m[32m279[0m no error, deleted key/value for ``0` value`[K
  ok [1m[32m280[0m entry properly deleted[K
  ok [1m[32m281[0m should have correct error message[K
  ok [1m[32m282[0m value is undefined[K
  ok [1m[32m283[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with `0` value[0m[1B[1G
# test put()/get()/del() with `NaN` value[K

  ok [1m[32m284[0m undefined[K
  ok [1m[32m285[0m no error, has key/value for ``NaN` value`[K
  ok [1m[32m286[0m is a string[K
  ok [1m[32m287[0m should be strictly equal[K
  ok [1m[32m288[0m no error, deleted key/value for ``NaN` value`[K
  ok [1m[32m289[0m entry properly deleted[K
  ok [1m[32m290[0m should have correct error message[K
  ok [1m[32m291[0m value is undefined[K
  ok [1m[32m292[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with `NaN` value[0m[1B[1G
# test put()/get()/del() with empty String value[K

  ok [1m[32m293[0m undefined[K
  ok [1m[32m294[0m no error, has key/value for `empty String value`[K
  ok [1m[32m295[0m is a string[K
  ok [1m[32m296[0m should be strictly equal[K
  ok [1m[32m297[0m no error, deleted key/value for `empty String value`[K
  ok [1m[32m298[0m entry properly deleted[K
  ok [1m[32m299[0m should have correct error message[K
  ok [1m[32m300[0m value is undefined[K
  ok [1m[32m301[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with empty String value[0m[1B[1G
# test put()/get()/del() with empty Buffer value[K

  ok [1m[32m302[0m undefined[K
  ok [1m[32m303[0m no error, has key/value for `empty Buffer value`[K
  ok [1m[32m304[0m is a string[K
  ok [1m[32m305[0m should be strictly equal[K
  ok [1m[32m306[0m no error, deleted key/value for `empty Buffer value`[K
  ok [1m[32m307[0m entry properly deleted[K
  ok [1m[32m308[0m should have correct error message[K
  ok [1m[32m309[0m value is undefined[K
  ok [1m[32m310[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with empty Buffer value[0m[1B[1G
# test put()/get()/del() with empty Array value[K

  ok [1m[32m311[0m undefined[K
  ok [1m[32m312[0m no error, has key/value for `empty Array value`[K
  ok [1m[32m313[0m is a string[K
  ok [1m[32m314[0m should be strictly equal[K
  ok [1m[32m315[0m no error, deleted key/value for `empty Array value`[K
  ok [1m[32m316[0m entry properly deleted[K
  ok [1m[32m317[0m should have correct error message[K
  ok [1m[32m318[0m value is undefined[K
  ok [1m[32m319[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with empty Array value[0m[1B[1G
# test put()/get()/del() with long String value[K

  ok [1m[32m320[0m undefined[K
  ok [1m[32m321[0m no error, has key/value for `long String value`[K
  ok [1m[32m322[0m is a string[K
  ok [1m[32m323[0m should be strictly equal[K
  ok [1m[32m324[0m no error, deleted key/value for `long String value`[K
  ok [1m[32m325[0m entry properly deleted[K
  ok [1m[32m326[0m should have correct error message[K
  ok [1m[32m327[0m value is undefined[K
  ok [1m[32m328[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with long String value[0m[1B[1G
# test put()/get()/del() with Buffer value[K

  ok [1m[32m329[0m undefined[K
  ok [1m[32m330[0m no error, has key/value for `Buffer value`[K
  ok [1m[32m331[0m is a string[K
  ok [1m[32m332[0m should be strictly equal[K
  ok [1m[32m333[0m no error, deleted key/value for `Buffer value`[K
  ok [1m[32m334[0m entry properly deleted[K
  ok [1m[32m335[0m should have correct error message[K
  ok [1m[32m336[0m value is undefined[K
  ok [1m[32m337[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with Buffer value[0m[1B[1G
# test put()/get()/del() with Array key[K

  ok [1m[32m338[0m undefined[K
  ok [1m[32m339[0m no error, has key/value for `Array key`[K
  ok [1m[32m340[0m is a string[K
  ok [1m[32m341[0m should be strictly equal[K
  ok [1m[32m342[0m no error, deleted key/value for `Array key`[K
  ok [1m[32m343[0m entry properly deleted[K
  ok [1m[32m344[0m should have correct error message[K
  ok [1m[32m345[0m value is undefined[K
  ok [1m[32m346[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test put()/get()/del() with Array key[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test getMany() requires an array argument (callback)[K

  ok [1m[32m347[0m callback (anonymous) is asynchronous[K
  ok [1m[32m348[0m callback (anonymous) is asynchronous[K
  ok [1m[32m349[0m should be strictly equal[K
  ok [1m[32m350[0m should be strictly equal[K
[1A[1G[1m[32m✓ test getMany() requires an array argument (callback)[0m[1B[1G
# test getMany() requires an array argument (promise)[K

  ok [1m[32m351[0m should be strictly equal[K
  ok [1m[32m352[0m should be strictly equal[K
  ok [1m[32m353[0m should be strictly equal[K
[1A[1G[1m[32m✓ test getMany() requires an array argument (promise)[0m[1B[1G
# test getMany() support is reflected in manifest[K

  ok [1m[32m354[0m should be strictly equal[K
[1A[1G[1m[32m✓ test getMany() support is reflected in manifest[0m[1B[1G
# test simple getMany()[K

  ok [1m[32m355[0m undefined[K
  ok [1m[32m356[0m null[K
  ok [1m[32m357[0m got an array[K
  ok [1m[32m358[0m array has 1 element[K
  ok [1m[32m359[0m should be strictly equal[K
  ok [1m[32m360[0m null[K
  ok [1m[32m361[0m got an array[K
  ok [1m[32m362[0m array has 1 element[K
  ok [1m[32m363[0m should be strictly equal[K
  ok [1m[32m364[0m null[K
  ok [1m[32m365[0m should be string if not buffer[K
  ok [1m[32m366[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test simple getMany()[0m[1B[1G
# test getMany() with multiple keys[K

  ok [1m[32m367[0m undefined[K
  ok [1m[32m368[0m null[K
  ok [1m[32m369[0m should be deeply equivalent[K
  ok [1m[32m370[0m null[K
  ok [1m[32m371[0m maintains order of input keys[K
[1A[1G[1m[32m✓ test getMany() with multiple keys[0m[1B[1G
# test empty getMany()[K

  ok [1m[32m372[0m callback (anonymous) is asynchronous[K
  ok [1m[32m373[0m callback (anonymous) is asynchronous[K
  ok [1m[32m374[0m null[K
  ok [1m[32m375[0m should be deeply equivalent[K
  ok [1m[32m376[0m null[K
  ok [1m[32m377[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test empty getMany()[0m[1B[1G
# test not-found getMany()[K

  ok [1m[32m378[0m callback (anonymous) is asynchronous[K
  ok [1m[32m379[0m callback (anonymous) is asynchronous[K
  ok [1m[32m380[0m null[K
  ok [1m[32m381[0m should be deeply equivalent[K
  ok [1m[32m382[0m null[K
  ok [1m[32m383[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test not-found getMany()[0m[1B[1G
# test getMany() with promise[K

  ok [1m[32m384[0m should be deeply equivalent[K
  ok [1m[32m385[0m should be deeply equivalent[K
  ok [1m[32m386[0m should be deeply equivalent[K
  ok [1m[32m387[0m should be deeply equivalent[K
  ok [1m[32m388[0m should be deeply equivalent[K
  ok [1m[32m389[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test getMany() with promise[0m[1B[1G
# test simultaneous getMany()[K

  ok [1m[32m390[0m undefined[K
  ok [1m[32m391[0m null[K
  ok [1m[32m392[0m should be strictly equal[K
  ok [1m[32m393[0m should be strictly equal[K
  ok [1m[32m394[0m null[K
  ok [1m[32m395[0m should be strictly equal[K
  ok [1m[32m396[0m should be strictly equal[K
  ok [1m[32m397[0m null[K
  ok [1m[32m398[0m should be strictly equal[K
  ok [1m[32m399[0m should be strictly equal[K
  ok [1m[32m400[0m null[K
  ok [1m[32m401[0m should be strictly equal[K
  ok [1m[32m402[0m should be strictly equal[K
  ok [1m[32m403[0m null[K
  ok [1m[32m404[0m should be strictly equal[K
  ok [1m[32m405[0m should be strictly equal[K
  ok [1m[32m406[0m null[K
  ok [1m[32m407[0m should be strictly equal[K
  ok [1m[32m408[0m should be strictly equal[K
  ok [1m[32m409[0m null[K
  ok [1m[32m410[0m should be strictly equal[K
  ok [1m[32m411[0m should be strictly equal[K
  ok [1m[32m412[0m null[K
  ok [1m[32m413[0m should be strictly equal[K
  ok [1m[32m414[0m should be strictly equal[K
  ok [1m[32m415[0m null[K
  ok [1m[32m416[0m should be strictly equal[K
  ok [1m[32m417[0m should be strictly equal[K
  ok [1m[32m418[0m null[K
  ok [1m[32m419[0m should be strictly equal[K
  ok [1m[32m420[0m should be strictly equal[K
  ok [1m[32m421[0m null[K
  ok [1m[32m422[0m should be deeply equivalent[K
  ok [1m[32m423[0m null[K
  ok [1m[32m424[0m should be deeply equivalent[K
  ok [1m[32m425[0m null[K
  ok [1m[32m426[0m should be deeply equivalent[K
  ok [1m[32m427[0m null[K
  ok [1m[32m428[0m should be deeply equivalent[K
  ok [1m[32m429[0m null[K
  ok [1m[32m430[0m should be deeply equivalent[K
  ok [1m[32m431[0m null[K
  ok [1m[32m432[0m should be deeply equivalent[K
  ok [1m[32m433[0m null[K
  ok [1m[32m434[0m should be deeply equivalent[K
  ok [1m[32m435[0m null[K
  ok [1m[32m436[0m should be deeply equivalent[K
  ok [1m[32m437[0m null[K
  ok [1m[32m438[0m should be deeply equivalent[K
  ok [1m[32m439[0m null[K
  ok [1m[32m440[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test simultaneous getMany()[0m[1B[1G
# test getMany() on new db[K

  ok [1m[32m441[0m should be strictly equal[K
  ok [1m[32m442[0m should be strictly equal[K
  ok [1m[32m443[0m (unnamed assert)[K
  ok [1m[32m444[0m should be strictly equal[K
  ok [1m[32m445[0m should be strictly equal[K
  ok [1m[32m446[0m (unnamed assert)[K
  ok [1m[32m447[0m callback (anonymous) is asynchronous[K
  ok [1m[32m448[0m callback (anonymous) is asynchronous[K
  ok [1m[32m449[0m callback (anonymous) is asynchronous[K
  ok [1m[32m450[0m callback (anonymous) is asynchronous[K
  ok [1m[32m451[0m LevelUP[K
  ok [1m[32m452[0m LevelUP[K
  ok [1m[32m453[0m no error[K
  ok [1m[32m454[0m should be deeply equivalent[K
  ok [1m[32m455[0m no error[K
  ok [1m[32m456[0m should be deeply equivalent[K
  ok [1m[32m457[0m no error[K
  ok [1m[32m458[0m should be deeply equivalent[K
  ok [1m[32m459[0m no error[K
  ok [1m[32m460[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test getMany() on new db[0m[1B[1G
# test getMany() on opening db[K

  ok [1m[32m461[0m callback (open) is asynchronous[K
  ok [1m[32m462[0m callback (anonymous) is asynchronous[K
  ok [1m[32m463[0m callback (open) is asynchronous[K
  ok [1m[32m464[0m callback (anonymous) is asynchronous[K
  ok [1m[32m465[0m LevelUP[K
  ok [1m[32m466[0m LevelUP[K
  ok [1m[32m467[0m no error[K
  ok [1m[32m468[0m should be deeply equivalent[K
  ok [1m[32m469[0m no error[K
  ok [1m[32m470[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test getMany() on opening db[0m[1B[1G
# test getMany() on closed db[K

  ok [1m[32m471[0m null[K
  ok [1m[32m472[0m should be strictly equal[K
  ok [1m[32m473[0m null[K
  ok [1m[32m474[0m should be strictly equal[K
  ok [1m[32m475[0m undefined[K
  ok [1m[32m476[0m should be strictly equal[K
  ok [1m[32m477[0m callback (anonymous) is asynchronous[K
  ok [1m[32m478[0m undefined[K
  ok [1m[32m479[0m should be strictly equal[K
  ok [1m[32m480[0m callback (anonymous) is asynchronous[K
  ok [1m[32m481[0m should be strictly equal[K
  ok [1m[32m482[0m should be strictly equal[K
[1A[1G[1m[32m✓ test getMany() on closed db[0m[1B[1G
# test getMany() on closing db[K

  ok [1m[32m483[0m null[K
  ok [1m[32m484[0m callback (anonymous) is asynchronous[K
  ok [1m[32m485[0m null[K
  ok [1m[32m486[0m callback (anonymous) is asynchronous[K
  ok [1m[32m487[0m undefined[K
  ok [1m[32m488[0m should be strictly equal[K
  ok [1m[32m489[0m undefined[K
  ok [1m[32m490[0m should be strictly equal[K
[1A[1G[1m[32m✓ test getMany() on closing db[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test batch() with missing `value`[K

  ok [1m[32m491[0m correct error message[K
[1A[1G[1m[32m✓ test batch() with missing `value`[0m[1B[1G
# test batch() with null or undefined `value`[K

  ok [1m[32m492[0m correct error message[K
  ok [1m[32m493[0m correct error message[K
[1A[1G[1m[32m✓ test batch() with null or undefined `value`[0m[1B[1G
# test batch() with missing `key`[K

  ok [1m[32m494[0m got error[K
  ok [1m[32m495[0m correct error message[K
  ok [1m[32m496[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with missing `key`[0m[1B[1G
# test batch() with null or undefined `key`[K

  ok [1m[32m497[0m got error[K
  ok [1m[32m498[0m correct error message[K
  ok [1m[32m499[0m callback is asynchronous[K
  ok [1m[32m500[0m got error[K
  ok [1m[32m501[0m correct error message[K
  ok [1m[32m502[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with null or undefined `key`[0m[1B[1G
# test batch() with empty `key`[K

  ok [1m[32m503[0m got error[K
  ok [1m[32m504[0m correct error message[K
  ok [1m[32m505[0m callback is asynchronous[K
  ok [1m[32m506[0m got error[K
  ok [1m[32m507[0m correct error message[K
  ok [1m[32m508[0m callback is asynchronous[K
  ok [1m[32m509[0m got error[K
  ok [1m[32m510[0m correct error message[K
  ok [1m[32m511[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with empty `key`[0m[1B[1G
# test batch() with missing `key` and `value`[K

  ok [1m[32m512[0m got error[K
  ok [1m[32m513[0m correct error message[K
  ok [1m[32m514[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with missing `key` and `value`[0m[1B[1G
# test batch() with missing `type`[K

  ok [1m[32m515[0m got error[K
  ok [1m[32m516[0m correct error message[K
  ok [1m[32m517[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with missing `type`[0m[1B[1G
# test batch() with wrong `type`[K

  ok [1m[32m518[0m got error[K
  ok [1m[32m519[0m correct error message[K
  ok [1m[32m520[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with wrong `type`[0m[1B[1G
# test batch() with missing array[K

  ok [1m[32m521[0m got error[K
  ok [1m[32m522[0m correct error message[K
  ok [1m[32m523[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with missing array[0m[1B[1G
# test batch() with undefined array[K

  ok [1m[32m524[0m got error[K
  ok [1m[32m525[0m correct error message[K
  ok [1m[32m526[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with undefined array[0m[1B[1G
# test batch() with null array[K

  ok [1m[32m527[0m got error[K
  ok [1m[32m528[0m correct error message[K
  ok [1m[32m529[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with null array[0m[1B[1G
# test batch() with null options[K

  ok [1m[32m530[0m undefined[K
[1A[1G[1m[32m✓ test batch() with null options[0m[1B[1G
# test batch() with null element[K

  ok [1m[32m531[0m got error[K
  ok [1m[32m532[0m correct error message[K
  ok [1m[32m533[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with null element[0m[1B[1G
# test batch() with undefined element[K

  ok [1m[32m534[0m got error[K
  ok [1m[32m535[0m correct error message[K
  ok [1m[32m536[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with undefined element[0m[1B[1G
# test batch() with number element[K

  ok [1m[32m537[0m got error[K
  ok [1m[32m538[0m correct error message[K
  ok [1m[32m539[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with number element[0m[1B[1G
# test batch() with boolean element[K

  ok [1m[32m540[0m got error[K
  ok [1m[32m541[0m correct error message[K
  ok [1m[32m542[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with boolean element[0m[1B[1G
# test batch() with empty array[K

  ok [1m[32m543[0m no error from batch()[K
  ok [1m[32m544[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch() with empty array[0m[1B[1G
# test simple batch()[K

  ok [1m[32m545[0m undefined[K
  ok [1m[32m546[0m null[K
  ok [1m[32m547[0m should be strictly equal[K
  ok [1m[32m548[0m should be strictly equal[K
[1A[1G[1m[32m✓ test simple batch()[0m[1B[1G
# test multiple batch()[K

  ok [1m[32m549[0m undefined[K
  ok [1m[32m550[0m null[K
  ok [1m[32m551[0m should be strictly equal[K
  ok [1m[32m552[0m should be strictly equal[K
  ok [1m[32m553[0m entry not found[K
  ok [1m[32m554[0m value is undefined[K
  ok [1m[32m555[0m NotFound error[K
  ok [1m[32m556[0m null[K
  ok [1m[32m557[0m should be strictly equal[K
  ok [1m[32m558[0m should be strictly equal[K
[1A[1G[1m[32m✓ test multiple batch()[0m[1B[1G
# test multiple batch()[K

  ok [1m[32m559[0m should error[K
  ok [1m[32m560[0m callback is asynchronous[K
  ok [1m[32m561[0m should not be found[K
  ok [1m[32m562[0m should not be found[K
[1A[1G[1m[32m✓ test multiple batch()[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test batch has db reference[K

  ok [1m[32m563[0m should be truthy[K
[1A[1G[1m[32m✓ test batch has db reference[0m[1B[1G
# test batch#put() with missing `value`[K

  ok [1m[32m564[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() with missing `value`[0m[1B[1G
# test batch#put() with missing `key`[K

  ok [1m[32m565[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() with missing `key`[0m[1B[1G
# test batch#put() with null `key`[K

  ok [1m[32m566[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() with null `key`[0m[1B[1G
# test batch#put() with missing `key` and `value`[K

  ok [1m[32m567[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() with missing `key` and `value`[0m[1B[1G
# test batch#put() with null or undefined `value`[K

  ok [1m[32m568[0m correct error message[K
  ok [1m[32m569[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() with null or undefined `value`[0m[1B[1G
# test batch#del() with missing `key`[K

  ok [1m[32m570[0m correct error message[K
[1A[1G[1m[32m✓ test batch#del() with missing `key`[0m[1B[1G
# test batch#del() with null or undefined `key`[K

  ok [1m[32m571[0m correct error message[K
  ok [1m[32m572[0m correct error message[K
[1A[1G[1m[32m✓ test batch#del() with null or undefined `key`[0m[1B[1G
# test batch#clear() doesn't throw[K

[1A[1G[1m[32m✓ test batch#clear() doesn't throw[0m[1B[1G
# test batch#put() after write()[K

  ok [1m[32m573[0m correct error message[K
[1A[1G[1m[32m✓ test batch#put() after write()[0m[1B[1G
# test batch#del() after write()[K

  ok [1m[32m574[0m correct error message[K
[1A[1G[1m[32m✓ test batch#del() after write()[0m[1B[1G
# test batch#clear() after write()[K

  ok [1m[32m575[0m correct error message[K
[1A[1G[1m[32m✓ test batch#clear() after write()[0m[1B[1G
# test batch#write() after write()[K

  ok [1m[32m576[0m correct error message[K
[1A[1G[1m[32m✓ test batch#write() after write()[0m[1B[1G
# test batch#write() with no operations[K

  ok [1m[32m577[0m no error from write()[K
  ok [1m[32m578[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test batch#write() with no operations[0m[1B[1G
# test basic batch[K

  ok [1m[32m579[0m undefined[K
  ok [1m[32m580[0m undefined[K
  ok [1m[32m581[0m undefined[K
  ok [1m[32m582[0m correct number of entries[K
  ok [1m[32m583[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test basic batch[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test iterator has db reference[K

  ok [1m[32m584[0m should be truthy[K
[1A[1G[1m[32m✓ test iterator has db reference[0m[1B[1G
# test iterator#next returns this in callback mode[K

  ok [1m[32m585[0m should be truthy[K
[1A[1G[1m[32m✓ test iterator#next returns this in callback mode[0m[1B[1G
# test twice iterator#end() callback with error[K

  ok [1m[32m586[0m undefined[K
  ok [1m[32m587[0m returned error[K
  ok [1m[32m588[0m correct error[K
  ok [1m[32m589[0m should be strictly equal[K
  ok [1m[32m590[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test twice iterator#end() callback with error[0m[1B[1G
# test iterator#next after iterator#end() callback with error[K

  ok [1m[32m591[0m undefined[K
  ok [1m[32m592[0m returned error[K
  ok [1m[32m593[0m correct error[K
  ok [1m[32m594[0m correct message[K
  ok [1m[32m595[0m callback is asynchronous[K
[1A[1G[1m[32m✓ test iterator#next after iterator#end() callback with error[0m[1B[1G
# test twice iterator#next() throws[K

  ok [1m[32m596[0m returned error[K
  ok [1m[32m597[0m correct error[K
  ok [1m[32m598[0m should be strictly equal[K
  ok [1m[32m599[0m callback is asynchronous[K
  ok [1m[32m600[0m null[K
  ok [1m[32m601[0m undefined[K
[1A[1G[1m[32m✓ test twice iterator#next() throws[0m[1B[1G
# test simple iterator()[K

  ok [1m[32m602[0m undefined[K
  ok [1m[32m603[0m null[K
  ok [1m[32m604[0m key argument is a string[K
  ok [1m[32m605[0m value argument is a string[K
  ok [1m[32m606[0m correct key[K
  ok [1m[32m607[0m correct value[K
  ok [1m[32m608[0m null[K
  ok [1m[32m609[0m key argument is a string[K
  ok [1m[32m610[0m value argument is a string[K
  ok [1m[32m611[0m correct key[K
  ok [1m[32m612[0m correct value[K
  ok [1m[32m613[0m null[K
  ok [1m[32m614[0m key argument is a string[K
  ok [1m[32m615[0m value argument is a string[K
  ok [1m[32m616[0m correct key[K
  ok [1m[32m617[0m correct value[K
  ok [1m[32m618[0m null[K
  ok [1m[32m619[0m err argument is nullish[K
  ok [1m[32m620[0m key argument is undefined[K
  ok [1m[32m621[0m value argument is undefined[K
  ok [1m[32m622[0m correct number of entries[K
[1A[1G[1m[32m✓ test simple iterator()[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test full data collection[K

  ok [1m[32m623[0m undefined[K
  ok [1m[32m624[0m correct number of entries[K
  ok [1m[32m625[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test full data collection[0m[1B[1G
# test full data collection (flipped)[K

  ok [1m[32m626[0m undefined[K
  ok [1m[32m627[0m correct number of entries[K
  ok [1m[32m628[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test full data collection (flipped)[0m[1B[1G
# test iterator with reverse=true[K

  ok [1m[32m629[0m undefined[K
  ok [1m[32m630[0m correct number of entries[K
  ok [1m[32m631[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with reverse=true[0m[1B[1G
# test iterator with gte=00[K

  ok [1m[32m632[0m undefined[K
  ok [1m[32m633[0m correct number of entries[K
  ok [1m[32m634[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=00[0m[1B[1G
# test iterator with gte=00 (flipped)[K

  ok [1m[32m635[0m undefined[K
  ok [1m[32m636[0m correct number of entries[K
  ok [1m[32m637[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=00 (flipped)[0m[1B[1G
# test iterator with gte=50[K

  ok [1m[32m638[0m undefined[K
  ok [1m[32m639[0m correct number of entries[K
  ok [1m[32m640[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=50[0m[1B[1G
# test iterator with gte=50 (flipped)[K

  ok [1m[32m641[0m undefined[K
  ok [1m[32m642[0m correct number of entries[K
  ok [1m[32m643[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=50 (flipped)[0m[1B[1G
# test iterator with lte=50 and reverse=true[K

  ok [1m[32m644[0m undefined[K
  ok [1m[32m645[0m correct number of entries[K
  ok [1m[32m646[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50 and reverse=true[0m[1B[1G
# test iterator with gte=49.5 (midway)[K

  ok [1m[32m647[0m undefined[K
  ok [1m[32m648[0m correct number of entries[K
  ok [1m[32m649[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=49.5 (midway)[0m[1B[1G
# test iterator with gte=49.5 (midway) (flipped)[K

  ok [1m[32m650[0m undefined[K
  ok [1m[32m651[0m correct number of entries[K
  ok [1m[32m652[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=49.5 (midway) (flipped)[0m[1B[1G
# test iterator with gte=49999 (midway)[K

  ok [1m[32m653[0m undefined[K
  ok [1m[32m654[0m correct number of entries[K
  ok [1m[32m655[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=49999 (midway)[0m[1B[1G
# test iterator with gte=49999 (midway) (flipped)[K

  ok [1m[32m656[0m undefined[K
  ok [1m[32m657[0m correct number of entries[K
  ok [1m[32m658[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=49999 (midway) (flipped)[0m[1B[1G
# test iterator with lte=49.5 (midway) and reverse=true[K

  ok [1m[32m659[0m undefined[K
  ok [1m[32m660[0m correct number of entries[K
  ok [1m[32m661[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=49.5 (midway) and reverse=true[0m[1B[1G
# test iterator with lt=49.5 (midway) and reverse=true[K

  ok [1m[32m662[0m undefined[K
  ok [1m[32m663[0m correct number of entries[K
  ok [1m[32m664[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=49.5 (midway) and reverse=true[0m[1B[1G
# test iterator with lt=50 and reverse=true[K

  ok [1m[32m665[0m undefined[K
  ok [1m[32m666[0m correct number of entries[K
  ok [1m[32m667[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=50 and reverse=true[0m[1B[1G
# test iterator with lte=50[K

  ok [1m[32m668[0m undefined[K
  ok [1m[32m669[0m correct number of entries[K
  ok [1m[32m670[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50[0m[1B[1G
# test iterator with lte=50 (flipped)[K

  ok [1m[32m671[0m undefined[K
  ok [1m[32m672[0m correct number of entries[K
  ok [1m[32m673[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50 (flipped)[0m[1B[1G
# test iterator with lte=50.5 (midway)[K

  ok [1m[32m674[0m undefined[K
  ok [1m[32m675[0m correct number of entries[K
  ok [1m[32m676[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50.5 (midway)[0m[1B[1G
# test iterator with lte=50.5 (midway) (flipped)[K

  ok [1m[32m677[0m undefined[K
  ok [1m[32m678[0m correct number of entries[K
  ok [1m[32m679[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50.5 (midway) (flipped)[0m[1B[1G
# test iterator with lte=50555 (midway)[K

  ok [1m[32m680[0m undefined[K
  ok [1m[32m681[0m correct number of entries[K
  ok [1m[32m682[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50555 (midway)[0m[1B[1G
# test iterator with lte=50555 (midway) (flipped)[K

  ok [1m[32m683[0m undefined[K
  ok [1m[32m684[0m correct number of entries[K
  ok [1m[32m685[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=50555 (midway) (flipped)[0m[1B[1G
# test iterator with lt=50555 (midway)[K

  ok [1m[32m686[0m undefined[K
  ok [1m[32m687[0m correct number of entries[K
  ok [1m[32m688[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=50555 (midway)[0m[1B[1G
# test iterator with lt=50555 (midway) (flipped)[K

  ok [1m[32m689[0m undefined[K
  ok [1m[32m690[0m correct number of entries[K
  ok [1m[32m691[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=50555 (midway) (flipped)[0m[1B[1G
# test iterator with gte=50.5 (midway) and reverse=true[K

  ok [1m[32m692[0m undefined[K
  ok [1m[32m693[0m correct number of entries[K
  ok [1m[32m694[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=50.5 (midway) and reverse=true[0m[1B[1G
# test iterator with gt=50.5 (midway) and reverse=true[K

  ok [1m[32m695[0m undefined[K
  ok [1m[32m696[0m correct number of entries[K
  ok [1m[32m697[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt=50.5 (midway) and reverse=true[0m[1B[1G
# test iterator with gt=50 and reverse=true[K

  ok [1m[32m698[0m undefined[K
  ok [1m[32m699[0m correct number of entries[K
  ok [1m[32m700[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt=50 and reverse=true[0m[1B[1G
# test iterator with lte=0[K

  ok [1m[32m701[0m undefined[K
  ok [1m[32m702[0m correct number of entries[K
  ok [1m[32m703[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=0[0m[1B[1G
# test iterator with lte=0 (flipped)[K

  ok [1m[32m704[0m undefined[K
  ok [1m[32m705[0m correct number of entries[K
  ok [1m[32m706[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte=0 (flipped)[0m[1B[1G
# test iterator with lt=0[K

  ok [1m[32m707[0m undefined[K
  ok [1m[32m708[0m correct number of entries[K
  ok [1m[32m709[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=0[0m[1B[1G
# test iterator with lt=0 (flipped)[K

  ok [1m[32m710[0m undefined[K
  ok [1m[32m711[0m correct number of entries[K
  ok [1m[32m712[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt=0 (flipped)[0m[1B[1G
# test iterator with gte=30 and lte=70[K

  ok [1m[32m713[0m undefined[K
  ok [1m[32m714[0m correct number of entries[K
  ok [1m[32m715[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=30 and lte=70[0m[1B[1G
# test iterator with gte=30 and lte=70 (flipped)[K

  ok [1m[32m716[0m undefined[K
  ok [1m[32m717[0m correct number of entries[K
  ok [1m[32m718[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=30 and lte=70 (flipped)[0m[1B[1G
# test iterator with gt=29 and lt=71[K

  ok [1m[32m719[0m undefined[K
  ok [1m[32m720[0m correct number of entries[K
  ok [1m[32m721[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt=29 and lt=71[0m[1B[1G
# test iterator with gt=29 and lt=71 (flipped)[K

  ok [1m[32m722[0m undefined[K
  ok [1m[32m723[0m correct number of entries[K
  ok [1m[32m724[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt=29 and lt=71 (flipped)[0m[1B[1G
# test iterator with gte=30 and lte=70 and reverse=true[K

  ok [1m[32m725[0m undefined[K
  ok [1m[32m726[0m correct number of entries[K
  ok [1m[32m727[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte=30 and lte=70 and reverse=true[0m[1B[1G
# test iterator with gt=29 and lt=71 and reverse=true[K

  ok [1m[32m728[0m undefined[K
  ok [1m[32m729[0m correct number of entries[K
  ok [1m[32m730[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt=29 and lt=71 and reverse=true[0m[1B[1G
# test iterator with limit=20[K

  ok [1m[32m731[0m undefined[K
  ok [1m[32m732[0m correct number of entries[K
  ok [1m[32m733[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=20[0m[1B[1G
# test iterator with limit=20 and gte=20[K

  ok [1m[32m734[0m undefined[K
  ok [1m[32m735[0m correct number of entries[K
  ok [1m[32m736[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=20 and gte=20[0m[1B[1G
# test iterator with limit=20 and reverse=true[K

  ok [1m[32m737[0m undefined[K
  ok [1m[32m738[0m correct number of entries[K
  ok [1m[32m739[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=20 and reverse=true[0m[1B[1G
# test iterator with limit=20 and lte=79 and reverse=true[K

  ok [1m[32m740[0m undefined[K
  ok [1m[32m741[0m correct number of entries[K
  ok [1m[32m742[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=20 and lte=79 and reverse=true[0m[1B[1G
# test iterator with limit=-1 should iterate over whole database[K

  ok [1m[32m743[0m undefined[K
  ok [1m[32m744[0m correct number of entries[K
  ok [1m[32m745[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=-1 should iterate over whole database[0m[1B[1G
# test iterator with limit=0 should not iterate over anything[K

  ok [1m[32m746[0m undefined[K
  ok [1m[32m747[0m correct number of entries[K
  ok [1m[32m748[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with limit=0 should not iterate over anything[0m[1B[1G
# test iterator with lte after limit[K

  ok [1m[32m749[0m undefined[K
  ok [1m[32m750[0m correct number of entries[K
  ok [1m[32m751[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte after limit[0m[1B[1G
# test iterator with lte before limit[K

  ok [1m[32m752[0m undefined[K
  ok [1m[32m753[0m correct number of entries[K
  ok [1m[32m754[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte before limit[0m[1B[1G
# test iterator with gte after database end[K

  ok [1m[32m755[0m undefined[K
  ok [1m[32m756[0m correct number of entries[K
  ok [1m[32m757[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte after database end[0m[1B[1G
# test iterator with gte after database end (flipped)[K

  ok [1m[32m758[0m undefined[K
  ok [1m[32m759[0m correct number of entries[K
  ok [1m[32m760[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gte after database end (flipped)[0m[1B[1G
# test iterator with gt after database end[K

  ok [1m[32m761[0m undefined[K
  ok [1m[32m762[0m correct number of entries[K
  ok [1m[32m763[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt after database end[0m[1B[1G
# test iterator with gt after database end (flipped)[K

  ok [1m[32m764[0m undefined[K
  ok [1m[32m765[0m correct number of entries[K
  ok [1m[32m766[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with gt after database end (flipped)[0m[1B[1G
# test iterator with lte after database end and reverse=true[K

  ok [1m[32m767[0m undefined[K
  ok [1m[32m768[0m correct number of entries[K
  ok [1m[32m769[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte after database end and reverse=true[0m[1B[1G
# test iterator with lt after database end[K

  ok [1m[32m770[0m undefined[K
  ok [1m[32m771[0m correct number of entries[K
  ok [1m[32m772[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt after database end[0m[1B[1G
# test iterator with lt after database end (flipped)[K

  ok [1m[32m773[0m undefined[K
  ok [1m[32m774[0m correct number of entries[K
  ok [1m[32m775[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt after database end (flipped)[0m[1B[1G
# test iterator with lt at database end[K

  ok [1m[32m776[0m undefined[K
  ok [1m[32m777[0m correct number of entries[K
  ok [1m[32m778[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt at database end[0m[1B[1G
# test iterator with lt at database end (flipped)[K

  ok [1m[32m779[0m undefined[K
  ok [1m[32m780[0m correct number of entries[K
  ok [1m[32m781[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt at database end (flipped)[0m[1B[1G
# test iterator with lte at database end[K

  ok [1m[32m782[0m undefined[K
  ok [1m[32m783[0m correct number of entries[K
  ok [1m[32m784[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte at database end[0m[1B[1G
# test iterator with lte at database end (flipped)[K

  ok [1m[32m785[0m undefined[K
  ok [1m[32m786[0m correct number of entries[K
  ok [1m[32m787[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte at database end (flipped)[0m[1B[1G
# test iterator with lt before database end[K

  ok [1m[32m788[0m undefined[K
  ok [1m[32m789[0m correct number of entries[K
  ok [1m[32m790[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt before database end[0m[1B[1G
# test iterator with lt before database end (flipped)[K

  ok [1m[32m791[0m undefined[K
  ok [1m[32m792[0m correct number of entries[K
  ok [1m[32m793[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt before database end (flipped)[0m[1B[1G
# test iterator with lte before database end[K

  ok [1m[32m794[0m undefined[K
  ok [1m[32m795[0m correct number of entries[K
  ok [1m[32m796[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte before database end[0m[1B[1G
# test iterator with lte before database end (flipped)[K

  ok [1m[32m797[0m undefined[K
  ok [1m[32m798[0m correct number of entries[K
  ok [1m[32m799[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte before database end (flipped)[0m[1B[1G
# test iterator with lte and gte after database and reverse=true[K

  ok [1m[32m800[0m undefined[K
  ok [1m[32m801[0m correct number of entries[K
  ok [1m[32m802[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lte and gte after database and reverse=true[0m[1B[1G
# test iterator with lt and gt after database and reverse=true[K

  ok [1m[32m803[0m undefined[K
  ok [1m[32m804[0m correct number of entries[K
  ok [1m[32m805[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ test iterator with lt and gt after database and reverse=true[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setup[K

  ok [1m[32m806[0m no open() error[K
  ok [1m[32m807[0m no batch() error[K
[1A[1G[1m[32m✓ setup[0m[1B[1G
# for await...of db.iterator()[K

  ok [1m[32m808[0m ended[K
  ok [1m[32m809[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ for await...of db.iterator()[0m[1B[1G
# for await...of db.iterator() does not permit reuse[K

  ok [1m[32m810[0m nexted[K
  ok [1m[32m811[0m nexted[K
  ok [1m[32m812[0m should be strictly equal[K
[1A[1G[1m[32m✓ for await...of db.iterator() does not permit reuse[0m[1B[1G
# for await...of db.iterator() ends on user error[K

  ok [1m[32m813[0m should be strictly equal[K
  ok [1m[32m814[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() ends on user error[0m[1B[1G
# for await...of db.iterator() with user error and end() error[K

  ok [1m[32m815[0m no real error from end()[K
  ok [1m[32m816[0m should be strictly equal[K
  ok [1m[32m817[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() with user error and end() error[0m[1B[1G
# for await...of db.iterator() ends on iterator error[K

  ok [1m[32m818[0m nexted[K
  ok [1m[32m819[0m should be strictly equal[K
  ok [1m[32m820[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() ends on iterator error[0m[1B[1G
# for await...of db.iterator() with iterator error and end() error[K

  ok [1m[32m821[0m nexted[K
  ok [1m[32m822[0m no real error from end()[K
  ok [1m[32m823[0m should be strictly equal[K
  ok [1m[32m824[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() with iterator error and end() error[0m[1B[1G
# for await...of db.iterator() ends on user break[K

  ok [1m[32m825[0m got a chance to break[K
  ok [1m[32m826[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() ends on user break[0m[1B[1G
# for await...of db.iterator() with user break and end() error[K

  ok [1m[32m827[0m got a chance to break[K
  ok [1m[32m828[0m no real error from end()[K
  ok [1m[32m829[0m should be strictly equal[K
  ok [1m[32m830[0m ended[K
[1A[1G[1m[32m✓ for await...of db.iterator() with user break and end() error[0m[1B[1G
# teardown[K

  ok [1m[32m831[0m no close() error[K
[1A[1G[1m[32m✓ teardown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# delete key after creating iterator[K

  ok [1m[32m832[0m no open error[K
  ok [1m[32m833[0m no batch error[K
  ok [1m[32m834[0m no run error[K
  ok [1m[32m835[0m no iterator error[K
  ok [1m[32m836[0m maybe supports snapshots[K
[1A[1G[1m[32m✓ delete key after creating iterator[0m[1B[1G
# batch delete key after creating iterator[K

  ok [1m[32m837[0m no open error[K
  ok [1m[32m838[0m no batch error[K
  ok [1m[32m839[0m no run error[K
  ok [1m[32m840[0m no iterator error[K
  ok [1m[32m841[0m maybe supports snapshots[K
[1A[1G[1m[32m✓ batch delete key after creating iterator[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# setUp db[K

[1A[1G[1m[32m✓ setUp db[0m[1B[1G
# test simple clear() on string keys[K

  ok [1m[32m842[0m no open error[K
  ok [1m[32m843[0m no batch error[K
  ok [1m[32m844[0m no concat error[K
  ok [1m[32m845[0m has entries[K
  ok [1m[32m846[0m no clear error[K
  ok [1m[32m847[0m no concat error[K
  ok [1m[32m848[0m has no entries[K
  ok [1m[32m849[0m no close error[K
[1A[1G[1m[32m✓ test simple clear() on string keys[0m[1B[1G
# test simple clear() on buffer keys[K

  ok [1m[32m850[0m no open error[K
  ok [1m[32m851[0m no batch error[K
  ok [1m[32m852[0m no concat error[K
  ok [1m[32m853[0m has entries[K
  ok [1m[32m854[0m no clear error[K
  ok [1m[32m855[0m no concat error[K
  ok [1m[32m856[0m has no entries[K
  ok [1m[32m857[0m no close error[K
[1A[1G[1m[32m✓ test simple clear() on buffer keys[0m[1B[1G
# test simple clear() on mixed keys[K

  ok [1m[32m858[0m no open error[K
  ok [1m[32m859[0m no batch error[K
  ok [1m[32m860[0m no concat error[K
  ok [1m[32m861[0m has entries[K
  ok [1m[32m862[0m no clear error[K
  ok [1m[32m863[0m no concat error[K
  ok [1m[32m864[0m has no entries[K
  ok [1m[32m865[0m no close error[K
[1A[1G[1m[32m✓ test simple clear() on mixed keys[0m[1B[1G
# test simple clear() on non-utf8 buffer keys[K

  ok [1m[32m866[0m no open error[K
  ok [1m[32m867[0m no batch error[K
  ok [1m[32m868[0m no concat error[K
  ok [1m[32m869[0m has entries[K
  ok [1m[32m870[0m no clear error[K
  ok [1m[32m871[0m no concat error[K
  ok [1m[32m872[0m has no entries[K
  ok [1m[32m873[0m no close error[K
[1A[1G[1m[32m✓ test simple clear() on non-utf8 buffer keys[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# setUp common[K

[1A[1G[1m[32m✓ setUp common[0m[1B[1G
# db#clear() with full range[K

  ok [1m[32m874[0m no open error[K
  ok [1m[32m875[0m no batch error[K
  ok [1m[32m876[0m no clear error[K
  ok [1m[32m877[0m no concat error[K
  ok [1m[32m878[0m correct number of entries[K
  ok [1m[32m879[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with full range[0m[1B[1G
# db#clear() with reverse=true[K

  ok [1m[32m880[0m no open error[K
  ok [1m[32m881[0m no batch error[K
  ok [1m[32m882[0m no clear error[K
  ok [1m[32m883[0m no concat error[K
  ok [1m[32m884[0m correct number of entries[K
  ok [1m[32m885[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with reverse=true[0m[1B[1G
# db#clear() with gte=00[K

  ok [1m[32m886[0m no open error[K
  ok [1m[32m887[0m no batch error[K
  ok [1m[32m888[0m no clear error[K
  ok [1m[32m889[0m no concat error[K
  ok [1m[32m890[0m correct number of entries[K
  ok [1m[32m891[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=00[0m[1B[1G
# db#clear() with gte=50[K

  ok [1m[32m892[0m no open error[K
  ok [1m[32m893[0m no batch error[K
  ok [1m[32m894[0m no clear error[K
  ok [1m[32m895[0m no concat error[K
  ok [1m[32m896[0m correct number of entries[K
  ok [1m[32m897[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=50[0m[1B[1G
# db#clear() with lte=50 and reverse=true[K

  ok [1m[32m898[0m no open error[K
  ok [1m[32m899[0m no batch error[K
  ok [1m[32m900[0m no clear error[K
  ok [1m[32m901[0m no concat error[K
  ok [1m[32m902[0m correct number of entries[K
  ok [1m[32m903[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=50 and reverse=true[0m[1B[1G
# db#clear() with gte=49.5 (midway)[K

  ok [1m[32m904[0m no open error[K
  ok [1m[32m905[0m no batch error[K
  ok [1m[32m906[0m no clear error[K
  ok [1m[32m907[0m no concat error[K
  ok [1m[32m908[0m correct number of entries[K
  ok [1m[32m909[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=49.5 (midway)[0m[1B[1G
# db#clear() with gte=49999 (midway)[K

  ok [1m[32m910[0m no open error[K
  ok [1m[32m911[0m no batch error[K
  ok [1m[32m912[0m no clear error[K
  ok [1m[32m913[0m no concat error[K
  ok [1m[32m914[0m correct number of entries[K
  ok [1m[32m915[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=49999 (midway)[0m[1B[1G
# db#clear() with lte=49.5 (midway) and reverse=true[K

  ok [1m[32m916[0m no open error[K
  ok [1m[32m917[0m no batch error[K
  ok [1m[32m918[0m no clear error[K
  ok [1m[32m919[0m no concat error[K
  ok [1m[32m920[0m correct number of entries[K
  ok [1m[32m921[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=49.5 (midway) and reverse=true[0m[1B[1G
# db#clear() with lt=49.5 (midway) and reverse=true[K

  ok [1m[32m922[0m no open error[K
  ok [1m[32m923[0m no batch error[K
  ok [1m[32m924[0m no clear error[K
  ok [1m[32m925[0m no concat error[K
  ok [1m[32m926[0m correct number of entries[K
  ok [1m[32m927[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lt=49.5 (midway) and reverse=true[0m[1B[1G
# db#clear() with lt=50 and reverse=true[K

  ok [1m[32m928[0m no open error[K
  ok [1m[32m929[0m no batch error[K
  ok [1m[32m930[0m no clear error[K
  ok [1m[32m931[0m no concat error[K
  ok [1m[32m932[0m correct number of entries[K
  ok [1m[32m933[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lt=50 and reverse=true[0m[1B[1G
# db#clear() with lte=50[K

  ok [1m[32m934[0m no open error[K
  ok [1m[32m935[0m no batch error[K
  ok [1m[32m936[0m no clear error[K
  ok [1m[32m937[0m no concat error[K
  ok [1m[32m938[0m correct number of entries[K
  ok [1m[32m939[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=50[0m[1B[1G
# db#clear() with lte=50.5 (midway)[K

  ok [1m[32m940[0m no open error[K
  ok [1m[32m941[0m no batch error[K
  ok [1m[32m942[0m no clear error[K
  ok [1m[32m943[0m no concat error[K
  ok [1m[32m944[0m correct number of entries[K
  ok [1m[32m945[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=50.5 (midway)[0m[1B[1G
# db#clear() with lte=50555 (midway)[K

  ok [1m[32m946[0m no open error[K
  ok [1m[32m947[0m no batch error[K
  ok [1m[32m948[0m no clear error[K
  ok [1m[32m949[0m no concat error[K
  ok [1m[32m950[0m correct number of entries[K
  ok [1m[32m951[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=50555 (midway)[0m[1B[1G
# db#clear() with lt=50555 (midway)[K

  ok [1m[32m952[0m no open error[K
  ok [1m[32m953[0m no batch error[K
  ok [1m[32m954[0m no clear error[K
  ok [1m[32m955[0m no concat error[K
  ok [1m[32m956[0m correct number of entries[K
  ok [1m[32m957[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lt=50555 (midway)[0m[1B[1G
# db#clear() with gte=50.5 (midway) and reverse=true[K

  ok [1m[32m958[0m no open error[K
  ok [1m[32m959[0m no batch error[K
  ok [1m[32m960[0m no clear error[K
  ok [1m[32m961[0m no concat error[K
  ok [1m[32m962[0m correct number of entries[K
  ok [1m[32m963[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=50.5 (midway) and reverse=true[0m[1B[1G
# db#clear() with gt=50.5 (midway) and reverse=true[K

  ok [1m[32m964[0m no open error[K
  ok [1m[32m965[0m no batch error[K
  ok [1m[32m966[0m no clear error[K
  ok [1m[32m967[0m no concat error[K
  ok [1m[32m968[0m correct number of entries[K
  ok [1m[32m969[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gt=50.5 (midway) and reverse=true[0m[1B[1G
# db#clear() with gt=50 and reverse=true[K

  ok [1m[32m970[0m no open error[K
  ok [1m[32m971[0m no batch error[K
  ok [1m[32m972[0m no clear error[K
  ok [1m[32m973[0m no concat error[K
  ok [1m[32m974[0m correct number of entries[K
  ok [1m[32m975[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gt=50 and reverse=true[0m[1B[1G
# db#clear() with lte=0[K

  ok [1m[32m976[0m no open error[K
  ok [1m[32m977[0m no batch error[K
  ok [1m[32m978[0m no clear error[K
  ok [1m[32m979[0m no concat error[K
  ok [1m[32m980[0m correct number of entries[K
  ok [1m[32m981[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte=0[0m[1B[1G
# db#clear() with lt=0[K

  ok [1m[32m982[0m no open error[K
  ok [1m[32m983[0m no batch error[K
  ok [1m[32m984[0m no clear error[K
  ok [1m[32m985[0m no concat error[K
  ok [1m[32m986[0m correct number of entries[K
  ok [1m[32m987[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lt=0[0m[1B[1G
# db#clear() with gte=30 and lte=70[K

  ok [1m[32m988[0m no open error[K
  ok [1m[32m989[0m no batch error[K
  ok [1m[32m990[0m no clear error[K
  ok [1m[32m991[0m no concat error[K
  ok [1m[32m992[0m correct number of entries[K
  ok [1m[32m993[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=30 and lte=70[0m[1B[1G
# db#clear() with gt=29 and lt=71[K

  ok [1m[32m994[0m no open error[K
  ok [1m[32m995[0m no batch error[K
  ok [1m[32m996[0m no clear error[K
  ok [1m[32m997[0m no concat error[K
  ok [1m[32m998[0m correct number of entries[K
  ok [1m[32m999[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gt=29 and lt=71[0m[1B[1G
# db#clear() with gte=30 and lte=70 and reverse=true[K

  ok [1m[32m1000[0m no open error[K
  ok [1m[32m1001[0m no batch error[K
  ok [1m[32m1002[0m no clear error[K
  ok [1m[32m1003[0m no concat error[K
  ok [1m[32m1004[0m correct number of entries[K
  ok [1m[32m1005[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte=30 and lte=70 and reverse=true[0m[1B[1G
# db#clear() with gt=29 and lt=71 and reverse=true[K

  ok [1m[32m1006[0m no open error[K
  ok [1m[32m1007[0m no batch error[K
  ok [1m[32m1008[0m no clear error[K
  ok [1m[32m1009[0m no concat error[K
  ok [1m[32m1010[0m correct number of entries[K
  ok [1m[32m1011[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gt=29 and lt=71 and reverse=true[0m[1B[1G
# db#clear() with limit=20[K

  ok [1m[32m1012[0m no open error[K
  ok [1m[32m1013[0m no batch error[K
  ok [1m[32m1014[0m no clear error[K
  ok [1m[32m1015[0m no concat error[K
  ok [1m[32m1016[0m correct number of entries[K
  ok [1m[32m1017[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=20[0m[1B[1G
# db#clear() with limit=20 and gte=20[K

  ok [1m[32m1018[0m no open error[K
  ok [1m[32m1019[0m no batch error[K
  ok [1m[32m1020[0m no clear error[K
  ok [1m[32m1021[0m no concat error[K
  ok [1m[32m1022[0m correct number of entries[K
  ok [1m[32m1023[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=20 and gte=20[0m[1B[1G
# db#clear() with limit=20 and reverse=true[K

  ok [1m[32m1024[0m no open error[K
  ok [1m[32m1025[0m no batch error[K
  ok [1m[32m1026[0m no clear error[K
  ok [1m[32m1027[0m no concat error[K
  ok [1m[32m1028[0m correct number of entries[K
  ok [1m[32m1029[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=20 and reverse=true[0m[1B[1G
# db#clear() with limit=20 and lte=79 and reverse=true[K

  ok [1m[32m1030[0m no open error[K
  ok [1m[32m1031[0m no batch error[K
  ok [1m[32m1032[0m no clear error[K
  ok [1m[32m1033[0m no concat error[K
  ok [1m[32m1034[0m correct number of entries[K
  ok [1m[32m1035[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=20 and lte=79 and reverse=true[0m[1B[1G
# db#clear() with limit=-1 should clear whole database[K

  ok [1m[32m1036[0m no open error[K
  ok [1m[32m1037[0m no batch error[K
  ok [1m[32m1038[0m no clear error[K
  ok [1m[32m1039[0m no concat error[K
  ok [1m[32m1040[0m correct number of entries[K
  ok [1m[32m1041[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=-1 should clear whole database[0m[1B[1G
# db#clear() with limit=0 should not clear anything[K

  ok [1m[32m1042[0m no open error[K
  ok [1m[32m1043[0m no batch error[K
  ok [1m[32m1044[0m no clear error[K
  ok [1m[32m1045[0m no concat error[K
  ok [1m[32m1046[0m correct number of entries[K
  ok [1m[32m1047[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with limit=0 should not clear anything[0m[1B[1G
# db#clear() with lte after limit[K

  ok [1m[32m1048[0m no open error[K
  ok [1m[32m1049[0m no batch error[K
  ok [1m[32m1050[0m no clear error[K
  ok [1m[32m1051[0m no concat error[K
  ok [1m[32m1052[0m correct number of entries[K
  ok [1m[32m1053[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte after limit[0m[1B[1G
# db#clear() with lte before limit[K

  ok [1m[32m1054[0m no open error[K
  ok [1m[32m1055[0m no batch error[K
  ok [1m[32m1056[0m no clear error[K
  ok [1m[32m1057[0m no concat error[K
  ok [1m[32m1058[0m correct number of entries[K
  ok [1m[32m1059[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte before limit[0m[1B[1G
# db#clear() with gte after database end[K

  ok [1m[32m1060[0m no open error[K
  ok [1m[32m1061[0m no batch error[K
  ok [1m[32m1062[0m no clear error[K
  ok [1m[32m1063[0m no concat error[K
  ok [1m[32m1064[0m correct number of entries[K
  ok [1m[32m1065[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gte after database end[0m[1B[1G
# db#clear() with gt after database end[K

  ok [1m[32m1066[0m no open error[K
  ok [1m[32m1067[0m no batch error[K
  ok [1m[32m1068[0m no clear error[K
  ok [1m[32m1069[0m no concat error[K
  ok [1m[32m1070[0m correct number of entries[K
  ok [1m[32m1071[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with gt after database end[0m[1B[1G
# db#clear() with lte after database end and reverse=true[K

  ok [1m[32m1072[0m no open error[K
  ok [1m[32m1073[0m no batch error[K
  ok [1m[32m1074[0m no clear error[K
  ok [1m[32m1075[0m no concat error[K
  ok [1m[32m1076[0m correct number of entries[K
  ok [1m[32m1077[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte after database end and reverse=true[0m[1B[1G
# db#clear() with lte and gte after database and reverse=true[K

  ok [1m[32m1078[0m no open error[K
  ok [1m[32m1079[0m no batch error[K
  ok [1m[32m1080[0m no clear error[K
  ok [1m[32m1081[0m no concat error[K
  ok [1m[32m1082[0m correct number of entries[K
  ok [1m[32m1083[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lte and gte after database and reverse=true[0m[1B[1G
# db#clear() with lt and gt after database and reverse=true[K

  ok [1m[32m1084[0m no open error[K
  ok [1m[32m1085[0m no batch error[K
  ok [1m[32m1086[0m no clear error[K
  ok [1m[32m1087[0m no concat error[K
  ok [1m[32m1088[0m correct number of entries[K
  ok [1m[32m1089[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ db#clear() with lt and gt after database and reverse=true[0m[1B[1G
# tearDown[K

[1A[1G[1m[32m✓ tearDown[0m[1B[1G
# get[K

  ok [1m[32m1090[0m no err[K
  ok [1m[32m1091[0m no err[K
  ok [1m[32m1092[0m should be deeply equivalent[K
  ok [1m[32m1093[0m no err[K
  ok [1m[32m1094[0m should be deeply equivalent[K
  ok [1m[32m1095[0m no err[K
  ok [1m[32m1096[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ get[0m[1B[1G
# get with valueEncoding: json in constructor[K

  ok [1m[32m1097[0m no err[K
  ok [1m[32m1098[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ get with valueEncoding: json in constructor[0m[1B[1G
# get with valueEncoding: json in get options[K

  ok [1m[32m1099[0m no err[K
  ok [1m[32m1100[0m no err[K
  ok [1m[32m1101[0m should be deeply equivalent[K
  ok [1m[32m1102[0m no err[K
  ok [1m[32m1103[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ get with valueEncoding: json in get options[0m[1B[1G
# put[K

  ok [1m[32m1104[0m no err[K
  ok [1m[32m1105[0m no err[K
  ok [1m[32m1106[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ put[0m[1B[1G
# put with valueEncoding: json in constructor[K

  ok [1m[32m1107[0m no err[K
  ok [1m[32m1108[0m no err[K
  ok [1m[32m1109[0m should be deeply equivalent[K
  ok [1m[32m1110[0m no err[K
  ok [1m[32m1111[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ put with valueEncoding: json in constructor[0m[1B[1G
# put with valueEncoding: json in put options[K

  ok [1m[32m1112[0m no err[K
  ok [1m[32m1113[0m no err[K
  ok [1m[32m1114[0m should be deeply equivalent[K
  ok [1m[32m1115[0m no err[K
  ok [1m[32m1116[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ put with valueEncoding: json in put options[0m[1B[1G
# readonly[K

  ok [1m[32m1117[0m put failed[K
  ok [1m[32m1118[0m no err[K
  ok [1m[32m1119[0m old value[K
[1A[1G[1m[32m✓ readonly[0m[1B[1G
# del[K

  ok [1m[32m1120[0m no err[K
  ok [1m[32m1121[0m no err[K
  ok [1m[32m1122[0m had error[K
  ok [1m[32m1123[0m not found err[K
[1A[1G[1m[32m✓ del[0m[1B[1G
# batch[K

  ok [1m[32m1124[0m no err[K
  ok [1m[32m1125[0m no err[K
  ok [1m[32m1126[0m should be deeply equivalent[K
  ok [1m[32m1127[0m no err[K
  ok [1m[32m1128[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ batch[0m[1B[1G
# read stream[K

  ok [1m[32m1129[0m no err[K
  ok [1m[32m1130[0m should be deeply equivalent[K
  ok [1m[32m1131[0m should be deeply equivalent[K
  ok [1m[32m1132[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ read stream[0m[1B[1G
# read stream (gt)[K

  ok [1m[32m1133[0m no err[K
  ok [1m[32m1134[0m should be deeply equivalent[K
  ok [1m[32m1135[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ read stream (gt)[0m[1B[1G
# for await...of iterator[K

  ok [1m[32m1136[0m no err[K
  ok [1m[32m1137[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ for await...of iterator[0m[1B[1G
# two concurrent iterators[K

  ok [1m[32m1138[0m undefined[K
  ok [1m[32m1139[0m should be deeply equivalent[K
  ok [1m[32m1140[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ two concurrent iterators[0m[1B[1G
# multileveldown server on encrypt-down[K

  ok [1m[32m1141[0m no err[K
  ok [1m[32m1142[0m no err[K
  ok [1m[32m1143[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ multileveldown server on encrypt-down[0m[1B[1G
# multileveldown server on encrypt-down with encoding[K

  ok [1m[32m1144[0m no err[K
  ok [1m[32m1145[0m no err[K
  ok [1m[32m1146[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ multileveldown server on encrypt-down with encoding[0m[1B[1G
# retry get[K

  ok [1m[32m1147[0m no err[K
  ok [1m[32m1148[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ retry get[0m[1B[1G
# no retry get[K

  ok [1m[32m1149[0m had error[K
[1A[1G[1m[32m✓ no retry get[0m[1B[1G
# retry get[K

  ok [1m[32m1150[0m no err[K
  ok [1m[32m1151[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ retry get[0m[1B[1G
# retry read stream[K

  ok [1m[32m1152[0m stream continues over retry[K
  ok [1m[32m1153[0m stream continues over retry[K
  ok [1m[32m1154[0m stream continues over retry[K
  ok [1m[32m1155[0m no more data[K
[1A[1G[1m[32m✓ retry read stream[0m[1B[1G
# retry read stream and limit[K

  ok [1m[32m1156[0m stream continues over retry[K
  ok [1m[32m1157[0m stream continues over retry[K
  ok [1m[32m1158[0m no more data[K
[1A[1G[1m[32m✓ retry read stream and limit[0m[1B[1G
# two concurrent iterators[K

  ok [1m[32m1159[0m undefined[K
  ok [1m[32m1160[0m should be deeply equivalent[K
  ok [1m[32m1161[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ two concurrent iterators[0m[1B[1G
# subleveldown on deferred multileveldown client[K

  ok [1m[32m1162[0m should be strictly equal[K
  ok [1m[32m1163[0m no err[K
  ok [1m[32m1164[0m should be deeply equivalent[K
  ok [1m[32m1165[0m should be deeply equivalent[K
  ok [1m[32m1166[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ subleveldown on deferred multileveldown client[0m[1B[1G
# subleveldown on non-deferred multileveldown client[K

  ok [1m[32m1167[0m should be strictly equal[K
  ok [1m[32m1168[0m no err[K
  ok [1m[32m1169[0m should be deeply equivalent[K
  ok [1m[32m1170[0m should be deeply equivalent[K
  ok [1m[32m1171[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ subleveldown on non-deferred multileveldown client[0m[1B[1G
# multileveldown server on deferred subleveldown[K

  ok [1m[32m1172[0m no err[K
  ok [1m[32m1173[0m no err[K
  ok [1m[32m1174[0m should be deeply equivalent[K
  ok [1m[32m1175[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ multileveldown server on deferred subleveldown[0m[1B[1G
# multileveldown server on non-deferred subleveldown[K

  ok [1m[32m1176[0m no err[K
  ok [1m[32m1177[0m no err[K
  ok [1m[32m1178[0m should be deeply equivalent[K
  ok [1m[32m1179[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ multileveldown server on non-deferred subleveldown[0m[1B[1G
# multileveldown server on nested subleveldown[K

  ok [1m[32m1180[0m no err[K
  ok [1m[32m1181[0m no err[K
  ok [1m[32m1182[0m should be deeply equivalent[K
  ok [1m[32m1183[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ multileveldown server on nested subleveldown[0m[1B[1G
# tests 1183[K

tests 1183
# pass  1183[K

pass  1183
# ok[K
[1A[1G[1m[32m✓ ok[0m[1B[1G--------------|---------|----------|---------|---------|--------------------------------------------
File          | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                          
--------------|---------|----------|---------|---------|--------------------------------------------
All files     |   86.14 |    66.71 |   94.65 |   95.26 |                                            
 client.js    |    87.5 |      100 |      60 |   86.66 | 28-32                                      
 index.js     |     100 |      100 |     100 |     100 |                                            
 leveldown.js |   84.54 |     62.6 |   88.23 |   91.32 | 78,122-125,148,168-171,334-338,356-357     
 matchdown.js |    87.5 |    83.33 |     100 |     100 | 7                                          
 messages.js  |   86.35 |    66.17 |     100 |   96.59 | ...1269,1285-1286,1308-1310,1353-1355,1363 
 server.js    |    86.8 |    74.64 |   97.05 |    92.8 | 45-47,61,68-72                             
--------------|---------|----------|---------|---------|--------------------------------------------
----------------------run test done----------------------
----------------------client packager of levelup----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> level-packager@6.0.1 test
> standard && hallmark && nyc node test.js

TAP version 13
# Level constructor has access to levelup errors
ok 1 .errors property set on constructor
# Level constructor relays .destroy and .repair if they exist
ok 2 supports variadic arguments
ok 3 supports variadic arguments
ok 4 supports variadic arguments
ok 5 supports variadic arguments
ok 6 supports variadic arguments
ok 7 supports variadic arguments
ok 8 supports variadic arguments
ok 9 supports variadic arguments
# Level constructor
ok 10 should be deeply equivalent
ok 11 should be strictly equal
ok 12 should be strictly equal
# Level constructor with location
ok 13 location is correct
ok 14 should be deeply equivalent
ok 15 should be strictly equal
ok 16 should be strictly equal
# Level constructor with location & options
ok 17 location is correct
ok 18 should be deeply equivalent
# Level constructor with callback
ok 19 should be deeply equivalent
ok 20 null
ok 21 db set in callback
# Level constructor with location & callback
ok 22 location is correct
ok 23 should be deeply equivalent
ok 24 null
ok 25 db set in callback
# Level constructor with location & options passed to levelup
ok 26 location is correct
ok 27 should be deeply equivalent
ok 28 should be strictly equal
ok 29 should be strictly equal
# Level constructor with options passed to levelup
ok 30 should be deeply equivalent
ok 31 should be strictly equal
ok 32 should be strictly equal
# Level constructor with options & callback passed to levelup
ok 33 should be deeply equivalent
ok 34 should be strictly equal
ok 35 should be strictly equal
ok 36 null
ok 37 db set in callback

1..37
# tests 37
# pass  37

# ok

-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |     100 |      100 |     100 |     100 |                   
 level-packager.js |     100 |      100 |     100 |     100 |                   
-------------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 1109 packages in 4s

224 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> level-packager@6.0.1 test
> standard && hallmark && nyc node test.js

-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |    5.88 |        0 |       0 |    5.88 |                   
 level-packager.js |    5.88 |        0 |       0 |    5.88 | 4-38              
-------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client pouchdb of levelup----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> pouchdb-monorepo@7.0.0-prerelease test
> bash bin/run-test.sh


> pouchdb-monorepo@7.0.0-prerelease build-node
> bash bin/build-node.sh


> pouchdb-monorepo@7.0.0-prerelease build-modules
> node bin/build-modules.js

Building pouchdb...
Building pouchdb-abstract-mapreduce...
Building pouchdb-adapter-http...
Building pouchdb-adapter-idb...
Building pouchdb-adapter-indexeddb...
Building pouchdb-adapter-leveldb...
Building pouchdb-adapter-leveldb-core...
Building pouchdb-adapter-localstorage...
Building pouchdb-adapter-memory...
Building pouchdb-adapter-utils...
Building pouchdb-binary-utils...
Building pouchdb-browser...
Building pouchdb-changes-filter...
Building pouchdb-checkpointer...
Building pouchdb-collate...
Building pouchdb-collections...
Building pouchdb-core...
Building pouchdb-errors...
Building pouchdb-fetch...
Building pouchdb-find...
Building pouchdb-for-coverage...
Building pouchdb-generate-replication-id...
Building pouchdb-json...
Building pouchdb-mapreduce...
Building pouchdb-mapreduce-utils...
Building pouchdb-md5...
Building pouchdb-merge...
Building pouchdb-node...
Building pouchdb-replication...
Building pouchdb-selector-core...
Building pouchdb-utils...
Building sublevel-pouchdb...
  ✓ wrote pouchdb-adapter-localstorage/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-localstorage/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-http/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index.js in node mode
  ✓ wrote pouchdb-changes-filter/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-collate/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collate/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-fetch/lib/index.js in node mode
  ✓ wrote pouchdb-fetch/lib/index.es.js in node mode
  ✓ wrote pouchdb-json/lib/index.js in vanilla mode
  ✓ wrote pouchdb-json/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-md5/lib/index.js in node mode
  ✓ wrote pouchdb-md5/lib/index.es.js in node mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index.js in node mode
  ✓ wrote pouchdb-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-binary-utils/lib/index.js in node mode
  ✓ wrote pouchdb-binary-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-collections/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collections/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.es.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index.js in node mode
  ✓ wrote pouchdb-mapreduce/lib/index.es.js in node mode
  ✓ wrote pouchdb-replication/lib/index.js in vanilla mode
  ✓ wrote pouchdb-replication/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-core/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-find/lib/index.js in node mode
  ✓ wrote pouchdb-find/lib/index.es.js in node mode
  ✓ wrote pouchdb-find/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-find/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-browser/lib/index.js in vanilla mode
  ✓ wrote pouchdb-browser/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-for-coverage/lib/index.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index.es.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.es.js in browser mode
  ✓ wrote packages/node_modules/pouchdb/lib/index.es.js
  ✓ wrote packages/node_modules/pouchdb/lib/index.js
Waiting for host to start .....
Host failed to start
npm uninstall

removed 1 package, changed 1 package, and audited 1032 packages in 6s

64 packages are looking for funding
  run `npm fund` for details

41 vulnerabilities (1 low, 11 moderate, 23 high, 6 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> pouchdb-monorepo@7.0.0-prerelease test
> bash bin/run-test.sh


> pouchdb-monorepo@7.0.0-prerelease build-node
> bash bin/build-node.sh


> pouchdb-monorepo@7.0.0-prerelease build-modules
> node bin/build-modules.js

Building pouchdb...
Building pouchdb-abstract-mapreduce...
Building pouchdb-adapter-http...
Building pouchdb-adapter-idb...
Building pouchdb-adapter-indexeddb...
Building pouchdb-adapter-leveldb...
Building pouchdb-adapter-leveldb-core...
Building pouchdb-adapter-localstorage...
Building pouchdb-adapter-memory...
Building pouchdb-adapter-utils...
Building pouchdb-binary-utils...
Building pouchdb-browser...
Building pouchdb-changes-filter...
Building pouchdb-checkpointer...
Building pouchdb-collate...
Building pouchdb-collections...
Building pouchdb-core...
Building pouchdb-errors...
Building pouchdb-fetch...
Building pouchdb-find...
Building pouchdb-for-coverage...
Building pouchdb-generate-replication-id...
Building pouchdb-json...
Building pouchdb-mapreduce...
Building pouchdb-mapreduce-utils...
Building pouchdb-md5...
Building pouchdb-merge...
Building pouchdb-node...
Building pouchdb-replication...
Building pouchdb-selector-core...
Building pouchdb-utils...
Building sublevel-pouchdb...
  ✓ wrote pouchdb-adapter-localstorage/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-localstorage/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index.js in node mode
  ✓ wrote pouchdb-changes-filter/lib/index.es.js in node mode
  ✓ wrote pouchdb-collate/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collate/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-fetch/lib/index.es.js in node mode
  ✓ wrote pouchdb-fetch/lib/index.js in node mode
  ✓ wrote pouchdb-json/lib/index.js in vanilla mode
  ✓ wrote pouchdb-json/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-md5/lib/index.js in node mode
  ✓ wrote pouchdb-md5/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-idb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index.js in node mode
  ✓ wrote pouchdb-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-collections/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collections/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.es.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.es.js in browser mode
Waiting for host to start ..
Host started :)
> pouchdb-monorepo@7.0.0-prerelease test-node
> bash bin/test-node.sh

Down server listening on port 3010
Seeded with: 1661446314486
----------------------run test done----------------------
----------------------client subleveldown of levelup----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> subleveldown@6.0.1 test
> standard && hallmark && (nyc -s node test | faucet) && nyc report

not ok [1m[31m1[0m no plan found
not ok [1m[31m2[0m no assertions found

[1m[31m⨯ fail  2[0m[K
npm uninstall

removed 1 package, and audited 1011 packages in 4s

224 packages are looking for funding
  run `npm fund` for details

2 vulnerabilities (1 moderate, 1 critical)

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> subleveldown@6.0.1 test
> standard && hallmark && (nyc -s node test | faucet) && nyc report

not ok [1m[31m1[0m no plan found
not ok [1m[31m2[0m no assertions found

[1m[31m⨯ fail  2[0m[K
----------------------run test done----------------------
memdown
subdir: dynalite level-test mem pico-framework pouchdb
----------------------client dynalite of memdown----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> dynalite@3.2.2 test
> mocha --require should --reporter spec -t $([ $REMOTE ] && echo 30s || echo 4s)



  batchGetItem
    serializations
      ✓ should return SerializationException when RequestItems is not a map
      ✓ should return SerializationException when RequestItems.Attr is not a struct
      ✓ should return SerializationException when RequestItems.Attr.Keys is not a list
      ✓ should return SerializationException when RequestItems.Attr.Keys.0 is not a map
      ✓ should return SerializationException when RequestItems.Attr.Keys.0.Attr is not an attr struct (170ms)
      ✓ should return SerializationException when RequestItems.Attr.AttributesToGet is not a list
      ✓ should return SerializationException when RequestItems.Attr.ConsistentRead is not a boolean
      ✓ should return SerializationException when RequestItems.Attr.ExpressionAttributeNames is not a map
      ✓ should return SerializationException when RequestItems.Attr.ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when RequestItems.Attr.ProjectionExpression is not a string
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
    validations
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for missing RequestItems
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for short table name with no keys
      ✓ should return ValidationException for empty keys
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException for short table name with keys
      ✓ should return ValidationException when fetching more than 100 keys
      ✓ should return ValidationException if filter expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ProjectionExpression
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException when fetching more than 100 keys over multiple tables
      ✓ should return ResourceNotFoundException when fetching exactly 100 keys and table does not exist
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for duplicated keys
      ✓ should return ValidationException for duplicated mixed up keys
      ✓ should return ValidationException duplicate values in AttributesToGet
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should return empty responses if keys do not exist
      ✓ should return only items that do exist
      ✓ should return only requested attributes of items that do exist
      ✓ should return ConsumedCapacity from each specified table with no consistent read and small item
      ✓ should return ConsumedCapacity from each specified table with no consistent read and larger item
      ✓ should return ConsumedCapacity from each specified table with consistent read and small item
      ✓ should return ConsumedCapacity from each specified table with consistent read and larger item
      - should return all items if just under limit
      - should return an unprocessed item if just over limit
      - should return many unprocessed items if very over the limit

  batchWriteItem
    serializations
      ✓ should return SerializationException when RequestItems is not a map
      ✓ should return SerializationException when RequestItems.Attr is not a list
      ✓ should return SerializationException when RequestItems.Attr.0 is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest.Key is not a map
      ✓ should return SerializationException when RequestItems.Attr.0.DeleteRequest.Key.Attr is not an attr struct (145ms)
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest is not a struct
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest.Item is not a map
      ✓ should return SerializationException when RequestItems.Attr.0.PutRequest.Item.Attr is not an attr struct (122ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
    validations
      ✓ should return ValidationException for empty body
      ✓ should return ValidationException for missing RequestItems
      ✓ should return ValidationException for empty RequestItems
      ✓ should return ValidationException for empty list in RequestItems
      ✓ should return ValidationException for empty item in RequestItems
      ✓ should return ValidationException for short table name and missing requests
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException when putting more than 25 items
      ✓ should return ResourceNotFoundException when fetching exactly 25 items and table does not exist
      ✓ should check table exists first before checking for duplicate keys
      ✓ should return ValidationException for puts and deletes of the same item with put first
      ✓ should return ValidationException for puts and deletes of the same item with delete first
      ✓ should return ValidationException for short table name
      ✓ should return ValidationException for unsupported datatype in Item
      ✓ should return ValidationException for invalid values in Item
      ✓ should return ValidationException for empty/invalid numbers in Item
      ✓ should return ValidationException for multiple datatypes in Item
      ✓ should return ValidationException if item is too big with small attribute
      ✓ should return ResourceNotFoundException if item is just small enough with small attribute
      ✓ should return ValidationException if item is too big with larger attribute
      ✓ should return ResourceNotFoundException if item is just small enough with larger attribute
      ✓ should return ValidationException if item is too big with multi attributes
      ✓ should return ResourceNotFoundException if item is just small enough with multi attributes
      ✓ should return ValidationException if item is too big with big number attribute
      ✓ should return ValidationException if item is too big with smallest number attribute
      ✓ should return ValidationException if item is too big with smaller number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with multi number attribute
      ✓ should return ResourceNotFoundException if item is just small enough with multi number attribute
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if secondary index key is incorrect type
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should write a single item to each table
      ✓ should delete an item from each table
      ✓ should deal with puts and deletes together
      ✓ should return ConsumedCapacity from each specified table when putting and deleting small item
      ✓ should return ConsumedCapacity from each specified table when putting and deleting larger item
      - should return UnprocessedItems if over limit

  benchmarks
    - should batch write
    - should scan

  dynalite connections
    basic
      ✓ should return 413 if request too large (2918ms)
      ✓ should not return 413 if request not too large (2196ms)
      ✓ should return 404 if OPTIONS with no auth
      ✓ should return 200 if a GET
      ✓ should return 404 if a PUT
      ✓ should return 404 if a DELETE
      ✓ should return 404 if body but no content-type
      ✓ should return 404 if body but incorrect content-type
      ✓ should return 404 if body and application/x-amz-json-1.1
      ✓ should return 404 if body but slightly different content-type
      ✓ should connect to SSL
    JSON
      ✓ should return SerializationException if body is application/json but not JSON
      ✓ should return SerializationException if body is application/x-amz-json-1.0 but not JSON
      ✓ should return SerializationException if body is application/json and semicolon but not JSON
      ✓ should return SerializationException if body is application/json and spaces and semicolon but not JSON
      ✓ should return SerializationException if body is application/json and nonsense but not JSON
      ✓ should return SerializationException if body is application/x-amz-json-1.0 and nonsense but not JSON
      ✓ should return UnknownOperationException if no target
      ✓ should return UnknownOperationException and set CORS if using Origin
      ✓ should return UnknownOperationException if body is application/json
      ✓ should return UnknownOperationException if body is application/x-amz-json-1.0
      ✓ should return UnknownOperationException if body is application/json;charset=asfdsaf
      ✓ should return UnknownOperationException if incorrect target
      ✓ should return UnknownOperationException if incorrect target operation
      ✓ should return MissingAuthenticationTokenException if no Authorization header
      ✓ should return MissingAuthenticationTokenException if incomplete Authorization header
      ✓ should return MissingAuthenticationTokenException if incomplete Authorization header and X-Amz-Algorithm query
      ✓ should return MissingAuthenticationTokenException if all query params except X-Amz-Algorithm
      ✓ should return InvalidSignatureException if both Authorization header and X-Amz-Algorithm query
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4-"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b Credential=a"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b,Credential=a"
      ✓ should return IncompleteSignatureException if Authorization header is "AWS4- Signature=b, Credential=a"
      ✓ should return IncompleteSignatureException if empty X-Amz-Algorithm query
      ✓ should return IncompleteSignatureException if missing X-Amz-SignedHeaders query
      ✓ should set CORS if OPTIONS and Origin
      ✓ should set CORS if OPTIONS and Origin and Headers
      ✓ should set CORS if OPTIONS and Origin and Headers and Method

  createTable
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when AttributeDefinitions is not a list
      ✓ should return SerializationException when KeySchema is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes is not a list
      ✓ should return SerializationException when ProvisionedThroughput is not a struct
      ✓ should return SerializationException when ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when KeySchema.0 is not a struct
      ✓ should return SerializationException when KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when AttributeDefinitions.0 is not a struct
      ✓ should return SerializationException when AttributeDefinitions.0.AttributeName is not a string
      ✓ should return SerializationException when AttributeDefinitions.0.AttributeType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0 is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.IndexName is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0 is not a struct
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.ProjectionType is not a string
      ✓ should return SerializationException when LocalSecondaryIndexes.0.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.ProjectionType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexes.0.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when BillingMode is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ValidationException for empty AttributeDefinitions
      ✓ should return ValidationException for empty ProvisionedThroughput
      ✓ should return ValidationException for low ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for key element names
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits and neg
      ✓ should return ValidationException for missing ProvisionedThroughput
      ✓ should return ValidationException if ProvisionedThroughput set when BillingMode is PAY_PER_REQUEST
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits second
      ✓ should return ValidationException for high ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for missing key attribute definitions
      ✓ should return ValidationException for missing key attribute definitions if BillingMode is PAY_PER_REQUEST
      ✓ should return ValidationException for attribute definitions member nulls
      ✓ should return ValidationException for SS in attr definition
      ✓ should return ValidationException for random attr definition
      ✓ should return ValidationException for missing key attr definition when double
      ✓ should return ValidationException for missing key attr definition
      ✓ should return ValidationException for missing key attr definition when double and valid
      ✓ should return ValidationException for missing key attr definition when double and same
      ✓ should return ValidationException for hash key and range key having same name
      ✓ should return ValidationException for second key not being range
      ✓ should return ValidationException for second key being hash
      ✓ should return ValidationException for both being range key
      ✓ should return ValidationException for extra attribute in definitions when range
      ✓ should return ValidationException for extra attribute in definitions when hash
      ✓ should return ValidationException for empty LocalSecondaryIndexes list
      ✓ should return ValidationException for more than five empty LocalSecondaryIndexes
      ✓ should return ValidationException for bad LocalSecondaryIndex names
      ✓ should return ValidationException for no range key with LocalSecondaryIndex
      ✓ should return ValidationException for missing attribute definitions in LocalSecondaryIndex
      ✓ should return ValidationException for first key in LocalSecondaryIndex not being hash
      ✓ should return ValidationException for same names of keys in LocalSecondaryIndex
      ✓ should return ValidationException for second key of LocalSecondaryIndex not being range
      ✓ should return ValidationException for no range key in LocalSecondaryIndex
      ✓ should return ValidationException for different hash key between LocalSecondaryIndex and table
      ✓ should return ValidationException for same named keys in LocalSecondaryIndex when one hash and one range
      ✓ should return ValidationException for missing attribute definitions when hash is same in LocalSecondaryIndex
      ✓ should return ValidationException for empty Projection in LocalSecondaryIndex
      ✓ should return ValidationException for invalid properties in LocalSecondaryIndex
      ✓ should return ValidationException for missing ProjectionType in LocalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType ALL in LocalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType KEYS_ONLY in LocalSecondaryIndex
      ✓ should return ValidationException for duplicate index names in LocalSecondaryIndexes
      ✓ should return ValidationException for extraneous values in LocalSecondaryIndexes
      ✓ should return ValidationException for more than five valid LocalSecondaryIndexes
      ✓ should return ValidationException for empty GlobalSecondaryIndexes list
      ✓ should return ValidationException for more than five empty GlobalSecondaryIndexes
      ✓ should return ValidationException for bad GlobalSecondaryIndex names
      ✓ should return ValidationException for missing attribute definition with only range key with GlobalSecondaryIndex
      ✓ should return ValidationException for missing attribute definitions in GlobalSecondaryIndex
      ✓ should return ValidationException for first key in GlobalSecondaryIndex not being hash
      ✓ should return ValidationException for same names of keys in GlobalSecondaryIndex
      ✓ should return ValidationException for second key of GlobalSecondaryIndex not being range
      ✓ should return ValidationException about Projection if no range key in GlobalSecondaryIndex
      ✓ should return ValidationException about Projection for different hash key between GlobalSecondaryIndex and table
      ✓ should return ValidationException for same named keys in GlobalSecondaryIndex when one hash and one range
      ✓ should return ValidationException for missing attribute definitions when hash is same in GlobalSecondaryIndex
      ✓ should return ValidationException for empty Projection in GlobalSecondaryIndex
      ✓ should return ValidationException for invalid properties in GlobalSecondaryIndex
      ✓ should return ValidationException for missing ProjectionType in GlobalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType ALL in GlobalSecondaryIndex
      ✓ should return ValidationException for NonKeyAttributes with ProjectionType KEYS_ONLY in GlobalSecondaryIndex
      ✓ should return ValidationException for duplicate index names in GlobalSecondaryIndexes
      ✓ should return ValidationException for extraneous values in GlobalSecondaryIndexes
      ✓ should return ValidationException for more than twenty valid GlobalSecondaryIndexes
      ✓ should return ValidationException for duplicate index names between LocalSecondaryIndexes and GlobalSecondaryIndexes
      ✓ should return LimitExceededException for more than one table with LocalSecondaryIndexes at a time
      ✓ should not allow ProvisionedThroughput with PAY_PER_REQUEST and GlobalSecondaryIndexes
    functionality
      ✓ should succeed for basic
      ✓ should succeed for basic PAY_PER_REQUEST
      ✓ should change state to ACTIVE after a period (1012ms)
      ✓ should succeed for LocalSecondaryIndexes
      ✓ should succeed for multiple GlobalSecondaryIndexes (1009ms)
      ✓ should succeed for PAY_PER_REQUEST GlobalSecondaryIndexes (1010ms)

  deleteItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (163ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (124ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (131ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid keys in ExpressionAttributeValues
      ✓ should return ValidationException for unsupported datatype in ExpressionAttributeValues
      ✓ should return ValidationException for invalid values in ExpressionAttributeValues
      ✓ should return ValidationException for empty/invalid numbers in ExpressionAttributeValues
      ✓ should return ValidationException for multiple datatypes in ExpressionAttributeValues
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ValidationException for incorrect ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException if ComparisonOperator used alone
      ✓ should return ValidationException if ComparisonOperator and Exists are used together
      ✓ should return ValidationException if AttributeValueList is used alone
      ✓ should return ValidationException if AttributeValueList and Exists are used together
      ✓ should return ValidationException if AttributeValueList and Value are used together
      ✓ should return ValidationException if Value provides incorrect number of attributes: BETWEEN
      ✓ should return ValidationException if Value provides incorrect number of attributes: NULL
      ✓ should return ValidationException if AttributeValueList has different types
      ✓ should return ValidationException if BETWEEN arguments are in the incorrect order
      ✓ should return ValidationException if ConditionExpression BETWEEN args have different types
      ✓ should return ValidationException if ConditionExpression BETWEEN args are in the incorrect order
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
    functionality
      ✓ should return nothing if item does not exist
      ✓ should return ConsumedCapacity if specified and item does not exist
      ✓ should delete item successfully
      ✓ should delete item successfully and return old values
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should return ConditionalCheckFailedException if expecting existing key to not exist
      ✓ should succeed if conditional key is different and exists is false
      ✓ should succeed if conditional key is same and exists is true
      ✓ should succeed if expecting non-existant value to not exist
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist
      ✓ should succeed for multiple conditional checks if all are valid
      ✓ should return ConditionalCheckFailedException for multiple conditional checks if one is invalid
      ✓ should return ConsumedCapacity for small item
      ✓ should return ConsumedCapacity for larger item

  deleteTable
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist
    functionality
      ✓ should eventually delete (2015ms)

  describeTable
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist

  describeTimeToLive
    serializations
      ✓ should return SerializationException when TableName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ResourceNotFoundException if table does not exist
    functionality
      ✓ should succeed if table exists

  getItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (100ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ConsistentRead is not a boolean
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ProjectionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException duplicate values in AttributesToGet
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for syntax error in ProjectionExpression
      ✓ should return ValidationException for reserved keywords in ProjectionExpression
      ✓ should return ValidationException for missing names in ProjectionExpression
      ✓ should return ValidationException for overlapping paths in ProjectionExpression
      ✓ should return ValidationException for conflicting paths in ProjectionExpression
      ✓ should return ValidationException for unused names in ProjectionExpression
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if key does not match schema
      ✓ should return ValidationException if range key does not match schema
      ✓ should return ValidationException if string key has empty string
      ✓ should return ValidationException if binary key has empty string
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ValidationException for non-scalar key access in ProjectionExpression
      ✓ should return ValidationException for non-scalar index access in ProjectionExpression
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should return empty response if key does not exist
      ✓ should return ConsumedCapacity if specified
      ✓ should return full ConsumedCapacity if specified
      ✓ should return object by hash key
      ✓ should return object by range key
      ✓ should only return requested attributes
      ✓ should only return requested nested attributes
      ✓ should return ConsumedCapacity for small item with no ConsistentRead
      ✓ should return ConsumedCapacity for larger item with no ConsistentRead
      ✓ should return ConsumedCapacity for small item with ConsistentRead
      ✓ should return ConsumedCapacity for larger item with ConsistentRead

  listTables
    serializations
      ✓ should return 400 if no body
      ✓ should return SerializationException when ExclusiveStartTableName is not a string
      ✓ should return SerializationException when Limit is not an integer
    validations
      ✓ should return ValidationException for empty ExclusiveStartTableName
      ✓ should return ValidationExceptions for short ExclusiveStartTableName
      ✓ should return ValidationException for long ExclusiveStartTableName
      ✓ should return ValidationException for low Limit
      ✓ should return ValidationException for high Limit
    functionality
      ✓ should return 200 if no params and application/json
      ✓ should return 200 if no params and application/x-amz-json-1.0
      ✓ should return 200 and CORS if Origin specified
      ✓ should return 200 if random attributes are supplied
      ✓ should return 200 if null attributes are supplied
      ✓ should return 200 if correct types are supplied
      ✓ should return 200 if using query string signing
      ✓ should return list with new table in it
      ✓ should return list using ExclusiveStartTableName and Limit
      ✓ should have no LastEvaluatedTableName if the limit is large enough

  listTagsOfResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for unauthorized ResourceArn
      ✓ should return AccessDeniedException for no ResourceArn
      ✓ should return AccessDeniedException for no ResourceArn
      ✓ should return ValidationException for no ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if ResourceArn does not exist
    functionality
      ✓ should succeed if valid resource and has no tags
      ✓ should succeed if valid resource and has multiple tags

  putItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Item is not a map
      ✓ should return SerializationException when Item.Attr is not an attr struct (98ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (100ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (94ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Item
      ✓ should return ValidationException for invalid values in Item
      ✓ should return ValidationException for empty/invalid numbers in Item
      ✓ should return ValidationException for multiple datatypes in Item
      ✓ should return ValidationException if item is too big with small attribute
      ✓ should return ResourceNotFoundException if item is just small enough with small attribute
      ✓ should return ValidationException if item is too big with larger attribute
      ✓ should return ResourceNotFoundException if item is just small enough with larger attribute
      ✓ should return ValidationException if item is too big with multi attributes
      ✓ should return ResourceNotFoundException if item is just small enough with multi attributes
      ✓ should return ValidationException if item is too big with big number attribute
      ✓ should return ValidationException if item is too big with smallest number attribute
      ✓ should return ValidationException if item is too big with smaller number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with medium number attribute
      ✓ should return ValidationException if item is too big with multi number attribute
      ✓ should return ResourceNotFoundException if item is just small enough with multi number attribute
      ✓ should return ValidationException if no value and no exists
      ✓ should return ValidationException for Exists true with no value
      ✓ should return ValidationException for Exists false with value
      ✓ should return ValidationException for incorrect ReturnValues
      ✓ should return ValidationException if ComparisonOperator used alone
      ✓ should return ValidationException if ComparisonOperator and Exists are used together
      ✓ should return ValidationException if AttributeValueList and Value are used together
      ✓ should return ValidationException if AttributeValueList used without ComparisonOperator
      ✓ should return ValidationException if AttributeValueList used with Exists
      ✓ should return ValidationException if AttributeValueList is incorrect length: EQ
      ✓ should return ValidationException if AttributeValueList is incorrect length: NULL
      ✓ should return ValidationException if AttributeValueList is incorrect length: IN
      ✓ should return ValidationException if AttributeValueList is incorrect length: BETWEEN
      ✓ should return ValidationException if Value provides incorrect number of attributes: NULL
      ✓ should return ValidationException if Value provides incorrect number of attributes: BETWEEN
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if missing key
      ✓ should return ValidationException if type mismatch for key
      ✓ should return ValidationException if empty string key
      ✓ should return ValidationException if empty binary key
      ✓ should return ValidationException if missing range key
      ✓ should return ValidationException if secondary index key is incorrect type
      ✓ should return ValidationException if hash key is too big
      ✓ should return ValidationException if range key is too big
      ✓ should return ResourceNotFoundException if table is being created
    functionality
      ✓ should put basic item
      ✓ should put empty values
      ✓ should put really long numbers
      ✓ should put multi attribute item
      ✓ should return empty when there are no old values
      ✓ should return correct old values when they exist
      ✓ should put basic range item
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should return ConditionalCheckFailedException if expecting existing key to not exist
      ✓ should succeed if conditional key is different and exists is false
      ✓ should succeed if conditional key is same
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if different value specified
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if value not specified
      ✓ should return ConditionalCheckFailedException if expecting existing value to not exist if same value specified
      ✓ should succeed for multiple conditional checks if all are valid
      ✓ should return ConditionalCheckFailedException for multiple conditional checks if one is invalid
      ✓ should succeed for multiple conditional checks if one is invalid and OR is specified
      ✓ should succeed if condition is valid: NE
      ✓ should fail if condition is invalid: NE
      ✓ should succeed if condition is valid: LE
      ✓ should fail if condition is invalid: LE
      ✓ should succeed if condition is valid: LT
      ✓ should fail if condition is invalid: LT
      ✓ should succeed if condition is valid: GE
      ✓ should fail if condition is invalid: GE
      ✓ should succeed if condition is valid: GT
      ✓ should fail if condition is invalid: GT
      ✓ should succeed if condition is valid: CONTAINS
      ✓ should fail if condition is invalid: CONTAINS
      ✓ should succeed if condition is valid: BEGINS_WITH
      ✓ should fail if condition is invalid: BEGINS_WITH
      ✓ should succeed if condition is valid: NOT_CONTAINS
      ✓ should fail if condition is invalid: NOT_CONTAINS
      ✓ should succeed if condition is valid: IN
      ✓ should fail if condition is invalid: IN
      ✓ should succeed if condition is valid: BETWEEN
      ✓ should fail if condition is invalid: BETWEEN
      ✓ should return ConsumedCapacity for small item
      ✓ should return ConsumedCapacity for larger item

  query
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ExclusiveStartKey is not a map
      ✓ should return SerializationException when ExclusiveStartKey.Attr is not an attr struct (183ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ConsistentRead is not a boolean
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when QueryFilter is not a map
      ✓ should return SerializationException when QueryFilter.Attr is not a struct
      ✓ should return SerializationException when QueryFilter.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when QueryFilter.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when QueryFilter.Attr.AttributeValueList.0 is not an attr struct (92ms)
      ✓ should return SerializationException when IndexName is not a string
      ✓ should return SerializationException when ScanIndexForward is not a boolean
      ✓ should return SerializationException when Select is not a string
      ✓ should return SerializationException when Limit is not an integer
      ✓ should return SerializationException when ConditionalOperator is not a string
      ✓ should return SerializationException when KeyConditions is not a map
      ✓ should return SerializationException when KeyConditions.Attr is not a struct
      ✓ should return SerializationException when KeyConditions.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when KeyConditions.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when KeyConditions.Attr.AttributeValueList.0 is not an attr struct (79ms)
      ✓ should return SerializationException when KeyConditionExpression is not a string
      ✓ should return SerializationException when FilterExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (73ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for empty IndexName
      ✓ should return ValidationException for short IndexName
      ✓ should return ValidationException for long IndexName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if all expressions and non-expression
      ✓ should return ValidationException if all expressions and non-expression without KeyConditionExpression
      ✓ should return ValidationException if all expressions and non-expression without KeyConditions
      ✓ should return ValidationException if ExpressionAttributeNames but no expressions
      ✓ should return ValidationException if ExpressionAttributeValues but no expressions
      ✓ should return ValidationException for bad attribute values in QueryFilter
      ✓ should return ValidationException for invalid values in QueryFilter
      ✓ should return ValidationException for empty/invalid numbers in QueryFilter
      ✓ should return ValidationException for multiple datatypes in QueryFilter
      ✓ should return ValidationException for incorrect number of QueryFilter arguments
      ✓ should return ValidationException for duplicate values in AttributesToGet
      ✓ should return ValidationException for unsupported datatype in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey without provided message
      ✓ should return ValidationException for empty/invalid numbers in ExclusiveStartKey
      ✓ should return ValidationException for multiple datatypes in ExclusiveStartKey
      ✓ should return ValidationException for bad attribute values in KeyConditions
      ✓ should return ValidationException for invalid values in KeyConditions
      ✓ should return ValidationException for empty/invalid numbers in KeyConditions
      ✓ should return ValidationException for multiple datatypes in KeyConditions
      ✓ should return ValidationException for incorrect number of KeyConditions arguments
      ✓ should return ValidationException for incorrect number of KeyConditions
      ✓ should return ValidationException for invalid ComparisonOperator types
      ✓ should return ValidationException for invalid CONTAINS ComparisonOperator types
      ✓ should return ValidationException for invalid BETWEEN ComparisonOperator types
      ✓ should return ValidationException for invalid BEGINS_WITH ComparisonOperator types
      ✓ should return ValidationException if AttributeValueList has different types
      ✓ should return ValidationException if BETWEEN arguments are in the incorrect order
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty KeyConditionExpression
      ✓ should return ValidationException for syntax errors in KeyConditionExpression
      ✓ should return ValidationException for invalid operand types
      ✓ should return ValidationException for invalid operand types with attributes
      ✓ should return ValidationException for empty FilterExpression
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for invalid operator
      ✓ should return ValidationException for invalid operators
      ✓ should return ValidationException no key attribute as first operator
      ✓ should return ValidationException for nested operations
      ✓ should return ValidationException for multiple attribute names
      ✓ should return ValidationException for nested attributes
      ✓ should return ValidationException for no key attribute
      ✓ should return ValidationException for multiple conditions per key
      ✓ should return ValidationException if KeyConditionExpression BETWEEN args have different types
      ✓ should return ValidationException if KeyConditionExpression BETWEEN args are in the incorrect order
      ✓ should check table exists before checking key validity
      ✓ should return ValidationException for non-existent index name
      ✓ should return ValidationException for querying global index with ConsistentRead
      ✓ should return ValidationException if ExclusiveStartKey is invalid
      ✓ should return ValidationException if ExclusiveStartKey for range table is invalid
      ✓ should return ValidationException if ExclusiveStartKey is invalid for local index
      ✓ should return ValidationException if ExclusiveStartKey is invalid for global index
      ✓ should return ValidationException if ExclusiveStartKey does not match hash schema
      ✓ should return ValidationException if ExclusiveStartKey does not match range schema
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for local index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global index
      ✓ should return ValidationException if hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if local hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if global hash in ExclusiveStartKey but not in query
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if local range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if global range in ExclusiveStartKey is invalid
      ✓ should return ValidationException if hash in ExclusiveStartKey and KeyConditions but range has incorrect schema
      ✓ should return ValidationException if hash in ExclusiveStartKey and KeyConditions but local has incorrect schema
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid, but hash and local are ok
      ✓ should return ValidationException if global hash in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if global range in ExclusiveStartKey but bad in query
      ✓ should return ValidationException for missing range element
      ✓ should return ValidationException for ExclusiveStartKey with local index and missing part
      ✓ should return ValidationException for ExclusiveStartKey with global index and missing part
      ✓ should return ValidationException if querying with non-indexable operations
      ✓ should return ValidationException for unsupported comparison on range
      ✓ should return ValidationException for incorrect comparison operator on index
      ✓ should return ValidationException for mismatching param type
      ✓ should return ValidationException if querying with unsupported conditions
      ✓ should return ValidationException if querying global with unsupported conditions
      ✓ should return ValidationException for ExclusiveStartKey with out-of-bounds hash key
      ✓ should return ValidationException for ExclusiveStartKey with local index and out-of-bounds hash key
      ✓ should return ValidationException if global hash in ExclusiveStartKey but outside range
      ✓ should return ValidationException if second global hash in ExclusiveStartKey but outside range
      ✓ should return ValidationException for ExclusiveStartKey with non-matching range key
      ✓ should return ValidationException for ExclusiveStartKey with local index and not matching predicate
      ✓ should return ValidationException if global hash in ExclusiveStartKey but not matching predicate
      ✓ should return ValidationException for ExclusiveStartKey with matching range but non-matching hash key
      ✓ should return ValidationException if global hash in ExclusiveStartKey but exact match
      ✓ should return ValidationException if hash key in QueryFilter
      ✓ should return ValidationException if hash key in FilterExpression
      ✓ should return ValidationException if range key in QueryFilter
      ✓ should return ValidationException if global range key in QueryFilter
      ✓ should return ValidationException if range key in FilterExpression
      ✓ should return ValidationException for non-scalar index access in FilterExpression
      ✓ should return ValidationException for specifying ALL_ATTRIBUTES when global index does not have ALL
    functionality
      ✓ should query a hash table when empty
      ✓ should query a hash table with items
      ✓ should query a range table with EQ on just hash key
      ✓ should query a range table with EQ
      ✓ should query a range table with LE
      ✓ should query a range table with LT
      ✓ should query a range table with GE
      ✓ should query a range table with GT
      ✓ should query a range table with BEGINS_WITH
      ✓ should query a range table with BETWEEN
      ✓ should only return requested attributes
      ✓ should only return requested nested attributes
      ✓ should filter items by query filter
      ✓ should only return projected attributes by default for secondary indexes
      ✓ should return all attributes when specified for secondary indexes
      ✓ should return COUNT if requested
      ✓ should only return Limit items if requested
      ✓ should only return Limit items if requested and QueryFilter
      ✓ should return LastEvaluatedKey even if only Count is selected
      ✓ should return LastEvaluatedKey even if only Count is selected and QueryFilter
      ✓ should not return LastEvaluatedKey if Limit is at least size of response
      ✓ should return items in order for strings
      ✓ should return items in order for secondary index strings
      ✓ should calculate comparisons correctly for secondary indexes
      ✓ should return items in order for numbers
      ✓ should return items in order for binary
      ✓ should return items in reverse order for strings
      ✓ should return items in reverse order with Limit for strings
      ✓ should return items in reverse order with ExclusiveStartKey for strings
      ✓ should return items in reverse order for numbers
      ✓ should return items in reverse order with Limit for numbers
      ✓ should return items in reverse order for binary
      ✓ should return items in reverse order with Limit for binary
      ✓ should query on basic hash global index
      ✓ should query in reverse on basic hash global index
      ✓ should query on range global index
      ✓ should query in reverse on range global index
      ✓ should query with ExclusiveStartKey on basic hash global index
      ✓ should query in reverse with ExclusiveStartKey on basic hash global index
      ✓ should query with ExclusiveStartKey on range global index
      ✓ should query in reverse with ExclusiveStartKey on range global index
      ✓ should query on a global index if values are equal
      - should not return LastEvaluatedKey if just under limit
      - should return LastEvaluatedKey if just over limit
      - should return all if just under limit
      - should return one less than all if just over limit

  scan
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ExclusiveStartKey is not a map
      ✓ should return SerializationException when ExclusiveStartKey.Attr is not an attr struct (70ms)
      ✓ should return SerializationException when AttributesToGet is not a list
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when Select is not a string
      ✓ should return SerializationException when Limit is not an integer
      ✓ should return SerializationException when Segment is not an integer
      ✓ should return SerializationException when ConditionalOperator is not a string
      ✓ should return SerializationException when TotalSegments is not an integer
      ✓ should return SerializationException when ScanFilter is not a map
      ✓ should return SerializationException when ScanFilter.Attr is not a struct
      ✓ should return SerializationException when ScanFilter.Attr.ComparisonOperator is not a string
      ✓ should return SerializationException when ScanFilter.Attr.AttributeValueList is not a list
      ✓ should return SerializationException when ScanFilter.Attr.AttributeValueList.0 is not an attr struct (83ms)
      ✓ should return SerializationException when FilterExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (66ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
      ✓ should return SerializationException when ProjectionExpression is not a string
      ✓ should return SerializationException when IndexName is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no FilterExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no FilterExpression
      ✓ should return ValidationException for duplicate values in AttributesToGet
      ✓ should return ValidationException for bad attribute values in ScanFilter
      ✓ should return ValidationException for invalid values in ScanFilter
      ✓ should return ValidationException for empty/invalid numbers in ScanFilter
      ✓ should return ValidationException for multiple datatypes in ScanFilter
      ✓ should return ValidationException for incorrect number of ScanFilter arguments
      ✓ should return ValidationException for invalid ComparisonOperator types
      ✓ should return ValidationException for invalid CONTAINS ComparisonOperator types
      ✓ should return ValidationException for invalid BETWEEN ComparisonOperator types
      ✓ should return ValidationException for invalid BEGINS_WITH ComparisonOperator types
      ✓ should return ValidationException on ExclusiveStartKey if ScanFilter ok with EQ on type SS when table does not exist
      ✓ should return ValidationException for unsupported datatype in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey
      ✓ should return ValidationException for invalid values in ExclusiveStartKey with no provided message
      ✓ should return ValidationException for empty/invalid numbers in ExclusiveStartKey
      ✓ should return ValidationException for multiple datatypes in ExclusiveStartKey
      ✓ should return ValidationException for missing TotalSegments
      ✓ should return ValidationException for missing Segment
      ✓ should return ValidationException for Segment more than TotalSegments
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid ExpressionAttributeValues
      ✓ should return ValidationException for empty FilterExpression
      ✓ should return ValidationException for empty ProjectionExpression
      ✓ should return ValidationException for syntax errors
      ✓ should return ValidationException for redundant parentheses
      ✓ should return ValidationException for invalid function names
      ✓ should return ValidationException for functions used incorrectly
      ✓ should return ValidationException for reserved keywords
      ✓ should return ValidationException for missing attribute names
      ✓ should return ValidationException for missing attribute values
      ✓ should return ValidationException for functions with incorrect operands
      ✓ should return ValidationException for functions with incorrect operand type
      ✓ should return ValidationException for attribute_type with incorrect value
      ✓ should return ValidationException for functions with attr values instead of paths
      ✓ should return ValidationException for non-distinct expressions
      ✓ should check table exists before checking key validity
      ✓ should return ValidationException if unknown index and bad ExclusiveStartKey in hash table
      ✓ should return ValidationException if unknown index and bad ExclusiveStartKey in range table
      ✓ should return ValidationException if ExclusiveStartKey is invalid for local index
      ✓ should return ValidationException if ExclusiveStartKey is invalid for global index
      ✓ should return ValidationException if global range in ExclusiveStartKey is invalid
      ✓ should return ValidationException for non-existent index name
      ✓ should return ValidationException for specifying ALL_ATTRIBUTES when global index does not have ALL
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for local index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema for global compound index
      ✓ should return ValidationException if ExclusiveStartKey does not match schema
      ✓ should return ValidationException if ExclusiveStartKey for range table is invalid
      ✓ should return ValidationException if range in ExclusiveStartKey is invalid, but hash and local are ok
      ✓ should return ValidationException if global hash in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if global range in ExclusiveStartKey but bad in query
      ✓ should return ValidationException if ExclusiveStartKey is from different segment
      ✓ should return ValidationException for non-scalar key access
    functionality
      ✓ should scan with no filter
      ✓ should scan by id (type S)
      ✓ should return empty if no match
      ✓ should scan by a non-id property (type N)
      ✓ should scan by multiple properties
      ✓ should scan by EQ on type B
      ✓ should scan by EQ on type SS
      ✓ should scan by EQ on type NS
      ✓ should scan by EQ on type BS
      ✓ should scan by EQ on different types
      ✓ should scan by NE on different types
      ✓ should scan by NE on type SS
      ✓ should scan by NE on type NS
      ✓ should scan by NE on type BS
      ✓ should scan by LE on type S
      ✓ should scan by LE on type N with decimals
      ✓ should scan by LE on type N without decimals
      ✓ should scan by LE on type B
      ✓ should scan by LT on type S
      ✓ should scan by LT on type N
      ✓ should scan by LT on type B
      ✓ should scan by GE on type S
      ✓ should scan by GE on type N
      ✓ should scan by GE on type B
      ✓ should scan by GT on type S
      ✓ should scan by GT on type N
      ✓ should scan by GT on type B
      ✓ should scan by NOT_NULL
      ✓ should scan by NULL
      ✓ should scan by CONTAINS on type S
      ✓ should scan by CONTAINS on type N
      ✓ should scan by CONTAINS on type B
      ✓ should scan by NOT_CONTAINS on type S
      ✓ should scan by NOT_CONTAINS on type N (44ms)
      ✓ should scan by NOT_CONTAINS on type B
      ✓ should scan by BEGINS_WITH on type S
      ✓ should scan by BEGINS_WITH on type B
      ✓ should scan by IN on type S
      ✓ should scan by IN on type N
      ✓ should scan by IN on type B
      ✓ should scan by BETWEEN on type S
      ✓ should scan by BETWEEN on type N
      ✓ should scan by BETWEEN on type B
      ✓ should scan by nested properties
      ✓ should calculate size function correctly
      ✓ should only return requested attributes
      ✓ should return COUNT if requested
      ✓ should return after but not including ExclusiveStartKey
      ✓ should succeed even if ExclusiveStartKey does not match scan filter
      ✓ should return LastEvaluatedKey if Limit not reached
      ✓ should return LastEvaluatedKey even if selecting Count
      ✓ should return LastEvaluatedKey while filtering, even if Limit is smaller than the expected return list (47ms)
      ✓ should not return LastEvaluatedKey if Limit is large
      ✓ should return items in same segment order
      ✓ should return items in string hash order
      ✓ should return items in number hash order
      ✓ should return items from correct string hash segments
      ✓ should return items from correct number hash segments
      - should not return LastEvaluatedKey if just under limit for range table
      - should return LastEvaluatedKey if just over limit for range table
      - should not return LastEvaluatedKey if just under limit for number range table
      - should return LastEvaluatedKey if just over limit for number range table
      - should return all if just under limit with small attribute for hash table
      - should return all if just under limit with large attribute
      - should return one less than all if just over limit with small attribute for hash table
      - should return all if just under limit for range table
      - should return all if just over limit with less items for range table
      - should return all if just over limit for range table
      - should return one less than all if just over limit with large attribute
      ✓ should allow scans at least for 27500 args to IN (189ms)

  tagResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
      ✓ should return SerializationException when Tags is not a list
      ✓ should return SerializationException when Tags.0 is not a struct
      ✓ should return SerializationException when Tags.0.Key is not a string
      ✓ should return SerializationException when Tags.0.Value is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for short unauthorized ResourceArn
      ✓ should return AccessDeniedException for long unauthorized ResourceArn
      ✓ should return AccessDeniedException for longer unauthorized ResourceArn
      ✓ should return ValidationException for null Tags
      ✓ should return ValidationException for invalid ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if Tags are empty
      ✓ should return ResourceNotFoundException if ResourceArn does not exist

  untagResource
    serializations
      ✓ should return SerializationException when ResourceArn is not a string
      ✓ should return SerializationException when TagKeys is not a list
      ✓ should return SerializationException when TagKeys.0 is not a string
    validations
      ✓ should return ValidationException for no ResourceArn
      ✓ should return AccessDeniedException for empty ResourceArn
      ✓ should return AccessDeniedException for short unauthorized ResourceArn
      ✓ should return AccessDeniedException for long unauthorized ResourceArn
      ✓ should return AccessDeniedException for longer unauthorized ResourceArn
      ✓ should return ValidationException for null TagKeys
      ✓ should return ValidationException for invalid ResourceArn
      ✓ should return ValidationException for short table name
      ✓ should return ResourceNotFoundException if TagKeys are empty
      ✓ should return ResourceNotFoundException if ResourceArn does not exist

  updateItem
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when Key is not a map
      ✓ should return SerializationException when Key.Attr is not an attr struct (61ms)
      ✓ should return SerializationException when Expected is not a map
      ✓ should return SerializationException when Expected.Attr is not a struct
      ✓ should return SerializationException when Expected.Attr.Exists is not a boolean
      ✓ should return SerializationException when Expected.Attr.Value is not an attr struct (68ms)
      ✓ should return SerializationException when AttributeUpdates is not a map
      ✓ should return SerializationException when AttributeUpdates.Attr is not a struct
      ✓ should return SerializationException when AttributeUpdates.Attr.Action is not a string
      ✓ should return SerializationException when AttributeUpdates.Attr.Value is not an attr struct (60ms)
      ✓ should return SerializationException when ReturnConsumedCapacity is not a string
      ✓ should return SerializationException when ReturnItemCollectionMetrics is not a string
      ✓ should return SerializationException when ReturnValues is not a string
      ✓ should return SerializationException when ConditionExpression is not a string
      ✓ should return SerializationException when UpdateExpression is not a string
      ✓ should return SerializationException when ExpressionAttributeValues is not a map
      ✓ should return SerializationException when ExpressionAttributeValues.Attr is not an attr struct (60ms)
      ✓ should return SerializationException when ExpressionAttributeNames is not a map
      ✓ should return SerializationException when ExpressionAttributeNames.Attr is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for incorrect attributes
      ✓ should return ValidationException if expression and non-expression
      ✓ should return ValidationException if ExpressionAttributeNames but no ConditionExpression
      ✓ should return ValidationException if ExpressionAttributeValues but no ConditionExpression
      ✓ should return ValidationException for unsupported datatype in Key
      ✓ should return ValidationException for invalid values in Key
      ✓ should return ValidationException for empty/invalid numbers in Key
      ✓ should return ValidationException for multiple datatypes in Key
      ✓ should return ValidationException if update has no value
      ✓ should return ValidationException if trying to delete incorrect types
      ✓ should return ValidationException if trying to add incorrect types
      ✓ should return ValidationException if trying to add type B
      ✓ should return ValidationException if no value and no exists
      ✓ should return ValidationException for Exists true with no value
      ✓ should return ValidationException for Exists false with value
      ✓ should return ValidationException for empty ExpressionAttributeNames
      ✓ should return ValidationException for invalid ExpressionAttributeNames
      ✓ should return ValidationException for empty ExpressionAttributeValues
      ✓ should return ValidationException for invalid keys in ExpressionAttributeValues
      ✓ should return ValidationException for unsupported datatype in ExpressionAttributeValues
      ✓ should return ValidationException for invalid values in ExpressionAttributeValues
      ✓ should return ValidationException for empty/invalid numbers in ExpressionAttributeValues
      ✓ should return ValidationException for multiple datatypes in ExpressionAttributeValues
      ✓ should return ValidationException for empty UpdateExpression
      ✓ should return ValidationException for empty ConditionExpression
      ✓ should return ValidationException for syntax errors in UpdateExpression
      ✓ should return ValidationException for reserved keywords
      ✓ should return ValidationException for invalid functions in UpdateExpression
      ✓ should return ValidationException for multiple sections
      ✓ should return ValidationException for undefined attribute names in UpdateExpression
      ✓ should return ValidationException for undefined attribute values in UpdateExpression
      ✓ should return ValidationException for overlapping paths in UpdateExpression
      ✓ should return ValidationException for conflicting paths in UpdateExpression
      ✓ should return ValidationException for incorrect types in UpdateExpression
      ✓ should return ValidationException for incorrect number of operands to functions in UpdateExpression
      ✓ should return ValidationException for incorrect operand path type to functions in UpdateExpression
      ✓ should return ValidationException for incorrect types to functions in UpdateExpression
      ✓ should return ValidationException for extra ExpressionAttributeNames
      ✓ should return ValidationException for extra ExpressionAttributeValues
      ✓ should return ResourceNotFoundException if key is empty and table does not exist
      ✓ should return ValidationException if Key does not match schema
      ✓ should return ValidationException if Key does not match range schema
      ✓ should return ResourceNotFoundException if table is being created
      ✓ should return ValidationException if trying to update key
      ✓ should return ValidationException if trying to update range key
      ✓ should return ValidationException if trying to update wrong type on index
      ✓ should return ValidationException if trying to update index map
      ✓ should return ValidationException if trying to delete/add incorrect types
      ✓ should return ValidationException if using expression to delete/add incorrect types
      ✓ should return ValidationException if trying to reference non-existent attribute
      ✓ should return ValidationException if trying to update non-existent nested attribute in non-existent item
      ✓ should return ValidationException if trying to update non-existent nested attribute in existing item
      ✓ should return ValidationException if trying to update existing index
      ✓ should return ValidationException if update item is too big
    functionality
      ✓ should return ConditionalCheckFailedException if expecting non-existent key to exist
      ✓ should just add item with key if no action
      ✓ should return empty when there are no old values
      ✓ should return all old values when they exist
      ✓ should return updated old values when they exist
      ✓ should return updated old nested values when they exist
      ✓ should return all new values when they exist
      ✓ should return updated new values when they exist
      ✓ should just add valid ADD actions if nothing exists
      ✓ should delete normal values and return updated new
      ✓ should delete normal values and return updated on index table
      ✓ should delete set values and return updated new
      ✓ should add numerical value and return updated new
      ✓ should add set value and return updated new
      ✓ should add list value and return updated new
      ✓ should throw away duplicate string values
      ✓ should throw away duplicate numeric values
      ✓ should throw away duplicate binary values
      ✓ should return ConsumedCapacity for creating small item
      ✓ should return ConsumedCapacity for creating larger item
      ✓ should return ConsumedCapacity for creating and updating small item
      ✓ should return ConsumedCapacity for creating and updating larger item
      ✓ should update when boolean value expect matches
      ✓ should update values from other attributes
      ✓ should update nested attributes
      ✓ should update indexed attributes

  updateTable
    serializations
      ✓ should return SerializationException when TableName is not a string
      ✓ should return SerializationException when ProvisionedThroughput is not a struct
      ✓ should return SerializationException when ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Update.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.IndexName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput.WriteCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.ProvisionedThroughput.ReadCapacityUnits is not a long
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0 is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0.AttributeName is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.KeySchema.0.KeyType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.NonKeyAttributes is not a list
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.ProjectionType is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Create.Projection.NonKeyAttributes.0 is not a string
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Delete is not a struct
      ✓ should return SerializationException when GlobalSecondaryIndexUpdates.0.Delete.IndexName is not a strin
      ✓ should return SerializationException when BillingMode is not a string
    validations
      ✓ should return ValidationException for no TableName
      ✓ should return ValidationException for empty TableName
      ✓ should return ValidationException for short TableName
      ✓ should return ValidationException for long TableName
      ✓ should return ValidationException for null attributes
      ✓ should return ValidationException for empty ProvisionedThroughput
      ✓ should return ValidationException for low ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits and neg
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits
      ✓ should return ValidationException for high ProvisionedThroughput.ReadCapacityUnits second
      ✓ should return ValidationException for high ProvisionedThroughput.WriteCapacityUnits
      ✓ should return ValidationException for empty GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for empty Update
      ✓ should return ValidationException for bad IndexName and ProvisionedThroughput
      ✓ should return ValidationException for empty index struct
      ✓ should return ValidationException for too many empty GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for repeated GlobalSecondaryIndexUpdates
      ✓ should return ValidationException for ProvisionedThroughput update when PAY_PER_REQUEST
      ✓ should return ValidationException for PROVISIONED without ProvisionedThroughput
      ✓ should return ResourceNotFoundException if table does not exist
      ✓ should return NotFoundException for high index ReadCapacityUnits when table does not exist
      ✓ should return NotFoundException for high index WriteCapacityUnits when table does not exist
      ✓ should return ValidationException for high index ReadCapacityUnits when index does not exist
      ✓ should return ValidationException for high index WriteCapacityUnits when index does not exist
      ✓ should return ValidationException if read and write are same
      ✓ should return LimitExceededException for too many GlobalSecondaryIndexUpdates
    functionality
      ✓ should triple rates and then reduce if requested (2009ms)
      - should allow table to be converted to PAY_PER_REQUEST and back again


  1037 passing (21s)
  22 pending

npm uninstall

removed 1 package, and audited 151 packages in 3s

33 packages are looking for funding
  run `npm fund` for details

3 vulnerabilities (2 high, 1 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> dynalite@3.2.2 test
> mocha --require should --reporter spec -t $([ $REMOTE ] && echo 30s || echo 4s)

----------------------run test done----------------------
----------------------client level-test of memdown----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> level-test@9.0.0 test
> standard && hallmark && (nyc -s node test/node.js | faucet) && nyc report


# without arguments[K

  ok [1m[32m1[0m got expected down[K
  ok [1m[32m2[0m undefined[K
  ok [1m[32m3[0m should be falsy[K
[1A[1G[1m[32m✓ without arguments[0m[1B[1G
# with options and callback[K

  ok [1m[32m4[0m null[K
  ok [1m[32m5[0m should be truthy[K
  ok [1m[32m6[0m got expected down[K
  ok [1m[32m7[0m should be falsy[K
  ok [1m[32m8[0m null[K
  ok [1m[32m9[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options and callback[0m[1B[1G
# with options[K

  ok [1m[32m10[0m got expected down[K
  ok [1m[32m11[0m should be falsy[K
  ok [1m[32m12[0m null[K
  ok [1m[32m13[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options[0m[1B[1G
# with callback[K

  ok [1m[32m14[0m null[K
  ok [1m[32m15[0m should be truthy[K
  ok [1m[32m16[0m got expected down[K
  ok [1m[32m17[0m should be falsy[K
  ok [1m[32m18[0m null[K
  ok [1m[32m19[0m should be strictly equal[K
[1A[1G[1m[32m✓ with callback[0m[1B[1G
# without arguments[K

  ok [1m[32m20[0m got expected down[K
  ok [1m[32m21[0m undefined[K
  ok [1m[32m22[0m should be falsy[K
[1A[1G[1m[32m✓ without arguments[0m[1B[1G
# with options and callback[K

  ok [1m[32m23[0m null[K
  ok [1m[32m24[0m should be truthy[K
  ok [1m[32m25[0m got expected down[K
  ok [1m[32m26[0m should be falsy[K
  ok [1m[32m27[0m null[K
  ok [1m[32m28[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options and callback[0m[1B[1G
# with options[K

  ok [1m[32m29[0m got expected down[K
  ok [1m[32m30[0m should be falsy[K
  ok [1m[32m31[0m null[K
  ok [1m[32m32[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options[0m[1B[1G
# with callback[K

  ok [1m[32m33[0m null[K
  ok [1m[32m34[0m should be truthy[K
  ok [1m[32m35[0m got expected down[K
  ok [1m[32m36[0m should be falsy[K
  ok [1m[32m37[0m null[K
  ok [1m[32m38[0m should be strictly equal[K
[1A[1G[1m[32m✓ with callback[0m[1B[1G
# without arguments[K

  ok [1m[32m39[0m got expected down[K
  ok [1m[32m40[0m undefined[K
  ok [1m[32m41[0m should be falsy[K
[1A[1G[1m[32m✓ without arguments[0m[1B[1G
# with options and callback[K

  ok [1m[32m42[0m null[K
  ok [1m[32m43[0m should be truthy[K
  ok [1m[32m44[0m got expected down[K
  ok [1m[32m45[0m should be falsy[K
  ok [1m[32m46[0m null[K
  ok [1m[32m47[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options and callback[0m[1B[1G
# with options[K

  ok [1m[32m48[0m got expected down[K
  ok [1m[32m49[0m should be falsy[K
  ok [1m[32m50[0m null[K
  ok [1m[32m51[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options[0m[1B[1G
# with callback[K

  ok [1m[32m52[0m null[K
  ok [1m[32m53[0m should be truthy[K
  ok [1m[32m54[0m got expected down[K
  ok [1m[32m55[0m should be falsy[K
  ok [1m[32m56[0m null[K
  ok [1m[32m57[0m should be strictly equal[K
[1A[1G[1m[32m✓ with callback[0m[1B[1G
# without arguments[K

  ok [1m[32m58[0m got expected down[K
  ok [1m[32m59[0m undefined[K
  ok [1m[32m60[0m should be falsy[K
[1A[1G[1m[32m✓ without arguments[0m[1B[1G
# with options and callback[K

  ok [1m[32m61[0m null[K
  ok [1m[32m62[0m should be truthy[K
  ok [1m[32m63[0m got expected down[K
  ok [1m[32m64[0m should be falsy[K
  ok [1m[32m65[0m null[K
  ok [1m[32m66[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options and callback[0m[1B[1G
# with options[K

  ok [1m[32m67[0m got expected down[K
  ok [1m[32m68[0m should be falsy[K
  ok [1m[32m69[0m null[K
  ok [1m[32m70[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ with options[0m[1B[1G
# with callback[K

  ok [1m[32m71[0m null[K
  ok [1m[32m72[0m should be truthy[K
  ok [1m[32m73[0m got expected down[K
  ok [1m[32m74[0m should be falsy[K
  ok [1m[32m75[0m null[K
  ok [1m[32m76[0m should be strictly equal[K
[1A[1G[1m[32m✓ with callback[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m77[0m null[K
  ok [1m[32m78[0m got db[K
  ok [1m[32m79[0m got expected down[K
  ok [1m[32m80[0m got expected up[K
  ok [1m[32m81[0m should be falsy[K
  ok [1m[32m82[0m null[K
  ok [1m[32m83[0m should be strictly equal[K
  ok [1m[32m84[0m null[K
  ok [1m[32m85[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m86[0m null[K
  ok [1m[32m87[0m got db[K
  ok [1m[32m88[0m got expected down[K
  ok [1m[32m89[0m got expected up[K
  ok [1m[32m90[0m should be falsy[K
  ok [1m[32m91[0m null[K
  ok [1m[32m92[0m should be strictly equal[K
  ok [1m[32m93[0m null[K
  ok [1m[32m94[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m95[0m null[K
  ok [1m[32m96[0m got db[K
  ok [1m[32m97[0m got expected down[K
  ok [1m[32m98[0m got expected up[K
  ok [1m[32m99[0m should be falsy[K
  ok [1m[32m100[0m null[K
  ok [1m[32m101[0m should be strictly equal[K
  ok [1m[32m102[0m null[K
  ok [1m[32m103[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m104[0m null[K
  ok [1m[32m105[0m got db[K
  ok [1m[32m106[0m got expected down[K
  ok [1m[32m107[0m got expected up[K
  ok [1m[32m108[0m should be falsy[K
  ok [1m[32m109[0m null[K
  ok [1m[32m110[0m should be strictly equal[K
  ok [1m[32m111[0m null[K
  ok [1m[32m112[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m113[0m null[K
  ok [1m[32m114[0m got db[K
  ok [1m[32m115[0m got expected down[K
  ok [1m[32m116[0m got expected up[K
  ok [1m[32m117[0m should be falsy[K
  ok [1m[32m118[0m null[K
  ok [1m[32m119[0m should be strictly equal[K
  ok [1m[32m120[0m null[K
  ok [1m[32m121[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# custom layers with auto-open[K

  ok [1m[32m122[0m null[K
  ok [1m[32m123[0m got db[K
  ok [1m[32m124[0m got expected down[K
  ok [1m[32m125[0m got expected up[K
  ok [1m[32m126[0m should be falsy[K
  ok [1m[32m127[0m null[K
  ok [1m[32m128[0m should be strictly equal[K
  ok [1m[32m129[0m null[K
  ok [1m[32m130[0m should be strictly equal[K
[1A[1G[1m[32m✓ custom layers with auto-open[0m[1B[1G
# opts precedence[K

  ok [1m[32m131[0m undefined[K
  ok [1m[32m132[0m null[K
  ok [1m[32m133[0m should be strictly equal[K
  ok [1m[32m134[0m undefined[K
  ok [1m[32m135[0m null[K
  ok [1m[32m136[0m should be deeply equivalent[K
[1A[1G[1m[32m✓ opts precedence[0m[1B[1G
# test db open and use, level(location, cb)[K

  ok [1m[32m137[0m no error[K
  ok [1m[32m138[0m no error[K
[1A[1G[1m[32m✓ test db open and use, level(location, cb)[0m[1B[1G
# test db open and use, level(location, options, cb)[K

  ok [1m[32m139[0m no error[K
  ok [1m[32m140[0m no error[K
[1A[1G[1m[32m✓ test db open and use, level(location, options, cb)[0m[1B[1G
# test db open and use, db=level(location)[K

  ok [1m[32m141[0m no error[K
[1A[1G[1m[32m✓ test db open and use, db=level(location)[0m[1B[1G
# options.keyEncoding and options.valueEncoding are passed on to encoding-down[K

  ok [1m[32m142[0m keyEncoding correct[K
  ok [1m[32m143[0m valueEncoding correct[K
[1A[1G[1m[32m✓ options.keyEncoding and options.valueEncoding are passed on to encoding-down[0m[1B[1G
# encoding options default to utf8[K

  ok [1m[32m144[0m keyEncoding correct[K
  ok [1m[32m145[0m valueEncoding correct[K
[1A[1G[1m[32m✓ encoding options default to utf8[0m[1B[1G
# test db values[K

  ok [1m[32m146[0m no error[K
  ok [1m[32m147[0m no error[K
  ok [1m[32m148[0m should be strictly equal[K
  ok [1m[32m149[0m no error[K
  ok [1m[32m150[0m should be strictly equal[K
  ok [1m[32m151[0m no error[K
  ok [1m[32m152[0m should be strictly equal[K
[1A[1G[1m[32m✓ test db values[0m[1B[1G
# test db open and use, level(location, options, cb) force error[K

  ok [1m[32m153[0m got error opening existing db[K
  ok [1m[32m154[0m no db[K
[1A[1G[1m[32m✓ test db open and use, level(location, options, cb) force error[0m[1B[1G
# test repair[K

  ok [1m[32m155[0m no error[K
[1A[1G[1m[32m✓ test repair[0m[1B[1G
# test destroy[K

  ok [1m[32m156[0m sanity check, directory exists[K
  ok [1m[32m157[0m sanity check, CURRENT exists[K
  ok [1m[32m158[0m no error[K
  ok [1m[32m159[0m db gone (mostly)[K
[1A[1G[1m[32m✓ test destroy[0m[1B[1G
# test db open and use, level(location, cb)[K

  ok [1m[32m160[0m no error[K
  ok [1m[32m161[0m no error[K
[1A[1G[1m[32m✓ test db open and use, level(location, cb)[0m[1B[1G
# test db open and use, level(location, options, cb)[K

  ok [1m[32m162[0m no error[K
  ok [1m[32m163[0m no error[K
[1A[1G[1m[32m✓ test db open and use, level(location, options, cb)[0m[1B[1G
# test db open and use, db=level(location)[K

  ok [1m[32m164[0m no error[K
[1A[1G[1m[32m✓ test db open and use, db=level(location)[0m[1B[1G
# options.keyEncoding and options.valueEncoding are passed on to encoding-down[K

  ok [1m[32m165[0m keyEncoding correct[K
  ok [1m[32m166[0m valueEncoding correct[K
[1A[1G[1m[32m✓ options.keyEncoding and options.valueEncoding are passed on to encoding-down[0m[1B[1G
# encoding options default to utf8[K

  ok [1m[32m167[0m keyEncoding correct[K
  ok [1m[32m168[0m valueEncoding correct[K
[1A[1G[1m[32m✓ encoding options default to utf8[0m[1B[1G
# test db values[K

  ok [1m[32m169[0m no error[K
  ok [1m[32m170[0m no error[K
  ok [1m[32m171[0m should be strictly equal[K
  ok [1m[32m172[0m no error[K
  ok [1m[32m173[0m should be strictly equal[K
  ok [1m[32m174[0m no error[K
  ok [1m[32m175[0m should be strictly equal[K
[1A[1G[1m[32m✓ test db values[0m[1B[1G
# tests 175[K

tests 175
# pass  175[K

pass  175
# ok[K
[1A[1G[1m[32m✓ ok[0m[1B[1G-------------|---------|----------|---------|---------|-------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------|---------|----------|---------|---------|-------------------
All files    |     100 |      100 |     100 |     100 |                   
 index.js    |     100 |      100 |     100 |     100 |                   
 location.js |     100 |      100 |     100 |     100 |                   
-------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 1081 packages in 4s

203 packages are looking for funding
  run `npm fund` for details

12 vulnerabilities (3 moderate, 8 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> level-test@9.0.0 test
> standard && hallmark && (nyc -s node test/node.js | faucet) && nyc report

not ok [1m[31m1[0m no plan found
not ok [1m[31m2[0m no assertions found

[1m[31m⨯ fail  2[0m[K
----------------------run test done----------------------
----------------------client mem of memdown----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> level-mem@6.0.1 test
> standard && hallmark && nyc node test.js

TAP version 13
# test db open and use, level(location, cb)
ok 1 no error
ok 2 no error
# test db open and use, level(location, options, cb)
ok 3 no error
ok 4 no error
# test db open and use, db=level(location)
ok 5 no error
# options.keyEncoding and options.valueEncoding are passed on to encoding-down
ok 6 keyEncoding correct
ok 7 valueEncoding correct
# encoding options default to utf8
ok 8 keyEncoding correct
ok 9 valueEncoding correct
# test db values
ok 10 no error
ok 11 no error
ok 12 should be strictly equal
ok 13 no error
ok 14 should be strictly equal
ok 15 no error
ok 16 should be strictly equal

1..16
# tests 16
# pass  16

# ok

--------------|---------|----------|---------|---------|-------------------
File          | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------|---------|----------|---------|---------|-------------------
All files     |     100 |      100 |     100 |     100 |                   
 level-mem.js |     100 |      100 |     100 |     100 |                   
--------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 812 packages in 3s

217 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> level-mem@6.0.1 test
> standard && hallmark && nyc node test.js

--------------|---------|----------|---------|---------|-------------------
File          | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------|---------|----------|---------|---------|-------------------
All files     |     100 |      100 |     100 |     100 |                   
 level-mem.js |     100 |      100 |     100 |     100 |                   
--------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client pico-framework of memdown----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> pico-framework@0.6.1 test
> nyc ava


  ✔ assertChannelPolicies › policy = assertEventPolicy(policy)
  ✔ assertChannelPolicies › policy = assertQueryPolicy(policy)
  ✔ PicoFrameworkEvent › PicoFrameworkEvent
  ✔ cleanChannelPolicies › policy = cleanEventPolicy(policy)
  ✔ cleanChannelPolicies › policy = cleanQueryPolicy(policy)
  ✔ cleanEvent › event = cleanEvent(event)
  ✔ cleanQuery › query = cleanQuery(query)
  ✔ clearSchedule › clearSchedule
  ✔ ctx_delChannel › ctx.delChannel (149ms)
  ✔ ctx_delPico › ctx.delPico
  ✔ ctx_ent › ent:foo := null
  ✔ ctx_install › ctx.install
  ✔ ctx_newChannel › ctx.newChannel
  ✔ ctx_newPico › ctx.newPico
  ✔ ctx_putChannel › ctx.putChannel (139ms)
  ✔ ctx_raiseEvent › raiseEvent
  ✔ ctx_raiseEvent › raiseEvent should use cleanEvent
  ✔ ctx_raiseEvent › raiseEvent - forRid
  ✔ ctx_uninstall › ctx.uninstall
  ✔ ctx_uninstall › ctx.uninstall - clear ent vars
  ✔ familyChannels › ctx.newChannel
  ✔ index › check channel policies
  ✔ index › pico can pass configuration to rulesets
  ✔ index › hello world
  ✔ persistent › persistent (137ms)
  ✔ picoTxnErrors › query error
  ✔ reInitRuleset › reInitRuleset
  ✔ ruleset › ruleset - responses
  ✔ ruleset › ruleset - eid, qid
  ✔ rulesetEnvironment › rulesetEnvironment
  ✔ rulesetStartup › rulesetStartup
  ─

  31 tests passed
-------------------|---------|----------|---------|---------|---------------------------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                     
-------------------|---------|----------|---------|---------|---------------------------------------
All files          |   93.96 |    90.42 |   88.88 |   94.25 |                                       
 Channel.ts        |     100 |       99 |     100 |     100 | 58                                    
 Pico.ts           |   94.27 |     82.6 |    92.3 |   94.73 | ...76-177,188,221-222,329,417,445-446 
 PicoEvent.ts      |     100 |      100 |     100 |     100 |                                       
 PicoFramework.ts  |   89.38 |       75 |   91.66 |   88.88 | ...12,127,135-136,167,173,194,279-285 
 PicoQuery.ts      |     100 |      100 |     100 |     100 |                                       
 PicoQueue.ts      |   97.14 |      100 |   85.71 |   97.05 | 52                                    
 RulesetContext.ts |   90.47 |      100 |   88.23 |   90.47 | 94,108                                
 dbRange.ts        |   77.27 |    66.66 |   66.66 |   80.95 | 17,33-34,37                           
 index.ts          |     100 |      100 |      25 |     100 |                                       
 utils.ts          |     100 |      100 |     100 |     100 |                                       
-------------------|---------|----------|---------|---------|---------------------------------------
npm uninstall

removed 1 package, and audited 345 packages in 2s

61 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> pico-framework@0.6.1 test
> nyc ava


  ✔ assertChannelPolicies › policy = assertEventPolicy(policy)
  ✔ assertChannelPolicies › policy = assertQueryPolicy(policy)

  Uncaught exception in test/PicoFrameworkEvent.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/PicoFrameworkEvent.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/PicoFrameworkEvent.ts exited with a non-zero exit code: 1
  ✔ cleanChannelPolicies › policy = cleanEventPolicy(policy)
  ✔ cleanChannelPolicies › policy = cleanQueryPolicy(policy)
  ✔ cleanEvent › event = cleanEvent(event)
  ✔ cleanQuery › query = cleanQuery(query)

  Uncaught exception in test/clearSchedule.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/clearSchedule.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/clearSchedule.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_delChannel.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_delChannel.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_delChannel.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_delPico.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_delPico.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_delPico.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_ent.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_ent.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_ent.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_install.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_install.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_install.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_newChannel.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_newChannel.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_newChannel.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_newPico.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_newPico.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_newPico.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_putChannel.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_putChannel.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_putChannel.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_raiseEvent.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_raiseEvent.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_raiseEvent.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ctx_uninstall.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/mkCtxTestEnv.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ctx_uninstall.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ctx_uninstall.ts exited with a non-zero exit code: 1

  Uncaught exception in test/familyChannels.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/helpers/testPicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/familyChannels.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/familyChannels.ts exited with a non-zero exit code: 1

  Uncaught exception in test/index.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/index.ts exited with a non-zero exit code: 1

  Uncaught exception in test/persistent.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/persistent.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/persistent.ts exited with a non-zero exit code: 1

  Uncaught exception in test/picoTxnErrors.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/picoTxnErrors.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/picoTxnErrors.ts exited with a non-zero exit code: 1

  Uncaught exception in test/reInitRuleset.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/reInitRuleset.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/reInitRuleset.ts exited with a non-zero exit code: 1

  Uncaught exception in test/rulesetEnvironment.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/rulesetEnvironment.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/rulesetEnvironment.ts exited with a non-zero exit code: 1

  Uncaught exception in test/ruleset.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/ruleset.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/ruleset.ts exited with a non-zero exit code: 1

  Uncaught exception in test/rulesetStartup.ts

  Error: Cannot find module 'memdown'
  Require stack:
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/PicoFramework.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/src/index.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/test/rulesetStartup.ts
  - /data/js-variants/multee/Clients/memdown/pico-framework/node_modules/ava/lib/worker/base.js

  › - node_modules/ava/lib/worker/base.js
  › Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
  › Object.<anonymous> (src/PicoFramework.ts:2:904)
  › Module.replacementCompile (node_modules/append-transform/index.js:60:13)
  › Module.m._compile (node_modules/ts-node/src/index.ts:1618:23)
  › module.exports (node_modules/default-require-extensions/js.js:7:9)

  ✖ test/rulesetStartup.ts exited with a non-zero exit code: 1
  ─

  6 tests passed
  19 uncaught exceptions
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |   20.23 |    35.63 |    7.69 |   20.59 |                   
 Channel.ts        |   48.88 |    55.44 |   35.29 |   48.88 | 28-153,296-320    
 Pico.ts           |    3.64 |        0 |       0 |    3.68 | 62-542            
 PicoEvent.ts      |     100 |      100 |     100 |     100 |                   
 PicoFramework.ts  |    9.73 |        0 |       0 |   10.18 | 57-326            
 PicoQuery.ts      |     100 |      100 |     100 |     100 |                   
 PicoQueue.ts      |    2.85 |        0 |       0 |    2.94 | 20-105            
 RulesetContext.ts |    4.76 |      100 |       0 |    4.76 | 55-116            
 dbRange.ts        |    9.09 |        0 |       0 |    9.52 | 9-41              
 index.ts          |    62.5 |      100 |       0 |    62.5 | 19,27-33          
 utils.ts          |     100 |      100 |     100 |     100 |                   
-------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client pouchdb of memdown----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> pouchdb-monorepo@7.0.0-prerelease test
> bash bin/run-test.sh


> pouchdb-monorepo@7.0.0-prerelease build-node
> bash bin/build-node.sh


> pouchdb-monorepo@7.0.0-prerelease build-modules
> node bin/build-modules.js

Building pouchdb...
Building pouchdb-abstract-mapreduce...
Building pouchdb-adapter-http...
Building pouchdb-adapter-idb...
Building pouchdb-adapter-indexeddb...
Building pouchdb-adapter-leveldb...
Building pouchdb-adapter-leveldb-core...
Building pouchdb-adapter-localstorage...
Building pouchdb-adapter-memory...
Building pouchdb-adapter-utils...
Building pouchdb-binary-utils...
Building pouchdb-browser...
Building pouchdb-changes-filter...
Building pouchdb-checkpointer...
Building pouchdb-collate...
Building pouchdb-collections...
Building pouchdb-core...
Building pouchdb-errors...
Building pouchdb-fetch...
Building pouchdb-find...
Building pouchdb-for-coverage...
Building pouchdb-generate-replication-id...
Building pouchdb-json...
Building pouchdb-mapreduce...
Building pouchdb-mapreduce-utils...
Building pouchdb-md5...
Building pouchdb-merge...
Building pouchdb-node...
Building pouchdb-replication...
Building pouchdb-selector-core...
Building pouchdb-utils...
Building sublevel-pouchdb...
  ✓ wrote pouchdb-adapter-localstorage/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-localstorage/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index.js in node mode
  ✓ wrote pouchdb-changes-filter/lib/index.es.js in node mode
  ✓ wrote pouchdb-fetch/lib/index.js in node mode
  ✓ wrote pouchdb-fetch/lib/index.es.js in node mode
  ✓ wrote pouchdb-collate/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collate/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-json/lib/index.js in vanilla mode
  ✓ wrote pouchdb-json/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-md5/lib/index.js in node mode
  ✓ wrote pouchdb-md5/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-idb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index.js in node mode
  ✓ wrote pouchdb-binary-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-collections/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collections/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.es.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index.js in node mode
  ✓ wrote pouchdb-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-selector-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index.js in node mode
  ✓ wrote pouchdb-mapreduce/lib/index.es.js in node mode
  ✓ wrote pouchdb-replication/lib/index.js in vanilla mode
  ✓ wrote pouchdb-replication/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-core/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-find/lib/index.js in node mode
  ✓ wrote pouchdb-find/lib/index.es.js in node mode
  ✓ wrote pouchdb-find/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-find/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-browser/lib/index.js in vanilla mode
  ✓ wrote pouchdb-browser/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-for-coverage/lib/index.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index.es.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.es.js in browser mode
  ✓ wrote packages/node_modules/pouchdb/lib/index.es.js
  ✓ wrote packages/node_modules/pouchdb/lib/index.js
Waiting for host to start ..
Host started :)
> pouchdb-monorepo@7.0.0-prerelease test-node
> bash bin/test-node.sh

Down server listening on port 3010
Seeded with: 1661446597184


  DB Setup
    ✓ PouchDB has a version
    ✓ PouchDB version matches package.json

  test.active_tasks.js
    ✓ Can add a task
    ✓ Can get tasks by id
    ✓ Can get all tasks
    ✓ Can update a task
    ✓ Can remove a task

  test.all_docs.js-http
    ✓ Testing all docs (178ms)
    ✓ Testing allDocs opts.keys (62ms)
    ✓ Testing allDocs opts.keys with skip
    ✓ Testing allDocs opts.keys with limit
    ✓ Testing allDocs invalid opts.keys
    ✓ Testing deleting in changes (48ms)
    ✓ Testing updating in changes (46ms)
    ✓ Testing include docs
    ✓ Testing conflicts (51ms)
    ✓ test basic collation
    ✓ 3883 start_key end_key aliases
    ✓ test total_rows with a variety of criteria (115ms)
    ✓ test total_rows with both skip and limit (39ms)
    ✓ test limit option and total_rows
    ✓ test escaped startkey/endkey
    ✓ test "key" option
    ✓ test inclusive_end=false (51ms)
    ✓ test descending with startkey/endkey
    ✓ #3082 test wrong num results returned (283ms)
    ✓ test empty db
    ✓ test after db close
    ✓ 5793 _conflicts should not exist if no conflicts
    ✓ #6230 Test allDocs opts update_seq: false
    ✓ #6230 Test allDocs opts update_seq: true
    ✓ #6230 Test allDocs opts with update_seq missing

  test.all_docs.js-local
    ✓ Testing all docs (38ms)
    ✓ Testing allDocs opts.keys
    ✓ Testing allDocs opts.keys with skip
    ✓ Testing allDocs opts.keys with limit
    ✓ Testing allDocs invalid opts.keys
    ✓ Testing deleting in changes
    ✓ Testing updating in changes
    ✓ Testing include docs
    ✓ Testing conflicts
    ✓ test basic collation
    ✓ 3883 start_key end_key aliases
    ✓ test total_rows with a variety of criteria
    ✓ test total_rows with both skip and limit
    ✓ test limit option and total_rows
    ✓ test escaped startkey/endkey
    ✓ test "key" option
    ✓ test inclusive_end=false
    ✓ test descending with startkey/endkey
    ✓ #3082 test wrong num results returned (201ms)
    ✓ test empty db
    ✓ test after db close
    ✓ test unicode ids and revs
    ✓ 5793 _conflicts should not exist if no conflicts
    ✓ #6230 Test allDocs opts update_seq: false
    ✓ #6230 Test allDocs opts update_seq: true
    ✓ #6230 Test allDocs opts with update_seq missing

  suite2 test.attachments.js-local
    ✓ 3357 Attachment names cant start with _
    ✓ 5736 warning for putAttachment without content_type
    ✓ 5736 warning for bulkDocs attachments without content_type
    ✓ fetch atts with open_revs and missing
    ✓ issue 2803 should throw 412
    ✓ issue 2803 should throw 412 part 2
    ✓ issue 2803 should throw 412 part 3
    ✓ issue 2803 should throw 412 part 4
    ✓ #2858 {binary: true} in get()
    ✓ #2858 {binary: true} in allDocs() 1
    ✓ #2858 {binary: true} in allDocs() 2
    ✓ #2858 {binary: true} in allDocs() 3
    ✓ #2858 {binary: true} in allDocs() 4
    ✓ #2858 {binary: true} in allDocs() 5
    ✓ #2858 {binary: true} in allDocs(), many atts
    ✓ #2858 {binary: true} in allDocs(), mixed atts
    ✓ #2858 {binary: true} in changes() non-live
    ✓ #2858 {binary: true} in changes() non-live, many atts
    ✓ #2858 {binary: true} in changes() non-live, mixed atts
    ✓ #2858 {binary: true} non-live changes, complete event
    ✓ #2858 {binary: true} in live changes
    ✓ #2858 {binary: true} in live changes, mixed atts
    ✓ #2858 {binary: true} in live+retry changes
    ✓ #2858 {binary: true} in live changes, attachments:false
    ✓ #2858 {binary: true} in live changes, include_docs:false
    ✓ #6736 {binary: true} in bulkGet()
    ✓ Measures length correctly after put()
    ✓ #3074 non-live changes()
    ✓ #3074 live changes()
    ✓ #3074 non-live changes(), no attachments
    ✓ #3074 live changes(), no attachments
    ✓ #3881 filter extraneous keys from _attachments
    ✓ #2771 allDocs() 1, single attachment
    ✓ #2771 allDocs() 2, many docs same att
    ✓ #2771 allDocs() 3, many docs diff atts
    ✓ #2771 allDocs() 4, mix of atts and no atts
    ✓ #2771 allDocs() 5, no atts
    ✓ #2771 allDocs() 6, no docs
    ✓ #2771 allDocs() 7, revisions and deletions
    ✓ #2771 allDocs() 8, empty attachment
    ✓ No length for non-stubs
    ✓ Test some attachments
    ✓ Test getAttachment
    ✓ Test getAttachment with stubs
    ✓ Test get() with binary:true and stubs
    ✓ Test attachments in allDocs/changes
    ✓ Test putAttachment with base64 plaintext
    ✓ Test putAttachment with invalid base64
    ✓ Test getAttachment with empty text
    ✓ Test getAttachment with normal text
    ✓ Test getAttachment with PNG
    ✓ Test getAttachment with PNG using bulkDocs
    ✓ Test getAttachment with PNG using post
    ✓ Test postAttachment with PNG then bulkDocs
    ✓ proper stub behavior
    ✓ Testing with invalid docs
    ✓ Test create attachment and doc in one go
    ✓ Test create attachment and doc in one go without callback
    ✓ Test create attachment without callback
    ✓ Test put attachment on a doc without attachments
    ✓ Test put attachment with unencoded name
    ✓ 3963 length property on stubs
    ✓ Testing with invalid rev
    ✓ Test put another attachment on a doc with attachments
    ✓ Test get with attachments: true if empty attachments
    ✓ Test delete attachment from a doc
    ✓ Test a document with a json string attachment
    ✓ Test remove doc with attachment
    ✓ Try to insert a doc with unencoded attachment
    ✓ Try to get attachment of unexistent doc
    ✓ Test synchronous putAttachment with text data
    ✓ Test synchronous putAttachment with no text data
    ✓ Test put with partial stubs
    ✓ Test put with attachments and new_edits=false
    ✓ Test getAttachment with specific rev
    ✓ Test getAttachment with diff revs and content
    ✓ Test stubs
    ✓ Try to get unexistent attachment of some doc
    ✓ putAttachment and getAttachment with plaintext
    ✓ putAttachment and getAttachment with png data
    ✓ putAttachment in new doc with base64
    ✓ #2818 - save same attachment in different revs
    ✓ #2818 - save same attachment many times in parallel
    ✓ #2818 - revisions keep attachments (no compaction)
    ✓ #2818 - doesn't throw 409 if same filename
    ✓ #3008 test correct encoding/decoding of \u0000 etc.
    ✓ putAttachment and getAttachment with big png data (127ms)
    ✓ #2709 `revpos` with putAttachment
    ✓ #2709 `revpos` with inline attachment
    ✓ #2709 `revpos` with allDocs
    ✓ #7403 {attachments: true, binary: true, include_docs: true} in allDocs with one missing doc

  suite2 test.attachments.js-http
    ✓ 3357 Attachment names cant start with _
    ✓ 5736 warning for putAttachment without content_type
    ✓ 5736 warning for bulkDocs attachments without content_type
    ✓ fetch atts with open_revs and missing
    ✓ issue 2803 should throw 412
    ✓ issue 2803 should throw 412 part 2
    ✓ issue 2803 should throw 412 part 3
    ✓ issue 2803 should throw 412 part 4
    ✓ #2858 {binary: true} in get()
    ✓ #2858 {binary: true} in allDocs() 1
    ✓ #2858 {binary: true} in allDocs() 2
    ✓ #2858 {binary: true} in allDocs() 3
    ✓ #2858 {binary: true} in allDocs() 4
    ✓ #2858 {binary: true} in allDocs() 5
    ✓ #2858 {binary: true} in allDocs(), many atts
    ✓ #2858 {binary: true} in allDocs(), mixed atts
    ✓ #2858 {binary: true} in changes() non-live
    ✓ #2858 {binary: true} in changes() non-live, many atts
    ✓ #2858 {binary: true} in changes() non-live, mixed atts
    ✓ #2858 {binary: true} non-live changes, complete event
    ✓ #2858 {binary: true} in live changes
    ✓ #2858 {binary: true} in live changes, mixed atts
    ✓ #2858 {binary: true} in live+retry changes
    ✓ #2858 {binary: true} in live changes, attachments:false
    ✓ #2858 {binary: true} in live changes, include_docs:false
    ✓ #6736 {binary: true} in bulkGet()
    ✓ Measures length correctly after put()
    ✓ #3074 non-live changes() (38ms)
    ✓ #3074 live changes() (39ms)
    ✓ #3074 non-live changes(), no attachments
    ✓ #3074 live changes(), no attachments
    ✓ #3881 filter extraneous keys from _attachments
    ✓ #2771 allDocs() 1, single attachment
    ✓ #2771 allDocs() 2, many docs same att
    ✓ #2771 allDocs() 3, many docs diff atts
    ✓ #2771 allDocs() 4, mix of atts and no atts
    ✓ #2771 allDocs() 5, no atts
    ✓ #2771 allDocs() 6, no docs
    ✓ #2771 allDocs() 7, revisions and deletions
    ✓ #2771 allDocs() 8, empty attachment
    ✓ No length for non-stubs
    ✓ Test some attachments (43ms)
    ✓ Test getAttachment
    ✓ Test getAttachment with stubs
    ✓ Test get() with binary:true and stubs (39ms)
    ✓ Test attachments in allDocs/changes
    ✓ Test putAttachment with base64 plaintext
    ✓ Test putAttachment with invalid base64
    ✓ Test getAttachment with empty text
    ✓ Test getAttachment with normal text
    ✓ Test getAttachment with PNG
    ✓ Test getAttachment with PNG using bulkDocs
    ✓ Test getAttachment with PNG using post
    ✓ Test postAttachment with PNG then bulkDocs
    ✓ proper stub behavior
    ✓ Testing with invalid docs
    ✓ Test create attachment and doc in one go
    ✓ Test create attachment and doc in one go without callback
    ✓ Test create attachment without callback
    ✓ Test put attachment on a doc without attachments
    ✓ Test put attachment with unencoded name (90ms)
    ✓ 3963 length property on stubs (57ms)
    ✓ Testing with invalid rev
    ✓ Test put another attachment on a doc with attachments
    ✓ Test get with attachments: true if empty attachments
    ✓ Test delete attachment from a doc (42ms)
    ✓ Test a document with a json string attachment
    ✓ Test remove doc with attachment
    ✓ Try to insert a doc with unencoded attachment
    ✓ Try to get attachment of unexistent doc
    ✓ Test synchronous putAttachment with text data
    ✓ Test synchronous putAttachment with no text data
    ✓ Test put with partial stubs
    ✓ Test put with attachments and new_edits=false
    ✓ Test getAttachment with specific rev (38ms)
    ✓ Test getAttachment with diff revs and content (38ms)
    ✓ Test stubs
    ✓ Try to get unexistent attachment of some doc
    ✓ putAttachment and getAttachment with plaintext
    ✓ putAttachment and getAttachment with png data
    ✓ putAttachment in new doc with base64
    ✓ #2818 - save same attachment in different revs (58ms)
    ✓ #2818 - save same attachment many times in parallel
    ✓ #2818 - revisions keep attachments (no compaction)
    ✓ #2818 - doesn't throw 409 if same filename
    ✓ #3008 test correct encoding/decoding of \u0000 etc.
    ✓ putAttachment and getAttachment with big png data (109ms)
    ✓ #2709 `revpos` with putAttachment (39ms)
    ✓ #2709 `revpos` with inline attachment
    ✓ #2709 `revpos` with allDocs
    ✓ #7403 {attachments: true, binary: true, include_docs: true} in allDocs with one missing doc

  suite2 test.attachments.js- local:http
    ✓ Attachments replicate back and forth (142ms)
    ✓ Replicate same doc, same atts (133ms)
    ✓ Replicate same doc, same atts 2 (107ms)
    ✓ Attachments replicate (72ms)
    ✓ Attachment types replicate (53ms)
    ✓ Many many attachments replicate (186ms)
    ✓ Many many png attachments replicate (227ms)
    ✓ Multiple attachments replicate (74ms)
    - #3961 Many attachments on same doc
    ✓ Multiple attachments replicate, different docs (#2698) (90ms)
    ✓ Multiple attachments replicate, different docs png (#2698) (67ms)
    ✓ #3932 attachments with tricky revpos (133ms)
    ✓ replication with changing attachments (98ms)
    ✓ 3955 race condition in put
    ✓ #8456 bad attachment rev after replication (127ms)

  suite2 test.attachments.js- http:http
    ✓ Attachments replicate back and forth (156ms)
    ✓ Replicate same doc, same atts (196ms)
    ✓ Replicate same doc, same atts 2 (174ms)
    ✓ Attachments replicate (79ms)
    ✓ Attachment types replicate (84ms)
    ✓ Many many attachments replicate (376ms)
    ✓ Many many png attachments replicate (282ms)
    ✓ Multiple attachments replicate (117ms)
    - #3961 Many attachments on same doc
    ✓ Multiple attachments replicate, different docs (#2698) (115ms)
    ✓ Multiple attachments replicate, different docs png (#2698) (123ms)
    ✓ #3932 attachments with tricky revpos (221ms)
    ✓ replication with changing attachments (151ms)
    ✓ 3955 race condition in put
    ✓ #8456 bad attachment rev after replication (155ms)

  suite2 test.attachments.js- http:local
    ✓ Attachments replicate back and forth (102ms)
    ✓ Replicate same doc, same atts (92ms)
    ✓ Replicate same doc, same atts 2 (92ms)
    ✓ Attachments replicate (52ms)
    ✓ Attachment types replicate (61ms)
    ✓ Many many attachments replicate (191ms)
    ✓ Many many png attachments replicate (142ms)
    ✓ Multiple attachments replicate (93ms)
    - #3961 Many attachments on same doc
    ✓ Multiple attachments replicate, different docs (#2698) (72ms)
    ✓ Multiple attachments replicate, different docs png (#2698) (82ms)
    ✓ #3932 attachments with tricky revpos (137ms)
    ✓ replication with changing attachments (91ms)
    ✓ 3955 race condition in put
    ✓ #8456 bad attachment rev after replication (115ms)

  suite2 test.attachments.js- local:local
    ✓ Attachments replicate back and forth
    ✓ Replicate same doc, same atts
    ✓ Replicate same doc, same atts 2
    ✓ Attachments replicate
    ✓ Attachment types replicate
    ✓ Many many attachments replicate
    ✓ Many many png attachments replicate
    ✓ Multiple attachments replicate
    - #3961 Many attachments on same doc
    ✓ Multiple attachments replicate, different docs (#2698)
    ✓ Multiple attachments replicate, different docs png (#2698)
    ✓ #3932 attachments with tricky revpos
    ✓ replication with changing attachments
    ✓ 3955 race condition in put
    ✓ #8456 bad attachment rev after replication

  test.basics.js-http
    ✓ Create a pouch without new keyword
    ✓ Name is accessible via instance
    ✓ 4314 Create a pouch with + in name
    ✓ Creating Pouch without name will throw
    ✓ 4314 Create a pouch with urlencoded name
    ✓ 4219 destroy a pouch
    ✓ 4339 throw useful error if method called on stale instance
    ✓ [4595] should reject xhr errors
    ✓ [4595] should emit error event on xhr error
    ✓ Add a doc
    ✓ Get invalid id
    ✓ Missing doc should contain ID in error object
    ✓ PUTed Conflicted doc should contain ID in error object
    ✓ POSTed Conflicted doc should contain ID in error object
    ✓ Add a doc with a promise
    ✓ Add a doc with opts object
    ✓ Modify a doc
    ✓ Modifying a doc that has rewritten content (41ms)
    ✓ Modify a doc with a promise
    ✓ Read db id
    ✓ Read db id with promise
    ✓ Close db
    ✓ Close db with a promise
    ✓ Read db id after closing Close
    ✓ Modify a doc with incorrect rev
    ✓ Remove doc
    ✓ Remove doc with a promise
    ✓ Remove doc with new syntax
    ✓ Remove doc with new syntax and a promise
    ✓ Doc removal leaves only stub
    ✓ Remove doc twice with specified id
    ✓ Remove doc, no callback
    ✓ Delete document without id
    ✓ Delete document with many args
    ✓ Delete document with many args, callback style
    ✓ Delete doc with id + rev + no opts
    ✓ Delete doc with id + rev + no opts, callback style
    ✓ Delete doc with doc + opts
    ✓ Delete doc with doc + opts, callback style
    ✓ Delete doc with rev in opts
    ✓ Bulk docs
    ✓ Bulk docs with a promise
    ✓ Basic checks
    ✓ update with invalid rev
    ✓ Doc validation
    ✓ Replication fields (#2442)
    ✓ Testing issue #48 (54ms)
    ✓ Testing valid id
    ✓ Put doc without _id should fail
    ✓ Put doc with bad reserved id should fail
    ✓ update_seq persists
    ✓ deletions persists (38ms)
    ✓ #4126 should not store raw Dates
    ✓ Create a db with a reserved name
    ✓ Error when document is not an object
    ✓ Test instance update_seq updates correctly
    ✓ Fail to fetch a doc after db was deleted (49ms)
    ✓ Fail to fetch a doc after db was deleted (52ms)
    ✓ Cant add docs with empty ids
    ✓ Test doc with percent in ID
    ✓ db.info should give auto_compaction = false (#2744)
    ✓ db.info should give auto_compaction = true (#2744)
    ✓ db.info should give adapter name (#3567)
    ✓ db.info should give correct doc_count
    ✓ putting returns {ok: true}
    ✓ putting is override-able
    ✓ issue 2779, deleted docs, old revs COUCHDB-292
    ✓ issue 2888, successive deletes and writes
    ✓ 2 invalid puts
    ✓ Docs save "null" value
    ✓ replace PouchDB.destroy() (express-pouchdb#203)
    ✓ 3968, keeps all object fields
    ✓ 4712 invalid rev for new doc generates conflict
    ✓ test info() after db close
    ✓ test get() after db close
    ✓ test close() after db close
    ✓ 7259 should have "this" keyword properly scoped
    ✓ #5471 PouchDB.plugin() should throw error if passed wrong type or empty object

  test.basics.js-local
    ✓ Create a pouch without new keyword
    ✓ Name is accessible via instance
    ✓ 4314 Create a pouch with + in name
    ✓ Creating Pouch without name will throw
    ✓ 4314 Create a pouch with urlencoded name
    ✓ 4219 destroy a pouch
    ✓ 4339 throw useful error if method called on stale instance
    ✓ [4595] should reject xhr errors
    ✓ [4595] should emit error event on xhr error
    ✓ Add a doc
    ✓ Get invalid id
    ✓ Missing doc should contain ID in error object
    ✓ PUTed Conflicted doc should contain ID in error object
    ✓ POSTed Conflicted doc should contain ID in error object
    ✓ Add a doc with a promise
    ✓ Add a doc with opts object
    ✓ Modify a doc
    ✓ Modifying a doc that has rewritten content
    ✓ Modify a doc with a promise
    ✓ Read db id
    ✓ Read db id with promise
    ✓ Close db
    ✓ Close db with a promise
    ✓ Read db id after closing Close
    ✓ Modify a doc with incorrect rev
    ✓ Remove doc
    ✓ Remove doc with a promise
    ✓ Remove doc with new syntax
    ✓ Remove doc with new syntax and a promise
    ✓ Doc removal leaves only stub
    ✓ Remove doc twice with specified id
    ✓ Remove doc, no callback
    ✓ Delete document without id
    ✓ Delete document with many args
    ✓ Delete document with many args, callback style
    ✓ Delete doc with id + rev + no opts
    ✓ Delete doc with id + rev + no opts, callback style
    ✓ Delete doc with doc + opts
    ✓ Delete doc with doc + opts, callback style
    ✓ Delete doc with rev in opts
    ✓ Bulk docs
    ✓ Bulk docs with a promise
    ✓ Basic checks
    ✓ update with invalid rev
    ✓ Doc validation
    ✓ Replication fields (#2442)
    ✓ Allows _access field in documents (#8171)
    ✓ Testing issue #48 (52ms)
    ✓ Testing valid id
    ✓ Put doc without _id should fail
    ✓ Put doc with bad reserved id should fail
    ✓ update_seq persists
    ✓ deletions persists
    ✓ #4126 should not store raw Dates
    ✓ Create a db with a reserved name
    ✓ Error when document is not an object
    ✓ Test instance update_seq updates correctly
    ✓ Fail to fetch a doc after db was deleted
    ✓ Fail to fetch a doc after db was deleted
    ✓ Cant add docs with empty ids
    ✓ Test doc with percent in ID
    ✓ db.info should give auto_compaction = false (#2744)
    ✓ db.info should give auto_compaction = true (#2744)
    ✓ db.info should give adapter name (#3567)
    ✓ db.info should give correct doc_count
    ✓ putting returns {ok: true}
    ✓ putting is override-able
    ✓ issue 2779, deleted docs, old revs COUCHDB-292
    ✓ issue 2888, successive deletes and writes
    ✓ 2 invalid puts
    ✓ Docs save "null" value
    ✓ replace PouchDB.destroy() (express-pouchdb#203)
    ✓ 3968, keeps all object fields
    ✓ 4712 invalid rev for new doc generates conflict
    ✓ test info() after db close
    ✓ test get() after db close
    ✓ test close() after db close
    ✓ 7259 should have "this" keyword properly scoped
    ✓ should allow unicode doc ids
    ✓ should have same blob support for 2 dbs
    ✓ 6053, PouchDB.plugin() resets defaults
    ✓ #5471 PouchDB.plugin() should throw error if passed wrong type or empty object

  test.bulk_docs.js-local
    ✓ Testing bulk docs
    ✓ #6039 test id in bulk docs for conflict
    ✓ No id in bulk docs
    ✓ No _rev and new_edits=false
    ✓ 7829 bare rev 1- with new_edits=false
    ✓ Test empty bulkDocs
    ✓ Test many bulkDocs (41ms)
    ✓ Test errors on invalid doc id
    ✓ Test two errors on invalid doc id
    ✓ No docs
    ✓ Jira 911
    ✓ Test multiple bulkdocs
    ✓ #2935 new_edits=false correct number
    ✓ #2935 new_edits=false correct number 2
    ✓ bulk docs update then delete then conflict
    ✓ bulk_docs delete then undelete
    ✓ #2935 new_edits=false with single unauthorized
    ✓ Deleting _local docs with bulkDocs
    ✓ Deleting _local docs with bulkDocs, not found
    ✓ Deleting _local docs with bulkDocs, wrong rev
    ✓ Bulk with new_edits=false
    ✓ Testing successive new_edits to the same doc
    ✓ #3062 bulkDocs with staggered seqs
    ✓ Testing successive new_edits to the same doc, different content
    ✓ Testing successive new_edits to two doc
    ✓ Deletion with new_edits=false
    ✓ Deletion with new_edits=false, no history
    ✓ Modification with new_edits=false, no history
    ✓ Deletion with new_edits=false, no history, no revisions
    ✓ Testing new_edits=false in req body
    ✓ 656 regression in handling deleted docs
    ✓ Test quotes in doc ids
    ✓ Bulk docs empty list
    ✓ handles simultaneous writes
    ✓ bulk docs input by array
    ✓ Bulk empty list
    ✓ Bulk docs not an array
    ✓ Bulk docs not an object
    ✓ Bulk docs two different revisions to same document id
    ✓ 4204 respect revs_limit (310ms)
    ✓ 2839 implement revs_limit (182ms)
    ✓ 4372 revs_limit deletes old revisions of the doc
    ✓ 4372 revs_limit with auto_compaction deletes old revisions of the doc
    ✓ 4712 invalid rev for new doc generates conflict
    ✓ 5793 bulk docs accepts _conflicts when new_edits=false

  test.bulk_docs.js-http
    ✓ Testing bulk docs
    ✓ #6039 test id in bulk docs for conflict
    ✓ No id in bulk docs
    ✓ No _rev and new_edits=false
    ✓ 7829 bare rev 1- with new_edits=false
    ✓ Test empty bulkDocs
    ✓ Test many bulkDocs
    ✓ Test errors on invalid doc id
    ✓ Test two errors on invalid doc id
    ✓ No docs
    ✓ Jira 911
    ✓ Test multiple bulkdocs
    ✓ #2935 new_edits=false correct number
    ✓ #2935 new_edits=false correct number 2
    ✓ bulk docs update then delete then conflict
    ✓ bulk_docs delete then undelete
    ✓ #2935 new_edits=false with single unauthorized
    ✓ Deleting _local docs with bulkDocs
    ✓ Bulk with new_edits=false
    ✓ Testing successive new_edits to the same doc
    ✓ #3062 bulkDocs with staggered seqs
    ✓ Testing successive new_edits to the same doc, different content
    ✓ Testing successive new_edits to two doc
    ✓ Deletion with new_edits=false
    ✓ Deletion with new_edits=false, no history
    ✓ Modification with new_edits=false, no history
    ✓ Deletion with new_edits=false, no history, no revisions
    ✓ Testing new_edits=false in req body
    ✓ 656 regression in handling deleted docs
    ✓ Test quotes in doc ids
    ✓ Bulk docs empty list
    ✓ handles simultaneous writes
    ✓ bulk docs input by array
    ✓ Bulk empty list
    ✓ Bulk docs not an array
    ✓ Bulk docs not an object
    ✓ Bulk docs two different revisions to same document id
    ✓ 4204 respect revs_limit (272ms)
    ✓ 2839 implement revs_limit
    ✓ 4372 revs_limit deletes old revisions of the doc
    ✓ 4372 revs_limit with auto_compaction deletes old revisions of the doc
    ✓ 4712 invalid rev for new doc generates conflict
    ✓ 5793 bulk docs accepts _conflicts when new_edits=false

  test.bulk_get.js-http
    ✓ test bulk get with rev specified
    ✓ test bulk get with latest=true
    ✓ test bulk get with no rev specified
    ✓ _revisions is not returned by default
    ✓ #5886 bulkGet with reserved id
    ✓ _revisions is returned when specified
    ✓ _revisions is returned when specified, using implicit rev
    ✓ attachments are not included by default
    ✓ attachments are included when specified
    ✓ attachments are included when specified, using implicit rev

  test.bulk_get.js-local
    ✓ test bulk get with rev specified
    ✓ test bulk get with latest=true
    ✓ test bulk get with no rev specified
    ✓ _revisions is not returned by default
    ✓ #5886 bulkGet with reserved id
    ✓ _revisions is returned when specified
    ✓ _revisions is returned when specified, using implicit rev
    ✓ attachments are not included by default
    ✓ attachments are included when specified
    ✓ attachments are included when specified, using implicit rev

  test.changes.js-http
    ✓ All changes
    ✓ Changes with complete callback as param
    ✓ Promise resolved when changes cancelled
    - Live changes should clean listener when cancelled
    ✓ Changes Since
    ✓ Changes Since and limit limit 1
    ✓ Changes Since and limit limit 0
    ✓ Changes limit
    ✓ Changes with filter not present in ddoc
    ✓ Changes with `filters` key not present in ddoc
    ✓ Changes limit and filter (39ms)
    ✓ Changes with shorthand function name
    ✓ Changes with filter from nonexistent ddoc
    ✓ Changes with view not present in ddoc
    ✓ Changes with `views` key not present in ddoc
    ✓ #4451 Changes with invalid view filter
    ✓ 3356 throw inside a filter
    ✓ Changes with missing param `view` in request
    ✓ Changes limit and view instead of filter
    ✓ #3609 view option implies filter: _view
    ✓ Immediately cancel changes
    ✓ Changes with invalid ddoc view name
    ✓ Changes with invalid ddoc view name 2
    ✓ Changes with style = all_docs (58ms)
    ✓ Changes with style = all_docs and a callback for complete (54ms)
    ✓ Changes limit = 0
    ✓ Changes doc
    - Descending many changes
    ✓ live-changes
    ✓ Multiple watchers
    ✓ Continuous changes doc
    ✓ Cancel changes (324ms)
    ✓ #3579 changes firing 1 too many times (77ms)
    ✓ Kill database while listening to live changes
    ✓ #3136 style=all_docs
    ✓ #4191 revs_diff causes endless loop
    ✓ #3136 style=all_docs & include_docs
    ✓ changes-filter with query params
    ✓ Non-live changes filter
    ✓ Non-live changes filter, descending
    ✓ #2569 Non-live doc_ids filter
    ✓ #2569 Big non-live doc_ids filter
    ✓ #2569 Live doc_ids filter
    ✓ #2569 Big live doc_ids filter
    ✓ #2569 Non-live doc_ids filter with filter=_doc_ids
    ✓ #2569 Live doc_ids filter with filter=_doc_ids
    ✓ Changes to same doc are grouped
    ✓ Changes with conflicts are handled correctly (122ms)
    ✓ Change entry for a deleted doc
    ✓ changes large number of docs (42ms)
    ✓ Calling db.changes({since: 'now'})
    ✓ Calling db.changes({since: 'latest'})
    ✓ Closing db does not cause a crash if changes cancelled
    ✓ fire-complete-on-cancel (102ms)
    ✓ changes are not duplicated (1023ms)
    ✓ supports return_docs=false
    ✓ should respects limit (72ms)
    ✓ doesn't throw if opts.complete is undefined
    ✓ handle individual changes in live replication (171ms)
    ✓ changes-filter without filter
    ✓ #3539 - Exception in changes is fine
    ✓ Changes with selector
    ✓ Changes with selector, explicit filter
    ✓ Changes with selector and mismatched filter
    ✓ Changes with limit and selector

  test.changes.js-local
    ✓ All changes
    ✓ Changes with complete callback as param
    ✓ Promise resolved when changes cancelled
    - Live changes should clean listener when cancelled
    ✓ Changes Since
    ✓ Changes Since and limit limit 1
    ✓ Changes Since and limit limit 0
    ✓ Changes limit
    ✓ Changes with filter not present in ddoc
    ✓ Changes with `filters` key not present in ddoc
    ✓ Changes limit and filter
    ✓ Changes with shorthand function name
    ✓ Changes with filter from nonexistent ddoc
    ✓ Changes with view not present in ddoc
    ✓ Changes with `views` key not present in ddoc
    ✓ #4451 Changes with invalid view filter
    ✓ 3356 throw inside a filter
    ✓ Changes with missing param `view` in request
    ✓ Changes limit and view instead of filter
    ✓ #3609 view option implies filter: _view
    ✓ Immediately cancel changes
    ✓ Changes with invalid ddoc view name
    ✓ Changes with invalid ddoc view name 2
    ✓ Changes with style = all_docs
    ✓ Changes with style = all_docs and a callback for complete
    ✓ Changes limit = 0
    ✓ Changes doc
    - Descending many changes
    ✓ live-changes
    ✓ Multiple watchers
    ✓ Continuous changes doc
    ✓ Cancel changes (315ms)
    ✓ #3579 changes firing 1 too many times (67ms)
    ✓ Kill database while listening to live changes
    ✓ #3136 style=all_docs
    ✓ #4191 revs_diff causes endless loop
    ✓ #3136 style=all_docs & include_docs
    ✓ changes-filter with query params
    ✓ Non-live changes filter
    ✓ Non-live changes filter, descending
    ✓ #2569 Non-live doc_ids filter
    ✓ #2569 Big non-live doc_ids filter
    ✓ #2569 Live doc_ids filter
    ✓ #2569 Big live doc_ids filter
    ✓ #2569 Non-live doc_ids filter with filter=_doc_ids
    ✓ #2569 Live doc_ids filter with filter=_doc_ids
    ✓ Changes to same doc are grouped
    ✓ Changes with conflicts are handled correctly
    ✓ Change entry for a deleted doc
    ✓ changes large number of docs
    ✓ Calling db.changes({since: 'now'})
    ✓ Calling db.changes({since: 'latest'})
    ✓ Closing db does not cause a crash if changes cancelled
    ✓ fire-complete-on-cancel (101ms)
    ✓ changes are not duplicated (1016ms)
    ✓ supports return_docs=false
    ✓ should respects limit (65ms)
    ✓ doesn't throw if opts.complete is undefined
    ✓ handle individual changes in live replication (141ms)
    ✓ changes-filter without filter
    ✓ #3539 - Exception in changes is fine
    ✓ Changes with selector
    ✓ Changes with selector, explicit filter
    ✓ Changes with selector and mismatched filter
    ✓ Changes with limit and selector

  changes-standalone
    - Changes reports errors

  test.close.js-local
    ✓ should emit destroyed even when closed (sync)
    ✓ should emit destroyed even when closed (async)
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ should emit closed even when destroyed (async #2)
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test unref for coverage
    ✓ test double unref for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test close-then-destroyed for coverage
    ✓ test destroy-then-close for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test destroy-then-close-and-close for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47

  test.close.js-http
    ✓ should emit destroyed even when closed (sync)
    ✓ should emit destroyed even when closed (async)
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ should emit closed even when destroyed (async #2)
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test unref for coverage
    ✓ test double unref for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test close-then-destroyed for coverage
    ✓ test destroy-then-close for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
    ✓ test destroy-then-close-and-close for coverage
precondition_failed: Database not open
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/packages/node_modules/pouchdb/lib/index.js:614:16)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.commonUtils.loadPouchDBForNode (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:92:17)
    at Object.commonUtils.loadPouchDB (/data/js-variants/multee/Clients/memdown/pouchdb/tests/common-utils.js:78:39)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/tests/integration/node.setup.js:21:28)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at /data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:366:3
    at Array.forEach (<anonymous>)
    at Object.<anonymous> (/data/js-variants/multee/Clients/memdown/pouchdb/node_modules/mocha/bin/_mocha:365:10)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47

  suite2 test.compaction.js-http
    ✓ #3350 compact should return {ok: true}
    ✓ compact with options object
    ✓ #2913 massively parallel compaction (641ms)
    ✓ Compaction document with no revisions to remove
    ✓ Compation on empty db
    ✓ Compation on empty db with interval option
    ✓ Simple compation test
    ✓ Compact more complicated tree (101ms)
    ✓ Compact two times more complicated tree (94ms)
    ✓ Compact database with at least two documents (159ms)
    ✓ Compact deleted document
    ✓ Compact db with sql-injecty doc id
    ✓ Compaction removes non-leaf revs (#2807) (65ms)
    ✓ Compaction removes non-leaf revs pt 2 (#2807) (51ms)
    ✓ Compaction removes non-leaf revs pt 3 (#2807) (41ms)
    - Compaction removes non-leaf revs pt 4 (#2807)
    ✓ Compaction removes non-leaf revs pt 5 (#2807)
    ✓ #2931 - synchronous putAttachment + compact (1257ms)
    ✓ #2931 - synchronous putAttachment + compact 2 (1341ms)

  suite2 test.compaction.js-local
    ✓ #3350 compact should return {ok: true}
    ✓ compact with options object
    ✓ #2913 massively parallel compaction (282ms)
    ✓ Compaction document with no revisions to remove
    ✓ Compation on empty db
    ✓ Compation on empty db with interval option
    ✓ Simple compation test
    ✓ Compact more complicated tree
    ✓ Compact two times more complicated tree
    ✓ Compact database with at least two documents
    ✓ Compact deleted document
    ✓ Compact db with sql-injecty doc id
    ✓ Compaction removes non-leaf revs (#2807)
    ✓ Compaction removes non-leaf revs pt 2 (#2807)
    ✓ Compaction removes non-leaf revs pt 3 (#2807)
    - Compaction removes non-leaf revs pt 4 (#2807)
    ✓ Compaction removes non-leaf revs pt 5 (#2807)
    ✓ #2931 - synchronous putAttachment + compact (298ms)
    ✓ #2931 - synchronous putAttachment + compact 2 (319ms)

  test.conflicts.js-http
    ✓ Testing conflicts (38ms)
    ✓ Testing conflicts
    ✓ force put ok on 1st level
    ✓ force put ok on 2nd level
    ✓ Conflict resolution 1
    ✓ Conflict resolution 2
    ✓ Conflict resolution 3
    ✓ Conflict resolution 4-a
    ✓ Conflict resolution 4-b
    ✓ Conflict resolution 4-c
    ✓ Conflict resolution 4-d
    ✓ Conflict resolution 4-e
    ✓ Conflict resolution 5-a
    ✓ Conflict resolution 5-b
    ✓ Conflict resolution 5-c
    ✓ #2543 excessive recursion with merging (583ms)
    ✓ 5832 - update losing leaf returns correct rev (44ms)

  test.conflicts.js-local
    ✓ Testing conflicts
    ✓ Testing conflicts
    ✓ force put ok on 1st level
    ✓ force put ok on 2nd level
    ✓ Conflict resolution 1
    ✓ Conflict resolution 2
    ✓ Conflict resolution 3
    ✓ Conflict resolution 4-a
    ✓ Conflict resolution 4-b
    ✓ Conflict resolution 4-c
    ✓ Conflict resolution 4-d
    ✓ Conflict resolution 4-e
    ✓ Conflict resolution 5-a
    ✓ Conflict resolution 5-b
    ✓ Conflict resolution 5-c
    ✓ #2543 excessive recursion with merging (618ms)
    ✓ 5832 - update losing leaf returns correct rev

  constructor errors
    ✓ should error on an undefined name
    ✓ should error on an undefined adapter
    ✓ should error on an undefined view adapter
    ✓ should error on a null name

  defaults
    ✓ should allow prefixes
    ✓ Defaults leaks eventEmitters
    ✓ should allow us to set a prefix by default
    ✓ should allow us to use memdown
    ✓ should allow us to destroy memdown
    ✓ should allow us to use memdown by default
    ✓ should inform us when using memdown
    ✓ constructor emits destroyed when using defaults
    ✓ db emits destroyed when using defaults
    ✓ constructor emits creation event
    ✓ PouchDB emits destroyed when using defaults
    ✓ PouchDB emits created when using defaults
    ✓ should be transitive (#5922)

  test.design_docs.js-http
    ✓ Test writing design doc
    ✓ Changes filter
    ✓ Basic views (57ms)
    ✓ Indexing event
    ✓ Concurrent queries (44ms)

  test.design_docs.js-local
    ✓ Test writing design doc
    ✓ Changes filter
    ✓ Basic views (65ms)
    ✓ Indexing event (52ms)
    ✓ Concurrent queries (38ms)

  test.deterministicrevs.js-local
    ✓ deterministic_revs=true so revision for two docs that are the same will be equal
    ✓ deterministic_revs=false so revision for two docs that are the same will be different
    ✓ includes revision in md5 hash
    ✓ replication and then update and delete creates same rev

  test.events.js-local
    ✓ PouchDB emits creation event
    ✓ PouchDB emits destruction event
    ✓ PouchDB emits destruction event on PouchDB object
    ✓ PouchDB emits destroyed when using {name: foo}
    ✓ db emits destroyed on all DBs
    ✓ 3900 db emits destroyed event
    ✓ 3900 db emits destroyed event 2
    ✓ emit creation event
    ✓ #4168 multiple constructor calls don't leak listeners
    ✓ 4922 Destroyed is not called twice (64ms)

  test.events.js-http
    ✓ PouchDB emits creation event
    ✓ PouchDB emits destruction event
    ✓ PouchDB emits destruction event on PouchDB object
    ✓ PouchDB emits destroyed when using {name: foo}
    ✓ db emits destroyed on all DBs
    ✓ 3900 db emits destroyed event
    ✓ 3900 db emits destroyed event 2
    ✓ emit creation event
    ✓ #4168 multiple constructor calls don't leak listeners
    ✓ 4922 Destroyed is not called twice (68ms)

  test.failures.js
    invalid path
      ✓ fails gracefully in first API call
      ✓ fails gracefully in first changes() call
      ✓ fails for all API calls
    error stack
      ✓ INVALID_ID error stack

  test.get.js-http
    ✓ Get doc
    ✓ Get design doc
    ✓ Check error of deleted document
    ✓ Get revisions of removed doc
    ✓ Testing get with rev (50ms)
    ✓ Testing rev format
    ✓ Test opts.revs=true with rev other than winning (44ms)
    ✓ Test opts.revs=true return only winning branch (46ms)
    ✓ Test get with simple revs_info
    ✓ Test get with revs_info on tree (45ms)
    ✓ #2951 Parallelized gets with 409s/404s (75ms)
    ✓ #2951 Parallelized _local gets with 409s/404s (55ms)
    ✓ Test get with conflicts (45ms)
    ✓ Retrieve old revision
    ✓ Testing get open_revs="all" (41ms)
    - Testing get with some open_revs
    ✓ Testing get with open_revs and revs
    - Testing get with open_revs on nonexistent doc
    ✓ Testing get with open_revs with wrong params
    ✓ #5883 Testing with duplicate rev hash
    ✓ 5857 - open_revs with latest=true
    ✓ 5857 - multiple open_revs for the same branch with latest=true returns one result
    ✓ 5857 - GET old revision with latest=true
    ✓ 5857 - GET old revision with latest=true, deleted leaf
    ✓ 5857 - GET losing, old revision with latest=true
    ✓ 5857 - GET open_revs losing, old revision with latest=true
    ✓ 5857 - GET open_revs losing and winning branches with latest=true
    - These fail due to COUCHDB-3239 and COUCHDB-3240

  test.get.js-local
    ✓ Get doc
    ✓ Get design doc
    ✓ Check error of deleted document
    ✓ Get revisions of removed doc
    ✓ Testing get with rev
    ✓ Testing rev format
    ✓ Test opts.revs=true with rev other than winning
    ✓ Test opts.revs=true return only winning branch
    ✓ Test get with simple revs_info
    ✓ Test get with revs_info on tree
    ✓ #2951 Parallelized gets with 409s/404s (84ms)
    ✓ #2951 Parallelized _local gets with 409s/404s
    ✓ Test get with conflicts
    ✓ Retrieve old revision
    ✓ Testing get open_revs="all"
    - Testing get with some open_revs
    ✓ Testing get with open_revs and revs
    - Testing get with open_revs on nonexistent doc
    ✓ Testing get with open_revs with wrong params
    ✓ #5883 Testing with duplicate rev hash
    ✓ 5857 - open_revs with latest=true
    ✓ 5857 - multiple open_revs for the same branch with latest=true returns one result
    ✓ 5857 - GET old revision with latest=true
    ✓ 5857 - GET old revision with latest=true, deleted leaf
    ✓ 5857 - GET losing, old revision with latest=true
    ✓ 5857 - GET open_revs losing, old revision with latest=true
    ✓ 5857 - GET open_revs losing and winning branches with latest=true
    - These fail due to COUCHDB-3239 and COUCHDB-3240

  test.http.js
    ✓ Create a pouch without DB setup (skip_setup)
    ✓ Issue 1269 redundant _changes requests
    ✓ handle ddocs with slashes
    ✓ Properly escape url params #4008
    ✓ test url too long error for allDocs()
    ✓ 4358 db.info rejects when server is down (175ms)
    ✓ 4358 db.destroy rejects when server is down (235ms)
    ✓ changes respects seq_interval (41ms)
    ✓ 5814 Ensure prefix has trailing /

  replication-http-errors:
    ✓ Initial replication is ok if source returns HTTP 404 (501ms)
    ✓ Initial replication is ok if target returns HTTP 404 (500ms)
    ✓ Initial replication is ok if source and target return HTTP 200 (500ms)
    ✓ Initial replication returns err if source returns HTTP 500 (502ms)
    ✓ Initial replication returns err if target returns HTTP 500 (501ms)
    ✓ Initial replication returns err if target and source return HTTP 500 (500ms)
    ✓ Subsequent replication returns err if source return HTTP 500 (500ms)

  test.issue221.js-local-http
    ✓ Testing issue #221 (73ms)
    ✓ Testing issue #221 again (65ms)

  test.issue221.js-http-http
    ✓ Testing issue #221 (88ms)
    ✓ Testing issue #221 again (114ms)

  test.issue221.js-http-local
    ✓ Testing issue #221 (53ms)
    ✓ Testing issue #221 again (64ms)

  test.issue221.js-local-local
    ✓ Testing issue #221
    ✓ Testing issue #221 again

  test.issue2674.js- local-local
    ✓ Should correctly synchronize attachments (#2674) (45ms)

  test.issue2674.js- local-http
    ✓ Should correctly synchronize attachments (#2674) (203ms)

  test.issue2674.js- http-local
    ✓ Should correctly synchronize attachments (#2674) (223ms)

  test.issue2674.js- http-http
    ✓ Should correctly synchronize attachments (#2674) (366ms)

  test.issue3179.js-http-http
    ✓ #3179 conflicts synced, non-live replication (233ms)
    ✓ #3179 conflicts synced, non-live sync (309ms)
    ✓ #3179 conflicts synced, live sync (240ms)
    ✓ #3179 conflicts synced, live repl (264ms)

  test.issue3179.js-http-local
    ✓ #3179 conflicts synced, non-live replication (126ms)
    ✓ #3179 conflicts synced, non-live sync (123ms)
    ✓ #3179 conflicts synced, live sync (149ms)
    ✓ #3179 conflicts synced, live repl (154ms)

  test.issue3179.js-local-http
    ✓ #3179 conflicts synced, non-live replication (143ms)
    ✓ #3179 conflicts synced, non-live sync (145ms)
    ✓ #3179 conflicts synced, live sync (134ms)
    ✓ #3179 conflicts synced, live repl (126ms)

  test.issue3179.js-local-local
    ✓ #3179 conflicts synced, non-live replication (43ms)
    ✓ #3179 conflicts synced, non-live sync
    ✓ #3179 conflicts synced, live sync
    ✓ #3179 conflicts synced, live repl

  test.issue3646.js- local
    ✓ Should finish with 0 documents

  test.issue3646.js- http
    ✓ Should finish with 0 documents

  test.issue915.js
    ✓ Put a file in the db, then destroy it

  test.local_docs.js-http
    ✓ local docs - put then get
    ✓ local docs - put then get w/ revisions
    ✓ local docs - put then remove then get
    ✓ local docs - put after remove
    ✓ local docs - put after remove, check return vals
    ✓ local docs - remove missing
    ✓ local docs - put after put w/ deleted:true
    ✓ local docs - put after remove with a rev (39ms)
    ✓ local docs - multiple removes
    ✓ local docs - get unknown
    ✓ local docs - put unknown
    ✓ local docs - put new and conflicting
    ✓ local docs - put modified and conflicting

  test.local_docs.js-local
    ✓ local docs - put then get
    ✓ local docs - put then get w/ revisions
    ✓ local docs - put then remove then get
    ✓ local docs - put after remove
    ✓ local docs - put after remove, check return vals
    ✓ local docs - remove missing
    ✓ local docs - put after put w/ deleted:true
    ✓ local docs - put after remove with a rev
    ✓ local docs - multiple removes
    ✓ local docs - get unknown
    ✓ local docs - put unknown
    ✓ local docs - put new and conflicting
    ✓ local docs - put modified and conflicting

  migration one
    ✓ should work (39ms)

  migration two
    ✓ should work

  #2818 no migration needed for attachments
    ✓ should work

  #3136 no migration needed for overwritten revs
    ✓ should work

  test.prefix.js
    ✓ Test url prefix
    ✓ Test plain prefix

  node test.prefix.js
    ✓ Test path prefix

  suite2 test.replication.js-local-http
    ✓ Test basic pull replication (47ms)
    ✓ Test basic pull replication plain api (60ms)
    ✓ Test basic pull replication plain api 2 (61ms)
    ✓ Test pull replication with many changes (168ms)
    ✓ Test basic pull replication with funny ids (45ms)
    - pull replication with many changes + a conflict (#2543)
    ✓ Test pull replication with many conflicts (563ms)
    ✓ Test correct # docs replicated with staggered revs (95ms)
    ✓ Local DB contains documents (46ms)
    ✓ Test basic push replication (56ms)
    ✓ Test basic push replication take 2 (64ms)
    ✓ Test basic push replication sequence tracking (79ms)
    ✓ Test checkpoint (64ms)
    ✓ Test live pull checkpoint (70ms)
    ✓ Test type of progress values (79ms)
    ✓ Test live push checkpoint (87ms)
    ✓ Test checkpoint 2 (81ms)
    ✓ Test checkpoint 3 :) (67ms)
    ✓ Test disable checkpoints on both source and target (51ms)
    ✓ Test write checkpoints on source only (57ms)
    ✓ Test write checkpoints on target only (82ms)
    ✓ Test replication resumes when checkpointing is enabled (63ms)
    ✓ Test replication resumes when checkpointing is disabled (64ms)
    ✓ Test replication resumes when checkpointing on source only (67ms)
    ✓ Test replication resumes when checkpointing on target only (85ms)
    ✓ #3136 open revs returned correctly 1 (138ms)
    ✓ #3136 open revs returned correctly 2 (143ms)
    ✓ #3136 winningRev has a lower seq (118ms)
    ✓ #3136 same changes with style=all_docs (118ms)
    ✓ #3136 style=all_docs with conflicts (91ms)
    ✓ #3136 style=all_docs with conflicts reversed (98ms)
    ✓ Test checkpoint read only 3 :) (71ms)
    ✓ Testing allDocs with some conflicts (issue #468) (73ms)
    ✓ Test basic conflict (64ms)
    ✓ Test _conflicts key (62ms)
    ✓ Test basic live pull replication (62ms)
    ✓ Test basic live push replication (72ms)
    ✓ test-cancel-pull-replication (177ms)
    ✓ Test basic events (69ms)
    ✓ Replication filter (71ms)
    ✓ Replication with different filters (91ms)
    ✓ Replication doc ids (55ms)
    ✓ 2204 Invalid doc_ids
    ✓ Replication since (121ms)
    ✓ Replication with same filters (66ms)
    ✓ Replication with filter that leads to some empty batches (#2689) (74ms)
    - Empty replication updates checkpoint (#5145)
    ✓ Does not update checkpoint unncessarily (#5379) (58ms)
    ✓ Replication with deleted doc (65ms)
    ✓ 5904 - replication with deleted doc and value (70ms)
    ✓ Replication notifications (75ms)
    ✓ Replication with remote conflict (106ms)
    ✓ Replicate and modify three times (85ms)
    ✓ live replication, starting offline (50ms)
    ✓ Replicates deleted docs (issue #2636) (61ms)
    ✓ Replicates deleted docs w/ delay (issue #2636) (74ms)
    ✓ Replicates deleted docs w/ compaction (78ms)
    ✓ Replicates modified docs (issue #2636) (41ms)
    ✓ Replication of multiple remote conflicts (#789) (67ms)
    ✓ Replicate large number of docs (67ms)
    ✓ Ensure checkpoint after deletion (114ms)
    ✓ issue #1001 cb as 3rd argument (164ms)
    ✓ issue #1001 cb as 4th argument (165ms)
    ✓ #909 Filtered replication bails at paging limit (61ms)
    ✓ (#4963) Ensure successful docs are saved but seq not updated if single doc fails to replicate (90ms)
    ✓ #3999-1 should not start over if last_seq mismatches (118ms)
    ✓ #3999-2 should start over if no common session is found (136ms)
    ✓ #3999-3 should not start over if common session is found (82ms)
    ✓ #3999-4 should "upgrade" an old checkpoint (79ms)
    ✓ (#1307) - replicate empty database
    - Syncing should stop if one replication fails (issue 838)
    ✓ Reporting write failures (#942) (89ms)
    ✓ Report write failures if whole saving fails (#942) (98ms)
    ✓ Test consecutive replications with different query_params (117ms)
    ✓ Test consecutive replications with different query_params and promises (67ms)
    ✓ Test consecutive replications with different doc_ids (87ms)
    ✓ #3962 - Test many attachments (152ms)
    ✓ doc count after multiple replications (120ms)
    ✓ issue #300 rev id unique per doc (45ms)
    ✓ issue #585 Store checkpoint on target db. (85ms)
    ✓ should work with a read only source (51ms)
    ✓ issue #2342 update_seq after replication (70ms)
    ✓ should cancel for live replication (544ms)
    ✓ #2970 replicate database w/ deleted conflicted revs (55ms)
    ✓ #2268 dont stop replication if single forbidden
    ✓ #2268 dont stop replication if single unauth
    ✓ #2268 dont stop replication if many unauth
    ✓ #3171 Forbidden validate_doc_update error message
    - Test immediate replication canceling
    ✓ #3171 Unauthorized validate_doc_update error message
    ✓ #3070 Doc IDs with validate_doc_update errors
    ✓ #3270 triggers "denied" events
    ✓ #3606 - live replication with filtered ddoc (91ms)
    ✓ #3606 - live repl with filtered ddoc+query_params (49ms)
    ✓ #3606 - live repl with doc_ids (43ms)
    ✓ #3606 - live repl with view (44ms)
    ✓ #3569 - 409 during replication (117ms)
    ✓ #3270 triggers "change" events with .docs property (64ms)
    ✓ #3543 replication with a ddoc filter (77ms)
    ✓ #3578 replication with a ddoc filter w/ _deleted=true (69ms)
    ✓ #3578 replication with a ddoc filter w/ remove() (88ms)
    ✓ #2454 info() call breaks taskqueue
    ✓ #4094 can't fetch server uuid (HTTP error) (42ms)
    ✓ #7444 can't fetch server uuid (invalid JSON) (42ms)
    ✓ #4293 Triggers extra replication events (154ms)
    ✓ Heartbeat gets passed (47ms)
    ✓ Timeout gets passed (43ms)
    ✓ #5452 Cleanly fail with no unhandled promises on a bad connection
    ✓ #2426 doc_ids dont prevent replication (84ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (109ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (100ms)
    ✓ Replication filter using selector
    ✓ Invalid selector

  suite2 test.replication.js-http-http
    ✓ Test basic pull replication (84ms)
    ✓ Test basic pull replication plain api (71ms)
    ✓ Test basic pull replication plain api 2 (68ms)
    ✓ Test pull replication with many changes (210ms)
    ✓ Test basic pull replication with funny ids (64ms)
    - pull replication with many changes + a conflict (#2543)
    ✓ Test pull replication with many conflicts (657ms)
    ✓ Test correct # docs replicated with staggered revs (101ms)
    ✓ Local DB contains documents (72ms)
    ✓ Test basic push replication (64ms)
    ✓ Test basic push replication take 2 (68ms)
    ✓ Test basic push replication sequence tracking (102ms)
    ✓ Test checkpoint (87ms)
    ✓ Test live pull checkpoint (96ms)
    ✓ Test type of progress values (66ms)
    ✓ Test live push checkpoint (111ms)
    ✓ Test checkpoint 2 (99ms)
    ✓ Test checkpoint 3 :) (97ms)
    ✓ Test disable checkpoints on both source and target (70ms)
    ✓ Test write checkpoints on source only (72ms)
    ✓ Test write checkpoints on target only (66ms)
    ✓ Test replication resumes when checkpointing is enabled (94ms)
    ✓ Test replication resumes when checkpointing is disabled (79ms)
    ✓ Test replication resumes when checkpointing on source only (85ms)
    ✓ Test replication resumes when checkpointing on target only (90ms)
    ✓ #3136 open revs returned correctly 1 (283ms)
    ✓ #3136 open revs returned correctly 2 (196ms)
    ✓ #3136 winningRev has a lower seq (126ms)
    ✓ #3136 same changes with style=all_docs (132ms)
    ✓ #3136 style=all_docs with conflicts (129ms)
    ✓ #3136 style=all_docs with conflicts reversed (144ms)
    ✓ Test checkpoint read only 3 :) (87ms)
    ✓ Testing allDocs with some conflicts (issue #468) (122ms)
    ✓ Test basic conflict (70ms)
    ✓ Test _conflicts key (99ms)
    ✓ Test basic live pull replication (93ms)
    ✓ Test basic live push replication (84ms)
    ✓ test-cancel-pull-replication (193ms)
    ✓ Test basic events (66ms)
    ✓ Replication filter (79ms)
    ✓ Replication with different filters (88ms)
    ✓ Replication doc ids (66ms)
    ✓ 2204 Invalid doc_ids
    ✓ Replication since (116ms)
    ✓ Replication with same filters (145ms)
    ✓ Replication with filter that leads to some empty batches (#2689) (134ms)
    - Empty replication updates checkpoint (#5145)
    ✓ Does not update checkpoint unncessarily (#5379) (71ms)
    ✓ Replication with deleted doc (78ms)
    ✓ 5904 - replication with deleted doc and value (63ms)
    ✓ Replication notifications (56ms)
    ✓ Replication with remote conflict (128ms)
    ✓ Replicate and modify three times (174ms)
    ✓ live replication, starting offline
    ✓ Replicates deleted docs (issue #2636) (59ms)
    ✓ Replicates deleted docs w/ delay (issue #2636) (77ms)
    ✓ Replicates deleted docs w/ compaction (100ms)
    ✓ Replicates modified docs (issue #2636) (59ms)
    ✓ Replication of multiple remote conflicts (#789) (66ms)
    ✓ Replicate large number of docs (74ms)
    ✓ Ensure checkpoint after deletion (109ms)
    ✓ issue #1001 cb as 3rd argument (164ms)
    ✓ issue #1001 cb as 4th argument (164ms)
    ✓ #909 Filtered replication bails at paging limit (72ms)
    ✓ (#4963) Ensure successful docs are saved but seq not updated if single doc fails to replicate (142ms)
    ✓ #3999-1 should not start over if last_seq mismatches (107ms)
    ✓ #3999-2 should start over if no common session is found (150ms)
    ✓ #3999-3 should not start over if common session is found (138ms)
    ✓ #3999-4 should "upgrade" an old checkpoint (95ms)
    ✓ (#1307) - replicate empty database (42ms)
    - Syncing should stop if one replication fails (issue 838)
    ✓ Reporting write failures (#942) (95ms)
    ✓ Report write failures if whole saving fails (#942) (89ms)
    ✓ Test consecutive replications with different query_params (89ms)
    ✓ Test consecutive replications with different query_params and promises (88ms)
    ✓ Test consecutive replications with different doc_ids (123ms)
    ✓ #3962 - Test many attachments (151ms)
    ✓ doc count after multiple replications (136ms)
    ✓ issue #300 rev id unique per doc (67ms)
    ✓ issue #585 Store checkpoint on target db. (107ms)
    ✓ should work with a read only source (80ms)
    ✓ issue #2342 update_seq after replication (82ms)
    ✓ should cancel for live replication (555ms)
    ✓ #2970 replicate database w/ deleted conflicted revs (60ms)
    ✓ #2268 dont stop replication if single forbidden
    ✓ #2268 dont stop replication if single unauth
    ✓ #2268 dont stop replication if many unauth
    ✓ #3171 Forbidden validate_doc_update error message
    - Test immediate replication canceling
    ✓ #3171 Unauthorized validate_doc_update error message
    ✓ #3070 Doc IDs with validate_doc_update errors
    ✓ #3270 triggers "denied" events
    ✓ #3606 - live replication with filtered ddoc (78ms)
    ✓ #3606 - live repl with filtered ddoc+query_params (62ms)
    ✓ #3606 - live repl with doc_ids (56ms)
    ✓ #3606 - live repl with view (65ms)
    ✓ #3569 - 409 during replication (127ms)
    ✓ #3270 triggers "change" events with .docs property (58ms)
    ✓ #3543 replication with a ddoc filter (74ms)
    ✓ #3578 replication with a ddoc filter w/ _deleted=true (100ms)
    ✓ #3578 replication with a ddoc filter w/ remove() (99ms)
    ✓ #2454 info() call breaks taskqueue
    ✓ #4094 can't fetch server uuid (HTTP error) (49ms)
    ✓ #7444 can't fetch server uuid (invalid JSON) (51ms)
    ✓ #4293 Triggers extra replication events (176ms)
    ✓ Heartbeat gets passed
    ✓ Timeout gets passed
    ✓ #5452 Cleanly fail with no unhandled promises on a bad connection
    ✓ #2426 doc_ids dont prevent replication (103ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (140ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (136ms)
    ✓ Replication filter using selector
    ✓ Invalid selector

  suite2 test.replication.js-http-local
    ✓ Test basic pull replication (50ms)
    ✓ Test basic pull replication plain api (51ms)
    ✓ Test basic pull replication plain api 2 (52ms)
    ✓ Test pull replication with many changes (179ms)
    ✓ Test basic pull replication with funny ids (47ms)
    - pull replication with many changes + a conflict (#2543)
    ✓ Test pull replication with many conflicts (740ms)
    ✓ Test correct # docs replicated with staggered revs (79ms)
    ✓ Local DB contains documents (51ms)
    ✓ Test basic push replication (53ms)
    ✓ Test basic push replication take 2 (44ms)
    ✓ Test basic push replication sequence tracking (73ms)
    ✓ Test checkpoint (64ms)
    ✓ Test live pull checkpoint (65ms)
    ✓ Test type of progress values (50ms)
    ✓ Test live push checkpoint (62ms)
    ✓ Test checkpoint 2 (63ms)
    ✓ Test checkpoint 3 :) (65ms)
    ✓ Test disable checkpoints on both source and target (44ms)
    ✓ Test write checkpoints on source only (54ms)
    ✓ Test write checkpoints on target only (43ms)
    ✓ Test replication resumes when checkpointing is enabled (60ms)
    ✓ Test replication resumes when checkpointing is disabled (51ms)
    ✓ Test replication resumes when checkpointing on source only (61ms)
    ✓ Test replication resumes when checkpointing on target only (51ms)
    ✓ #3136 open revs returned correctly 1 (195ms)
    ✓ #3136 open revs returned correctly 2 (169ms)
    ✓ #3136 winningRev has a lower seq (95ms)
    ✓ #3136 same changes with style=all_docs (152ms)
    ✓ #3136 style=all_docs with conflicts (123ms)
    ✓ #3136 style=all_docs with conflicts reversed (86ms)
    ✓ Test checkpoint read only 3 :) (68ms)
    ✓ Testing allDocs with some conflicts (issue #468) (83ms)
    ✓ Test basic conflict (43ms)
    ✓ Test _conflicts key (72ms)
    ✓ Test basic live pull replication (74ms)
    ✓ Test basic live push replication (60ms)
    ✓ test-cancel-pull-replication (166ms)
    ✓ Test basic events (52ms)
    ✓ Replication filter (49ms)
    ✓ Replication with different filters (64ms)
    ✓ Replication doc ids (45ms)
    ✓ 2204 Invalid doc_ids
    ✓ Replication since (70ms)
    ✓ Replication with same filters (62ms)
    ✓ Replication with filter that leads to some empty batches (#2689) (63ms)
    - Empty replication updates checkpoint (#5145)
    ✓ Does not update checkpoint unncessarily (#5379) (52ms)
    ✓ Replication with deleted doc (51ms)
    ✓ 5904 - replication with deleted doc and value (44ms)
    ✓ Replication notifications (48ms)
    ✓ Replication with remote conflict (85ms)
    ✓ Replicate and modify three times (84ms)
    ✓ live replication, starting offline
    ✓ Replicates deleted docs (issue #2636) (41ms)
    ✓ Replicates deleted docs w/ delay (issue #2636) (51ms)
    ✓ Replicates deleted docs w/ compaction (68ms)
    ✓ Replicates modified docs (issue #2636) (45ms)
    ✓ Replication of multiple remote conflicts (#789) (55ms)
    ✓ Replicate large number of docs (65ms)
    ✓ Ensure checkpoint after deletion (100ms)
    ✓ issue #1001 cb as 3rd argument (166ms)
    ✓ issue #1001 cb as 4th argument (166ms)
    ✓ #909 Filtered replication bails at paging limit (57ms)
    ✓ (#4963) Ensure successful docs are saved but seq not updated if single doc fails to replicate (109ms)
    ✓ #3999-1 should not start over if last_seq mismatches (76ms)
    ✓ #3999-2 should start over if no common session is found (63ms)
    ✓ #3999-3 should not start over if common session is found (64ms)
    ✓ #3999-4 should "upgrade" an old checkpoint (60ms)
    ✓ (#1307) - replicate empty database
    - Syncing should stop if one replication fails (issue 838)
    ✓ Reporting write failures (#942) (69ms)
    ✓ Report write failures if whole saving fails (#942) (61ms)
    ✓ Test consecutive replications with different query_params (59ms)
    ✓ Test consecutive replications with different query_params and promises (63ms)
    ✓ Test consecutive replications with different doc_ids (69ms)
    ✓ #3962 - Test many attachments (68ms)
    ✓ doc count after multiple replications (90ms)
    ✓ issue #300 rev id unique per doc (47ms)
    ✓ issue #585 Store checkpoint on target db. (73ms)
    ✓ should work with a read only source (38ms)
    ✓ issue #2342 update_seq after replication (60ms)
    ✓ should cancel for live replication (533ms)
    ✓ #2970 replicate database w/ deleted conflicted revs (61ms)
    ✓ #2268 dont stop replication if single forbidden
    ✓ #2268 dont stop replication if single unauth
    ✓ #2268 dont stop replication if many unauth
    ✓ #3171 Forbidden validate_doc_update error message
    - Test immediate replication canceling
    ✓ #3171 Unauthorized validate_doc_update error message
    ✓ #3070 Doc IDs with validate_doc_update errors
    ✓ #3270 triggers "denied" events
    ✓ #3606 - live replication with filtered ddoc (47ms)
    ✓ #3606 - live repl with filtered ddoc+query_params (51ms)
    ✓ #3606 - live repl with doc_ids (50ms)
    ✓ #3606 - live repl with view (45ms)
    ✓ #3569 - 409 during replication (121ms)
    ✓ #3270 triggers "change" events with .docs property (49ms)
    ✓ #3543 replication with a ddoc filter (52ms)
    ✓ #3578 replication with a ddoc filter w/ _deleted=true (69ms)
    ✓ #3578 replication with a ddoc filter w/ remove() (71ms)
    ✓ #2454 info() call breaks taskqueue
    ✓ #4094 can't fetch server uuid (HTTP error)
    ✓ #7444 can't fetch server uuid (invalid JSON) (46ms)
    ✓ #4293 Triggers extra replication events (148ms)
    ✓ Heartbeat gets passed
    ✓ Timeout gets passed
    ✓ #5452 Cleanly fail with no unhandled promises on a bad connection
    ✓ #2426 doc_ids dont prevent replication (61ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (70ms)
    ✓ #6809 doc_ids dont prevent one-shot replication (68ms)
    ✓ Replication filter using selector
    ✓ Invalid selector

  suite2 test.replication.js-local-local
    ✓ Test basic pull replication
    ✓ Test basic pull replication plain api
    ✓ Test basic pull replication plain api 2
    ✓ Test pull replication with many changes (136ms)
    ✓ Test basic pull replication with funny ids
    - pull replication with many changes + a conflict (#2543)
    ✓ Test pull replication with many conflicts (565ms)
    ✓ Test correct # docs replicated with staggered revs (50ms)
    ✓ Local DB contains documents (40ms)
    ✓ Test basic push replication
    ✓ Test basic push replication take 2
    ✓ Test basic push replication sequence tracking
    ✓ Test checkpoint
    ✓ Test live pull checkpoint
    ✓ Test type of progress values
    ✓ Test live push checkpoint
    ✓ Test checkpoint 2
    ✓ Test checkpoint 3 :)
    ✓ Test disable checkpoints on both source and target
    ✓ Test write checkpoints on source only
    ✓ Test write checkpoints on target only
    ✓ Test replication resumes when checkpointing is enabled
    ✓ Test replication resumes when checkpointing is disabled
    ✓ Test replication resumes when checkpointing on source only
    ✓ Test replication resumes when checkpointing on target only
    ✓ #3136 open revs returned correctly 1 (61ms)
    ✓ #3136 open revs returned correctly 2 (57ms)
    ✓ #3136 winningRev has a lower seq
    ✓ #3136 same changes with style=all_docs
    ✓ #3136 style=all_docs with conflicts
    ✓ #3136 style=all_docs with conflicts reversed
    ✓ Test checkpoint read only 3 :)
    ✓ Testing allDocs with some conflicts (issue #468)
    ✓ Test basic conflict
    ✓ Test _conflicts key (40ms)
    ✓ Test basic live pull replication
    ✓ Test basic live push replication
    ✓ test-cancel-pull-replication (127ms)
    ✓ Test basic events
    ✓ Replication filter
    ✓ Replication with different filters
    ✓ Replication doc ids
    ✓ 2204 Invalid doc_ids
    ✓ Replication since
    ✓ Replication with same filters
    ✓ Replication with filter that leads to some empty batches (#2689)
    - Empty replication updates checkpoint (#5145)
    ✓ Does not update checkpoint unncessarily (#5379)
    ✓ Replication with deleted doc
    ✓ 5904 - replication with deleted doc and value
    ✓ Replication notifications
    ✓ Replication with remote conflict
    ✓ Replicate and modify three times
    ✓ live replication, starting offline
    ✓ Replicates deleted docs (issue #2636)
    ✓ Replicates deleted docs w/ delay (issue #2636)
    ✓ Replicates deleted docs w/ compaction
    ✓ Replicates modified docs (issue #2636)
    ✓ Replication of multiple remote conflicts (#789)
    ✓ Replicate large number of docs (39ms)
    ✓ Ensure checkpoint after deletion (55ms)
    ✓ issue #1001 cb as 3rd argument (164ms)
    ✓ issue #1001 cb as 4th argument (165ms)
    ✓ #909 Filtered replication bails at paging limit (45ms)
    ✓ (#4963) Ensure successful docs are saved but seq not updated if single doc fails to replicate (39ms)
    ✓ #3999-1 should not start over if last_seq mismatches (38ms)
    ✓ #3999-2 should start over if no common session is found
    ✓ #3999-3 should not start over if common session is found
    ✓ #3999-4 should "upgrade" an old checkpoint
    ✓ (#1307) - replicate empty database
    - Syncing should stop if one replication fails (issue 838)
    ✓ Reporting write failures (#942)
    ✓ Report write failures if whole saving fails (#942)
    ✓ Test consecutive replications with different query_params
    ✓ Test consecutive replications with different query_params and promises
    ✓ Test consecutive replications with different doc_ids (47ms)
    ✓ #3962 - Test many attachments
    ✓ doc count after multiple replications (79ms)
    ✓ issue #300 rev id unique per doc
    ✓ issue #585 Store checkpoint on target db. (41ms)
    ✓ should work with a read only source
    ✓ issue #2342 update_seq after replication
    ✓ should cancel for live replication (525ms)
    ✓ #2970 replicate database w/ deleted conflicted revs
    ✓ #2268 dont stop replication if single forbidden
    ✓ #2268 dont stop replication if single unauth
    ✓ #2268 dont stop replication if many unauth
    ✓ #3171 Forbidden validate_doc_update error message
    - Test immediate replication canceling
    ✓ #3171 Unauthorized validate_doc_update error message
    ✓ #3070 Doc IDs with validate_doc_update errors
    ✓ #3270 triggers "denied" events
    ✓ #3606 - live replication with filtered ddoc
    ✓ #3606 - live repl with filtered ddoc+query_params
    ✓ #3606 - live repl with doc_ids
    ✓ #3606 - live repl with view
    ✓ #3569 - 409 during replication
    ✓ #3270 triggers "change" events with .docs property
    ✓ #3543 replication with a ddoc filter
    ✓ #3578 replication with a ddoc filter w/ _deleted=true
    ✓ #3578 replication with a ddoc filter w/ remove()
    ✓ #2454 info() call breaks taskqueue
    ✓ #4094 can't fetch server uuid (HTTP error)
    ✓ #7444 can't fetch server uuid (invalid JSON)
    ✓ #4293 Triggers extra replication events (128ms)
    ✓ Heartbeat gets passed
    ✓ Timeout gets passed
    ✓ #5452 Cleanly fail with no unhandled promises on a bad connection
    ✓ #2426 doc_ids dont prevent replication (43ms)
    ✓ #6809 doc_ids dont prevent one-shot replication
    ✓ #6809 doc_ids dont prevent one-shot replication
    ✓ Replication filter using selector
    ✓ Invalid selector

  suite2 test.replication.js-down-test
    ✓ replicate from down server test

  test.replicationBackoff.js-local-http
    ✓ Issue 5402 should not keep adding event listeners when backoff is firing

  suite2 test.replication_events.js-local-http
    ✓ #3852 Test basic starting empty (141ms)
    ✓ #3852 Test basic starting with docs (129ms)
    ✓ #5710 Test pending property support (86ms)
    ✓ #3852 Test errors (60ms)
    ✓ #4627 Test no duplicate changes in live replication (2054ms)
    ✓ Test checkpoint events (50ms)
    #5172 triggering error when replicating
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication
    #5607 handle uppercase third-party error responses
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication

  suite2 test.replication_events.js-http-http
    ✓ #3852 Test basic starting empty (117ms)
    ✓ #3852 Test basic starting with docs (134ms)
    ✓ #5710 Test pending property support (99ms)
    ✓ #3852 Test errors
    ✓ #4627 Test no duplicate changes in live replication (2086ms)
    ✓ Test checkpoint events (61ms)
    #5172 triggering error when replicating
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication
    #5607 handle uppercase third-party error responses
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication

  suite2 test.replication_events.js-http-local
    ✓ #3852 Test basic starting empty (76ms)
    ✓ #3852 Test basic starting with docs (98ms)
    ✓ #5710 Test pending property support (63ms)
    ✓ #3852 Test errors
    ✓ #4627 Test no duplicate changes in live replication (2061ms)
    ✓ Test checkpoint events (51ms)
    #5172 triggering error when replicating
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication
    #5607 handle uppercase third-party error responses
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication

  suite2 test.replication_events.js-local-local
    ✓ #3852 Test basic starting empty
    ✓ #3852 Test basic starting with docs
    ✓ #5710 Test pending property support
    ✓ #3852 Test errors
    ✓ #4627 Test no duplicate changes in live replication (2031ms)
    ✓ Test checkpoint events
    #5172 triggering error when replicating
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication
    #5607 handle uppercase third-party error responses
      ✓ from or to a secured database, using live replication
      ✓ from or to a secured database, using live replication with checkpoint
      ✓ from or to a secured database, using live replication with retrying
      ✓ from or to a secured database, using one-shot replication

  test.reserved.js-local-http
    ✓ test docs with reserved javascript ids (68ms)
    ✓ can create db with reserved name

  test.reserved.js-http-http
    ✓ test docs with reserved javascript ids (102ms)
    ✓ can create db with reserved name

  test.reserved.js-http-local
    ✓ test docs with reserved javascript ids (80ms)
    ✓ can create db with reserved name

  test.reserved.js-local-local
    ✓ test docs with reserved javascript ids (42ms)
    ✓ can create db with reserved name

  test.retry.js-local-http
    ✓ retry stuff (132ms)
    ✓ #3687 active event only fired once... (53ms)
    ✓ source doesn't leak "destroyed" event (159ms)
    ✓ target doesn't leak "destroyed" event (163ms)
    ✓ returnValue doesn't leak "complete" event (156ms)
    ✓ returnValue doesn't leak "error" event (210ms)
    ✓ returnValue doesn't leak "paused" event (161ms)
    ✓ returnValue doesn't leak "active" event (165ms)
    ✓ returnValue doesn't leak "change" event (165ms)
    ✓ returnValue doesn't leak "cancel" event (171ms)
    ✓ returnValue doesn't leak "change" event w/ onChange (168ms)
    ✓ retry many times, no leaks on any events (813ms)
    ✓ 4049 retry while starting offline
    ✓ #5157 replicate many docs with live+retry (444ms)
    ✓ 6510 no changes live+retry does not call backoff function (2001ms)

  test.retry.js-http-http
    ✓ retry stuff (112ms)
    ✓ #3687 active event only fired once... (72ms)
    ✓ source doesn't leak "destroyed" event (251ms)
    ✓ target doesn't leak "destroyed" event (296ms)
    ✓ returnValue doesn't leak "complete" event (288ms)
    ✓ returnValue doesn't leak "error" event (254ms)
    ✓ returnValue doesn't leak "paused" event (284ms)
    ✓ returnValue doesn't leak "active" event (362ms)
    ✓ returnValue doesn't leak "change" event (267ms)
    ✓ returnValue doesn't leak "cancel" event (250ms)
    ✓ returnValue doesn't leak "change" event w/ onChange (301ms)
    ✓ retry many times, no leaks on any events (1260ms)
    ✓ 4049 retry while starting offline (65ms)
    ✓ #5157 replicate many docs with live+retry (1128ms)
    ✓ 6510 no changes live+retry does not call backoff function (2001ms)

  test.retry.js-http-local
    ✓ retry stuff (62ms)
    ✓ #3687 active event only fired once... (52ms)
    ✓ source doesn't leak "destroyed" event (150ms)
    ✓ target doesn't leak "destroyed" event (131ms)
    ✓ returnValue doesn't leak "complete" event (139ms)
    ✓ returnValue doesn't leak "error" event (124ms)
    ✓ returnValue doesn't leak "paused" event (143ms)
    ✓ returnValue doesn't leak "active" event (143ms)
    ✓ returnValue doesn't leak "change" event (200ms)
    ✓ returnValue doesn't leak "cancel" event (211ms)
    ✓ returnValue doesn't leak "change" event w/ onChange (139ms)
    ✓ retry many times, no leaks on any events (533ms)
    ✓ 4049 retry while starting offline (44ms)
    ✓ #5157 replicate many docs with live+retry (873ms)
    ✓ 6510 no changes live+retry does not call backoff function (2003ms)

  test.retry.js-local-local
    ✓ retry stuff
    ✓ #3687 active event only fired once...
    ✓ source doesn't leak "destroyed" event (47ms)
    ✓ target doesn't leak "destroyed" event (38ms)
    ✓ returnValue doesn't leak "complete" event (51ms)
    ✓ returnValue doesn't leak "error" event (38ms)
    ✓ returnValue doesn't leak "paused" event (39ms)
    ✓ returnValue doesn't leak "active" event (38ms)
    ✓ returnValue doesn't leak "change" event (44ms)
    ✓ returnValue doesn't leak "cancel" event (42ms)
    ✓ returnValue doesn't leak "change" event w/ onChange (39ms)
    ✓ retry many times, no leaks on any events (129ms)
    ✓ 4049 retry while starting offline
    ✓ #5157 replicate many docs with live+retry (433ms)
    ✓ 6510 no changes live+retry does not call backoff function (2002ms)

  test.revs_diff.js-http
    ✓ Test revs diff (40ms)
    ✓ Test revs diff with opts object
    ✓ Missing docs should be returned with all revisions
    ✓ Conflicting revisions that are available
    ✓ Deleted revisions that are available
    ✓ Revs diff with empty revs
    ✓ Test revs diff with reserved ID

  test.revs_diff.js-local
    ✓ Test revs diff
    ✓ Test revs diff with opts object
    ✓ Missing docs should be returned with all revisions
    ✓ Conflicting revisions that are available
    ✓ Deleted revisions that are available
    ✓ Revs diff with empty revs
    ✓ Test revs diff with reserved ID

  test.slash_ids.js-local
    ✓ Insert a doc, putAttachment and allDocs
    ✓ BulkDocs and changes

  test.slash_ids.js-http
    ✓ Insert a doc, putAttachment and allDocs
    ✓ BulkDocs and changes

  test.slash_ids.js-local-http
    ✓ Attachments replicate (49ms)

  test.slash_ids.js-http-http
    ✓ Attachments replicate (72ms)

  test.slash_ids.js-http-local
    ✓ Attachments replicate (52ms)

  test.slash_ids.js-local-local
    ✓ Attachments replicate

  test.sync.js-local-http
    ✓ PouchDB.sync event (77ms)
    ✓ sync throws errors in promise (48ms)
    ✓ sync throws errors in promise catch() (47ms)
    ✓ sync throws errors in error listener (49ms)
    ✓ sync throws errors in callback (49ms)
    ✓ sync returns result in callback (58ms)
    ✓ PouchDB.sync callback (62ms)
    ✓ PouchDB.sync promise (57ms)
    ✓ db.sync event (80ms)
    ✓ db.sync callback (61ms)
    ✓ db.sync promise (61ms)
    - Test sync cancel
    - Test sync cancel called twice
    ✓ Test syncing two endpoints (issue 838) (62ms)
    - 3894 re-sync after immediate cancel
    ✓ Syncing should stop if one replication fails (issue 838) (56ms)
    ✓ Push and pull changes both fire (issue 2555) (54ms)
    ✓ Change event should be called exactly once per listener (issue 5479) (56ms)
    ✓ Remove an event listener (52ms)
    ✓ Remove an invalid event listener (52ms)
    ✓ Doesn't have a memory leak (push) (61ms)
    ✓ Doesn't have a memory leak (pull) (64ms)
    ✓ Doesn't have a memory leak (bi) (69ms)
    ✓ PouchDB.sync with strings for dbs (64ms)
    ✓ #3270 triggers "denied" events
    ✓ #3270 triggers "denied" events, reverse direction
    ✓ #3270 triggers "change" events with .docs property (87ms)
    ✓ 4791 Single filter (108ms)
    ✓ 4791 Single filter, live/retry (63ms)
    ✓ 4289 Separate to / from filters (53ms)
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
    ✓ 5007 sync 2 databases (83ms)
    ✓ 5782 sync rev-1 conflicts (140ms)

  test.sync.js-http-http
    ✓ PouchDB.sync event (88ms)
    ✓ sync throws errors in promise (61ms)
    ✓ sync throws errors in promise catch() (65ms)
    ✓ sync throws errors in error listener (59ms)
    ✓ sync throws errors in callback (64ms)
    ✓ sync returns result in callback (79ms)
    ✓ PouchDB.sync callback (84ms)
    ✓ PouchDB.sync promise (85ms)
    ✓ db.sync event (86ms)
    ✓ db.sync callback (87ms)
    ✓ db.sync promise (84ms)
    - Test sync cancel
    - Test sync cancel called twice
    ✓ Test syncing two endpoints (issue 838) (87ms)
    - 3894 re-sync after immediate cancel
    ✓ Syncing should stop if one replication fails (issue 838) (119ms)
    ✓ Push and pull changes both fire (issue 2555) (92ms)
    ✓ Change event should be called exactly once per listener (issue 5479) (80ms)
    ✓ Remove an event listener (62ms)
    ✓ Remove an invalid event listener (67ms)
    ✓ Doesn't have a memory leak (push) (64ms)
    ✓ Doesn't have a memory leak (pull) (65ms)
    ✓ Doesn't have a memory leak (bi) (87ms)
    ✓ PouchDB.sync with strings for dbs (161ms)
    ✓ #3270 triggers "denied" events
    ✓ #3270 triggers "denied" events, reverse direction
    ✓ #3270 triggers "change" events with .docs property (81ms)
    ✓ 4791 Single filter (94ms)
    ✓ 4791 Single filter, live/retry (94ms)
    ✓ 4289 Separate to / from filters (87ms)
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
    ✓ 5007 sync 2 databases (112ms)
    ✓ 5782 sync rev-1 conflicts (203ms)

  test.sync.js-http-local
    ✓ PouchDB.sync event (49ms)
    ✓ sync throws errors in promise
    ✓ sync throws errors in promise catch() (42ms)
    ✓ sync throws errors in error listener (38ms)
    ✓ sync throws errors in callback
    ✓ sync returns result in callback (53ms)
    ✓ PouchDB.sync callback (57ms)
    ✓ PouchDB.sync promise (50ms)
    ✓ db.sync event (50ms)
    ✓ db.sync callback (49ms)
    ✓ db.sync promise (51ms)
    - Test sync cancel
    - Test sync cancel called twice
    ✓ Test syncing two endpoints (issue 838) (50ms)
    - 3894 re-sync after immediate cancel
    ✓ Syncing should stop if one replication fails (issue 838) (56ms)
    ✓ Push and pull changes both fire (issue 2555) (48ms)
    ✓ Change event should be called exactly once per listener (issue 5479) (52ms)
    ✓ Remove an event listener (44ms)
    ✓ Remove an invalid event listener (49ms)
    ✓ Doesn't have a memory leak (push) (45ms)
    ✓ Doesn't have a memory leak (pull) (42ms)
    ✓ Doesn't have a memory leak (bi) (50ms)
    ✓ PouchDB.sync with strings for dbs (51ms)
    ✓ #3270 triggers "denied" events
    ✓ #3270 triggers "denied" events, reverse direction
    ✓ #3270 triggers "change" events with .docs property (61ms)
    ✓ 4791 Single filter (83ms)
    ✓ 4791 Single filter, live/retry (59ms)
    ✓ 4289 Separate to / from filters (119ms)
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
    ✓ 5007 sync 2 databases (114ms)
    ✓ 5782 sync rev-1 conflicts (129ms)

  test.sync.js-local-local
    ✓ PouchDB.sync event
    ✓ sync throws errors in promise
    ✓ sync throws errors in promise catch()
    ✓ sync throws errors in error listener
    ✓ sync throws errors in callback
    ✓ sync returns result in callback
    ✓ PouchDB.sync callback
    ✓ PouchDB.sync promise
    ✓ db.sync event
    ✓ db.sync callback
    ✓ db.sync promise
    - Test sync cancel
    - Test sync cancel called twice
    ✓ Test syncing two endpoints (issue 838)
    - 3894 re-sync after immediate cancel
    ✓ Syncing should stop if one replication fails (issue 838)
    ✓ Push and pull changes both fire (issue 2555)
    ✓ Change event should be called exactly once per listener (issue 5479)
    ✓ Remove an event listener
    ✓ Remove an invalid event listener
    ✓ Doesn't have a memory leak (push)
    ✓ Doesn't have a memory leak (pull)
    ✓ Doesn't have a memory leak (bi)
    ✓ PouchDB.sync with strings for dbs
    ✓ #3270 triggers "denied" events
    ✓ #3270 triggers "denied" events, reverse direction
    ✓ #3270 triggers "change" events with .docs property
    ✓ 4791 Single filter
    ✓ 4791 Single filter, live/retry
    ✓ 4289 Separate to / from filters
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
11 > 5997 sync 2 databases, cancel
    ✓ 5007 sync 2 databases
    ✓ 5782 sync rev-1 conflicts

  suite2 test.sync_events.js-local-http
    ✓ #4251 Should fire paused and active on sync (129ms)
    ✓ #5710 Test pending property support (76ms)

  suite2 test.sync_events.js-http-http
    ✓ #4251 Should fire paused and active on sync (231ms)
    ✓ #5710 Test pending property support (114ms)

  suite2 test.sync_events.js-http-local
    ✓ #4251 Should fire paused and active on sync (119ms)
    ✓ #5710 Test pending property support (80ms)

  suite2 test.sync_events.js-local-local
    ✓ #4251 Should fire paused and active on sync
    ✓ #5710 Test pending property support

  test.taskqueue.js-http
    ✓ Add a doc
    ✓ Bulk docs
    ✓ Get
    ✓ Info

  test.taskqueue.js-local
    ✓ Add a doc
    ✓ Bulk docs
    ✓ Get
    ✓ Info

  test.uuid.js
    ✓ UUID RFC4122 test
    ✓ UUID generation uniqueness
    ✓ Test small uuid uniqness
    ✓ _rev generation

  test.viewadapter.js-local-memory
    ✓ Create pouch with separate view adapters
    ✓ Create pouch with no view adapters


  1683 passing (2m)
  45 pending

npm uninstall

removed 1 package, and audited 1029 packages in 9s

64 packages are looking for funding
  run `npm fund` for details

41 vulnerabilities (1 low, 11 moderate, 23 high, 6 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> pouchdb-monorepo@7.0.0-prerelease test
> bash bin/run-test.sh


> pouchdb-monorepo@7.0.0-prerelease build-node
> bash bin/build-node.sh


> pouchdb-monorepo@7.0.0-prerelease build-modules
> node bin/build-modules.js

Building pouchdb...
Building pouchdb-abstract-mapreduce...
Building pouchdb-adapter-http...
Building pouchdb-adapter-idb...
Building pouchdb-adapter-indexeddb...
Building pouchdb-adapter-leveldb...
Building pouchdb-adapter-leveldb-core...
Building pouchdb-adapter-localstorage...
Building pouchdb-adapter-memory...
Building pouchdb-adapter-utils...
Building pouchdb-binary-utils...
Building pouchdb-browser...
Building pouchdb-changes-filter...
Building pouchdb-checkpointer...
Building pouchdb-collate...
Building pouchdb-collections...
Building pouchdb-core...
Building pouchdb-errors...
Building pouchdb-fetch...
Building pouchdb-find...
Building pouchdb-for-coverage...
Building pouchdb-generate-replication-id...
Building pouchdb-json...
Building pouchdb-mapreduce...
Building pouchdb-mapreduce-utils...
Building pouchdb-md5...
Building pouchdb-merge...
Building pouchdb-node...
Building pouchdb-replication...
Building pouchdb-selector-core...
Building pouchdb-utils...
Building sublevel-pouchdb...
  ✓ wrote pouchdb-adapter-localstorage/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-localstorage/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.js in vanilla mode
  ✓ wrote pouchdb-checkpointer/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.js in vanilla mode
  ✓ wrote pouchdb-errors/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.js in vanilla mode
  ✓ wrote pouchdb-generate-replication-id/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-http/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-adapter-leveldb-core/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-fetch/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-md5/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-changes-filter/lib/index.js in node mode
  ✓ wrote pouchdb-changes-filter/lib/index.es.js in node mode
  ✓ wrote pouchdb-collate/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collate/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-fetch/lib/index.js in node mode
  ✓ wrote pouchdb-fetch/lib/index.es.js in node mode
  ✓ wrote pouchdb-json/lib/index.js in vanilla mode
  ✓ wrote pouchdb-json/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-mapreduce-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-md5/lib/index.js in node mode
  ✓ wrote pouchdb-md5/lib/index.es.js in node mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.js in vanilla mode
  ✓ wrote pouchdb-abstract-mapreduce/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-idb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-indexeddb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-binary-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-utils/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-utils/lib/index.js in node mode
  ✓ wrote pouchdb-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-adapter-utils/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-utils/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-binary-utils/lib/index.js in node mode
  ✓ wrote pouchdb-binary-utils/lib/index.es.js in node mode
  ✓ wrote pouchdb-collections/lib/index.js in vanilla mode
  ✓ wrote pouchdb-collections/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.js in vanilla mode
  ✓ wrote pouchdb-merge/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-selector-core/lib/index.es.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.js in vanilla mode
  ✓ wrote sublevel-pouchdb/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-mapreduce/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-replication/lib/index.js in vanilla mode
  ✓ wrote pouchdb-replication/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-mapreduce/lib/index.js in node mode
  ✓ wrote pouchdb-mapreduce/lib/index.es.js in node mode
  ✓ wrote pouchdb-core/lib/index.js in vanilla mode
  ✓ wrote pouchdb-core/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-find/lib/index.js in node mode
  ✓ wrote pouchdb-find/lib/index.es.js in node mode
  ✓ wrote pouchdb-find/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-find/lib/index-browser.es.js in browser mode
  ✓ wrote pouchdb-adapter-memory/lib/index.js in vanilla mode
  ✓ wrote pouchdb-adapter-memory/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-browser/lib/index.js in vanilla mode
  ✓ wrote pouchdb-browser/lib/index.es.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.js in vanilla mode
  ✓ wrote pouchdb-node/lib/index.es.js in vanilla mode
  ✓ wrote packages/node_modules/pouchdb/lib/index.js
  ✓ wrote packages/node_modules/pouchdb/lib/index.es.js
  ✓ wrote pouchdb-for-coverage/lib/index.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index.es.js in node mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.js in browser mode
  ✓ wrote pouchdb-for-coverage/lib/index-browser.es.js in browser mode
Waiting for host to start ..
Host started :)
> pouchdb-monorepo@7.0.0-prerelease test-node
> bash bin/test-node.sh

Down server listening on port 3010
Seeded with: 1661446744770
----------------------run test done----------------------
meow
subdir: chalk-animation polyline stylelint tsd xo
----------------------client chalk-animation of meow----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> chalk-animation@2.0.2 test
> c8 ava --serial


  ✔ throw error if invalid speed (rainbow)
  ✔ animations are starting automatically (rainbow)
  ✔ console.log stops the animation (rainbow)
  ✔ start and stop are working (rainbow)
  ✔ manual render is working (rainbow)
  ✔ text can be replaced (rainbow)
  ✔ multiline is well supported (rainbow)
  ✔ forced start is not a problem (rainbow)
  ✔ test lots of frames (rainbow) (536ms)
  ✔ throw error if invalid speed (pulse)
  ✔ animations are starting automatically (pulse)
  ✔ console.log stops the animation (pulse)
  ✔ start and stop are working (pulse)
  ✔ manual render is working (pulse)
  ✔ text can be replaced (pulse)
  ✔ multiline is well supported (pulse)
  ✔ forced start is not a problem (pulse)
  ✔ test lots of frames (pulse) (140ms)
  ✔ throw error if invalid speed (glitch)
  ✔ animations are starting automatically (glitch)
  ✔ console.log stops the animation (glitch)
  ✔ start and stop are working (glitch)
  ✔ manual render is working (glitch)
  ✔ text can be replaced (glitch)
  ✔ multiline is well supported (glitch)
  ✔ forced start is not a problem (glitch)
  ✔ test lots of frames (glitch)
  ✔ throw error if invalid speed (radar)
  ✔ animations are starting automatically (radar)
  ✔ console.log stops the animation (radar)
  ✔ start and stop are working (radar)
  ✔ manual render is working (radar)
  ✔ text can be replaced (radar)
  ✔ multiline is well supported (radar)
  ✔ forced start is not a problem (radar)
  ✔ test lots of frames (radar)
  ✔ throw error if invalid speed (neon)
  ✔ animations are starting automatically (neon)
  ✔ console.log stops the animation (neon)
  ✔ start and stop are working (neon)
  ✔ manual render is working (neon)
  ✔ text can be replaced (neon)
  ✔ multiline is well supported (neon)
  ✔ forced start is not a problem (neon)
  ✔ test lots of frames (neon)
  ✔ throw error if invalid speed (karaoke)
  ✔ animations are starting automatically (karaoke)
  ✔ console.log stops the animation (karaoke)
  ✔ start and stop are working (karaoke)
  ✔ manual render is working (karaoke)
  ✔ text can be replaced (karaoke)
  ✔ multiline is well supported (karaoke)
  ✔ forced start is not a problem (karaoke)
  ✔ test lots of frames (karaoke)
  ─

  54 tests passed
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     100 |      100 |     100 |     100 |                   
 index.js |     100 |      100 |     100 |     100 |                   
----------|---------|----------|---------|---------|-------------------
npm uninstall

added 28 packages, changed 1 package, and audited 588 packages in 2s

155 packages are looking for funding
  run `npm fund` for details

1 high severity vulnerability

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> chalk-animation@2.0.2 test
> c8 ava --serial


  ✔ throw error if invalid speed (rainbow)
  ✔ animations are starting automatically (rainbow)
  ✔ console.log stops the animation (rainbow)
  ✔ start and stop are working (rainbow)
  ✔ manual render is working (rainbow)
  ✔ text can be replaced (rainbow)
  ✔ multiline is well supported (rainbow)
  ✔ forced start is not a problem (rainbow)
  ✔ test lots of frames (rainbow) (524ms)
  ✔ throw error if invalid speed (pulse)
  ✔ animations are starting automatically (pulse)
  ✔ console.log stops the animation (pulse)
  ✔ start and stop are working (pulse)
  ✔ manual render is working (pulse)
  ✔ text can be replaced (pulse)
  ✔ multiline is well supported (pulse)
  ✔ forced start is not a problem (pulse)
  ✔ test lots of frames (pulse) (122ms)
  ✔ throw error if invalid speed (glitch)
  ✔ animations are starting automatically (glitch)
  ✔ console.log stops the animation (glitch)
  ✔ start and stop are working (glitch)
  ✔ manual render is working (glitch)
  ✔ text can be replaced (glitch)
  ✔ multiline is well supported (glitch)
  ✔ forced start is not a problem (glitch)
  ✔ test lots of frames (glitch)
  ✔ throw error if invalid speed (radar)
  ✔ animations are starting automatically (radar)
  ✔ console.log stops the animation (radar)
  ✔ start and stop are working (radar)
  ✔ manual render is working (radar)
  ✔ text can be replaced (radar)
  ✔ multiline is well supported (radar)
  ✔ forced start is not a problem (radar)
  ✔ test lots of frames (radar)
  ✔ throw error if invalid speed (neon)
  ✔ animations are starting automatically (neon)
  ✔ console.log stops the animation (neon)
  ✔ start and stop are working (neon)
  ✔ manual render is working (neon)
  ✔ text can be replaced (neon)
  ✔ multiline is well supported (neon)
  ✔ forced start is not a problem (neon)
  ✔ test lots of frames (neon)
  ✔ throw error if invalid speed (karaoke)
  ✔ animations are starting automatically (karaoke)
  ✔ console.log stops the animation (karaoke)
  ✔ start and stop are working (karaoke)
  ✔ manual render is working (karaoke)
  ✔ text can be replaced (karaoke)
  ✔ multiline is well supported (karaoke)
  ✔ forced start is not a problem (karaoke)
  ✔ test lots of frames (karaoke)
  ─

  54 tests passed
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     100 |      100 |     100 |     100 |                   
 index.js |     100 |      100 |     100 |     100 |                   
----------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client polyline of meow----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> @mapbox/polyline@1.1.1 test
> eslint --no-eslintrc -c .eslintrc src && nyc tap test/polyline.test.js

TAP version 13
# Subtest: test/polyline.test.js
    # Subtest: polyline
        # Subtest: #decode()
            # Subtest: decodes an empty Array
                ok 1 - should be equivalent
                1..1
            ok 1 - decodes an empty Array # time=4.447ms
            
            # Subtest: decodes a String into an Array of lat/lon pairs
                ok 1 - should be equivalent
                1..1
            ok 2 - decodes a String into an Array of lat/lon pairs # time=1.439ms
            
            # Subtest: decodes with a custom precision
                ok 1 - should be equivalent
                1..1
            ok 3 - decodes with a custom precision # time=1.755ms
            
            # Subtest: decodes with precision 0
                ok 1 - should be equivalent
                1..1
            ok 4 - decodes with precision 0 # time=1.31ms
            
            1..4
        ok 1 - #decode() # time=31.526ms
        
        # Subtest: #identity
            # Subtest: feed encode into decode and check if the result is the same as the input
                ok 1 - should be equivalent
                1..1
            ok 1 - feed encode into decode and check if the result is the same as the input # time=1.824ms
            
            # Subtest: feed decode into encode and check if the result is the same as the input
                ok 1 - should be equal
                1..1
            ok 2 - feed decode into encode and check if the result is the same as the input # time=1.133ms
            
            1..2
        ok 2 - #identity # time=14.633ms
        
        # Subtest: #encode()
            # Subtest: encodes an empty Array
                ok 1 - should be equal
                1..1
            ok 1 - encodes an empty Array # time=1.057ms
            
            # Subtest: encodes an Array of lat/lon pairs into a String
                ok 1 - should be equal
                1..1
            ok 2 - encodes an Array of lat/lon pairs into a String # time=1.053ms
            
            # Subtest: encodes an Array of lat/lon/z into the same string as lat/lon
                ok 1 - should be equal
                1..1
            ok 3 - encodes an Array of lat/lon/z into the same string as lat/lon # time=0.909ms
            
            # Subtest: encodes with proper rounding
                ok 1 - should be equal
                1..1
            ok 4 - encodes with proper rounding # time=0.94ms
            
            # Subtest: encodes with proper negative rounding
                ok 1 - should be equal
                1..1
            ok 5 - encodes with proper negative rounding # time=0.943ms
            
            # Subtest: encodes with a custom precision
                ok 1 - should be equal
                1..1
            ok 6 - encodes with a custom precision # time=1.04ms
            
            # Subtest: encodes with precision 0
                ok 1 - should be equal
                1..1
            ok 7 - encodes with precision 0 # time=0.973ms
            
            # Subtest: encodes negative values correctly
                ok 1 - expect truthy value
                1..1
            ok 8 - encodes negative values correctly # time=0.929ms
            
            1..8
        ok 3 - #encode() # time=41.238ms
        
        # Subtest: #fromGeoJSON()
            # Subtest: throws for non linestrings
                ok 1 - expected to throw
                1..1
            ok 1 - throws for non linestrings # time=1.754ms
            
            # Subtest: allows geojson geometries
                ok 1 - should be equal
                1..1
            ok 2 - allows geojson geometries # time=1.818ms
            
            # Subtest: flips coordinates and encodes
                ok 1 - should be equal
                1..1
            ok 3 - flips coordinates and encodes # time=0.979ms
            
            1..3
        ok 4 - #fromGeoJSON() # time=32.282ms
        
        # Subtest: #toGeoJSON()
            # Subtest: flips coordinates and decodes geometry
                ok 1 - should be equivalent
                1..1
            ok 1 - flips coordinates and decodes geometry # time=1.081ms
            
            1..1
        ok 5 - #toGeoJSON() # time=6.554ms
        
        1..5
    ok 1 - polyline # time=144.361ms
    
    1..1
    # time=158.348ms
ok 1 - test/polyline.test.js # time=506.432ms

1..1
# time=529.866ms
-------------|---------|----------|---------|---------|-------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------|---------|----------|---------|---------|-------------------
All files    |     100 |    96.15 |     100 |     100 |                   
 polyline.js |     100 |    96.15 |     100 |     100 | 159               
-------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 694 packages in 5s

9 packages are looking for funding
  run `npm fund` for details

28 vulnerabilities (13 moderate, 8 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> @mapbox/polyline@1.1.1 test
> eslint --no-eslintrc -c .eslintrc src && nyc tap test/polyline.test.js

TAP version 13
# Subtest: test/polyline.test.js
    # Subtest: polyline
        # Subtest: #decode()
            # Subtest: decodes an empty Array
                ok 1 - should be equivalent
                1..1
            ok 1 - decodes an empty Array # time=4.44ms
            
            # Subtest: decodes a String into an Array of lat/lon pairs
                ok 1 - should be equivalent
                1..1
            ok 2 - decodes a String into an Array of lat/lon pairs # time=1.44ms
            
            # Subtest: decodes with a custom precision
                ok 1 - should be equivalent
                1..1
            ok 3 - decodes with a custom precision # time=1.768ms
            
            # Subtest: decodes with precision 0
                ok 1 - should be equivalent
                1..1
            ok 4 - decodes with precision 0 # time=1.33ms
            
            1..4
        ok 1 - #decode() # time=31.006ms
        
        # Subtest: #identity
            # Subtest: feed encode into decode and check if the result is the same as the input
                ok 1 - should be equivalent
                1..1
            ok 1 - feed encode into decode and check if the result is the same as the input # time=1.783ms
            
            # Subtest: feed decode into encode and check if the result is the same as the input
                ok 1 - should be equal
                1..1
            ok 2 - feed decode into encode and check if the result is the same as the input # time=1.115ms
            
            1..2
        ok 2 - #identity # time=14.731ms
        
        # Subtest: #encode()
            # Subtest: encodes an empty Array
                ok 1 - should be equal
                1..1
            ok 1 - encodes an empty Array # time=1.005ms
            
            # Subtest: encodes an Array of lat/lon pairs into a String
                ok 1 - should be equal
                1..1
            ok 2 - encodes an Array of lat/lon pairs into a String # time=1.003ms
            
            # Subtest: encodes an Array of lat/lon/z into the same string as lat/lon
                ok 1 - should be equal
                1..1
            ok 3 - encodes an Array of lat/lon/z into the same string as lat/lon # time=0.937ms
            
            # Subtest: encodes with proper rounding
                ok 1 - should be equal
                1..1
            ok 4 - encodes with proper rounding # time=0.922ms
            
            # Subtest: encodes with proper negative rounding
                ok 1 - should be equal
                1..1
            ok 5 - encodes with proper negative rounding # time=0.931ms
            
            # Subtest: encodes with a custom precision
                ok 1 - should be equal
                1..1
            ok 6 - encodes with a custom precision # time=1.029ms
            
            # Subtest: encodes with precision 0
                ok 1 - should be equal
                1..1
            ok 7 - encodes with precision 0 # time=0.972ms
            
            # Subtest: encodes negative values correctly
                ok 1 - expect truthy value
                1..1
            ok 8 - encodes negative values correctly # time=0.913ms
            
            1..8
        ok 3 - #encode() # time=40.785ms
        
        # Subtest: #fromGeoJSON()
            # Subtest: throws for non linestrings
                ok 1 - expected to throw
                1..1
            ok 1 - throws for non linestrings # time=1.848ms
            
            # Subtest: allows geojson geometries
                ok 1 - should be equal
                1..1
            ok 2 - allows geojson geometries # time=1.781ms
            
            # Subtest: flips coordinates and encodes
                ok 1 - should be equal
                1..1
            ok 3 - flips coordinates and encodes # time=1.073ms
            
            1..3
        ok 4 - #fromGeoJSON() # time=28.838ms
        
        # Subtest: #toGeoJSON()
            # Subtest: flips coordinates and decodes geometry
                ok 1 - should be equivalent
                1..1
            ok 1 - flips coordinates and decodes geometry # time=1.05ms
            
            1..1
        ok 5 - #toGeoJSON() # time=6.377ms
        
        1..5
    ok 1 - polyline # time=140.075ms
    
    1..1
    # time=153.934ms
ok 1 - test/polyline.test.js # time=413.944ms

1..1
# time=437.694ms
-------------|---------|----------|---------|---------|-------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------|---------|----------|---------|---------|-------------------
All files    |     100 |    96.15 |     100 |     100 |                   
 polyline.js |     100 |    96.15 |     100 |     100 | 159               
-------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client stylelint of meow----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> stylelint@14.9.1 pretest
> npm run lint


> stylelint@14.9.1 lint
> npm-run-all --parallel --continue-on-error lint:*


> stylelint@14.9.1 lint:formatting
> prettier . --check --cache


> stylelint@14.9.1 lint:md
> remark . --quiet --frail


> stylelint@14.9.1 lint:types
> tsc


> stylelint@14.9.1 lint:js
> eslint . --cache --max-warnings=0

Checking formatting...
All matched files use Prettier code style!

> stylelint@14.9.1 test
> jest --coverage


=============================== Coverage summary ===============================
Statements   : 95.17% ( 11690/12283 )
Branches     : 89.37% ( 5995/6708 )
Functions    : 99.38% ( 1789/1800 )
Lines        : 95.78% ( 11419/11922 )
================================================================================
npm uninstall

removed 1 package, and audited 1077 packages in 5s

283 packages are looking for funding
  run `npm fund` for details

6 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> stylelint@14.9.1 pretest
> npm run lint


> stylelint@14.9.1 lint
> npm-run-all --parallel --continue-on-error lint:*


> stylelint@14.9.1 lint:js
> eslint . --cache --max-warnings=0


> stylelint@14.9.1 lint:formatting
> prettier . --check --cache


> stylelint@14.9.1 lint:types
> tsc


> stylelint@14.9.1 lint:md
> remark . --quiet --frail

Checking formatting...
All matched files use Prettier code style!
lib/cli.js(4,22): error TS2307: Cannot find module 'meow' or its corresponding type declarations.
lib/cli.js(529,2): error TS2578: Unused '@ts-expect-error' directive.
----------------------run test done----------------------
----------------------client tsd of meow----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> tsd@0.22.0 pretest
> npm run build && cpy "./**/**" "../../../dist/test/fixtures/" --parents --cwd=source/test/fixtures


> tsd@0.22.0 build
> npm run clean && tsc --project tsconfig.tsd.json && chmod +x dist/cli.js


> tsd@0.22.0 clean
> del-cli dist


> tsd@0.22.0 test
> npm run lint && ava


> tsd@0.22.0 lint
> eslint 'source/**/*'


  ✖ cli.ts › succeed if no errors are found Rejected promise returned by test
  ✖ cli.ts › fail if errors are found 
  ✖ cli.ts › provide a path 
  ✔ assignability.ts › assignable (33.1s)
  ✔ deprecated.ts › deprecated (32.9s)
  ✔ assignability.ts › not assignable (55.5s)
  ✔ deprecated.ts › not deprecated (55.4s)
  ✔ eslint-compatibility.ts › `expectType` is compatible with eslint @typescript-eslint/no-unsafe-call rule (8.1s)
  ✔ test.ts › throw if no type definition was found (241ms)
  ✔ test.ts › fails if typings file is not found in the specified path (225ms)
  ✔ identicality.ts › identical (32.9s)
  ✔ test.ts › specify test files manually (30.6s)
  ✔ identicality.ts › not identical (59.8s)
  ✔ test.ts › return diagnostics (52.4s)
  ✔ test.ts › return diagnostics from imported files as well (1m 5s)
  ✔ test.ts › allow specifying folders containing typings file in `files` list (1m 15.8s)
  ✔ test.ts › allow specifying negative gitignore-style patterns in `files` list (1m 28.3s)
  ✔ test.ts › allow specifying root marker (/) gitignore-style patterns in `files` list (1m 38.8s)
  ✔ test.ts › allow specifying glob patterns containing typings file in `files` list (1m 49.3s)
  ✔ test.ts › fail if `typings` property is used instead of `types` (1m 59.7s)
  ✔ test.ts › fail if tests don't pass in strict mode (2m 10.2s)
  ✔ test.ts › overridden config defaults to `strict` if `strict` is not explicitly overridden (2m 21s)
  ✔ test.ts › fail if types are used from a lib that was not explicitly specified (2m 30.8s)
  ✔ test.ts › allow specifying a lib as a triple-slash-reference (2m 42.4s)
  ✔ test.ts › allow specifying a lib in package.json's `tsd` field (2m 53s)
  ✔ test.ts › allow specifying a lib in tsconfig.json (3m 3.9s)
  ✔ test.ts › use moduleResolution `nodenext` when module is `nodenext` in tsconfig.json (3m 14.6s)
  ✔ test.ts › use moduleResolution `nodenext` when module is `nodenext` in package.json (3m 25.6s)
  ✔ test.ts › use moduleResolution `node16` when module is `node16` in tsconfig.json (3m 36.3s)
  ✔ test.ts › use moduleResolution `node16` when module is `node16` in package.json (3m 47.4s)
  ✔ test.ts › add support for esm with esModuleInterop (3m 58s)
  ✔ test.ts › add DOM support by default (4m 9.2s)
  ✔ test.ts › a lib option in package.json overrdides a lib option in tsconfig.json (4m 20s)
  ✔ test.ts › pass in loose mode when strict mode is disabled in settings (4m 26.9s)
  ✔ test.ts › return no diagnostics (4m 39.4s)
  ✔ test.ts › support non-barrel main (4m 50.4s)
  ✔ test.ts › allow omitting `types` property when `main` property is missing but main is a barrel (`index.js`) and .d.ts file matches main (5m 1.6s)
  ✔ test.ts › allow omitting `types` property when `main` property is set to a barrel (`index.js`) and .d.ts file matches main (5m 12.4s)
  ✔ test.ts › allow omitting `types` property when `main` property is set to non-barrel (`foo.js`) and .d.ts file matches main (5m 23.7s)
  ✔ test.ts › support testing in sub-directories (5m 34.4s)
  ✔ test.ts › support top-level await (5m 45.5s)
  ✔ test.ts › expectError for classes (5m 56.7s)
  ✔ test.ts › expectError for functions (6m 8s)
  ✔ test.ts › expectError for generics (6m 18.7s)
  ✔ test.ts › expectError should not ignore syntactical errors (6m 29.9s)
  ✔ test.ts › expectError for values (6m 40.7s)
  ✔ test.ts › expectError for values (noImplicitAny disabled) (6m 51.8s)
  ✔ test.ts › missing import (7m 2.8s)
  ✔ test.ts › tsx component (7m 14s)
  ✔ test.ts › tsx component type (7m 24.8s)
  ✔ test.ts › loose types (7m 36.8s)
  ✔ test.ts › strict types (7m 47.8s)
  ✔ test.ts › typings in custom directory (7m 58.9s)
  ✔ test.ts › includes extended config files along with found ones (8m 5.8s)
  ✔ test.ts › errors in libs from node_modules are not reported (8m 11.3s)
  ✔ test.ts › prints the types of expressions passed to `printType` helper (8m 22.3s)
  ✔ test.ts › allow specifying negated negative (positive) gitignore-style patterns in `files` list (8m 32.9s)
  ✔ test.ts › throw if no test is found (8m 32.9s)
  ✔ test.ts › fail if typings file is not part of `files` list (8m 43.9s)
  ✔ test.ts › support default test directory (8m 54.3s)
  ✔ test.ts › support tsx in subdirectory (9m 5.2s)
  ✔ test.ts › support setting a custom test directory (9m 15.6s)
  ✔ test.ts › allow specifying `rootDir` option in `tsconfig.json` (9m 26.6s)
  ─

  cli.ts › succeed if no errors are found

  Rejected promise returned by test. Reason:

  Error {
    command: '../../../cli.js',
    escapedCommand: '"../../../cli.js"',
    exitCode: 1,
    failed: true,
    isCanceled: false,
    killed: false,
    shortMessage: 'Command failed with exit code 1: ../../../cli.js',
    signal: undefined,
    signalDescription: undefined,
    stderr: `/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16␊
    const meow_1 = __importDefault(require("meow"));␊
                                   ^␊
    ␊
    Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/VariantsDeps/meow/variant1/meow/index.js from /data/js-variants/multee/Clients/meow/tsd/dist/cli.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/meow/tsd/dist/cli.js to a dynamic import() which is available in all CommonJS modules.␊
        at Object.<anonymous> (/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16:32) {␊
      code: 'ERR_REQUIRE_ESM'␊
    }`,
    stdout: '',
    timedOut: false,
    message: `Command failed with exit code 1: ../../../cli.js␊
    /data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16␊
    const meow_1 = __importDefault(require("meow"));␊
                                   ^␊
    ␊
    Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/VariantsDeps/meow/variant1/meow/index.js from /data/js-variants/multee/Clients/meow/tsd/dist/cli.js not supported.␊
    Instead change the require of index.js in /data/js-variants/multee/Clients/meow/tsd/dist/cli.js to a dynamic import() which is available in all CommonJS modules.␊
        at Object.<anonymous> (/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16:32) {␊
      code: 'ERR_REQUIRE_ESM'␊
    }`,
  }

  › Instead change the require of index.js in dist/cli.js to a dynamic import() which is available in all CommonJS modules.
  › Object.<anonymous> (dist/cli.js:16:32) {
  › }
  › makeError (node_modules/execa/lib/error.js:60:11)
  › handlePromise (node_modules/execa/index.js:118:26)



  cli.ts › fail if errors are found

  Value must match expression:

  `/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16␊
  const meow_1 = __importDefault(require("meow"));␊
                                 ^␊
  ␊
  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/VariantsDeps/meow/variant1/meow/index.js from /data/js-variants/multee/Clients/meow/tsd/dist/cli.js not supported.␊
  Instead change the require of index.js in /data/js-variants/multee/Clients/meow/tsd/dist/cli.js to a dynamic import() which is available in all CommonJS modules.␊
      at Object.<anonymous> (/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16:32) {␊
    code: 'ERR_REQUIRE_ESM'␊
  }`

  Regular expression:

  /5:19[ ]{2}Argument of type number is not assignable to parameter of type string./

  › dist/test/cli.js:23:7
  › Generator.next (<anonymous>)
  › fulfilled (dist/test/cli.js:5:58)



  cli.ts › provide a path

  Value must match expression:

  `/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16␊
  const meow_1 = __importDefault(require("meow"));␊
                                 ^␊
  ␊
  Error [ERR_REQUIRE_ESM]: require() of ES Module /data/js-variants/multee/VariantsDeps/meow/variant1/meow/index.js from /data/js-variants/multee/Clients/meow/tsd/dist/cli.js not supported.␊
  Instead change the require of index.js in /data/js-variants/multee/Clients/meow/tsd/dist/cli.js to a dynamic import() which is available in all CommonJS modules.␊
      at Object.<anonymous> (/data/js-variants/multee/Clients/meow/tsd/dist/cli.js:16:32) {␊
    code: 'ERR_REQUIRE_ESM'␊
  }`

  Regular expression:

  /5:19[ ]{2}Argument of type number is not assignable to parameter of type string./

  › dist/test/cli.js:35:7
  › Generator.next (<anonymous>)
  › fulfilled (dist/test/cli.js:5:58)

  ─

  3 tests failed
npm uninstall

removed 1 package, and audited 598 packages in 4s

81 packages are looking for funding
  run `npm fund` for details

10 vulnerabilities (5 moderate, 5 high)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> tsd@0.22.0 pretest
> npm run build && cpy "./**/**" "../../../dist/test/fixtures/" --parents --cwd=source/test/fixtures


> tsd@0.22.0 build
> npm run clean && tsc --project tsconfig.tsd.json && chmod +x dist/cli.js


> tsd@0.22.0 clean
> del-cli dist

[96msource/cli.ts[0m:[93m2[0m:[93m18[0m - [91merror[0m[90m TS2307: [0mCannot find module 'meow' or its corresponding type declarations.

[7m2[0m import meow from 'meow';
[7m [0m [91m                 ~~~~~~[0m


Found 1 error in source/cli.ts[90m:2[0m

----------------------run test done----------------------
----------------------client xo of meow----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> xo@0.51.0 test
> node cli.js && nyc ava

npm uninstall

removed 1 package, and audited 672 packages in 3s

170 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> xo@0.51.0 test
> node cli.js && nyc ava

----------------------run test done----------------------
send
subdir: connect-gzip-static fastify-static gulp-connect node-restify serve-static
----------------------client connect-gzip-static of send----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> connect-gzip-static@3.0.0 test
> make lint test

./node_modules/.bin/jshint *.js lib test
./node_modules/.bin/mocha --require should --require test/support/http --exit


  gzipStatic
    ✔ should serve static files
    ✔ should set Content-Type
    ✔ should send compressed index.html when asked for /
    ✔ should set Content-Type when asked for /
    ✔ should send uncompressed index.html when asked for /
    ✔ should default max-age=0
    ✔ should set ETag and Last-Modified
    ✔ should serve uncompressed files unless requested
    ✔ should serve compressed files when requested
    ✔ should serve brotli compressed files when requested both gzip and brotli
    ✔ should serve gzip compressed files when requested both gzip and brotli and only .gz is available
    ✔ should set Content-Type for compressed files
    ✔ should set Vary for compressed files
    ✔ should set Content-Encoding for compressed files
    ✔ should ignore POST requests

  gzipStatic with options
    ✔ should send compressed configured index when asked for /
    ✔ should send compressed configured index when asked for /
    ✔ should set Content-Type for for configured index when asked for /
    ✔ should send uncompressed print.css asked for /
    ✔ should set custom headers when requested
    ✔ should respect custom options


  21 passing (85ms)

npm uninstall

added 15 packages, changed 1 package, and audited 139 packages in 1s

24 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> connect-gzip-static@3.0.0 test
> make lint test

./node_modules/.bin/jshint *.js lib test
./node_modules/.bin/mocha --require should --require test/support/http --exit


  gzipStatic
    ✔ should serve static files
    ✔ should set Content-Type
    ✔ should send compressed index.html when asked for /
    ✔ should set Content-Type when asked for /
    ✔ should send uncompressed index.html when asked for /
    ✔ should default max-age=0
    ✔ should set ETag and Last-Modified
    ✔ should serve uncompressed files unless requested
    ✔ should serve compressed files when requested
    ✔ should serve brotli compressed files when requested both gzip and brotli
    ✔ should serve gzip compressed files when requested both gzip and brotli and only .gz is available
    ✔ should set Content-Type for compressed files
    ✔ should set Vary for compressed files
    ✔ should set Content-Encoding for compressed files
    ✔ should ignore POST requests

  gzipStatic with options
    ✔ should send compressed configured index when asked for /
    ✔ should send compressed configured index when asked for /
    ✔ should set Content-Type for for configured index when asked for /
    ✔ should send uncompressed print.css asked for /
    ✔ should set custom headers when requested
    ✔ should respect custom options


  21 passing (75ms)

----------------------run test done----------------------
----------------------client fastify-static of send----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=6.166ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=1.353ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=1.439ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=1.402ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=0.851ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=72.235ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=26.8ms
        
    ok 7 - dir list default options # time=49.889ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=32.688ms
        
    ok 8 - dir list, custom options # time=41.364ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=66.973ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=20.569ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=9.362ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=11.191ms
        
    ok 9 - dir list html format # time=233.625ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=30.829ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=10.844ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=19.155ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=8.084ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=7.569ms
        
    ok 10 - dir list href nested structure # time=90.652ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=12.988ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=3.145ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=39.754ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=4.467ms
        
    ok 13 - dir list json format # time=11.297ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=4.297ms
        
    ok 14 - dir list json format - extended info # time=13.91ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=15.317ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=17.183ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=24.389ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=3.338ms
        
    ok 18 - dir list on empty dir # time=11.146ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=15.548ms
        
    ok 19 - dir list serve index.html on index option # time=21.963ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=12.278ms
        
    ok 20 - serve a non existent dir and get error # time=27.746ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=5.965ms
        
    ok 21 - serve a non existent dir and get error # time=33.943ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=14.392ms
        
    ok 22 - dir list with dotfiles allow option # time=25.69ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.848ms
        
    ok 23 - dir list with dotfiles deny option # time=9.658ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.657ms
        
    ok 24 - dir list with dotfiles ignore option # time=10.135ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=27.645ms
    
    1..25
    # time=839.608ms
ok 1 - test/dir-list.test.js # time=839.608ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=61.653ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=11.977ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=10.696ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=7.343ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=16.776ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=9.523ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=17.551ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=8.171ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 199
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:199:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=92.508ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=6.779ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=15.095ms
        
        # failed 1 of 12 tests
    not ok 1 - register /static prefixAvoidTrailingSlash # time=446.12ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=21.621ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=19.036ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=10.201ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=4.77ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.265ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=5.913ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=3.836ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.054ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 357
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:357:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=10.616ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.858ms
        
        # failed 1 of 11 tests
    not ok 2 - register /static # time=103.64ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=44.225ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=4.348ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=4.008ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=4.864ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=2.986ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=4.639ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=5.93ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.316ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=3.189ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 515
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:515:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 11 - /static/../index.js # time=8.638ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=6.218ms
        
        # failed 1 of 12 tests
    not ok 3 - register /static/ # time=119.872ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=5.998ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=8.866ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=3.455ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=3.498ms
        
    ok 4 - register /static and /static2 # time=28.133ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=4.69ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=2.62ms
        
    ok 5 - payload.filename is set # time=12.296ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 712
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:712:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '403 Custom error message')
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403 Custom error message
                +undefined Custom error message
              ...
            
            # failed 1 of 4 tests
        not ok 2 - /../index.js # time=8.714ms
        
        # failed 1 of 2 tests
    not ok 6 - error responses can be customized with fastify.setErrorHandler() # time=16.151ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=2.325ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=10.895ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 791
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:791:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 792
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:792:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.statusCode, 404)
                        t.equal(response.headers['content-type'], 'text/plain')
                ----------^
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -text/plain
                +application/json; charset=utf-8
              ...
            
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 793
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:793:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                ----------^
                      })
                    })
              diff: >
                --- expected
              
                +++ actual
              
                @@ -1,1 +1,1 @@
              
                -/path/does/not/.exist.html Not Found
              
                +{"statusCode":500,"error":"Internal Server Error","message":"setPrototypeOf is not a function"}
              ...
            
            # failed 3 of 4 tests
        not ok 2 - /path/does/not/.exist.html # time=29.203ms
        
        # failed 1 of 2 tests
    not ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=36.299ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=2.65ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=5.473ms
        
    ok 9 - serving disabled # time=19.809ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=5.467ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=3.802ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.356ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.55ms
        
    ok 10 - sendFile # time=22.57ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.903ms
        
    ok 11 - sendFile disabled # time=7.298ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=5.763ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.901ms
        
    ok 12 - allowedPath option - pathname # time=15.957ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=4.059ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.431ms
        
    ok 13 - allowedPath option - request # time=13.623ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=7.103ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=3.51ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.81ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=10.059ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.871ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=3.552ms
        
    ok 14 - download # time=40.274ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.822ms
        
    ok 15 - sendFile disabled # time=13.116ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.125ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=12.41ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.355ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=8.787ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=34.707ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=6.805ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=11.963ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=13.911ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.709ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.98ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.647ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.58ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.571ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.7ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.778ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.838ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=8.951ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.753ms
        
    ok 22 - errors # time=50.127ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.701ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=4.052ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=7.709ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.317ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.302ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.37ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 1631
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:1631:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 8 - /../index.js # time=12.779ms
        
        # failed 1 of 8 tests
    not ok 23 - register no prefix # time=47.744ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.197ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.408ms
        
    ok 24 - with fastify-compress # time=24.471ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=7.883ms
        
    ok 25 - register /static/ with schemaHide true # time=19.486ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.132ms
        
    ok 26 - register /static/ with schemaHide false # time=9.499ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.799ms
        
    ok 27 - register /static/ without schemaHide # time=9.136ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=5.988ms
        
    ok 28 - fastify with exposeHeadRoutes # time=70.317ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=8.569ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=3.039ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=3.181ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.58ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=3.069ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=3.114ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.507ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=3.259ms
        
    ok 29 - register with wildcard false # time=52.437ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=4.508ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=3.848ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=13.485ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=3.109ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=3.096ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=3.127ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.747ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.35ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=3.147ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.137ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.807ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.289ms
        
    ok 32 - register with wildcard false and alternative index # time=65.166ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=9.297ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.178ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.849ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.284ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=3.376ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=7.583ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.77ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=3.953ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=9.38ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2.503ms
        
    ok 33 - register /static with wildcard false and alternative index # time=64.048ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=13.335ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.65ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.798ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.432ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.086ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=5.686ms
        
    ok 34 - register /static with redirect true # time=37.001ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=9.63ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.895ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=3.575ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=6.471ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=6.449ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=4.002ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=6.764ms
        
    ok 35 - register /static with redirect true and wildcard false # time=58.171ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=4.319ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=2.122ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.957ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.2ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.03ms
        
    ok 36 - trailing slash behavior with redirect = false # time=17.005ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=6.759ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2710
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2710:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 2 - ignore dotfiles # time=7.961ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2736
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2736:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 3 - deny requests to serve a dotfile # time=11.955ms
        
        # failed 2 of 3 tests
    not ok 37 - if dotfiles are properly served according to plugin options # time=30.113ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=10.676ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=8.208ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=4.516ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=2.698ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.424ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=4.672ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=8.906ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=6.288ms
        
    ok 44 - register /static and /static2 without wildcard # time=25.493ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=5.58ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=4.284ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.689ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=6.705ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=4.91ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=18.577ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=12.502ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=12.538ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=9.88ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=8.434ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.389ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=4.801ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=4.615ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.784ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=9.82ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=3.186ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=14.965ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.788ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.946ms
        
    ok 62 - should not serve index if option is `false` # time=9.454ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=18.238ms
    
    1..63
    # failed 7 of 63 tests
    # time=1807.666ms
not ok 2 - test/static.test.js # time=1807.666ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 1 of 2 tests
# time=3687.53ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |   99.04 |    98.58 |     100 |      99 |                   
 fastify-static     |   98.61 |    98.03 |     100 |   98.59 |                   
  index.js          |   98.61 |    98.03 |     100 |   98.59 | 254-258           
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------
npm uninstall

removed 1 package, and audited 888 packages in 3s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    1..0 # no tests found
not ok 1 - test/dir-list.test.js # time=1069.567ms
  ---
  env: {}
  file: test/dir-list.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/dir-list.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

# Subtest: test/static.test.js
    1..0 # no tests found
not ok 2 - test/static.test.js # time=1182.216ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 2 of 2 tests
# time=1211.954ms
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     2.3 |        0 |       0 |    2.34 |                   
 index.js |     2.3 |        0 |       0 |    2.34 | 8-517             
----------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client gulp-connect of send----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> gulp-connect@5.7.0 pretest
> coffee -o . -bc src/


> gulp-connect@5.7.0 test
> mocha



  gulp-connect
    Simple
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35000[39m
[17:15:33] [32mRunning server[39m
      ✓ Explicit /test.txt
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35001[39m
[17:15:33] [32mRunning server[39m
      ✓ Implicit /index.html
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mServer stopped[39m

  Self Start / Stop
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35002[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Root string
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35003[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Root array
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:3333[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Port test
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started https://localhost:35004[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Https test (48ms)
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35005[39m
[17:15:33] [32mLiveReload started on port 35729[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Livereload test
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started https://localhost:35006[39m
[17:15:33] [32mLiveReload started on port 35729[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Livereload https test
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35007[39m
[17:15:33] [32mLiveReload started on port 35008[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Livereload port
[17:15:33] [32mServer stopped[39m
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35009[39m
[17:15:33] [32mLiveReload started on port 35010[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
[17:15:33] [32mServer stopped[39m
    ✓ livereload closes (106ms)
[17:15:33] [32mStarting server...[39m
[17:15:33] [32mServer started http://localhost:35011[39m
[17:15:33] [32mRunning server[39m
[17:15:33] [32mStopping server[39m
[17:15:33] [32mStopped server[39m
    ✓ Fallback test
[17:15:33] [32mServer stopped[39m


  11 passing (260ms)

npm uninstall

added 1 package, removed 2 packages, changed 2 packages, and audited 443 packages in 3s

20 vulnerabilities (5 moderate, 12 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> gulp-connect@5.7.0 pretest
> coffee -o . -bc src/


> gulp-connect@5.7.0 test
> mocha



  gulp-connect
    Simple
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35000[39m
[17:15:37] [32mRunning server[39m
      ✓ Explicit /test.txt
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35001[39m
[17:15:37] [32mRunning server[39m
      ✓ Implicit /index.html
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mServer stopped[39m

  Self Start / Stop
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35002[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Root string
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35003[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Root array
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:3333[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Port test
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started https://localhost:35004[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Https test
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35005[39m
[17:15:37] [32mLiveReload started on port 35729[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Livereload test
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started https://localhost:35006[39m
[17:15:37] [32mLiveReload started on port 35729[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Livereload https test
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35007[39m
[17:15:37] [32mLiveReload started on port 35008[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Livereload port
[17:15:37] [32mServer stopped[39m
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35009[39m
[17:15:37] [32mLiveReload started on port 35010[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
[17:15:37] [32mServer stopped[39m
    ✓ livereload closes (105ms)
[17:15:37] [32mStarting server...[39m
[17:15:37] [32mServer started http://localhost:35011[39m
[17:15:37] [32mRunning server[39m
[17:15:37] [32mStopping server[39m
[17:15:37] [32mStopped server[39m
    ✓ Fallback test
[17:15:37] [32mServer stopped[39m


  11 passing (210ms)

----------------------run test done----------------------
----------------------client node-restify of send----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> restify@8.5.1 test
> make prepush

Running "make check-lint"

/data/js-variants/multee/Clients/send/node-restify/lib/formatters/text.js
  23:5  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/lib/plugins/conditionalRequest.js
  109:9  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/lib/server.js
  807:17  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/plugins/jsonBodyParser.test.js
  144:5  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/plugins/metrics.test.js
  318:17  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/server.test.js
  2055:5  warning  Unexpected 'todo' comment  no-warning-comments

✖ 6 problems (0 errors, 6 warnings)

Running "make check-style"
check ok
./node_modules/.bin/nodeunit test/*.test.js

[1mchain.test.js[22m
✔ calls all the handlers
✔ abort with Error in next
✔ abort with false in next
✔ abort with closed request
✔ cals error middleware
✔ onceNext prevents double next calls
✔ throws error for double next calls in strictNext mode
✔ calls req.startHandlerTimer
✔ calls req.endHandlerTimer
✔ count returns with the number of registered handlers
✔ getHandlers returns with the array of handlers
✔ waits async handlers
✔ abort with rejected promise
✔ abort with rejected promise without error
✔ abort with throw inside async function
✔ fails to add non async function with arity 2
✔ fails to add async function with arity 3

[1mchainComposer.test.js[22m
✔ chainComposer creates a valid chain for a handler array 
✔ chainComposer creates a valid chain for a single handler

[1mformatter-optional.test.js[22m
✔ send 200 on formatter missing and strictFormatters false

[1mformatter.test.js[22m
✔ GH-845: sync formatter
✔ GH-845: sync formatter should blow up
✔ sync formatter should handle expected errors gracefully
✔ q-val priority
✔ GH-771 q-val priority on */*
✔ GH-937 should return 406 when no content-type header set on response matching an acceptable type found by matching client
✔ GH-937 should return 500 when no default formatter found and octet-stream is not available
✔ default jsonp formatter should escape line and paragraph separators
✔ default json formatter should wrap & throw InternalServer error on unserializable bodies

[1mindex.test.js[22m
✔ httpDate

[1mrequest.test.js[22m
✔ query should return empty string
✔ query should return raw query string string
✔ should generate request id on first req.id() call
✔ should set request id
✔ should throw when setting request id after autogeneration
✔ should throw when setting request id twice
✔ should provide route object
✔ should provide time when request started
✔ should provide date when request started
✔ should emit restifyDone event when request is fully served
✔ should emit restifyDone event when request is fully served with error

[1mresponse.test.js[22m
✔ redirect to new string url as-is
✔ redirect to new relative string url as-is
✔ redirect to current url (reload)
✔ redirect to current url from http -> https
✔ redirect to current url from https -> http
✔ redirect by changing path
✔ GH-1494: redirect should succeed even if req.url does not specify host or protocol
✔ redirect should add query params
✔ redirect should extend existing query params
✔ redirect should stomp over existing query params
✔ redirect with 301 status code
✔ redirect with 301 status code ising string url
✔ redirect using options.url
✔ redirect using opts.port
✔ redirect using external url and custom port
✔ redirect using default hostname with custom port
✔ redirect should cause InternalError when invoked without next
✔ redirect should call next with false to stop handler stack execution
✔ redirect should emit a redirect event
✔ writeHead should emit a header event
✔ should fail to set header due to missing formatter
✔ should not fail to send null as body
✔ should not fail to send null as body without status code
✔ should prefer explicit status code over error status code
✔ GH-951: should send without formatting
✔ GH-951: sendRaw accepts only strings or buffers
✔ GH-1429: setting code with res.status not respected
✔ should support multiple set-cookie headers
✔ GH-1607: should send bools with explicit status code
✔ GH-1607: should send numbers with explicit status code
✔ GH-1791: should send 0 as 0 with application/json
✔ GH-1791: should send false as false with application/json
✔ GH-1791: should send empty string as "" with application/json
✔ GH-1791: should send null as null with application/json
✔ GH-1791: should send undefined as empty with application/json
✔ GH-1791: should send NaN as null with application/json

[1mrouter.test.js[22m
✔ mounts a route
✔ unmounts a route
✔ unmounts a route that does not exist
✔ clean up xss for 404
✔ lookupByName runs a route by name and calls next
✔ lookupByName calls next with err
✔ lookup runs a route chain by path and calls next
✔ lookup calls next with err
✔ route handles 404
✔ route handles method not allowed (405)
✔ prints debug info
✔ toString()
✔ toString() with ignoreTrailingSlash
✔ render route
✔ render route (missing params)
✔ GH #704: render route (special charaters)
✔ GH #704: render route (with sub-regex param)
✔ GH-796: render route (with multiple sub-regex param)
✔ render route (with encode)
✔ render route (query string)

[1mrouterRegistryRadix.test.js[22m
✔ adds a route
✔ removes a route
✔ lookups a route
✔ get registered routes
✔ toString()
✔ toString() with ignoreTrailingSlash

[1mserver.test.js[22m
✔ 405
✔ listen and close (port only)
✔ listen and close (port only) w/ port number as string
✔ listen and close (socketPath)
✔ gh-751 IPv4/IPv6 server URL
✔ get (path only)
✔ get (path only - with trailing slash)
✔ get (path only - with trailing slash and nested route)
✔ use + get (path only)
✔ rm
✔ _routeErrorResponse does not cause uncaughtException when called whenheader has already been sent
✔ use - throws TypeError on non function as argument
✔ PUT ok
✔ PATCH ok
✔ HEAD ok
✔ DELETE ok
✔ OPTIONS
✔ RegExp ok
✔ get (path and version ok)
✔ GH-63 res.send 204 is sending a body
✔ GH-64 prerouting chain
✔ GH-64 prerouting chain with error
✔ GH-67 extend access-control headers
✔ GH-77 uncaughtException (default behavior)
✔ handleUncaughtExceptions should not call handler for internal errors
✔ handleUncaughtExceptions should not call handler for next(new Error())
✔ GH-77 uncaughtException (with custom handler)
✔ GH-180 can parse DELETE body
✔ returning error from a handler (with domains)
✔ emitting error from a handler (with domains)
✔ re-emitting redirect from a response
✔ throwing error from a handler (with domains)
✔ gh-278 missing router error events (404)
✔ gh-278 missing router error events (405)
✔ gh-329 wrong values in res.methods
✔ GH #704: Route with a valid RegExp params
✔ GH #704: Route with an invalid RegExp params
✔ run param only with existing req.params
✔ next("string") returns InternalServer
✔ next("string") from a use plugin returns InternalServer
✔ res.charSet
✔ res.charSet override
✔ GH-384 res.json(200, {}) broken
✔ explicitly sending a 403 with custom error
✔ explicitly sending a 403 on error
✔ fire event on error
✔ error handler defers "after" event
✔ gh-757 req.absoluteUri() defaults path segment to req.path()
✔ GH-693 sending multiple response header values
✔ gh-762 res.noCache()
✔ gh-779 set-cookie fields should never have commas
✔ gh-986 content-type fields should never have commas (via `res.header(...)`)
✔ gh-986 content-type fields should never have commas (via `res.setHeader(...)`)
✔ GH-877 content-type should be case insensitive
✔ GH-882: route name is same as specified
✔ GH-733 if request closed early, stop processing. ensure only relevant audit logs output.
✔ GH-667 emit error event for generic Errors
✔ GH-667 returning error in error handler should not do anything
✔ GH-1024 disable uncaughtException handler
✔ GH-999 Custom 404 handler does not send response
✔ calling next(false) should early exit from pre handlers
✔ calling next(false) should early exit from use handlers
✔ calling next(err) from pre should still emit after event
✔ GH-1078: server name should default to restify
✔ GH-1078: server name should be customizable
✔ GH-1078: server name should be overridable and not sent down
✔ should emit 'after' on successful request
✔ should emit 'after' on successful request with work
✔ should emit 'after' on errored request
✔ should emit 'after' on uncaughtException
✔ should emit 'after' when sending res on uncaughtException
✔ should emit 'after' on client closed request (req.connectionState(): 'close')
✔ should emit 'after' on uncaughtException after response closed with custom uncaughtException listener
✔ should increment/decrement inflight request count
✔ should increment/decrement inflight request count for concurrent reqs
✔ should emit 'close' on server close
✔ should cleanup inflight requests count for 404s
✔ should cleanup inflight requests count for timeouts
✔ should cleanup inflight requests count on uncaughtExceptions
✔ should show debug information
✔ should emit 'pre' event on a 200
✔ should emit 'pre' event on 404
✔ should emit 'routed' event on a 200
✔ should not emit 'routed' event on 404
✔ should emit restifyError even for router errors
✔ should emit error with multiple next calls with strictNext
✔ should send 500 if we reached the end of handler chain w/o sending headers
✔ uncaughtException should not trigger named routeHandler
✔ uncaughtException should handle thrown null
✔ uncaughtException should handle thrown undefined literal
✔ uncaughtException should handle thrown falsy number
✔ uncaughtException should handle thrown non falsy number
✔ uncaughtException should handle thrown boolean
✔ uncaughtException should handle thrown falsy boolean
✔ should have proxy event handlers as instance
✔ first chain should get to reject requests
✔ first chain should get to allow requests
✔ first chain should allow multiple handlers
✔ first chain should allow any handler to reject
✔ inflightRequest accounting stable with firstChain
✔ async prerouting chain with error
✔ async prerouting chain with empty rejection
✔ async use chain with error
✔ async handler with error
✔ async handler with error after send succeeds
✔ async handler without next
✔ async handler should discard value
✔ Server returns 400 on invalid method
✔ Server returns 4xx when header size is too large
✔ Server supports adding custom clientError listener
✔ Server correctly handles multiple clientError listeners

[1mserverHttp2.test.js[22m
✔ get (path only)

[1mupgrade.test.js[22m
✔ GET without upgrade headers
✔ Dueling upgrade and response handling 1
✔ Dueling upgrade and response handling 2
✔ GET with upgrade headers
✔ GET with some websocket traffic

[1mutils.test.js[22m
✔ merge qs

[1m[32mOK: [39m[22m729 assertions (7912ms)
./node_modules/.bin/mocha --full-trace --no-exit test/plugins/*.test.js


  accept parser
    ✓ accept ok
    ✓ accept not ok (406)
    ✓ GH-1619: should fire NotAcceptable event on server

  audit logger
    ✓ audit logger should print log by default
{"level":30,"time":1661447756669,"pid":293728,"hostname":"liu-js-variants","name":"audit","audit":true,"component":"after","remoteAddress":"127.0.0.1","remotePort":52810,"req_id":"16189fb9-90c8-445e-97f9-97aa7bfb47a9","req":{"query":{},"method":"GET","url":"/audit","headers":{"accept":"application/json","user-agent":"restify/2.6.9 (x64-linux; v8/9.4.146.26-node.22; OpenSSL/1.1.1q+quic) node/16.17.0","date":"Thu, 25 Aug 2022 17:15:56 GMT","host":"127.0.0.1:42537","connection":"keep-alive"},"httpVersion":"1.1","trailers":{},"version":"*","timers":{"parseQueryString":87,"handler-0":188}},"res":{"statusCode":200,"headers":{"server":"restify"},"trailer":false},"latency":1,"_audit":true,"event":"after","msg":"handled: 200"}
    ✓ test audit logger emit
    ✓ test custom serializers
    ✓ should log handler timers (1104ms)
    ✓ should log anonymous handler timers (2007ms)
    ✓ restify-GH-1435 should accumulate log handler timers (1104ms)
    ✓ restify-GH-812 audit logger has query params string
    ✓ restify-GH-812 audit logger has query params obj
    ✓ should work with pre events
    ✓ should work with routed events
{"level":30,"time":1661447760917,"pid":293728,"hostname":"liu-js-variants","name":"audit","audit":true,"component":"after","remoteAddress":"127.0.0.1","remotePort":54870,"req_id":"ceec9965-bc4c-42b5-9234-3a96a2bbd4d7","req":{"query":{"foo":"bar"},"method":"GET","url":"/audit?foo=bar","headers":{"accept":"application/json","user-agent":"restify/2.6.9 (x64-linux; v8/9.4.146.26-node.22; OpenSSL/1.1.1q+quic) node/16.17.0","date":"Thu, 25 Aug 2022 17:16:00 GMT","host":"127.0.0.1:40547","connection":"keep-alive"},"httpVersion":"1.1","trailers":{},"version":"*","timers":{"parseQueryString":62,"handler-0":213}},"res":{"statusCode":200,"headers":{"server":"restify"},"trailer":false},"latency":0,"_audit":true,"event":"after","context":{"qs":"foo=bar"},"msg":"handled: 200"}
    ✓ should work with custom context functions
{"level":30,"time":1661447761072,"pid":293728,"hostname":"liu-js-variants","name":"audit","audit":true,"component":"after","req_id":"1b5edee7-290f-495b-a916-44c33d28e871","req":{"query":"","method":"GET","url":"/audit","headers":{"accept":"application/json","user-agent":"restify/2.6.9 (x64-linux; v8/9.4.146.26-node.22; OpenSSL/1.1.1q+quic) node/16.17.0","date":"Thu, 25 Aug 2022 17:16:00 GMT","host":"127.0.0.1:40809","connection":"keep-alive"},"httpVersion":"1.1","trailers":{},"version":"*","timers":{"handler-0":150790},"connectionState":"close"},"res":{"statusCode":444,"headers":{"server":"restify"},"trailer":false},"err":{"code":"RequestClose","message":""},"latency":53,"_audit":true,"event":"after","msg":"handled: 444"}
    ✓ should log 444 for closed request (153ms)

  authorization parser
    ✓ should accept basic authorization
    ✓ should reject basic authorization

  body reader
    ✓ should not add a listener for each call on same socket
    ✓ should call next for each successful request on same socket
    gzip content encoding
      ✓ should parse gzip encoded content
      ✓ should not accept unsupported content encoding
      ✓ should parse unencoded content
      ✓ should handle client timeout (111ms)

  conditional request
    version
      ✓ should find handler by string version
      ✓ should find handler by array of versions
      ✓ should find handler with 1.x
      ✓ should find handler with ~1.1.0
      ✓ should find handler with ^1.1.0
      ✓ should find largest version with missing header
      ✓ should throw invalid version error
    content type
      ✓ should find handler by content type by string
      ✓ should find handler by array of content types
      ✓ should find handler with multiple accept
      ✓ should find handler with application/*
      ✓ should find handler with content type and version
      ✓ should throw invalid media type error
    multiple handlers
      ✓ should run each of the handlers

  conditional request
    ✓ Correct Etag and headers
    ✓ mismatched Etag and If-Match
    ✓ If-Modified header & !modified content
    ✓ If-Unmodified-Since header,modified content
    ✓ valid headers, ahead time, unmodified OK
    ✓ valid headers, ahead Timezone, modified content
    ✓ PUT with matched Etag and headers

  accept parser
    ✓ should use context
    ✓ should not share context

  cpuUsageThrottle
    ✓ Unit: Should shed load
    ✓ Unit: Should let request through when not under load
    ✓ Unit: Update should update state
    ✓ Unit: Should have proper name
    ✓ Unit: Should report proper lag
    ✓ Integration: Should shed load
    ✓ Integration: pidusage should report CPU usage

  dedupe forward slashes in URL
    ✓ should not remove single slashes
    ✓ should remove duplicate slashes
    ✓ should remove duplicate slashes including trailing slashes

  fielded text parser
    ✓ should parse CSV body
    ✓ #100 should parse CSV body even if bodyparser declared twice
    ✓ should parse TSV body
    ✓ plugins-GH-6: should expose rawBody on request

  form body parser
    ✓ should parse req.body, req.query, req.params
    ✓ should map req.body & req.query onto req.params
    ✓ should take req.body and stomp on req.params
    ✓ should parse associative array syntax
    ✓ should parse array syntax
    ✓ should parse nested array syntax
    ✓ plugins-GH-6: should expose rawBody

  gzip parser
    ✓ should gzip response
    ✓ gzip large response
    ✓ gzip body json ok

  inlfightRequestThrottle
    ✓ Unit: Should shed load
    ✓ Unit: Should support custom response
    ✓ Unit: Should let request through when not under load
    ✓ Integration: Should shed load

  JSON body parser
    ✓ should parse null JSON body
    ✓ should parse empty JSON body
    ✓ should parse req.body and req.params independently
    ✓ should fail to map array req.body onto req.params
    ✓ should map req.body onto req.params
    ✓ should take req.body and stomp on req.params
    ✓ should parse JSON body with reviver
    ✓ restify-GH-318 get request with body (default)
    ✓ restify-GH-318 get request with body (requestBodyOnGet=true)
    ✓ restify-GH-111 JSON Parser not right for arrays
    ✓ restify-GH-279 more JSON Arrays
    ✓ restify-GH-774 utf8 corruption in body parser (72ms)
    ✓ restify-GH-149 limit request body size
    ✓ restify-GH-149 limit request body size (json)
    ✓ plugins-GH-6: should expose rawBody
    ✓ should not throw uncaught "too few args to sprintf"
    ✓ should handle application/*+json as application/json

  request metrics plugin
    ✓ should return metrics for a given request (156ms)
    ✓ should return metrics with pre error (52ms)
    ✓ should return metrics with use error (53ms)
    ✓ should return 'RequestCloseError' err (354ms)
    ✓ should handle uncaught exceptions

  multipart parser
    ✓ body multipart ok
    ✓ gh-847 body multipart no files ok
    ✓ gh-847 body multipart files ok
    ✓ body multipart ok custom handling
    ✓ restify-GH-694 pass hash option through to Formidable
    ✓ Ensure maxFileSize change is enforced

  oauth2 token parser
    ✓ should parse oauth2 token from authorization header
    ✓ should do nothing (token is null) if there is no oauth2 token set
    ✓ should parse from request body
    ✓ should parse oauth2 token from request body(case-insensitive)
    ✓ should ignore token from request body
    ✓ should fail if more than one method is used to set the oauth2 token

  all other plugins
    date parser
      ✓ should reject expired request
    request logger
      ✓ tests the requestLoggers extra header properties
    full response
      ✓ full response
    context
      ✓ set and get request context
      ✓ should throw if set key is not string
      ✓ should throw if set key is empty string
      ✓ should throw if get key is not string
      ✓ should throw if get key is empty string
    sanitizePath
      ✓ should clean excess padding on both ends
      ✓ should clean trailing slash
      ✓ should clean multiple trailing slashes
      ✓ should clean multiple slashes inbetween
      ✓ should clean multiple at beginning
      ✓ dont mutate correct urls

  query parser
    ✓ restify-GH-124 should return empty query
    ✓ req.getQuery() should return with raw query string
    ✓ should parse req.query and req.params independently
    ✓ should map req.query onto req.params
    ✓ should take req.query and stomp on req.params
    ✓ should parse associative array syntax
    ✓ should parse array syntax
    ✓ should parse nested array syntax
    ✓ restify-GH-59 Query params with / result in a 404
    ✓ restify-GH-323: <url>/<path>/?<queryString> broken
    ✓ <url>/?<queryString> broken

  request id headers
    ✓ GH-1086: should reuse request id when available
    ✓ GH-1086: should use second request id when available
    ✓ GH-1086: should use default uuid request id if none provided
    ✓ GH-1086: empty request id should be ignored

  request expiry parser
    constructor
      ✓ should throw if no headers passed in
      ✓ should throw if only timeout header passed in
      ✓ should throw if only timeout header passed in
    absolute header
      ✓ should timeout due to request expiry
      ✓ should not timeout due to request expiry
      ✓ should be ok without request expiry header
      ✓ should be ok if request expiry header is NaN
    timeout header
      ✓ should timeout due to request expiry
      ✓ should not timeout due to request expiry
      ✓ should be ok without request expiry header
      ✓ should be ok if start header is NaN
      ✓ should be ok if timeout header is NaN
      ✓ should be ok if both headers are NaN

  static resource plugin
    ✓ static serves static files
    ✓ static serves static files in nested folders
    ✓ static serves static files in with a root regex
    ✓ static serves static files with a root, !greedy, regex
    ✓ static serves default file
    ✓ restify-GH-379 static serves file with parentheses in path
    ✓ restify-GH-719 serve a specific static file
    ✓ static serves static file with appendRequestPath = false
    ✓ static serves default file with appendRequestPath = false
    ✓ restify serve a specific static file with appendRequestPath = false
    ✓ static responds 404 for missing file
    ✓ GH-1382 static responds 404 for missing file with percent-codes
    ✓ static does not leak the file stream and next() is properly called when the client disconnects before receiving a reply
    ✓ static does not open a file stream and next() is properly called when the client disconnects immediately after sending a request
    ✓ static responds 404 for missing file
    ✓ GH-1382 static responds 404 for missing file with percent-codes

  staticFiles plugin - no options
    ✓ serve static file
    ✓ serve default static file(index.html)
    ✓ serve static file(file1.txt)
    ✓ serve nested static files in request
    ✓ serve default nested static file(index.html)
    ✓ serve file paths with special chars

  staticFiles plugin - with options
    ✓ serve static file
    ✓ serve default static file(index.html)
    ✓ serve static file(file1.txt)
    ✓ serve nested static files in request
    ✓ serve default nested static file(index.html)
    ✓ serve file paths with special chars

  staticFiles plugin - negative cases
    ✓ fail to serve root directory
    ✓ fail to serve nested directory
    ✓ fail on file not found
    ✓ fail on nested file not found
    ✓ fail on missing file special characters
    ✓ fail on POST

  staticFiles plugin - with sockets
    ✓ serve static file

  strictQueryParams
    ✓ should respond 200 without plugin
    ✓ should respond 400 to non-strict key/val query param
    ✓ should respond 400 without message opt
    ✓ should respond 400 to query param with amp and plus
    ✓ should respond to non-strict key/val query param value with 400
    ✓ should respond to valid query param value with 200
    ✓ should respond 200 with scaped amp and s

  throttle plugin
    ✓ ok
    ✓ throttled (2104ms)
    ✓ ok after tokens
    ✓ override limited
    ✓ override limited (not throttled)
    ✓ throttled after limited override
    ✓ override unlimited
    ✓ override unlimited (not throttled)
    ✓ throttled after unlimited override
    ✓ should not expose rate limit headers per default
    expose headers
      ✓ should expose headers on options set

  userAgent pre-route handler
    ✓ sets proper headers for HEAD requests from curl
    ✓ sets proper headers for HEAD requests from non-curl clients

  utils #hrTimeDurationInMs
    ✓ should return with duration


  206 passing (13s)

npm uninstall

removed 1 package, and audited 1163 packages in 8s

97 packages are looking for funding
  run `npm fund` for details

25 vulnerabilities (6 moderate, 14 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> restify@8.5.1 test
> make prepush

Running "make check-lint"

/data/js-variants/multee/Clients/send/node-restify/lib/formatters/text.js
  23:5  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/lib/plugins/conditionalRequest.js
  109:9  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/lib/server.js
  807:17  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/plugins/jsonBodyParser.test.js
  144:5  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/plugins/metrics.test.js
  318:17  warning  Unexpected 'todo' comment  no-warning-comments

/data/js-variants/multee/Clients/send/node-restify/test/server.test.js
  2055:5  warning  Unexpected 'todo' comment  no-warning-comments

✖ 6 problems (0 errors, 6 warnings)

Running "make check-style"
check ok
./node_modules/.bin/nodeunit test/*.test.js

[1mchain.test.js[22m
✔ calls all the handlers
✔ abort with Error in next
✔ abort with false in next
✔ abort with closed request
✔ cals error middleware
✔ onceNext prevents double next calls
✔ throws error for double next calls in strictNext mode
✔ calls req.startHandlerTimer
✔ calls req.endHandlerTimer
✔ count returns with the number of registered handlers
✔ getHandlers returns with the array of handlers
✔ waits async handlers
✔ abort with rejected promise
✔ abort with rejected promise without error
✔ abort with throw inside async function
✔ fails to add non async function with arity 2
✔ fails to add async function with arity 3

[1mchainComposer.test.js[22m
✔ chainComposer creates a valid chain for a handler array 
✔ chainComposer creates a valid chain for a single handler
[31m✖ chainComposer creates a valid chain for a single handler[39m

Error: Cannot find module 'send'
Require stack:
- /data/js-variants/multee/Clients/send/node-restify/lib/plugins/staticFiles.js
- /data/js-variants/multee/Clients/send/node-restify/lib/plugins/index.js
- /data/js-variants/multee/Clients/send/node-restify/lib/index.js
- /data/js-variants/multee/Clients/send/node-restify/test/formatter-optional.test.js
- /data/js-variants/multee/Clients/send/node-restify/node_modules/nodeunit/lib/nodeunit.js
- /data/js-variants/multee/Clients/send/node-restify/node_modules/nodeunit/lib/reporters/tap.js
- /data/js-variants/multee/Clients/send/node-restify/node_modules/nodeunit/lib/reporters/index.js
- /data/js-variants/multee/Clients/send/node-restify/node_modules/nodeunit/bin/nodeunit
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
    at Function.Module._load (node:internal/modules/cjs/loader:804:27)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/data/js-variants/multee/Clients/send/node-restify/lib/plugins/staticFiles.js:5:12)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
    at Module.load (node:internal/modules/cjs/loader:1004:32)
    at Function.Module._load (node:internal/modules/cjs/loader:839:12)
    at Module.require (node:internal/modules/cjs/loader:1028:19)

----------------------run test done----------------------
----------------------client serve-static of send----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> serve-static@1.15.0 test
> mocha --reporter spec --bail --check-leaks test/



  serveStatic()
    basic operations
      ✔ should require root path
      ✔ should require root path to be string
      ✔ should serve static files
      ✔ should support nesting
      ✔ should set Content-Type
      ✔ should set Last-Modified
      ✔ should default max-age=0
      ✔ should support urlencoded pathnames
      ✔ should not choke on auth-looking URL
      ✔ should support index.html
      ✔ should support ../
      ✔ should support HEAD
      ✔ should skip POST requests
      ✔ should support conditional requests
      1) should support precondition checks


  14 passing (75ms)
  1 failing

  1) serveStatic()
       basic operations
         should support precondition checks:
     Uncaught TypeError: setPrototypeOf is not a function
      at new PreconditionFailedError (/data/js-variants/multee/VariantsDeps/send/variant1/send/node_modules/http-errors/index.js:139:5)
      at createError (/data/js-variants/multee/VariantsDeps/send/variant1/send/node_modules/http-errors/index.js:87:9)
      at createHttpError (/data/js-variants/multee/VariantsDeps/send/variant1/send/index.js:979:12)
      at SendStream.error (/data/js-variants/multee/VariantsDeps/send/variant1/send/index.js:270:31)
      at SendStream.send (/data/js-variants/multee/VariantsDeps/send/variant1/send/index.js:628:12)
      at onstat (/data/js-variants/multee/VariantsDeps/send/variant1/send/index.js:725:10)
      at FSReqCallback.oncomplete (node:fs:207:5)



npm uninstall

removed 1 package, and audited 396 packages in 2s

94 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> serve-static@1.15.0 test
> mocha --reporter spec --bail --check-leaks test/

----------------------run test done----------------------
serve-index
subdir: fluid-express grunt-contrib-connect live-server server servez-lib
----------------------client fluid-express of serve-index----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> fluid-express@1.0.19 pretest
> npx rimraf coverage/* reports/*


> fluid-express@1.0.19 test
> nyc node tests/all-tests.js

Infusion at path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion is at top level 
17:29:34.634:  Registering module subbifier from path /data/js-variants/multee/
17:29:34.634:  Registering module fluid-express from path /data/js-variants/multee/Clients/serve-index/fluid-express/
17:29:34.634:  Registering module infusion from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/
17:29:34.634:  Registering module infusion from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion
17:29:34.643:  Registering module fluid-express from path /data/js-variants/multee/Clients/serve-index/fluid-express
17:29:35.256:  Registering module kettle from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/kettle
Resolved infusion from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/node-jqunit/node_modules/infusion/src/module to /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion
17:29:35.812:  Successfully queued test Testing with no accepts headers...
17:29:35.813:  Successfully queued test Testing with application/json...
17:29:35.813:  Successfully queued test Testing with text/html...
17:29:35.814:  Successfully queued test Confirming that an error is thrown if no handler is found (because there are no handlers)...
17:29:35.814:  Successfully queued test Confirming that an error is thrown if no handler is found (because the request is too picky)...
17:29:35.814:  Successfully queued test Testing with a secondary request type (array of content types)...
17:29:35.955:  Express server listening on port 6533
17:29:35.955:  Express started...
17:29:35.957:  Sending a GET request to: http://127.0.0.1:6533/
17:29:35.993:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Testing with no accepts headers...": 1/1 passed - PASS
17:29:36.014:  Express stopped...
17:29:36.014:  Express server listening on port 6533
17:29:36.014:  Express started...
17:29:36.015:  Sending a GET request to: http://127.0.0.1:6533/
17:29:36.042:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Testing with application/json...": 1/1 passed - PASS
17:29:36.069:  Express stopped...
17:29:36.069:  Express server listening on port 6533
17:29:36.069:  Express started...
17:29:36.070:  Sending a GET request to: http://127.0.0.1:6533/
17:29:36.095:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Testing with text/html...": 1/1 passed - PASS
17:29:36.107:  Express stopped...
17:29:36.107:  Express server listening on port 6533
17:29:36.107:  Express started...
17:29:36.108:  Sending a GET request to: http://127.0.0.1:6533/hcf
17:29:36.125:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Confirming that an error is thrown if no handler is found (because there are no handlers)...": 1/1 passed - PASS
17:29:36.135:  Express stopped...
17:29:36.135:  Express server listening on port 6533
17:29:36.135:  Express started...
17:29:36.136:  Sending a GET request to: http://127.0.0.1:6533/
17:29:36.159:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Confirming that an error is thrown if no handler is found (because the request is too picky)...": 1/1 passed - PASS
17:29:36.167:  Express stopped...
17:29:36.167:  Express server listening on port 6533
17:29:36.167:  Express started...
17:29:36.168:  Sending a GET request to: http://127.0.0.1:6533/
17:29:36.176:  Express stopped...
17:29:36.197:  Successfully queued test Testing an error handler that returns a string...
17:29:36.197:  Successfully queued test Testing an error handler that returns the defaults (the original error)...
17:29:36.197:  Successfully queued test Testing an error handler that returns a transformed error...
17:29:36.197:  Successfully queued test Testing a nested error handler...
17:29:36.198:  Successfully queued test Test error handling after a response has been sent...
17:29:36.198:  Successfully queued test Testing the root error handler payload...
17:29:36.198:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Testing with a secondary request type (array of content types)...": 1/1 passed - PASS
17:29:36.200:  ASSERTION FAILED: Cannot initialize express because you have not supplied a 'port' option.
17:29:36.201:  Current activity: 
17:29:36.201:      while firing to listener to event named onCreate of component component { typeName: "fluid.express id: 6zk7kx1z-576" gradeNames: ["fluid.express.routable","fluid.express.expressConfigHolder","fluid.express"]} at path express-6zk7kx1z-576
17:29:36.214:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Confirm that a failure is reported when express is missing required arguments...": 1/1 passed - PASS
17:29:36.218:  ASSERTION FAILED: Your middleware grade must have a `middleware` invoker or member.
17:29:36.232:  jq: Test concluded - Module "Testing `content aware` grade..." Test name "Confirm that a failure is reported when no middleware invoker is present...": 1/1 passed - PASS
17:29:36.234:  ASSERTION FAILED: You must provide a top-level router (express or router) to use this grade.
17:29:36.234:  Current activity: 
17:29:36.234:      while firing to listener to event named onReadyToWireChildren of component component { typeName: "fluid.express.routable id: 6zk7kx1z-599" gradeNames: ["fluid.express.routable"]} at path routable-6zk7kx1z-599
17:29:36.247:  jq: Test concluded - Module "Testing failure modes for `routable` grade..." Test name "A `routable` without a router should throw an error...": 2/2 passed - PASS
17:29:36.271:  Express server listening on port 7551
17:29:36.272:  Express started...
17:29:36.272:  Sending a GET request to: http://127.0.0.1:7551/string
17:29:36.289:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Testing an error handler that returns a string...": 1/1 passed - PASS
17:29:36.315:  Express stopped...
17:29:36.315:  Express server listening on port 7551
17:29:36.315:  Express started...
17:29:36.315:  Sending a GET request to: http://127.0.0.1:7551/simple
17:29:36.332:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Testing an error handler that returns the defaults (the original error)...": 1/1 passed - PASS
17:29:36.353:  Express stopped...
17:29:36.354:  Express server listening on port 7551
17:29:36.354:  Express started...
17:29:36.354:  Sending a GET request to: http://127.0.0.1:7551/complex
17:29:36.382:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Testing an error handler that returns a transformed error...": 1/1 passed - PASS
17:29:36.410:  Express stopped...
17:29:36.410:  Express server listening on port 7551
17:29:36.410:  Express started...
17:29:36.411:  Sending a GET request to: http://127.0.0.1:7551/nested
17:29:36.428:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Testing a nested error handler...": 1/1 passed - PASS
17:29:36.476:  Express stopped...
17:29:36.477:  Express server listening on port 7551
17:29:36.477:  Express started...
17:29:36.478:  Sending a GET request to: http://127.0.0.1:7551/overlyOptimistic
17:29:36.481:  ASSERTION FAILED: An error ocurred after the response was already sent!:{
    "code": "ERR_HTTP_HEADERS_SENT"
}
17:29:36.482:  Current activity: 
17:29:36.482:      while invoking invoker with name middleware and record {
    "func": undefined,
    "funcName": "fluid.express.middleware.error.sendError",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1",
        "{arguments}.2",
        "{arguments}.3"
    ],
    "componentSource": "fluid.express.middleware.error"
} holding component component { typeName: "fluid.express.middleware.error id: 6zk7kx1z-1076" gradeNames: ["fluid.express.middleware","fluid.express.middleware.error"]} at path testEnvironment-6zk7kx1z-489.express.rootErrorCatcher
17:29:36.482:      while invoking invoker with name middleware and record {
    "func": undefined,
    "funcName": "fluid.express.middleware.headerSetter.addHeaders",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1",
        "{arguments}.2",
        "{arguments}.3"
    ],
    "componentSource": "fluid.express.middleware.headerSetter.error"
} holding component component { typeName: "fluid.express.middleware.headerSetter.error id: 6zk7kx1z-1075" gradeNames: ["fluid.express.middleware.headerSetter.base","fluid.express.middleware","fluid.express.middleware.error","fluid.express.middleware.headerSetter.error"]} at path testEnvironment-6zk7kx1z-489.express.errorHeaderSetter
17:29:36.483:      while invoking invoker with name middleware and record {
    "func": undefined,
    "funcName": "fluid.tests.express.errorMiddleware.optimisticResponder.respondThenThrowError",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1",
        "{arguments}.2"
    ],
    "componentSource": "fluid.tests.express.errorMiddleware.optimisticResponder"
} holding component component { typeName: "fluid.tests.express.errorMiddleware.optimisticResponder id: 6zk7kx1z-1073" gradeNames: ["fluid.express.middleware","fluid.tests.express.errorMiddleware.optimisticResponder"]} at path testEnvironment-6zk7kx1z-489.express.respondAndError
17:29:36.500:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Test error handling after a response has been sent...": 2/2 passed - PASS
17:29:36.543:  Express stopped...
17:29:36.543:  Express server listening on port 7551
17:29:36.543:  Express started...
17:29:36.544:  Sending a GET request to: http://127.0.0.1:7551/
17:29:36.550:  Express stopped...
17:29:36.562:  Successfully queued test A redirect should be performed as expected...
17:29:36.563:  jq: Test concluded - Module "Testing error handling middleware..." Test name "Testing the root error handler payload...": 2/2 passed - PASS
17:29:36.570:  Express server listening on port 7531
17:29:36.570:  Express started...
17:29:36.570:  Sending a GET request to: http://127.0.0.1:7531/redirectFrom
17:29:36.585:  Sending a GET request to: http://127.0.0.1:7531/redirectTo
17:29:36.588:  Express stopped...
17:29:36.595:  Successfully queued test Try to create a handler without a request option...
17:29:36.596:  Successfully queued test Try to create a handler without a response option...
17:29:36.596:  Successfully queued test Try to create a handler without a response option...
17:29:36.596:  Successfully queued test Try to send a response without the required options...
17:29:36.600:  jq: Test concluded - Module "Testing redirect middleware..." Test name "A redirect should be performed as expected...": 4/4 passed - PASS
17:29:36.605:  ASSERTION FAILED: Cannot instantiate a 'handler' component without a 'request' object...
17:29:36.605:  Current activity: 
17:29:36.606:      while firing to listener to event named onCreate of component component { typeName: "fluid.express.handler id: 6zk7kx1z-1409" gradeNames: ["fluid.express.handler","fluid.tests.express.handler.testHandler"]} at path testEnvironment-6zk7kx1z-1375.testCaseHolder.dispatcher.requestHandler
17:29:36.619:  jq: Test concluded - Module "Testing handlers..." Test name "Try to create a handler without a request option...": 1/1 passed - PASS
17:29:36.625:  ASSERTION FAILED: Cannot instantiate a 'handler' component without a 'response' object...
17:29:36.625:  Current activity: 
17:29:36.625:      while firing to listener to event named onCreate of component component { typeName: "fluid.express.handler id: 6zk7kx1z-1422" gradeNames: ["fluid.express.handler","fluid.tests.express.handler.testHandler"]} at path testEnvironment-6zk7kx1z-1375.testCaseHolder.dispatcher.requestHandler-1
17:29:36.639:  jq: Test concluded - Module "Testing handlers..." Test name "Try to create a handler without a response option...": 1/1 passed - PASS
17:29:36.642:  ASSERTION FAILED: Cannot instantiate a 'handler' component without a 'next' object...
17:29:36.642:  Current activity: 
17:29:36.642:      while firing to listener to event named onCreate of component component { typeName: "fluid.express.handler id: 6zk7kx1z-1435" gradeNames: ["fluid.express.handler","fluid.tests.express.handler.testHandler"]} at path testEnvironment-6zk7kx1z-1375.testCaseHolder.dispatcher.requestHandler-2
17:29:36.656:  jq: Test concluded - Module "Testing handlers..." Test name "Try to create a handler without a response option...": 1/1 passed - PASS
17:29:36.656:  ASSERTION FAILED: Cannot send response, I have no response object to work with...
17:29:36.667:  Successfully queued test Testing `headerSetter` middleware (with query data)...
17:29:36.667:  Successfully queued test Testing `headerSetter` middleware (sans query data)...
17:29:36.669:  jq: Test concluded - Module "Testing handlers..." Test name "Try to send a response without the required options...": 1/1 passed - PASS
17:29:36.679:  Express server listening on port 7531
17:29:36.679:  Express started...
17:29:36.680:  Sending a GET request to: http://127.0.0.1:7531/hello?variable=set
17:29:36.698:  jq: Test concluded - Module "Testing header setting middleware..." Test name "Testing `headerSetter` middleware (with query data)...": 4/4 passed - PASS
17:29:36.710:  Express stopped...
17:29:36.710:  Express server listening on port 7531
17:29:36.710:  Express started...
17:29:36.710:  Sending a GET request to: http://127.0.0.1:7531/hello
17:29:36.714:  Express stopped...
17:29:36.721:  Successfully queued test The test helpers should work end-to-end the first time...
17:29:36.721:  Successfully queued test The test helpers should work end-to-end a second time...
17:29:36.721:  Successfully queued test We should be able to correctly diagram the routes within our instance...
17:29:36.727:  jq: Test concluded - Module "Testing header setting middleware..." Test name "Testing `headerSetter` middleware (sans query data)...": 2/2 passed - PASS
17:29:36.737:  Express server listening on port 7030
17:29:36.737:  Express started...
17:29:36.751:  jq: Test concluded - Module "Testing test helpers..." Test name "The test helpers should work end-to-end the first time...": 2/2 passed - PASS
17:29:36.762:  Express stopped...
17:29:36.762:  Express server listening on port 7030
17:29:36.762:  Express started...
17:29:36.776:  jq: Test concluded - Module "Testing test helpers..." Test name "The test helpers should work end-to-end a second time...": 2/2 passed - PASS
17:29:36.786:  Express stopped...
17:29:36.786:  Express server listening on port 7030
17:29:36.786:  Express started...
17:29:36.788:  Express stopped...
17:29:36.804:  Successfully queued test Testing router and middleware isolation with shared paths and different methods...
17:29:36.813:  jq: Test concluded - Module "Testing test helpers..." Test name "We should be able to correctly diagram the routes within our instance...": 3/3 passed - PASS
17:29:36.841:  Express server listening on port 7521
17:29:36.841:  Express started...
17:29:36.841:  Sending a GET request to: http://127.0.0.1:7521/
17:29:36.854:  Sending a POST request to: http://127.0.0.1:7521/
17:29:36.865:  Sending a PUT request to: http://127.0.0.1:7521/
17:29:36.877:  Sending a DELETE request to: http://127.0.0.1:7521/
17:29:36.889:  Express stopped...
17:29:36.923:  Successfully queued test Testing middleware isolation...
17:29:36.923:  Successfully queued test Testing the 'counter' middleware module...
17:29:36.924:  Successfully queued test Testing the 'session' middleware module...
17:29:36.924:  Successfully queued test Testing the 'body parser' middleware module...
17:29:36.924:  Successfully queued test Testing the 'cookie' middleware module...
17:29:36.924:  Successfully queued test Testing a fluid.express.middleware.bodyparser.json instance with custom options...
17:29:36.925:  Successfully queued test Testing error handling for wrappedMiddleware...
17:29:36.925:  jq: Test concluded - Module "Testing method isolation..." Test name "Testing router and middleware isolation with shared paths and different methods...": 14/14 passed - PASS
17:29:36.998:  Express server listening on port 7531
17:29:36.998:  Express started...
17:29:36.998:  Sending a GET request to: http://127.0.0.1:7531/hello/rv
17:29:37.015:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing middleware isolation...": 4/4 passed - PASS
17:29:37.061:  Express stopped...
17:29:37.062:  Express server listening on port 7531
17:29:37.062:  Express started...
17:29:37.062:  Sending a GET request to: http://127.0.0.1:7531/
17:29:37.065:  Sending a GET request to: http://127.0.0.1:7531/
17:29:37.081:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing the 'counter' middleware module...": 1/1 passed - PASS
17:29:37.139:  Express stopped...
17:29:37.139:  Express server listening on port 7531
17:29:37.139:  Express started...
17:29:37.140:  Sending a GET request to: http://127.0.0.1:7531/reqview
17:29:37.164:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing the 'session' middleware module...": 3/3 passed - PASS
17:29:37.211:  Express stopped...
17:29:37.211:  Express server listening on port 7531
17:29:37.211:  Express started...
17:29:37.211:  Sending a GET request to: http://127.0.0.1:7531/reqview
17:29:37.250:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing the 'body parser' middleware module...": 3/3 passed - PASS
17:29:37.304:  Express stopped...
17:29:37.304:  Express server listening on port 7531
17:29:37.304:  Express started...
17:29:37.304:  Sending a GET request to: http://127.0.0.1:7531/cookie
17:29:37.317:  Sending a GET request to: http://127.0.0.1:7531/reqview
17:29:37.334:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing the 'cookie' middleware module...": 3/3 passed - PASS
17:29:37.381:  Express stopped...
17:29:37.381:  Express server listening on port 7531
17:29:37.381:  Express started...
17:29:37.382:  Sending a POST request to: http://127.0.0.1:7531/needle
17:29:37.385:  Sending a POST request to: http://127.0.0.1:7531/needle
17:29:37.400:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing a fluid.express.middleware.bodyparser.json instance with custom options...": 2/2 passed - PASS
17:29:37.449:  Express stopped...
17:29:37.450:  Express server listening on port 7531
17:29:37.450:  Express started...
17:29:37.450:  Sending a GET request to: http://127.0.0.1:7531/badlyWrapped
17:29:37.464:  Express stopped...
17:29:37.473:  Successfully queued test Testing precedence when multiple routers listen for the same path...
17:29:37.474:  Successfully queued test Testing middleware and router precedence in combination...
17:29:37.475:  jq: Test concluded - Module "Testing `fluid.express.middleware`..." Test name "Testing error handling for wrappedMiddleware...": 1/1 passed - PASS
17:29:37.488:  Express server listening on port 7593
17:29:37.488:  Express started...
17:29:37.488:  Sending a GET request to: http://127.0.0.1:7593/whoWins
17:29:37.504:  jq: Test concluded - Module "Testing router ordering by priority..." Test name "Testing precedence when multiple routers listen for the same path...": 1/1 passed - PASS
17:29:37.518:  Express stopped...
17:29:37.518:  Express server listening on port 7593
17:29:37.518:  Express started...
17:29:37.519:  Sending a GET request to: http://127.0.0.1:7593/combined
17:29:37.521:  Express stopped...
17:29:37.544:  Successfully queued test Testing a basic 'request aware' component...
17:29:37.544:  Successfully queued test Testing a slow but responsive 'request aware' component...
17:29:37.544:  Successfully queued test Testing a nonresponsive 'request aware' component...
17:29:37.545:  jq: Test concluded - Module "Testing router ordering by priority..." Test name "Testing middleware and router precedence in combination...": 1/1 passed - PASS
17:29:37.553:  Express server listening on port 7433
17:29:37.554:  Express started...
17:29:37.554:  Sending a GET request to: http://127.0.0.1:7433/instrumented
17:29:40.065:  Sending a GET request to: http://127.0.0.1:7433/instrumented
17:29:42.584:  jq: Test concluded - Module "Testing 'request aware' grade..." Test name "Testing a basic 'request aware' component...": 3/3 passed - PASS
17:29:42.593:  Express stopped...
17:29:42.593:  Express server listening on port 7433
17:29:42.593:  Express started...
17:29:42.594:  Sending a GET request to: http://127.0.0.1:7433/delayed
17:29:45.101:  Sending a GET request to: http://127.0.0.1:7433/delayed
17:29:47.622:  jq: Test concluded - Module "Testing 'request aware' grade..." Test name "Testing a slow but responsive 'request aware' component...": 3/3 passed - PASS
17:29:47.631:  Express stopped...
17:29:47.631:  Express server listening on port 7433
17:29:47.631:  Express started...
17:29:47.632:  Sending a GET request to: http://127.0.0.1:7433/timeout
17:29:49.656:  Successfully queued test An array should be encoded correctly...
17:29:49.656:  Successfully queued test An field which consists of an empty array should be encoded correctly...
17:29:49.657:  Successfully queued test An field which consists of an empty object should be encoded correctly...
17:29:49.657:  Successfully queued test `falsy` values should be encoded correctly...
17:29:49.657:  Successfully queued test A string should be encoded correctly...
17:29:49.657:  Successfully queued test A number with decimal data should be encoded correctly...
17:29:49.658:  Successfully queued test An integer should be encoded correctly...
17:29:49.658:  Successfully queued test A deep structure should be encoded correctly...
17:29:49.658:  Successfully queued test International characters should be handled correctly...
17:29:49.658:  Successfully queued test Double quotes should be handled correctly...
17:29:49.659:  Successfully queued test Single quotes should be handled correctly...
17:29:49.659:  Successfully queued test Leading equals signs should be handled correctly...
17:29:49.659:  Successfully queued test Ampersands should be handled correctly...
17:29:49.660:  Successfully queued test Percent signs should be handled correctly...
17:29:49.660:  Successfully queued test Forward slashes should be handled correctly...
17:29:49.660:  Successfully queued test Back slashes should be handled correctly...
17:29:49.660:  Successfully queued test An empty payload should be handled correctly...
17:29:49.661:  Successfully queued test Test various asymmetric conditions that cannot be tested in the normal manner
17:29:49.661:  Express stopped...
17:29:49.662:  jq: Test concluded - Module "Testing 'request aware' grade..." Test name "Testing a nonresponsive 'request aware' component...": 2/2 passed - PASS
17:29:49.675:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An array should be encoded correctly...": 1/1 passed - PASS
17:29:49.689:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty array should be encoded correctly...": 1/1 passed - PASS
17:29:49.704:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty object should be encoded correctly...": 1/1 passed - PASS
17:29:49.718:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "`falsy` values should be encoded correctly...": 1/1 passed - PASS
17:29:49.731:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A string should be encoded correctly...": 1/1 passed - PASS
17:29:49.745:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A number with decimal data should be encoded correctly...": 1/1 passed - PASS
17:29:49.759:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An integer should be encoded correctly...": 1/1 passed - PASS
17:29:49.774:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A deep structure should be encoded correctly...": 1/1 passed - PASS
17:29:49.788:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "International characters should be handled correctly...": 1/1 passed - PASS
17:29:49.802:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Double quotes should be handled correctly...": 1/1 passed - PASS
17:29:49.816:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Single quotes should be handled correctly...": 1/1 passed - PASS
17:29:49.830:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Leading equals signs should be handled correctly...": 1/1 passed - PASS
17:29:49.844:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Ampersands should be handled correctly...": 1/1 passed - PASS
17:29:49.857:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Percent signs should be handled correctly...": 1/1 passed - PASS
17:29:49.871:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Forward slashes should be handled correctly...": 1/1 passed - PASS
17:29:49.885:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Back slashes should be handled correctly...": 1/1 passed - PASS
17:29:49.899:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An empty payload should be handled correctly...": 1/1 passed - PASS
17:29:49.900:  ASSERTION FAILED: Can only decode strings.
17:29:49.901:  ASSERTION FAILED: Can only encode objects.
17:29:49.922:  Successfully queued test We should be able to send a JSON payload to the server via the dataSource query string...
17:29:49.923:  Successfully queued test We should be able to make a request with an empty JSON payload...
17:29:49.923:  Successfully queued test We should be able to omit the payload altogether...
17:29:49.923:  Successfully queued test It should be possible to encode values without stringifying them...
17:29:49.923:  Successfully queued test Attempting to use the grade with existing query data should result in an error...
17:29:49.923:  jq: Test concluded - Module "Extended en/decoding tests..." Test name "Test various asymmetric conditions that cannot be tested in the normal manner": 5/5 passed - PASS
17:29:49.932:  Express server listening on port 9595
17:29:49.932:  Express started...
17:29:49.933:  DataSource Issuing HTTP request with options {
    "port": "9595",
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/loopback",
    "search": "?topLevelString=%22foo%22&topLevelNull=null&deep.deepArray=%5B%22quux%22%2C0%2Cfalse%2Cnull%5D&deep.deepNull=null&deep.evenDeeper.deepest=true&deep.evenDeeper.deeplyNull=null&topLevelArray=%5B0%2C1%2C2%5D",
    "url": "http://localhost:9595/loopback?topLevelString=%22foo%22&topLevelNull=null&deep.deepArray=%5B%22quux%22%2C0%2Cfalse%2Cnull%5D&deep.deepNull=null&deep.evenDeeper.deepest=true&deep.evenDeeper.deeplyNull=null&topLevelArray=%5B0%2C1%2C2%5D",
    "termMap": {
        
    },
    "directModel": {
        "topLevelString": "foo",
        "topLevelNull": null,
        "deep": {
            "deepArray": [
                "quux",
                0,
                false,
                null
            ],
            "deepNull": null,
            "evenDeeper": {
                "deepest": true,
                "deeplyNull": null
     .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:29:49.951:  jq: Test concluded - Module "Tests for the `urlEncodedJsonReader` dataSource grade..." Test name "We should be able to send a JSON payload to the server via the dataSource query string...": 1/1 passed - PASS
17:29:49.958:  Express stopped...
17:29:49.958:  Express server listening on port 9595
17:29:49.958:  Express started...
17:29:49.959:  DataSource Issuing HTTP request with options {
    "port": "9595",
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/loopback",
    "search": "",
    "url": "http://localhost:9595/loopback",
    "termMap": {
        
    },
    "directModel": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:29:49.975:  jq: Test concluded - Module "Tests for the `urlEncodedJsonReader` dataSource grade..." Test name "We should be able to make a request with an empty JSON payload...": 1/1 passed - PASS
17:29:49.983:  Express stopped...
17:29:49.983:  Express server listening on port 9595
17:29:49.983:  Express started...
17:29:49.984:  DataSource Issuing HTTP request with options {
    "port": "9595",
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/loopback",
    "search": "",
    "url": "http://localhost:9595/loopback",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:29:49.999:  jq: Test concluded - Module "Tests for the `urlEncodedJsonReader` dataSource grade..." Test name "We should be able to omit the payload altogether...": 1/1 passed - PASS
17:29:50.011:  Express stopped...
17:29:50.011:  Express server listening on port 9595
17:29:50.011:  Express started...
17:29:50.012:  DataSource Issuing HTTP request with options {
    "port": "9595",
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/rawLoopback",
    "search": "?q=foo%20AND%20(status%3Abar%20OR%20status%3Abaz)",
    "url": "http://localhost:9595/rawLoopback?q=foo%20AND%20(status%3Abar%20OR%20status%3Abaz)",
    "termMap": {
        
    },
    "directModel": {
        "q": "foo AND (status:bar OR status:baz)"
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:29:50.028:  jq: Test concluded - Module "Tests for the `urlEncodedJsonReader` dataSource grade..." Test name "It should be possible to encode values without stringifying them...": 1/1 passed - PASS
17:29:50.035:  Express stopped...
17:29:50.035:  Express server listening on port 9595
17:29:50.035:  Express started...
17:29:50.036:  ASSERTION FAILED: Cannot work with a URL that already includes query data.
17:29:50.036:  Current activity: 
17:29:50.036:      while invoking invoker with name resolveUrl and record {
    "func": undefined,
    "funcName": "fluid.express.dataSource.urlEncodedJson.resolveUrl",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.2"
    ],
    "componentSource": "fluid.express.dataSource.urlEncodedJson"
} holding component component { typeName: "fluid.tests.express.querystring.dataSource.dataSource id: 6zk7kx1z-4425" gradeNames: ["fluid.contextAware","fluid.dataSource","fluid.dataSource.URL","kettle.dataSource.URL","fluid.express.dataSource.urlEncodedJson","fluid.tests.express.querystring.dataSource.dataSource"]} at path environment-6zk7kx1z-4419.caseHolder.existingQueryDataDatasource
17:29:50.036:      while firing to listener to event named onRead of component component { typeName: "fluid.tests.express.querystring.dataSource.dataSource id: 6zk7kx1z-4425" gradeNames: ["fluid.contextAware","fluid.dataSource","fluid.dataSource.URL","kettle.dataSource.URL","fluid.express.dataSource.urlEncodedJson","fluid.tests.express.querystring.dataSource.dataSource"]} at path environment-6zk7kx1z-4419.caseHolder.existingQueryDataDatasource
17:29:50.036:      while invoking invoker with name get and record {
    "func": undefined,
    "funcName": "fluid.dataSource.get",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1"
    ],
    "componentSource": "fluid.dataSource"
} holding component component { typeName: "fluid.tests.express.querystring.dataSource.dataSource id: 6zk7kx1z-4425" gradeNames: ["fluid.contextAware","fluid.dataSource","fluid.dataSource.URL","kettle.dataSource.URL","fluid.express.dataSource.urlEncodedJson","fluid.tests.express.querystring.dataSource.dataSource"]} at path environment-6zk7kx1z-4419.caseHolder.existingQueryDataDatasource
17:29:50.036:      while firing to listener to event named onFixturesConstructed of component component { typeName: "fluid.tests.express.querystring.dataSource.environment id: 6zk7kx1z-4419" gradeNames: ["fluid.test.testEnvironment","fluid.test.express.testEnvironment","fluid.tests.express.querystring.dataSource.environment"]} at path environment-6zk7kx1z-4419
17:29:50.036:      while firing synthetic event onStarted 
17:29:50.037:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Cannot work with a URL that already includes query data.
Error: Assertion failure - check console for more details: Cannot work with a URL that already includes query data.
    at new fluid.FluidError (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:186:26)
    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:210:15)
    at kettle.failureHandler (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/kettle/lib/KettleUtils.js:60:11)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:1737:40)
    at Object.fluid.fail (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:227:32)
    at fluid.express.dataSource.urlEncodedJson.resolveUrl (/data/js-variants/multee/Clients/serve-index/fluid-express/src/js/lib/querystring-coding.js:35:248)
    at fluid.componentConstructor.invokeInvoker [as resolveUrl] (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2767:29)
    at fluid.dataSource.URL.handle (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/DataSource.js:373:24)
    at togo (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2835:33)
    at Object.invokeNext (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidPromises.js:284:45)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidPromises.js:240:39)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidPromises.js:221:23)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidPromises.js:249:31)
    at Function.fluid.promise.fireTransformEvent (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidPromises.js:343:23)
    at fluid.dataSource.get (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/DataSource.js:188:37)
    at invokeInvoker (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2767:29)
    at Object.expanded.apply (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:201:38)
    at Object.execute (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:258:24)
    at Object.fluid.test.execExecutor (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:536:18)
    at that.execute (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:674:32)
    at Object.execute (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:259:17)
    at Object.fluid.test.execExecutor (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:536:18)
    at that.execute (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:677:32)
    at /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:340:13
    at wrapped (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/tests/test-core/utils/js/IoCTestUtils.js:351:17)
    at fire (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:1737:40)
    at togo (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2835:33)
    at checkFire (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2798:17)
    at /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2804:17
    at fire (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/Fluid.js:1737:40)
    at Object.firer.fire (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/src/framework/core/js/FluidIoC.js:2963:40)
    at Server.<anonymous> (/data/js-variants/multee/Clients/serve-index/fluid-express/src/js/express.js:14:459)
    at Object.onceWrapper (node:events:627:28)
    at Server.emit (node:events:513:28)
    at emitListeningNT (node:net:1466:10)
    at processTicksAndRejections (node:internal/process/task_queues:82:21)
17:29:50.046:  Express stopped...
17:29:50.056:  Successfully queued test An array should be encoded correctly...
17:29:50.056:  Successfully queued test An field which consists of an empty array should be encoded correctly...
17:29:50.056:  Successfully queued test An field which consists of an empty object should be encoded correctly...
17:29:50.056:  Successfully queued test `falsy` values should be encoded correctly...
17:29:50.056:  Successfully queued test A string should be encoded correctly...
17:29:50.057:  Successfully queued test A number with decimal data should be encoded correctly...
17:29:50.057:  Successfully queued test An integer should be encoded correctly...
17:29:50.057:  Successfully queued test A deep structure should be encoded correctly...
17:29:50.057:  Successfully queued test International characters should be handled correctly...
17:29:50.057:  Successfully queued test Double quotes should be handled correctly...
17:29:50.057:  Successfully queued test Single quotes should be handled correctly...
17:29:50.057:  Successfully queued test Leading equals signs should be handled correctly...
17:29:50.058:  Successfully queued test Ampersands should be handled correctly...
17:29:50.058:  Successfully queued test Percent signs should be handled correctly...
17:29:50.058:  Successfully queued test Forward slashes should be handled correctly...
17:29:50.058:  Successfully queued test Back slashes should be handled correctly...
17:29:50.058:  Successfully queued test An empty payload should be handled correctly...
17:29:50.058:  jq: Test concluded - Module "Tests for the `urlEncodedJsonReader` dataSource grade..." Test name "Attempting to use the grade with existing query data should result in an error...": 1/1 passed - PASS
17:29:50.065:  Express server listening on port 7777
17:29:50.065:  Express started...
17:29:50.071:  Sending a GET request to: http://127.0.0.1:7777/loopback?array=%5B%22foo%22%2C1%2C0%2Ctrue%2Cfalse%2C1.21%5D
17:29:50.087:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An array should be encoded correctly...": 1/1 passed - PASS
17:29:50.093:  Express stopped...
17:29:50.093:  Express server listening on port 7777
17:29:50.093:  Express started...
17:29:50.096:  Sending a GET request to: http://127.0.0.1:7777/loopback?emptyArray=%5B%5D
17:29:50.121:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty array should be encoded correctly...": 1/1 passed - PASS
17:29:50.128:  Express stopped...
17:29:50.128:  Express server listening on port 7777
17:29:50.128:  Express started...
17:29:50.130:  Sending a GET request to: http://127.0.0.1:7777/loopback?emptyObject=%7B%7D
17:29:50.145:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty object should be encoded correctly...": 1/1 passed - PASS
17:29:50.151:  Express stopped...
17:29:50.151:  Express server listening on port 7777
17:29:50.151:  Express started...
17:29:50.154:  Sending a GET request to: http://127.0.0.1:7777/loopback?zero=0&falsy=false&nully=null
17:29:50.169:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "`falsy` values should be encoded correctly...": 1/1 passed - PASS
17:29:50.174:  Express stopped...
17:29:50.174:  Express server listening on port 7777
17:29:50.174:  Express started...
17:29:50.178:  Sending a GET request to: http://127.0.0.1:7777/loopback?string=%22here%20we%20are%20now%22
17:29:50.193:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A string should be encoded correctly...": 1/1 passed - PASS
17:29:50.199:  Express stopped...
17:29:50.199:  Express server listening on port 7777
17:29:50.199:  Express started...
17:29:50.202:  Sending a GET request to: http://127.0.0.1:7777/loopback?pi=3.1415926
17:29:50.217:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A number with decimal data should be encoded correctly...": 1/1 passed - PASS
17:29:50.223:  Express stopped...
17:29:50.223:  Express server listening on port 7777
17:29:50.223:  Express started...
17:29:50.225:  Sending a GET request to: http://127.0.0.1:7777/loopback?integer=42
17:29:50.240:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An integer should be encoded correctly...": 1/1 passed - PASS
17:29:50.246:  Express stopped...
17:29:50.246:  Express server listening on port 7777
17:29:50.246:  Express started...
17:29:50.248:  Sending a GET request to: http://127.0.0.1:7777/loopback?root.rootString=%22root%20string%20value%22&root.rootNumber=1&root.middle.middleString=%22middle%20string%20value%22&root.middle.middleNumber=2&root.middle.bottom.bottomString=%22bottom%20string%20value%22&root.middle.bottom.bottomNumber=3
17:29:50.263:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A deep structure should be encoded correctly...": 1/1 passed - PASS
17:29:50.271:  Express stopped...
17:29:50.271:  Express server listening on port 7777
17:29:50.272:  Express started...
17:29:50.285:  Sending a GET request to: http://127.0.0.1:7777/loopback?flipTables=%22(%E2%95%AF%C2%B0%E2%96%A1%C2%B0%EF%BC%89%E2%95%AF%EF%B8%B5%20%E2%94%BB%E2%94%81%E2%94%BB%22&eatGlass=%22%E6%88%91%E8%83%BD%E5%90%9E%E4%B8%8B%E7%8E%BB%E7%92%83%E8%80%8C%E4%B8%8D%E5%82%B7%E8%BA%AB%E9%AB%94%22
17:29:50.310:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "International characters should be handled correctly...": 1/1 passed - PASS
17:29:50.316:  Express stopped...
17:29:50.316:  Express server listening on port 7777
17:29:50.316:  Express started...
17:29:50.318:  Sending a GET request to: http://127.0.0.1:7777/loopback?doubleQuotes=%22%5C%22lasers%5C%22%22
17:29:50.334:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Double quotes should be handled correctly...": 1/1 passed - PASS
17:29:50.341:  Express stopped...
17:29:50.341:  Express server listening on port 7777
17:29:50.341:  Express started...
17:29:50.343:  Sending a GET request to: http://127.0.0.1:7777/loopback?singleQuotes=%22%27lasers%27%22
17:29:50.357:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Single quotes should be handled correctly...": 1/1 passed - PASS
17:29:50.365:  Express stopped...
17:29:50.365:  Express server listening on port 7777
17:29:50.365:  Express started...
17:29:50.368:  Sending a GET request to: http://127.0.0.1:7777/loopback?leadingEquals=%22%3D)%22
17:29:50.383:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Leading equals signs should be handled correctly...": 1/1 passed - PASS
17:29:50.390:  Express stopped...
17:29:50.390:  Express server listening on port 7777
17:29:50.390:  Express started...
17:29:50.392:  Sending a GET request to: http://127.0.0.1:7777/loopback?ampersands=%22%26so%20forth%22
17:29:50.408:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Ampersands should be handled correctly...": 1/1 passed - PASS
17:29:50.414:  Express stopped...
17:29:50.414:  Express server listening on port 7777
17:29:50.414:  Express started...
17:29:50.417:  Sending a GET request to: http://127.0.0.1:7777/loopback?percents=%22%2522%20of%20people%20like%20quotation%20marks%22
17:29:50.432:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Percent signs should be handled correctly...": 1/1 passed - PASS
17:29:50.439:  Express stopped...
17:29:50.439:  Express server listening on port 7777
17:29:50.439:  Express started...
17:29:50.441:  Sending a GET request to: http://127.0.0.1:7777/loopback?slashes=%22this%20%2F%20that%22
17:29:50.456:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Forward slashes should be handled correctly...": 1/1 passed - PASS
17:29:50.462:  Express stopped...
17:29:50.462:  Express server listening on port 7777
17:29:50.462:  Express started...
17:29:50.464:  Sending a GET request to: http://127.0.0.1:7777/loopback?backSlashes=%22this%20%5C%5C%20that%22
17:29:50.480:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Back slashes should be handled correctly...": 1/1 passed - PASS
17:29:50.486:  Express stopped...
17:29:50.486:  Express server listening on port 7777
17:29:50.486:  Express started...
17:29:50.488:  Sending a GET request to: http://127.0.0.1:7777/loopback
17:29:50.498:  Successfully queued test An array should be encoded correctly...
17:29:50.498:  Successfully queued test An field which consists of an empty array should be encoded correctly...
17:29:50.498:  Successfully queued test An field which consists of an empty object should be encoded correctly...
17:29:50.498:  Successfully queued test `falsy` values should be encoded correctly...
17:29:50.498:  Successfully queued test A string should be encoded correctly...
17:29:50.499:  Successfully queued test A number with decimal data should be encoded correctly...
17:29:50.499:  Successfully queued test An integer should be encoded correctly...
17:29:50.499:  Successfully queued test A deep structure should be encoded correctly...
17:29:50.499:  Successfully queued test International characters should be handled correctly...
17:29:50.499:  Successfully queued test Double quotes should be handled correctly...
17:29:50.499:  Successfully queued test Single quotes should be handled correctly...
17:29:50.499:  Successfully queued test Leading equals signs should be handled correctly...
17:29:50.500:  Successfully queued test Ampersands should be handled correctly...
17:29:50.500:  Successfully queued test Percent signs should be handled correctly...
17:29:50.500:  Successfully queued test Forward slashes should be handled correctly...
17:29:50.500:  Successfully queued test Back slashes should be handled correctly...
17:29:50.500:  Successfully queued test An empty payload should be handled correctly...
17:29:50.500:  Successfully queued test Test various asymmetric conditions that cannot be tested in the normal manner
17:29:50.501:  Express stopped...
17:29:50.503:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An empty payload should be handled correctly...": 1/1 passed - PASS
17:29:50.517:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An array should be encoded correctly...": 1/1 passed - PASS
17:29:50.532:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty array should be encoded correctly...": 1/1 passed - PASS
17:29:50.546:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An field which consists of an empty object should be encoded correctly...": 1/1 passed - PASS
17:29:50.560:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "`falsy` values should be encoded correctly...": 1/1 passed - PASS
17:29:50.574:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A string should be encoded correctly...": 1/1 passed - PASS
17:29:50.588:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A number with decimal data should be encoded correctly...": 1/1 passed - PASS
17:29:50.602:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An integer should be encoded correctly...": 1/1 passed - PASS
17:29:50.617:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "A deep structure should be encoded correctly...": 1/1 passed - PASS
17:29:50.631:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "International characters should be handled correctly...": 1/1 passed - PASS
17:29:50.645:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Double quotes should be handled correctly...": 1/1 passed - PASS
17:29:50.659:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Single quotes should be handled correctly...": 1/1 passed - PASS
17:29:50.673:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Leading equals signs should be handled correctly...": 1/1 passed - PASS
17:29:50.687:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Ampersands should be handled correctly...": 1/1 passed - PASS
17:29:50.701:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Percent signs should be handled correctly...": 1/1 passed - PASS
17:29:50.715:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Forward slashes should be handled correctly...": 1/1 passed - PASS
17:29:50.729:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "Back slashes should be handled correctly...": 1/1 passed - PASS
17:29:50.743:  jq: Test concluded - Module "Standard decoding/encoding payload tests.." Test name "An empty payload should be handled correctly...": 1/1 passed - PASS
17:29:50.744:  ASSERTION FAILED: Can only decode strings.
17:29:50.744:  ASSERTION FAILED: Can only encode objects.
17:29:50.754:  Successfully queued test Testing router nesting (top level request)...
17:29:50.754:  Successfully queued test Testing router nesting (deep request)...
17:29:50.765:  jq: Test concluded - Module "Extended transform tests..." Test name "Test various asymmetric conditions that cannot be tested in the normal manner": 5/5 passed - PASS
17:29:50.778:  Express server listening on port 7532
17:29:50.778:  Express started...
17:29:50.779:  Sending a GET request to: http://127.0.0.1:7532/hello
17:29:50.795:  jq: Test concluded - Module "Testing router nesting..." Test name "Testing router nesting (top level request)...": 1/1 passed - PASS
17:29:50.812:  Express stopped...
17:29:50.812:  Express server listening on port 7532
17:29:50.812:  Express started...
17:29:50.813:  Sending a GET request to: http://127.0.0.1:7532/hello/world
17:29:50.816:  Express stopped...
17:29:50.828:  Successfully queued test Testing the 'params' router module (top level)...
17:29:50.828:  Successfully queued test Testing the 'params' router module (deep)...
17:29:50.829:  jq: Test concluded - Module "Testing router nesting..." Test name "Testing router nesting (deep request)...": 1/1 passed - PASS
17:29:50.836:  Express server listening on port 7512
17:29:50.836:  Express started...
17:29:50.837:  Sending a GET request to: http://127.0.0.1:7512/params/fooBar
17:29:50.856:  jq: Test concluded - Module "Testing URL parameters in router paths..." Test name "Testing the 'params' router module (top level)...": 1/1 passed - PASS
17:29:50.864:  Express stopped...
17:29:50.864:  Express server listening on port 7512
17:29:50.864:  Express started...
17:29:50.864:  Sending a GET request to: http://127.0.0.1:7512/params/fooBar/deep
17:29:50.869:  Express stopped...
17:29:50.880:  Successfully queued test We should be able to load a generated index for a single directory.
17:29:50.880:  Successfully queued test We should be able to reach content beyond the generated index.
17:29:50.880:  Successfully queued test We should be able to load a generated index for multiple directories of content hosted from a single endpoint.
17:29:50.883:  jq: Test concluded - Module "Testing URL parameters in router paths..." Test name "Testing the 'params' router module (deep)...": 1/1 passed - PASS
17:29:50.899:  WARN: Multiple content paths found.  Only content from the first content directory will be used in generating the directory index.
17:29:50.902:  Express server listening on port 7432
17:29:50.902:  Express started...
17:29:50.903:  Sending a GET request to: http://127.0.0.1:7432/
17:29:50.957:  jq: Test concluded - Module "Testing 'serveIndex' middleware..." Test name "We should be able to load a generated index for a single directory.": 4/4 passed - PASS
17:29:50.976:  WARN: Multiple content paths found.  Only content from the first content directory will be used in generating the directory index.
17:29:50.980:  Express stopped...
17:29:50.981:  Express server listening on port 7432
17:29:50.981:  Express started...
17:29:50.981:  Sending a GET request to: http://127.0.0.1:7432/index.html
17:29:51.001:  jq: Test concluded - Module "Testing 'serveIndex' middleware..." Test name "We should be able to reach content beyond the generated index.": 3/3 passed - PASS
17:29:51.015:  WARN: Multiple content paths found.  Only content from the first content directory will be used in generating the directory index.
17:29:51.020:  Express stopped...
17:29:51.020:  Express server listening on port 7432
17:29:51.020:  Express started...
17:29:51.021:  Sending a GET request to: http://127.0.0.1:7432/multiple/
17:29:51.043:  Successfully queued test Testing the 'static' router module (index content)...
17:29:51.043:  Successfully queued test Testing the 'static' router module (custom content)...
17:29:51.043:  Successfully queued test Testing the 'static' router module with multiple content directories (primary directory content)...
17:29:51.043:  Successfully queued test Testing the 'static' router module with multiple content directories (secondary directory content)...
17:29:51.043:  Express stopped...
17:29:51.043:  jq: Test concluded - Module "Testing 'serveIndex' middleware..." Test name "We should be able to load a generated index for multiple directories of content hosted from a single endpoint.": 4/4 passed - PASS
17:29:51.054:  Express server listening on port 7432
17:29:51.054:  Express started...
17:29:51.054:  Sending a GET request to: http://127.0.0.1:7432/
17:29:51.070:  jq: Test concluded - Module "Testing 'static' (content handling) router..." Test name "Testing the 'static' router module (index content)...": 1/1 passed - PASS
17:29:51.080:  Express stopped...
17:29:51.080:  Express server listening on port 7432
17:29:51.080:  Express started...
17:29:51.081:  Sending a GET request to: http://127.0.0.1:7432/custom.html
17:29:51.096:  jq: Test concluded - Module "Testing 'static' (content handling) router..." Test name "Testing the 'static' router module (custom content)...": 1/1 passed - PASS
17:29:51.113:  Express stopped...
17:29:51.113:  Express server listening on port 7432
17:29:51.113:  Express started...
17:29:51.114:  Sending a GET request to: http://127.0.0.1:7432/multiball/primary.json
17:29:51.143:  jq: Test concluded - Module "Testing 'static' (content handling) router..." Test name "Testing the 'static' router module with multiple content directories (primary directory content)...": 1/1 passed - PASS
17:29:51.154:  Express stopped...
17:29:51.154:  Express server listening on port 7432
17:29:51.154:  Express started...
17:29:51.154:  Sending a GET request to: http://127.0.0.1:7432/multiball/secondary.json
17:29:51.166:  Successfully queued test Testing the 'wildcard' router module (index content, top-level request)...
17:29:51.166:  Successfully queued test Testing the 'wildcard' router module (index content, deep request)...
17:29:51.166:  Express stopped...
17:29:51.170:  jq: Test concluded - Module "Testing 'static' (content handling) router..." Test name "Testing the 'static' router module with multiple content directories (secondary directory content)...": 1/1 passed - PASS
17:29:51.175:  Express server listening on port 7522
17:29:51.176:  Express started...
17:29:51.176:  Sending a GET request to: http://127.0.0.1:7522/wildcard/
17:29:51.191:  jq: Test concluded - Module "Testing wildcard router paths..." Test name "Testing the 'wildcard' router module (index content, top-level request)...": 1/1 passed - PASS
17:29:51.197:  Express stopped...
17:29:51.197:  Express server listening on port 7522
17:29:51.197:  Express started...
17:29:51.197:  Sending a GET request to: http://127.0.0.1:7522/wildcard/many/levels/deep
17:29:51.199:  Express stopped...
17:29:51.212:  jq: Test concluded - Module "Testing wildcard router paths..." Test name "Testing the 'wildcard' router module (index content, deep request)...": 1/1 passed - PASS
17:29:51.213:  jq: ***************
17:29:51.213:  jq: All tests concluded: 167/167 total passed in 15506ms - PASS
17:29:51.213:  jq: ***************

=============================== Coverage summary ===============================
Statements   : 100% ( 270/270 )
Branches     : 95.31% ( 61/64 )
Functions    : 100% ( 52/52 )
Lines        : 100% ( 270/270 )
================================================================================
npm uninstall

removed 1 package, and audited 843 packages in 9s

82 packages are looking for funding
  run `npm fund` for details

33 vulnerabilities (13 moderate, 15 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> fluid-express@1.0.19 pretest
> npx rimraf coverage/* reports/*


> fluid-express@1.0.19 test
> nyc node tests/all-tests.js

Infusion at path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion is at top level 
17:30:02.186:  Registering module subbifier from path /data/js-variants/multee/
17:30:02.187:  Registering module fluid-express from path /data/js-variants/multee/Clients/serve-index/fluid-express/
17:30:02.187:  Registering module infusion from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion/
17:30:02.187:  Registering module infusion from path /data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/infusion
17:30:02.195:  Registering module fluid-express from path /data/js-variants/multee/Clients/serve-index/fluid-express
17:30:02.326:  FATAL ERROR: Uncaught exception: Cannot find module 'serve-index'
Require stack:
- /data/js-variants/multee/Clients/serve-index/fluid-express/src/js/serve-index.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/mainIncludes.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/index.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/js/includes.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/js/contentAware/contentAware-tests.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/all-tests.js
Error: Cannot find module 'serve-index'
Require stack:
- /data/js-variants/multee/Clients/serve-index/fluid-express/src/js/serve-index.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/mainIncludes.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/index.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/js/includes.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/js/contentAware/contentAware-tests.js
- /data/js-variants/multee/Clients/serve-index/fluid-express/tests/all-tests.js
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
    at Function.Module._load (node:internal/modules/cjs/loader:804:27)
    at Module.require (node:internal/modules/cjs/loader:1028:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/data/js-variants/multee/Clients/serve-index/fluid-express/src/js/serve-index.js:8:2053)
    at Module._compile (node:internal/modules/cjs/loader:1126:14)
    at Module.replacementCompile (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/nyc/node_modules/append-transform/index.js:58:13)
    at module.exports (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
    at Object.<anonymous> (/data/js-variants/multee/Clients/serve-index/fluid-express/node_modules/nyc/node_modules/append-transform/index.js:62:4)
    at Module.load (node:internal/modules/cjs/loader:1004:32)

=============================== Coverage summary ===============================
Statements   : 42.73% ( 94/220 )
Branches     : 4.17% ( 2/48 )
Functions    : 0% ( 0/40 )
Lines        : 42.73% ( 94/220 )
================================================================================
----------------------run test done----------------------
----------------------client grunt-contrib-connect of serve-index----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> grunt-contrib-connect@3.0.0 test
> grunt test

Running "jshint:all" (jshint) task
>> 3 files lint free.

Running "connect:basic" (connect) task
Started connect web server on http://localhost:7999

Running "connect:custom_base" (connect) task
Started connect web server on http://localhost:8000

Running "connect:custom_port" (connect) task
Started connect web server on http://localhost:8001

Running "connect:self_port_q" (connect) task
Started connect web server on http://localhost:0

Running "connect:self_port_0" (connect) task
Started connect web server on http://localhost:0

Running "connect:custom_https" (connect) task
Started connect web server on https://localhost:8002

Running "connect:custom_https_certs" (connect) task
Started connect web server on https://localhost:8003

Running "connect:custom_base_with_options" (connect) task
Started connect web server on http://localhost:8014

Running "connect:multiple_base" (connect) task
Started connect web server on http://localhost:8004

Running "connect:multiple_base_with_options" (connect) task
Started connect web server on http://localhost:8015

Running "connect:multiple_base_directory" (connect) task
Started connect web server on http://localhost:8005

Running "connect:livereload" (connect) task
Started connect web server on http://localhost:8006

Running "connect:livereload_port" (connect) task
Started connect web server on http://localhost:8018

Running "connect:livereload_general" (connect) task
Started connect web server on http://localhost:8019

Running "connect:custom_middleware" (connect) task
Started connect web server on http://localhost:8007

Running "connect:null_middleware" (connect) task
Started connect web server on http://localhost:8008

Running "connect:empty_middleware" (connect) task
Started connect web server on http://localhost:8009

Running "connect:custom_middleware_patch_default_middleware" (connect) task
Started connect web server on http://localhost:8010

Running "connect:useAvailablePort" (connect) task
Started connect web server on http://localhost:8011

Running "connect:allHostname" (connect) task
Started connect web server on http://localhost:8012

Running "connect:onCreateServer" (connect) task
Started connect web server on http://localhost:8013

Running "connect:routedMiddleware" (connect) task
Started connect web server on http://localhost:8016

Running "connect:http2" (connect) task
Started connect web server on https://localhost:8017

Running "nodeunit:tests" (nodeunit) task
Testing connect_test.js...................OK
>> 48 assertions passed (148ms)

Done.
npm uninstall

removed 1 package, and audited 591 packages in 3s

22 packages are looking for funding
  run `npm fund` for details

10 vulnerabilities (1 moderate, 6 high, 3 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> grunt-contrib-connect@3.0.0 test
> grunt test

Loading "connect.js" tasks...ERROR
>> Error: Cannot find module 'serve-index'
>> Require stack:
>> - /data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/tasks/connect.js
>> - /data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/grunt/task.js
>> - /data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/grunt.js
>> - /data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/node_modules/grunt-cli/bin/grunt
>> - /data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/bin/grunt
Warning: Task "connect" not found. Use --force to continue.
Error: Task "connect" not found.
    at Task.run (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/util/task.js:172:28)
    at Object.thisTask.fn (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/grunt/task.js:70:16)
    at Object.<anonymous> (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/util/task.js:294:30)
    at Task.runTaskFn (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/util/task.js:244:24)
    at Task.<anonymous> (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/util/task.js:293:12)
    at Task.start (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/util/task.js:302:5)
    at Object.grunt.tasks (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/lib/grunt.js:173:8)
    at Liftoff.<anonymous> (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/grunt/node_modules/grunt-cli/bin/grunt:68:15)
    at Liftoff.execute (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/liftup/index.js:202:12)
    at module.exports (/data/js-variants/multee/Clients/serve-index/grunt-contrib-connect/node_modules/flagged-respawn/index.js:51:3)

Aborted due to warnings.
----------------------run test done----------------------
----------------------client live-server of serve-index----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> live-server@1.2.2 test
> mocha test --exit && npm run lint

Mapping /mounted to "/data/js-variants/multee/Clients/serve-index/live-server/test/data/sub"
Mapping /style to "/data/js-variants/multee/Clients/serve-index/live-server/test/data/style.css"
Mapping /server1 to "http://localhost:40200"


[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:39243[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:41657[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:45317[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at https://127.0.0.1:33249[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at https://127.0.0.1:43827[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:41071[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:39777[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:38525[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:39799[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:40200[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:36831[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:34069[39m
[32mServing "/data/js-variants/multee/Clients/serve-index/live-server/test/data" at http://127.0.0.1:35441[39m
  basic functional tests
    ✓ should respond with index.html
    ✓ should have injected script
[36mReady for changes[39m
    ✓ should inject script when tags are in CAPS
    ✓ should inject to <head> when no <body>
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
[36mReady for changes[39m
    ✓ should inject also svg files
    ✓ should not inject html fragments
    - should have WebSocket connection
    - should reload on page change
    - should reload (without refreshing) on css change

  command line usage
    ✓ --version (207ms)
    ✓ --help (214ms)
    ✓ --quiet (960ms)
    ✓ --port (931ms)
    ✓ --host (976ms)
    ✓ --htpasswd (931ms)

  cors tests
    ✓ should respond with appropriate header
    ✓ should support preflighted requests
    ✓ should support requests with credentials

  htpasswd tests
[0mGET / [33m401[0m 0.279 ms - -[0m
    ✓ should respond with 401 since no password is given
[0mGET / [33m401[0m 4.772 ms - -[0m
    ✓ should respond with 401 since wrong password is given
    ✓ should respond with 200 since correct password is given

  https tests with external module
    ✓ should reply with a correct index file
    ✓ should support head request

  https tests with object
    ✓ should reply with a correct index file
    ✓ should support head request

  middleware tests
    ✓ should respond with middleware function's status code
    ✓ should respond with built-in middleware's status code
    ✓ should respond with external middleware's status code

  mount tests
    ✓ should respond with sub.html
    ✓ should respond with style.css

  proxy tests
    ✓ should respond with proxied content

  spa tests
    ✓ spa should redirect
    ✓ spa should redirect everything
    ✓ spa-ignore-assets should redirect something
    ✓ spa-ignore-assets should not redirect .css


  32 passing (4s)
  3 pending


> live-server@1.2.2 lint
> eslint live-server.js index.js

npm uninstall

removed 1 package, and audited 366 packages in 1s

12 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (2 moderate, 2 high, 1 critical)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> live-server@1.2.2 test
> mocha test --exit && npm run lint

----------------------run test done----------------------
----------------------client server of serve-index----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> server@1.0.37 pretest
> cp .env.demo .env


> server@1.0.37 test
> jest --coverage --forceExit

---------------------------|---------|----------|---------|---------|-------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------------|---------|----------|---------|---------|-------------------
All files                  |   90.15 |    77.27 |   88.41 |   92.69 |                   
 server                    |     100 |      100 |     100 |     100 |                   
  server.js                |     100 |      100 |     100 |     100 |                   
 server/error              |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/examples/supertest |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/compress   |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/express    |   82.35 |       50 |      90 |   86.66 |                   
  index.js                 |   82.35 |       50 |      90 |   86.66 | 47,64-66          
 server/plugins/favicon    |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/final      |     100 |    86.66 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |    86.66 |     100 |     100 | 8,26              
 server/plugins/log        |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/parser     |   82.85 |    56.25 |     100 |     100 |                   
  index.js                 |   82.85 |    56.25 |     100 |     100 | 40-82             
 server/plugins/security   |     100 |     62.5 |     100 |     100 |                   
  index.js                 |     100 |     62.5 |     100 |     100 | 51-61             
 server/plugins/session    |   78.57 |       60 |      75 |   84.61 |                   
  index.js                 |   78.57 |       60 |      75 |   84.61 | 37,48             
 server/plugins/socket     |   31.81 |       20 |   14.28 |   36.84 |                   
  index.js                 |   31.81 |       20 |   14.28 |   36.84 | 31-32,37,42-59    
 server/plugins/static     |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/reply              |     100 |    91.42 |     100 |     100 |                   
  cookie.js                |     100 |      100 |     100 |     100 |                   
  download.js              |     100 |      100 |     100 |     100 |                   
  end.js                   |     100 |      100 |     100 |     100 |                   
  file.js                  |     100 |      100 |     100 |     100 |                   
  header.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  json.js                  |     100 |      100 |     100 |     100 |                   
  jsonp.js                 |     100 |      100 |     100 |     100 |                   
  redirect.js              |     100 |      100 |     100 |     100 |                   
  render.js                |     100 |      100 |     100 |     100 |                   
  reply.js                 |     100 |    91.42 |     100 |     100 | 47,86,138         
  send.js                  |     100 |      100 |     100 |     100 |                   
  status.js                |     100 |      100 |     100 |     100 |                   
  type.js                  |     100 |      100 |     100 |     100 |                   
 server/router             |   74.28 |     37.5 |      50 |   79.68 |                   
  del.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  error.js                 |   94.11 |    66.66 |     100 |     100 | 22                
  errors.js                |     100 |      100 |     100 |     100 |                   
  generic.js               |      70 |     37.5 |   66.66 |   82.35 | 30-32             
  get.js                   |     100 |      100 |     100 |     100 |                   
  head.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  index.js                 |     100 |      100 |     100 |     100 |                   
  parse.js                 |     100 |      100 |     100 |     100 |                   
  post.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  put.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  sub.js                   |   22.22 |        0 |       0 |      25 | 4-12              
 server/src/config         |   89.31 |     82.4 |   88.88 |   92.17 |                   
  env.js                   |    91.3 |    83.33 |     100 |     100 | 13,15             
  errors.js                |      90 |        0 |      75 |     100 | 25                
  index.js                 |     100 |       75 |     100 |     100 | 13                
  parse.js                 |   92.75 |    90.72 |     100 |   92.42 | 45,50,64-65,90    
  schema.js                |   54.54 |       20 |     100 |      60 | 17-21             
 server/src/join           |     100 |     87.5 |     100 |     100 |                   
  index.js                 |     100 |     87.5 |     100 |     100 | 36-40             
 server/src/modern         |     100 |      100 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  validate.js              |     100 |      100 |     100 |     100 |                   
 server/test               |   92.47 |    82.97 |   94.73 |   93.82 |                   
  a.js                     |     100 |      100 |     100 |     100 |                   
  port.js                  |   84.61 |       60 |     100 |   83.33 | 14,21             
  run.js                   |   93.58 |    85.71 |   93.75 |   95.58 | 135-138           
---------------------------|---------|----------|---------|---------|-------------------
npm uninstall

added 6 packages, changed 1 package, and audited 1109 packages in 4s

42 packages are looking for funding
  run `npm fund` for details

21 vulnerabilities (16 moderate, 5 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> server@1.0.37 pretest
> cp .env.demo .env


> server@1.0.37 test
> jest --coverage --forceExit

---------------------------|---------|----------|---------|---------|-------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------------|---------|----------|---------|---------|-------------------
All files                  |   90.15 |    77.27 |   88.41 |   92.69 |                   
 server                    |     100 |      100 |     100 |     100 |                   
  server.js                |     100 |      100 |     100 |     100 |                   
 server/error              |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/examples/supertest |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/compress   |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/express    |   82.35 |       50 |      90 |   86.66 |                   
  index.js                 |   82.35 |       50 |      90 |   86.66 | 47,64-66          
 server/plugins/favicon    |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/final      |     100 |    86.66 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |    86.66 |     100 |     100 | 8,26              
 server/plugins/log        |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/parser     |   82.85 |    56.25 |     100 |     100 |                   
  index.js                 |   82.85 |    56.25 |     100 |     100 | 40-82             
 server/plugins/security   |     100 |     62.5 |     100 |     100 |                   
  index.js                 |     100 |     62.5 |     100 |     100 | 51-61             
 server/plugins/session    |   78.57 |       60 |      75 |   84.61 |                   
  index.js                 |   78.57 |       60 |      75 |   84.61 | 37,48             
 server/plugins/socket     |   31.81 |       20 |   14.28 |   36.84 |                   
  index.js                 |   31.81 |       20 |   14.28 |   36.84 | 31-32,37,42-59    
 server/plugins/static     |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/reply              |     100 |    91.42 |     100 |     100 |                   
  cookie.js                |     100 |      100 |     100 |     100 |                   
  download.js              |     100 |      100 |     100 |     100 |                   
  end.js                   |     100 |      100 |     100 |     100 |                   
  file.js                  |     100 |      100 |     100 |     100 |                   
  header.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  json.js                  |     100 |      100 |     100 |     100 |                   
  jsonp.js                 |     100 |      100 |     100 |     100 |                   
  redirect.js              |     100 |      100 |     100 |     100 |                   
  render.js                |     100 |      100 |     100 |     100 |                   
  reply.js                 |     100 |    91.42 |     100 |     100 | 47,86,138         
  send.js                  |     100 |      100 |     100 |     100 |                   
  status.js                |     100 |      100 |     100 |     100 |                   
  type.js                  |     100 |      100 |     100 |     100 |                   
 server/router             |   74.28 |     37.5 |      50 |   79.68 |                   
  del.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  error.js                 |   94.11 |    66.66 |     100 |     100 | 22                
  errors.js                |     100 |      100 |     100 |     100 |                   
  generic.js               |      70 |     37.5 |   66.66 |   82.35 | 30-32             
  get.js                   |     100 |      100 |     100 |     100 |                   
  head.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  index.js                 |     100 |      100 |     100 |     100 |                   
  parse.js                 |     100 |      100 |     100 |     100 |                   
  post.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  put.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  sub.js                   |   22.22 |        0 |       0 |      25 | 4-12              
 server/src/config         |   89.31 |     82.4 |   88.88 |   92.17 |                   
  env.js                   |    91.3 |    83.33 |     100 |     100 | 13,15             
  errors.js                |      90 |        0 |      75 |     100 | 25                
  index.js                 |     100 |       75 |     100 |     100 | 13                
  parse.js                 |   92.75 |    90.72 |     100 |   92.42 | 45,50,64-65,90    
  schema.js                |   54.54 |       20 |     100 |      60 | 17-21             
 server/src/join           |     100 |     87.5 |     100 |     100 |                   
  index.js                 |     100 |     87.5 |     100 |     100 | 36-40             
 server/src/modern         |     100 |      100 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  validate.js              |     100 |      100 |     100 |     100 |                   
 server/test               |   92.47 |    82.97 |   94.73 |   93.82 |                   
  a.js                     |     100 |      100 |     100 |     100 |                   
  port.js                  |   84.61 |       60 |     100 |   83.33 | 14,21             
  run.js                   |   93.58 |    85.71 |   93.75 |   95.58 | 135-138           
---------------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
----------------------client servez-lib of serve-index----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> servez-lib@2.6.0 test
> mocha test/tests



  servez-lib
    ✔ gets text
    ✔ gets binary gz
    ✔ gets text from binary gz when gzip true
    ✔ fails on missing file
    ✔ scan for port
    ✔ does not scan for port when scan false
    ✔ returns robots.txt if robots true
    ✔ returns 404 if robots false
    ✔ returns 404 for folder if index false
    ✔ returns index.html for folder if index true
    ✔ returns something for folder if index false and dirs true
    ✔ listing is kodi compatible
    ✔ fails if bad auth
    ✔ succeeds if good auth
    ✔ gets html when non-html
    ✔ emits host before start
    ✔ does not sends headers for sharedArrayBuffers by default
    ✔ sends correct headers for sharedArrayBuffers
    ✔ sends added headers


  19 passing (163ms)

npm uninstall

removed 1 package, and audited 161 packages in 1s

21 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> servez-lib@2.6.0 test
> mocha test/tests

----------------------run test done----------------------
session
subdir: Lien kettle kraken-js routing-controllers server
----------------------client Lien of session----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> lien@3.3.1 test
> node test/index.js

  ➡️ lien
     ⚡ should start the server
     ⚡ add a static url to test lien fields
     ⚡ add a static url which renders templates
     ⚡ should static route
     ⚡ should serve file
     ⚡ should check before adding the hook
     ⚡ should add before hook
     ⚡ should check after the before hook
     ⚡ should add before hook
     ⚡ should check after the before hook
     ⚡ should add after hook
     ⚡ should check after hook
     ⚡ should add different pages
     ⚡ possible-404 page (foo/article/a)
     ⚡ possible-404 page (foo/article/b)
     ⚡ possible-404 page (foo/article/c)
     ⚡ should add different pages, overriding the public dir
     ⚡ check foo index before adding the custom route
     ⚡ load static HTML file
     ⚡ check foo/bar 
     ⚡ should override public dir
     ⚡ check foo index after adding the custom route
     ⚡ check foo/:dyn 
     ⚡ should add dynamic page
     ⚡ check /:dyn 
     ⚡ load static HTML file
     ⚡ add a static url which renders templates
     ⚡ should close the server
npm uninstall

up to date, audited 236 packages in 2s

51 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (1 moderate, 3 high, 1 critical)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> lien@3.3.1 test
> node test/index.js

  ➡️ lien
     ⚡ should start the server
     ⚡ add a static url to test lien fields
     ⚡ add a static url which renders templates
     ⚡ should static route
     ⚡ should serve file
     ⚡ should check before adding the hook
     ⚡ should add before hook
     ⚡ should check after the before hook
     ⚡ should add before hook
     ⚡ should check after the before hook
     ⚡ should add after hook
     ⚡ should check after hook
     ⚡ should add different pages
     ⚡ possible-404 page (foo/article/a)
     ⚡ possible-404 page (foo/article/b)
     ⚡ possible-404 page (foo/article/c)
     ⚡ should add different pages, overriding the public dir
     ⚡ check foo index before adding the custom route
     ⚡ load static HTML file
     ⚡ check foo/bar 
     ⚡ should override public dir
     ⚡ check foo index after adding the custom route
     ⚡ check foo/:dyn 
     ⚡ should add dynamic page
     ⚡ check /:dyn 
     ⚡ load static HTML file
     ⚡ add a static url which renders templates
     ⚡ should close the server
----------------------run test done----------------------
----------------------client kettle of session----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> kettle@2.3.0 pretest
> npx rimraf coverage/*


> kettle@2.3.0 test
> nyc --reporter=html node tests/all-tests.js

Infusion at path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion is at top level 
17:31:25.246:  Registering module subbifier from path /data/js-variants/multee/
17:31:25.246:  Registering module kettle from path /data/js-variants/multee/Clients/session/kettle/
17:31:25.246:  Registering module infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/
17:31:25.246:  Registering module infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:25.257:  Registering module kettle from path /data/js-variants/multee/Clients/session/kettle
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/node-jqunit/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:26.435:  Successfully queued test JSON line number diagnostic test
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:26.705:  Registering module fluid-pouchdb from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb
17:31:27.361:  Registering module fluid-express from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb/node_modules/fluid-express
17:31:27.950:  ASSERTION FAILED: kettle.JSON.parse called on non-string object 3
17:31:27.955:  Unhandled promise rejection: {
    "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING'"
}
17:31:27.969:  jq: Test concluded - Test name "kettle JSON parsing error tests": 2/2 passed - PASS
17:31:27.972:  Received JSON diagnostic error {
  "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING' while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSONFile.json"
}
17:31:27.984:  jq: Test concluded - Test name "kettle.JSON.readFileSync of invalid JSON": 2/2 passed - PASS
17:31:27.999:  jq: Test concluded - Test name "kettle.JSON.readFileSync of valid JSON": 1/1 passed - PASS
17:31:28.000:  Received JSON5 diagnostic error {
  "message": "JSON5: invalid character ']' at 49:9 while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSON5File.json5"
}
17:31:28.014:  jq: Test concluded - Test name "kettle.JSON.readFileSync of invalid JSON5": 2/2 passed - PASS
17:31:28.027:  jq: Test concluded - Test name "kettle.JSON.readFileSync of valid JSON5": 1/1 passed - PASS
17:31:28.040:  jq: Test concluded - Test name "kettle.JSON.readFileSync of nonexistent file": 1/1 passed - PASS
17:31:28.089:  Initializing the Express app
17:31:28.091:  Initializing the HTTP server
17:31:28.095:  Opening Kettle Server on port 8081
17:31:28.097:  Kettle Server 2qllb8td-176 is listening on port 8081
17:31:28.097:  Stopping Kettle Server 2qllb8td-176 on port 8081
17:31:28.097:  Kettle Server 2qllb8td-176 on port 8081 is stopped
17:31:28.111:  jq: Test concluded - Test name "Kettle server initialisation test": 1/1 passed - PASS
17:31:28.112:  Loader running configuration name kettle.tests.HTTPMethods.config
17:31:28.152:  Initializing the Express app
17:31:28.153:  Initializing the HTTP server
17:31:28.157:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:28.158:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:28.159:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:28.159:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:28.159:  Opening Kettle Server on port 8081
17:31:28.166:  Sending a GET request to: http://127.0.0.1:8081/
17:31:28.169:  Kettle Server 2qllb8td-241 is listening on port 8081
17:31:28.175:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:28.183:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:28.191:  Stopping Kettle Server 2qllb8td-241 on port 8081
17:31:28.192:  Kettle Server 2qllb8td-241 on port 8081 is stopped
17:31:28.206:  jq: Test concluded - Test name "Kettle server initialisation test via init.js and args": 2/2 passed - PASS
17:31:28.206:  Loader running configuration name kettle.tests.HTTPMethods.config
17:31:28.256:  Initializing the Express app
17:31:28.257:  Initializing the HTTP server
17:31:28.260:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:28.260:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:28.260:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:28.260:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:28.261:  Opening Kettle Server on port 8081
17:31:28.264:  Sending a GET request to: http://127.0.0.1:8081/
17:31:28.265:  Kettle Server 2qllb8td-351 is listening on port 8081
17:31:28.266:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:28.272:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:28.275:  Stopping Kettle Server 2qllb8td-351 on port 8081
17:31:28.275:  Kettle Server 2qllb8td-351 on port 8081 is stopped
17:31:28.289:  jq: Test concluded - Test name "Kettle server initialisation test via init.js and NODE_ENV": 2/2 passed - PASS
17:31:28.289:  ASSERTION FAILED: No configuration specified in either 1st command line argument, NODE_ENV or internal default
17:31:28.303:  jq: Test concluded - Test name "Kettle server initialisation test via init.js without config name": 1/1 passed - PASS
17:31:28.303:  ASSERTION FAILED: Config path must be specified as 1st command line argument
17:31:28.317:  jq: Test concluded - Test name "Kettle server initialisation test via init.js without config path": 1/1 passed - PASS
17:31:28.322:  Received JSON diagnostic error {
  "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING' while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSONFile.json"
}
17:31:28.341:  Successfully queued test JSON line number diagnostic test
17:31:28.341:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "JSON line number diagnostic test": 2/2 passed - PASS
17:31:28.355:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "GPII-2147: Testing that localhost is properly replaced by 127.0.0.1 in prepareRequestOptions": 1/1 passed - PASS
17:31:28.386:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "DataSource basic init tests": 8/8 passed - PASS
17:31:28.397:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "x-custom-header": "x-custom-value",
        "x-custom-header2": "x-custom-value2"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": 999,
    "pathname": "/path",
    "search": "",
    "family": 4,
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:999/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:28.411:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-34 request option resolution test": 1/1 passed - PASS
17:31:28.419:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/device",
    "search": "",
    "url": "http://localhost:998/device",
    "port": 998,
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:28.433:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-34 request option resolution test": 1/1 passed - PASS
17:31:28.441:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "Authorization": "(SENSITIVE)",
        "X-unrelated-header": "998"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": "997",
    "pathname": "/path",
    "search": "",
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:997/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:28.450:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "Authorization": "(SENSITIVE)",
        "X-unrelated-header": "998"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": "997",
    "pathname": "/path",
    "search": "",
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:997/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:28.464:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-73 censoring test": 6/6 passed - PASS
17:31:28.491:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-38 derived writable dataSource test": 1/1 passed - PASS
17:31:28.513:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Reading file in formenc encoding": 1/1 passed - PASS
17:31:28.536:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Writing file in formenc encoding": 1/1 passed - PASS
17:31:28.542:  ASSERTION FAILED: Cannot operate file dataSource {
    "typeName": "kettle.tests.dataSource.fileWithoutPath",
    "id": "2qllb8td-628",
    "lifecycleStatus": "treeConstructed",
    "destroy": { Function
        
    },
    "options": {
        "gradeNames": [
            "fluid.component",
            "fluid.contextAware",
            "fluid.dataSource",
            "kettle.dataSource.file",
            "kettle.tests.dataSource.fileWithoutPath"
        ],
        "contextAwareness": {
            "writable": {
                "checks": {
                    "writableValue": {
                        "contextValue": "{fluid.dataSource}.options.writable",
                        "gradeNames": "{fluid.dataSource}.options.writableGrade"
                    }
                }
            }
        },
        "writable": false,
        "components": {
            "encoding": {
                "0": {
                    "type": "fluid.dataSource.encoding.JSON"
                },
                "length": 1
            }
        },
        "events": {
            .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars] without an option named "path"
17:31:28.543:  Current activity: 
17:31:28.543:      while firing to listener to event named onRead of component component { typeName: "kettle.tests.dataSource.fileWithoutPath id: 2qllb8td-628" gradeNames: ["fluid.contextAware","fluid.dataSource","kettle.dataSource.file","kettle.tests.dataSource.fileWithoutPath"]} at path fileWithoutPath-2qllb8td-628
17:31:28.543:      while invoking invoker with name get and record {
    "func": undefined,
    "funcName": "fluid.dataSource.get",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1"
    ],
    "componentSource": "fluid.dataSource"
} holding component component { typeName: "kettle.tests.dataSource.fileWithoutPath id: 2qllb8td-628" gradeNames: ["fluid.contextAware","fluid.dataSource","kettle.dataSource.file","kettle.tests.dataSource.fileWithoutPath"]} at path fileWithoutPath-2qllb8td-628
17:31:28.557:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "DataSource without path": 2/2 passed - PASS
17:31:28.593:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Attached URLResolver tests": 2/2 passed - PASS
17:31:28.617:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test present environment substitution": 1/1 passed - PASS
17:31:28.636:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test absent environment substitution": 1/1 passed - PASS
17:31:28.654:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test present file substitution": 1/1 passed - PASS
17:31:28.674:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test absent file substitution": 1/1 passed - PASS
17:31:28.691:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test args substitution": 1/1 passed - PASS
17:31:28.705:  Registering module test-module from path /data/js-variants/multee/Clients/session/kettle/tests/configs/node_modules/test-module
17:31:28.738:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config defaults with types": 14/14 passed - PASS
17:31:28.756:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config defaults without type": 4/4 passed - PASS
17:31:28.781:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config with "loadConfig" directive": 2/2 passed - PASS
17:31:28.795:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test parsing command line arguments": 4/4 passed - PASS
17:31:28.798:  ASSERTION FAILED: Error in config file at path undefined - key "distributeOptions" found, where the only legal options are type, options, loadConfigs, mergeConfigs, require
17:31:28.811:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Config with bad top-level keys": 1/1 passed - PASS
17:31:28.814:  Received JSON5 diagnostic error {
  "message": "JSON5: invalid character ']' at 49:9 while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSON5File.json5"
}
17:31:28.835:  Successfully queued test Simple get test
17:31:28.836:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "JSON line number diagnostic test": 2/2 passed - PASS
17:31:28.874:  Successfully queued test Simple get test
17:31:28.874:  jq: Test concluded - Module "1. Testing file datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:28.933:  Successfully queued test Simple get test
17:31:28.960:  jq: Test concluded - Module "2. Testing file datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:28.996:  Successfully queued test Simple get test
17:31:28.996:  jq: Test concluded - Module "3. Testing CouchDB datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:29.015:  Successfully queued test Simple get test
17:31:29.016:  jq: Test concluded - Module "4. Testing CouchDB datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:29.035:  Successfully queued test Simple get test
17:31:29.035:  jq: Test concluded - Module "5. Testing CouchDB file datasource with missing file" Test name "Simple get test": 1/1 passed - PASS
17:31:29.055:  Successfully queued test Simple get test
17:31:29.055:  jq: Test concluded - Module "6. Testing CouchDB datasource with error response" Test name "Simple get test": 1/1 passed - PASS
17:31:29.074:  Successfully queued test Simple get test
17:31:29.074:  jq: Test concluded - Module "7. Testing filesystem datasource with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.099:  Successfully queued test Simple get test
17:31:29.099:  jq: Test concluded - Module "8. Testing file datasource with filesystem with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.117:  Successfully queued test Simple get test
17:31:29.117:  jq: Test concluded - Module "9. Testing file datasource with filesystem with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.138:  Successfully queued test Simple get test
17:31:29.138:  jq: Test concluded - Module "10. Testing file datasource with filesystem with static expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.157:  Successfully queued test Simple get test
17:31:29.157:  jq: Test concluded - Module "11. Testing couchdb datasource with filesystem with static expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.181:  Successfully queued test Simple set test
17:31:29.181:  jq: Test concluded - Module "12. Testing couchdb datasource with filesystem and dynamic expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:29.203:  Successfully queued test Simple set test
17:31:29.209:  jq: Test concluded - Module "13. Testing file datasource with filesystem - set" Test name "Simple set test": 1/1 passed - PASS
17:31:29.238:  Successfully queued test Simple set test
17:31:29.238:  jq: Test concluded - Module "13a. Testing file datasource with filesystem - set with JSON5 encoding" Test name "Simple set test": 1/1 passed - PASS
17:31:29.265:  Successfully queued test Simple set test
17:31:29.266:  jq: Test concluded - Module "14. Testing CouchDB datasource with filesystem - set" Test name "Simple set test": 1/1 passed - PASS
17:31:29.289:  Successfully queued test Simple set test
17:31:29.289:  jq: Test concluded - Module "15. Testing CouchDB datasource with filesystem existing document - set" Test name "Simple set test": 1/1 passed - PASS
17:31:29.313:  Successfully queued test Simple set test
17:31:29.313:  jq: Test concluded - Module "16. Testing file datasource with filesystem and expansion - set" Test name "Simple set test": 1/1 passed - PASS
17:31:29.333:  Successfully queued test Simple get test
17:31:29.333:  jq: Test concluded - Module "17. Testing couchdb datasource with filesystem, existing document and expansion - set" Test name "Simple set test": 1/1 passed - PASS
17:31:29.351:  Successfully queued test Simple get test
17:31:29.352:  jq: Test concluded - Module "18. Testing JSON5 file datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:29.372:  Successfully queued test Simple get test
17:31:29.372:  jq: Test concluded - Module "19. Testing JSON5 file datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:29.391:  Successfully queued test Simple get test
17:31:29.401:  jq: Test concluded - Module "1. Testing file datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.443:  Successfully queued test Simple get test
17:31:29.443:  jq: Test concluded - Module "2. Testing file datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.462:  Successfully queued test Simple get test
17:31:29.462:  jq: Test concluded - Module "3. Testing CouchDB datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.486:  Successfully queued test Simple get test
17:31:29.486:  jq: Test concluded - Module "4. Testing CouchDB datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.505:  Successfully queued test Simple get test
17:31:29.505:  jq: Test concluded - Module "5. Testing CouchDB file datasource with missing file - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.523:  Successfully queued test Simple get test
17:31:29.524:  jq: Test concluded - Module "6. Testing CouchDB datasource with error response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.542:  Successfully queued test Simple get test
17:31:29.543:  jq: Test concluded - Module "7. Testing filesystem datasource with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.563:  Successfully queued test Simple get test
17:31:29.564:  jq: Test concluded - Module "8. Testing file datasource with filesystem with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.583:  Successfully queued test Simple get test
17:31:29.583:  jq: Test concluded - Module "9. Testing file datasource with filesystem with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.603:  Successfully queued test Simple get test
17:31:29.613:  jq: Test concluded - Module "10. Testing file datasource with filesystem with static expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.633:  Successfully queued test Simple get test
17:31:29.634:  jq: Test concluded - Module "11. Testing couchdb datasource with filesystem with static expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.658:  Successfully queued test Simple set test
17:31:29.658:  jq: Test concluded - Module "12. Testing couchdb datasource with filesystem and dynamic expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.679:  Successfully queued test Simple set test
17:31:29.680:  jq: Test concluded - Module "13. Testing file datasource with filesystem - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.702:  Successfully queued test Simple set test
17:31:29.702:  jq: Test concluded - Module "13a. Testing file datasource with filesystem - set with JSON5 encoding - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.726:  Successfully queued test Simple set test
17:31:29.727:  jq: Test concluded - Module "14. Testing CouchDB datasource with filesystem - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.756:  Successfully queued test Simple set test
17:31:29.756:  jq: Test concluded - Module "15. Testing CouchDB datasource with filesystem existing document - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.783:  Successfully queued test Simple set test
17:31:29.783:  jq: Test concluded - Module "16. Testing file datasource with filesystem and expansion - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.803:  Successfully queued test Simple get test
17:31:29.812:  jq: Test concluded - Module "17. Testing couchdb datasource with filesystem, existing document and expansion - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:29.829:  Successfully queued test Simple get test
17:31:29.830:  jq: Test concluded - Module "18. Testing JSON5 file datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.875:  Initializing the Express app
17:31:29.876:  Initializing the HTTP server
17:31:29.878:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:29.878:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.redirectingRequestHandler",
    "route": "/redirect",
    "method": "get"
}
17:31:29.879:  Opening Kettle Server on port 8081
17:31:29.880:  Successfully queued test Simple get test
17:31:29.880:  Kettle Server 2qllb8td-2853 is listening on port 8081
17:31:29.880:  jq: Test concluded - Module "19. Testing JSON5 file datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:29.881:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/redirect",
    "search": "",
    "url": "http://localhost:8081/redirect",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:29.884:  Invoking handler kettle.tests.dataSource.URL.redirectingRequestHandler for route /redirect with expectedGrade kettle.request.http
17:31:29.891:  Kettle server allocated request object with type kettle.tests.dataSource.URL.redirectingRequestHandler
17:31:29.896:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:29.902:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:29.904:  Stopping Kettle Server 2qllb8td-2853 on port 8081
17:31:29.905:  Kettle Server 2qllb8td-2853 on port 8081 is stopped
17:31:29.942:  Initializing the Express app
17:31:29.942:  Initializing the HTTP server
17:31:29.945:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:29.945:  Opening Kettle Server on port 8081
17:31:29.946:  Successfully queued test Resource model is initialised
17:31:29.946:  Kettle Server 2qllb8td-3005 is listening on port 8081
17:31:29.954:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "dataSource": {
        "typeName": "kettle.dataSource.URL",
        "id": "2qllb8td-3007",
        "lifecycleStatus": "treeConstructed",
        "destroy": { Function
            
        },
        "options": {
            "gradeNames": [
                "fluid.component",
                "fluid.contextAware",
                "fluid.dataSource",
                "fluid.dataSource.URL",
                "kettle.dataSource.URL"
            ],
            "contextAwareness": {
                "writable": {
                    "checks": {
                        "writableValue": {
                            "contextValue": "{fluid.dataSource}.options.writable",
                            "gradeNames": "{fluid.dataSource}.options.writableGrade"
                        }
    .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:29.955:  jq: Test concluded - Module "KETTLE-89: DataSource support for redirects" Test name "Simple get test": 3/3 passed - PASS
17:31:29.956:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:29.962:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:29.967:  Stopping Kettle Server 2qllb8td-3005 on port 8081
17:31:29.968:  Kettle Server 2qllb8td-3005 on port 8081 is stopped
17:31:30.007:  Initializing the Express app
17:31:30.007:  Initializing the HTTP server
17:31:30.010:  Registering request handler {
    "type": "kettle.request.http",
    "route": "/",
    "method": "get"
}
17:31:30.010:  Opening Kettle Server on port 8081
17:31:30.011:  Successfully queued test Simple get test
17:31:30.011:  Kettle Server 2qllb8td-3171 is listening on port 8081
17:31:30.011:  jq: Test concluded - Module "DataSource during init" Test name "Resource model is initialised": 2/2 passed - PASS
17:31:30.013:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/notfound",
    "search": "?search",
    "url": "http://(SENSITIVE):(SENSITIVE)@localhost:8081/notfound?search",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.024:  Kettle server getDispatcher found no matching handlers, continuing
17:31:30.026:  Stopping Kettle Server 2qllb8td-3171 on port 8081
17:31:30.027:  Kettle Server 2qllb8td-3171 on port 8081 is stopped
17:31:30.065:  Initializing the Express app
17:31:30.065:  Initializing the HTTP server
17:31:30.066:  Initializing the HTTPS server
17:31:30.076:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:30.076:  Opening Kettle Server on port 8081
17:31:30.077:  Successfully queued test Simple get test
17:31:30.077:  Kettle Server 2qllb8td-3284 is listening on port 8081
17:31:30.077:  jq: Test concluded - Module "w. Testing URL dataSource with sensitive info in URL" Test name "Simple get test": 4/4 passed - PASS
17:31:30.078:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "https:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "https://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.084:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:30.090:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:30.093:  Stopping Kettle Server 2qllb8td-3284 on port 8081
17:31:30.094:  Kettle Server 2qllb8td-3284 on port 8081 is stopped
17:31:30.137:  Initializing the Express app
17:31:30.138:  Initializing the HTTP server
17:31:30.141:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:30.141:  Opening Kettle Server on port 8081
17:31:30.142:  Successfully queued test Simple get test
17:31:30.143:  Kettle Server 2qllb8td-3418 is listening on port 8081
17:31:30.143:  jq: Test concluded - Module "HTTPS dataSource test" Test name "Simple get test": 2/2 passed - PASS
17:31:30.145:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.146:  Invoking handler kettle.tests.dataSource.URL.hangup.handler for route / with expectedGrade kettle.request.http
17:31:30.155:  Kettle server allocated request object with type kettle.tests.dataSource.URL.hangup.handler
17:31:30.157:  Stopping Kettle Server 2qllb8td-3418 on port 8081
17:31:30.158:  Kettle Server 2qllb8td-3418 on port 8081 is stopped
17:31:30.197:  Initializing the Express app
17:31:30.198:  Initializing the HTTP server
17:31:30.200:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:30.201:  Opening Kettle Server on port 8081
17:31:30.201:  Successfully queued test Simple get test
17:31:30.202:  Kettle Server 2qllb8td-3554 is listening on port 8081
17:31:30.202:  jq: Test concluded - Module "x. Testing URL dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:30.203:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.206:  Invoking handler kettle.tests.dataSource.URL.hangup.handler for route / with expectedGrade kettle.request.http
17:31:30.212:  Kettle server allocated request object with type kettle.tests.dataSource.URL.hangup.handler
17:31:30.223:  Stopping Kettle Server 2qllb8td-3554 on port 8081
17:31:30.224:  Kettle Server 2qllb8td-3554 on port 8081 is stopped
17:31:30.277:  Initializing the Express app
17:31:30.277:  Initializing the HTTP server
17:31:30.280:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:30.280:  Opening Kettle Server on port 8081
17:31:30.281:  Successfully queued test Simple get test
17:31:30.281:  Kettle Server 2qllb8td-3691 is listening on port 8081
17:31:30.281:  jq: Test concluded - Module "y. Testing CouchDB dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:30.283:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/notFound",
    "search": "",
    "url": "http://localhost:8081/notFound",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.284:  Kettle server getDispatcher found no matching handlers, continuing
17:31:30.286:  Stopping Kettle Server 2qllb8td-3691 on port 8081
17:31:30.287:  Kettle Server 2qllb8td-3691 on port 8081 is stopped
17:31:30.330:  Initializing the Express app
17:31:30.330:  Initializing the HTTP server
17:31:30.333:  Registering request handler {
    "method": "put",
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/"
}
17:31:30.333:  Opening Kettle Server on port 8081
17:31:30.334:  Successfully queued test Simple set test
17:31:30.334:  Kettle Server 2qllb8td-3804 is listening on port 8081
17:31:30.334:  jq: Test concluded - Module "z. Testing HTTP dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:30.336:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 24
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:30.338:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:30.344:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:30.367:  Stopping Kettle Server 2qllb8td-3804 on port 8081
17:31:30.368:  Kettle Server 2qllb8td-3804 on port 8081 is stopped
17:31:30.389:  Successfully queued test Simple get test
17:31:30.389:  jq: Test concluded - Module "HTTPS dataSource set with special chars test" Test name "Simple set test": 2/2 passed - PASS
17:31:30.407:  express pouchdb instance '2qllb8td-4002' initalizing...
17:31:30.407:  Creating directory '/tmp/2qllb8td-4002' for express pouchdb instance '2qllb8td-4002'...
17:31:30.524:  express baseDir: '/tmp/2qllb8td-4002'...
17:31:30.527:  Express server listening on port 6789
17:31:30.527:  Express started...
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/@the-t-in-rtf/pouchdb-all-dbs/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:30.661:  Data loaded for database 'testFile'...
17:31:30.663:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT",
    "url": "http://localhost:6789/testFile/test_id"
}
17:31:30.708:  Successfully queued test Simple get test
17:31:30.708:  Express stopped...
17:31:30.708:  jq: Test concluded - Module "3. Testing CouchDB URL DataSource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:30.737:  express pouchdb instance '2qllb8td-4156' initalizing...
17:31:30.738:  Creating directory '/tmp/2qllb8td-4156' for express pouchdb instance '2qllb8td-4156'...
17:31:30.750:  express baseDir: '/tmp/2qllb8td-4156'...
17:31:30.751:  Express server listening on port 6789
17:31:30.751:  Express started...
17:31:30.768:  Data loaded for database 'testFile'...
17:31:30.771:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "notFoundIsEmpty": false,
    "writeMethod": "PUT"
}
17:31:30.813:  Successfully queued test Simple get test
17:31:30.813:  Express stopped...
17:31:30.814:  jq: Test concluded - Module "5. Testing CouchDB URL datasource with missing file" Test name "Simple get test": 1/1 passed - PASS
17:31:30.833:  express pouchdb instance '2qllb8td-4293' initalizing...
17:31:30.833:  Creating directory '/tmp/2qllb8td-4293' for express pouchdb instance '2qllb8td-4293'...
17:31:30.848:  express baseDir: '/tmp/2qllb8td-4293'...
17:31:30.849:  Express server listening on port 6789
17:31:30.849:  Express started...
17:31:30.867:  Data loaded for database 'testFile'...
17:31:30.868:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "notFoundIsEmpty": true,
    "writeMethod": "PUT"
}
17:31:30.912:  Successfully queued test Simple set test
17:31:30.913:  Express stopped...
17:31:30.913:  jq: Test concluded - Module "5a. Testing CouchDB URL datasource with missing file and notFoundIsEmpty" Test name "Simple get test": 1/1 passed - PASS
17:31:30.926:  express pouchdb instance '2qllb8td-4437' initalizing...
17:31:30.926:  Creating directory '/tmp/2qllb8td-4437' for express pouchdb instance '2qllb8td-4437'...
17:31:30.939:  express baseDir: '/tmp/2qllb8td-4437'...
17:31:30.941:  Express server listening on port 6789
17:31:30.941:  Express started...
17:31:30.960:  Data loaded for database 'testFile'...
17:31:30.963:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "filterNamespaces": [
        "impl",
        "encoding"
    ],
    "notFoundIsEmpty": true,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:30.980:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 47
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:30.986:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:31.039:  Successfully queued test Simple set test
17:31:31.040:  Express stopped...
17:31:31.040:  jq: Test concluded - Module "14. Testing CouchDB URL datasource with HTTP - set" Test name "Simple set test": 1/1 passed - PASS
17:31:31.064:  express pouchdb instance '2qllb8td-4600' initalizing...
17:31:31.064:  Creating directory '/tmp/2qllb8td-4600' for express pouchdb instance '2qllb8td-4600'...
17:31:31.087:  express baseDir: '/tmp/2qllb8td-4600'...
17:31:31.088:  Express server listening on port 6789
17:31:31.088:  Express started...
17:31:31.106:  Data loaded for database 'testFile'...
17:31:31.108:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "filterNamespaces": [
        "impl",
        "encoding"
    ],
    "notFoundIsEmpty": true,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:31.136:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 119
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:31.141:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:31.220:  Initializing the Express app
17:31:31.220:  Initializing the HTTP server
17:31:31.222:  Initializing the Express app
17:31:31.222:  Initializing the HTTP server
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.getRelay",
    "route": "/relay",
    "method": "get"
}
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.postRelay",
    "route": "/relay",
    "method": "post"
}
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.putRelay",
    "route": "/relay",
    "method": "put"
}
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.errorRelay",
    "route": "/errorRelay",
    "method": "get"
}
17:31:31.225:  Opening Kettle Server on port 8086
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.getEndpoint",
    "route": "/endpoint",
    "method": "get"
}
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.postEndpoint",
    "route": "/endpoint",
    "method": "post"
}
17:31:31.225:  Registering request handler {
    "type": "kettle.tests.serverPair.putEndpoint",
    "route": "/endpoint",
    "method": "put"
}
17:31:31.226:  Registering request handler {
    "type": "kettle.tests.serverPair.errorEndpoint",
    "route": "/errorEndpoint",
    "method": "get"
}
17:31:31.226:  Opening Kettle Server on port 8087
17:31:31.226:  Successfully queued test Access GET request
17:31:31.226:  Successfully queued test Access SET request via POST
17:31:31.227:  Successfully queued test Access SET request via PUT
17:31:31.227:  Successfully queued test Relay error state via GET
17:31:31.227:  Kettle Server 2qllb8td-4695 is listening on port 8086
17:31:31.227:  Kettle Server 2qllb8td-4693 is listening on port 8087
17:31:31.228:  Express stopped...
17:31:31.228:  jq: Test concluded - Module "15. Testing CouchDB URL datasource with HTTP existing document - set" Test name "Simple set test": 1/1 passed - PASS
17:31:31.229:  Sending a GET request to: http://127.0.0.1:8086/relay
17:31:31.230:  Invoking handler kettle.tests.serverPair.getRelay for route /relay with expectedGrade kettle.request.http
17:31:31.238:  Kettle server allocated request object with type kettle.tests.serverPair.getRelay
17:31:31.240:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "operation": "get",
    "writeMethod": "POST"
}
17:31:31.243:  Invoking handler kettle.tests.serverPair.getEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:31.250:  Kettle server allocated request object with type kettle.tests.serverPair.getEndpoint
17:31:31.252:  ENDPOINT Resolving with value 42
17:31:31.271:  jq: Test concluded - Module "Cross server datasource access" Test name "Access GET request": 3/3 passed - PASS
17:31:31.272:  Sending a POST request to: http://127.0.0.1:8086/relay
17:31:31.273:  Invoking handler kettle.tests.serverPair.postRelay for route /relay with expectedGrade kettle.request.http
17:31:31.281:  Kettle server allocated request object with type kettle.tests.serverPair.postRelay
17:31:31.282:  DataSource Issuing HTTP request with options {
    "method": "POST",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 0
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "operation": "set",
    "writeMethod": "POST"
}
17:31:31.284:  Invoking handler kettle.tests.serverPair.postEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:31.291:  Kettle server allocated request object with type kettle.tests.serverPair.postEndpoint
17:31:31.292:  ENDPOINT Resolving with value {
    "payload": "post return value"
}
17:31:31.310:  jq: Test concluded - Module "Cross server datasource access" Test name "Access SET request via POST": 4/4 passed - PASS
17:31:31.311:  Sending a PUT request to: http://127.0.0.1:8086/relay
17:31:31.311:  Invoking handler kettle.tests.serverPair.putRelay for route /relay with expectedGrade kettle.request.http
17:31:31.318:  Kettle server allocated request object with type kettle.tests.serverPair.putRelay
17:31:31.320:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 0
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "writeMethod": "PUT",
    "operation": "set"
}
17:31:31.321:  Invoking handler kettle.tests.serverPair.putEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:31.328:  Kettle server allocated request object with type kettle.tests.serverPair.putEndpoint
17:31:31.329:  ENDPOINT Resolving with value {
    "payload": "put return value"
}
17:31:31.346:  jq: Test concluded - Module "Cross server datasource access" Test name "Access SET request via PUT": 4/4 passed - PASS
17:31:31.347:  Sending a GET request to: http://127.0.0.1:8086/errorRelay
17:31:31.348:  Invoking handler kettle.tests.serverPair.errorRelay for route /errorRelay with expectedGrade kettle.request.http
17:31:31.355:  Kettle server allocated request object with type kettle.tests.serverPair.errorRelay
17:31:31.356:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/errorEndpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/errorEndpoint",
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:31.366:  Invoking handler kettle.tests.serverPair.errorEndpoint for route /errorEndpoint with expectedGrade kettle.request.http
17:31:31.374:  Kettle server allocated request object with type kettle.tests.serverPair.errorEndpoint
17:31:31.379:  Stopping Kettle Server 2qllb8td-4693 on port 8087
17:31:31.379:  Stopping Kettle Server 2qllb8td-4695 on port 8086
17:31:31.380:  Kettle Server 2qllb8td-4693 on port 8087 is stopped
17:31:31.380:  Kettle Server 2qllb8td-4695 on port 8086 is stopped
17:31:31.400:  Successfully queued test HTTPMethods GET test
17:31:31.400:  jq: Test concluded - Module "Cross server datasource access" Test name "Relay error state via GET": 2/2 passed - PASS
17:31:31.432:  Initializing the Express app
17:31:31.432:  Initializing the HTTP server
17:31:31.434:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:31.434:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:31.434:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:31.435:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:31.435:  Opening Kettle Server on port 8081
17:31:31.435:  Kettle Server 2qllb8td-5127 is listening on port 8081
17:31:31.436:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.437:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:31.443:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:31.445:  Stopping Kettle Server 2qllb8td-5127 on port 8081
17:31:31.445:  Kettle Server 2qllb8td-5127 on port 8081 is stopped
17:31:31.462:  Successfully queued test HTTPMethods POST test
17:31:31.462:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods GET test": 2/2 passed - PASS
17:31:31.485:  Initializing the Express app
17:31:31.486:  Initializing the HTTP server
17:31:31.488:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:31.488:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:31.488:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:31.488:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:31.488:  Opening Kettle Server on port 8081
17:31:31.488:  Kettle Server 2qllb8td-5264 is listening on port 8081
17:31:31.489:  Sending a POST request to: http://127.0.0.1:8081/
17:31:31.490:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:31.497:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:31.501:  Stopping Kettle Server 2qllb8td-5264 on port 8081
17:31:31.501:  Kettle Server 2qllb8td-5264 on port 8081 is stopped
17:31:31.518:  Successfully queued test HTTPMethods PUT test
17:31:31.518:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods POST test": 2/2 passed - PASS
17:31:31.542:  Initializing the Express app
17:31:31.542:  Initializing the HTTP server
17:31:31.544:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:31.544:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:31.544:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:31.544:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:31.544:  Opening Kettle Server on port 8081
17:31:31.545:  Kettle Server 2qllb8td-5401 is listening on port 8081
17:31:31.545:  Sending a PUT request to: http://127.0.0.1:8081/
17:31:31.556:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:31.562:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:31.565:  Stopping Kettle Server 2qllb8td-5401 on port 8081
17:31:31.565:  Kettle Server 2qllb8td-5401 on port 8081 is stopped
17:31:31.589:  Successfully queued test HTTPMethods PUT & POST in sequence test
17:31:31.589:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT test": 2/2 passed - PASS
17:31:31.612:  Initializing the Express app
17:31:31.613:  Initializing the HTTP server
17:31:31.614:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:31.615:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:31.615:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:31.615:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:31.615:  Opening Kettle Server on port 8081
17:31:31.615:  Kettle Server 2qllb8td-5554 is listening on port 8081
17:31:31.616:  Sending a POST request to: http://127.0.0.1:8081/
17:31:31.617:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:31.623:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:31.626:  Sending a PUT request to: http://127.0.0.1:8081/
17:31:31.627:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:31.633:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:31.635:  Sending a POST request to: http://127.0.0.1:8081/
17:31:31.636:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:31.642:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:31.644:  Stopping Kettle Server 2qllb8td-5554 on port 8081
17:31:31.645:  Kettle Server 2qllb8td-5554 on port 8081 is stopped
17:31:31.661:  Successfully queued test HTTPMethods PUT test with alternate response status code
17:31:31.661:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT & POST in sequence test": 6/6 passed - PASS
17:31:31.704:  Initializing the Express app
17:31:31.705:  Initializing the HTTP server
17:31:31.707:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:31.707:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:31.707:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:31.707:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:31.707:  Opening Kettle Server on port 8081
17:31:31.707:  Kettle Server 2qllb8td-5735 is listening on port 8081
17:31:31.708:  Sending a PUT request to: http://127.0.0.1:8081/201
17:31:31.709:  Invoking handler kettle.tests.HTTPMethods.put201.handler for route /201 with expectedGrade kettle.request.http
17:31:31.716:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put201.handler
17:31:31.719:  Stopping Kettle Server 2qllb8td-5735 on port 8081
17:31:31.719:  Kettle Server 2qllb8td-5735 on port 8081 is stopped
17:31:31.740:  Successfully queued test CORS middleware tests
17:31:31.740:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT test with alternate response status code": 3/3 passed - PASS
17:31:31.763:  Initializing the Express app
17:31:31.764:  Initializing the HTTP server
17:31:31.765:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:31.765:  Opening Kettle Server on port 8081
17:31:31.766:  Kettle Server 2qllb8td-5880 is listening on port 8081
17:31:31.766:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.776:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:31.783:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:31.787:  Sending a OPTIONS request to: http://127.0.0.1:8081/
17:31:31.787:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:31.793:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:31.796:  Stopping Kettle Server 2qllb8td-5880 on port 8081
17:31:31.796:  Kettle Server 2qllb8td-5880 on port 8081 is stopped
17:31:31.813:  Successfully queued test CORS middleware no credential tests
17:31:31.813:  jq: Test concluded - Module "kettle.tests.CORS.config tests" Test name "CORS middleware tests": 11/11 passed - PASS
17:31:31.842:  Initializing the Express app
17:31:31.842:  Initializing the HTTP server
17:31:31.845:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:31.845:  Opening Kettle Server on port 8081
17:31:31.846:  Kettle Server 2qllb8td-6041 is listening on port 8081
17:31:31.847:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.848:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:31.855:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:31.857:  Stopping Kettle Server 2qllb8td-6041 on port 8081
17:31:31.858:  Kettle Server 2qllb8td-6041 on port 8081 is stopped
17:31:31.877:  Successfully queued test CORS middleware custom origin tests
17:31:31.877:  jq: Test concluded - Module "kettle.tests.CORS.noCred.config tests" Test name "CORS middleware no credential tests": 7/7 passed - PASS
17:31:31.900:  Initializing the Express app
17:31:31.901:  Initializing the HTTP server
17:31:31.902:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:31.903:  Opening Kettle Server on port 8081
17:31:31.903:  Kettle Server 2qllb8td-6188 is listening on port 8081
17:31:31.903:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.904:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:31.910:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:31.913:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.914:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:31.920:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:31.923:  Stopping Kettle Server 2qllb8td-6188 on port 8081
17:31:31.923:  Kettle Server 2qllb8td-6188 on port 8081 is stopped
17:31:31.941:  Successfully queued test No CORS middleware tests
17:31:31.941:  jq: Test concluded - Module "kettle.tests.CORS.origin.config tests" Test name "CORS middleware custom origin tests": 14/14 passed - PASS
17:31:31.964:  Initializing the Express app
17:31:31.964:  Initializing the HTTP server
17:31:31.966:  Registering request handler {
    "type": "kettle.tests.noCORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:31.966:  Opening Kettle Server on port 8081
17:31:31.966:  Kettle Server 2qllb8td-6349 is listening on port 8081
17:31:31.967:  Sending a GET request to: http://127.0.0.1:8081/
17:31:31.978:  Invoking handler kettle.tests.noCORS.handler for route / with expectedGrade kettle.request.http
17:31:31.985:  Kettle server allocated request object with type kettle.tests.noCORS.handler
17:31:31.988:  Stopping Kettle Server 2qllb8td-6349 on port 8081
17:31:31.988:  Kettle Server 2qllb8td-6349 on port 8081 is stopped
17:31:32.024:  Successfully queued test Session tests
17:31:32.024:  jq: Test concluded - Module "kettle.tests.CORS.noCORS.config tests" Test name "No CORS middleware tests": 6/6 passed - PASS
17:31:32.058:  Initializing the Express app
17:31:32.059:  Initializing the HTTP server
17:31:32.061:  Registering request handler {
    "type": "kettle.tests.session.none.handler",
    "route": "/testNoSessionRequest",
    "method": "get"
}
17:31:32.061:  Registering request handler {
    "type": "kettle.tests.session.existing.handler",
    "route": "/testExistingSessionRequest",
    "method": "get"
}
17:31:32.061:  Registering request handler {
    "type": "kettle.tests.session.start.handler",
    "route": "/testSessionStart/:token",
    "method": "get"
}
17:31:32.061:  Registering request handler {
    "type": "kettle.tests.session.end.handler",
    "route": "/testSessionEnd/:token",
    "method": "get"
}
17:31:32.061:  Opening Kettle Server on port 8081
17:31:32.062:  Kettle Server 2qllb8td-6526 is listening on port 8081
17:31:32.062:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:32.064:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:32.070:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:32.074:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:32.075:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:32.085:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:32.090:  Sending a GET request to: http://127.0.0.1:8081/testSessionStart/123
17:31:32.091:  Invoking handler kettle.tests.session.start.handler for route /testSessionStart/:token with expectedGrade kettle.request.http
17:31:32.098:  Kettle server allocated request object with type kettle.tests.session.start.handler
17:31:32.104:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:32.105:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:32.122:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:32.126:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:32.127:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:32.133:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:32.135:  Sending a GET request to: http://127.0.0.1:8081/testSessionEnd/123
17:31:32.137:  Invoking handler kettle.tests.session.end.handler for route /testSessionEnd/:token with expectedGrade kettle.request.http
17:31:32.144:  Kettle server allocated request object with type kettle.tests.session.end.handler
17:31:32.148:  Stopping Kettle Server 2qllb8td-6526 on port 8081
17:31:32.148:  Kettle Server 2qllb8td-6526 on port 8081 is stopped
17:31:32.177:  Successfully queued test WebSockets tests
17:31:32.177:  jq: Test concluded - Module "kettle.tests.session.config tests" Test name "Session tests": 24/24 passed - PASS
17:31:32.215:  Initializing the Express app
17:31:32.216:  Initializing the HTTP server
17:31:32.217:  Initializing the ws server
17:31:32.218:  Registering request handler {
    "type": "kettle.tests.ws.testSocket.handler",
    "route": "/socket_path"
}
17:31:32.218:  Registering request handler {
    "type": "kettle.tests.ws.testGet.handler",
    "route": "/"
}
17:31:32.218:  Registering request handler {
    "type": "kettle.tests.ws.testClose.handler",
    "route": "/close_path"
}
17:31:32.219:  Opening Kettle Server on port 8081
17:31:32.219:  Kettle Server 2qllb8td-6838 is listening on port 8081
17:31:32.220:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:32.222:  Invoking handler kettle.tests.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:32.231:  Kettle server allocated request object with type kettle.tests.ws.testSocket.handler
17:31:32.232:  Received WebSockets connection on path /socket_path
17:31:32.237:  kettle.test.request.ws client message{"success":true}
17:31:32.240:  kettle.test.request.ws client message{"success":true}
17:31:32.241:  Sending a GET request to: http://127.0.0.1:8081/
17:31:32.242:  Invoking handler kettle.tests.ws.testGet.handler for route / with expectedGrade kettle.request.http
17:31:32.249:  Kettle server allocated request object with type kettle.tests.ws.testGet.handler
17:31:32.254:  Sending a GET request to: http://127.0.0.1:8081/socket_path
17:31:32.254:  kettle.test.request.ws closed, response code: 1005, reason: ""
17:31:32.255:  Invoking handler kettle.tests.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.http
17:31:32.262:  Kettle server allocated request object with type kettle.request.http.mismatch
17:31:32.265:  connecting ws.WebSocket to: ws://127.0.0.1:8081/ with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/"
}
17:31:32.266:  Invoking handler kettle.tests.ws.testGet.handler for route / with expectedGrade kettle.request.ws
17:31:32.274:  Kettle server allocated request object with type kettle.request.ws.mismatch
17:31:32.277:  connecting ws.WebSocket to: ws://127.0.0.1:8081/close_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/close_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/close_path"
}
17:31:32.278:  Invoking handler kettle.tests.ws.testClose.handler for route /close_path with expectedGrade kettle.request.ws
17:31:32.286:  Kettle server allocated request object with type kettle.tests.ws.testClose.handler
17:31:32.287:  Received WebSockets connection on path /close_path
17:31:32.293:  kettle.test.request.ws closed, response code: 1000, reason: ""
17:31:32.293:  Stopping Kettle Server 2qllb8td-6838 on port 8081
17:31:32.293:  Kettle Server 2qllb8td-6838 on port 8081 is stopped
17:31:32.294:  kettle.test.request.ws client error{
    
}
17:31:32.295:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:32.352:  Successfully queued test WebSockets Session tests
17:31:32.352:  jq: Test concluded - Module "kettle.tests.webSockets.config tests" Test name "WebSockets tests": 17/17 passed - PASS
17:31:32.386:  Initializing the Express app
17:31:32.387:  Initializing the HTTP server
17:31:32.389:  Initializing the ws server
17:31:32.390:  Registering request handler {
    "type": "kettle.tests.session.ws.testSocket.handler",
    "route": "/socket_path"
}
17:31:32.390:  Registering request handler {
    "type": "kettle.tests.session.none.handler",
    "route": "/testNoSessionRequest",
    "method": "get"
}
17:31:32.390:  Registering request handler {
    "type": "kettle.tests.session.existing.handler",
    "route": "/testExistingSessionRequest",
    "method": "get"
}
17:31:32.390:  Registering request handler {
    "type": "kettle.tests.session.start.handler",
    "route": "/testSessionStart/:token",
    "method": "get"
}
17:31:32.391:  Registering request handler {
    "type": "kettle.tests.session.end.handler",
    "route": "/testSessionEnd/:token",
    "method": "get"
}
17:31:32.391:  Opening Kettle Server on port 8081
17:31:32.392:  Kettle Server 2qllb8td-7145 is listening on port 8081
17:31:32.392:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:32.394:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:32.400:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:32.404:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:32.405:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:32.413:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:32.417:  Sending a GET request to: http://127.0.0.1:8081/testSessionStart/123
17:31:32.430:  Invoking handler kettle.tests.session.start.handler for route /testSessionStart/:token with expectedGrade kettle.request.http
17:31:32.438:  Kettle server allocated request object with type kettle.tests.session.start.handler
17:31:32.442:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:32.443:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:32.451:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:32.457:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        "Cookie": [
            "kettle.sid=s%3ARVnHzlo_r4lS6UncyiyGyAE1sKc7FCSe.AUtm%2B2JR%2BFh2SdV5zLJ4OH9NBBIy2TpDwQEkiKgkNx0; Path=/; HttpOnly"
        ]
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:32.459:  Invoking handler kettle.tests.session.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:32.473:  Kettle server allocated request object with type kettle.tests.session.ws.testSocket.handler
17:31:32.475:  Received WebSockets connection on path /socket_path
17:31:32.479:  testSocket.receiveMessage got session {
    "cookie": {
        "path": "/",
        "_expires": null,
        "originalMaxAge": null,
        "httpOnly": true,
        "secure": false,
        "expires": [Synthetic property],
        "maxAge": [Synthetic property],
        "data": [Synthetic property],
        "serialize": [Synthetic property],
        "toJSON": [Synthetic property]
    },
    "token": "123"
}
17:31:32.481:  kettle.test.request.ws client message{"type":"midSuccess","payload":{"token":"123","success":true}}
17:31:32.482:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:32.483:  Invoking handler kettle.tests.session.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:32.493:  Kettle server allocated request object with type kettle.tests.session.ws.testSocket.handler
17:31:32.496:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:32.498:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:32.504:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:32.507:  Sending a GET request to: http://127.0.0.1:8081/testSessionEnd/123
17:31:32.508:  Invoking handler kettle.tests.session.end.handler for route /testSessionEnd/:token with expectedGrade kettle.request.http
17:31:32.515:  Kettle server allocated request object with type kettle.tests.session.end.handler
17:31:32.518:  Stopping Kettle Server 2qllb8td-7145 on port 8081
17:31:32.519:  Kettle Server 2qllb8td-7145 on port 8081 is stopped
17:31:32.519:  kettle.test.request.ws client error{
    
}
17:31:32.520:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:32.549:  Successfully queued test Error tests I
17:31:32.549:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:32.550:  Failing to resume callback for request 2qllb8td-7323 which has already concluded
17:31:32.550:  jq: Test concluded - Module "kettle.tests.session.webSockets.config tests" Test name "WebSockets Session tests": 31/31 passed - PASS
17:31:32.592:  Initializing the Express app
17:31:32.593:  Initializing the HTTP server
17:31:32.596:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:32.597:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:32.597:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:32.597:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:32.597:  Opening Kettle Server on port 8081
17:31:32.597:  Kettle Server 2qllb8td-7496 is listening on port 8081
17:31:32.599:  FATAL ERROR: Uncaught exception: "Global Error Triggered".triggerError is not a function
TypeError: "Global Error Triggered".triggerError is not a function
    at Object.kettle.tests.triggerGlobalErrorSync (/data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:15:778)
    at /data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:16:14
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:32.600:  Sending a GET request to: http://127.0.0.1:8081/
17:31:32.602:  Invoking handler kettle.tests.error.requestError for route / with expectedGrade kettle.request.http
17:31:32.615:  Kettle server allocated request object with type kettle.tests.error.requestError
17:31:32.615:  ASSERTION FAILED: Simulated assertion failed in request - this failure is expected: 
17:31:32.615:  Current activity: 
17:31:32.615:      while invoking invoker with name handleRequest and record {
    "func": undefined,
    "funcName": "fluid.fail",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "Simulated assertion failed in request - this failure is expected: "
    ],
    "componentSource": "kettle.tests.error.requestError"
} holding component component { typeName: "kettle.tests.error.requestError id: 2qllb8td-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-2qllb8td-7437.tests.configuration.server.app.requests.request
17:31:32.615:      while firing to listener to event named onHandle of component component { typeName: "kettle.tests.error.requestError id: 2qllb8td-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-2qllb8td-7437.tests.configuration.server.app.requests.request
17:31:32.616:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.error.requestError id: 2qllb8td-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-2qllb8td-7437.tests.configuration.server.app.requests.request
17:31:32.619:  kettle.tests.error.handleFullRequest forwarding error to express
17:31:32.619:  kettle.tests.server.upgradeError received error {
    "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
    "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)\n    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)\n    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:32.619:  kettle.tests.server.upgradeError throwing uncaught exception error {
    "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
    "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)\n    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)\n    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:32.619:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: 
Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: 
    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)
    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)
    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)
    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2781:25)
    at kettle.request.handleRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:97:157)
    at togo (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2849:29)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at kettle.request.handleRequestTask (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:104:25)
    at Object.invokeNext (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:257:52)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:237:35)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:241:31
    at Function.fluid.promise.pushHandler (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:85:17)
    at Object.that.then (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:32:23)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:240:19)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:241:31
    at Function.fluid.promise.pushHandler (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:85:17)
    at Object.that.then (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:32:23)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:240:19)
    at Function.fluid.promise.sequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:270:19)
    at Function.kettle.request.sequenceRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:120:169)
    at kettle.request.initiateHandleRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:132:530)
    at togo (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2849:29)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at fluid.concludeComponentInit (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:1536:26)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2208:25
    at Array.forEach (<anonymous>)
    at localWorkflowTask (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2207:37)
    at Object.invokeNext (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:257:52)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:237:35)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at commitPotentiae (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2329:27)
    at Object.fluid.tryCatch (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:241:20)
    at Object.fluid.commitPotentiae (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2314:11)
    at fluid.concludeAnyTreeTransaction (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:1429:15)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at Function.kettle.server.checkCreateRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:53:303)
    at fluid.componentConstructor.dispatcher (/data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:59:232)
    at /data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:69:213
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at expressInit (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at query (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/middleware/query.js:45:5)
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:174:3)
    at Function.handle (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/application.js:174:10)
    at Server.app (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/express.js:39:9)
    at Server.emit (node:events:513:28)
    at parserOnIncoming (node:_http_server:980:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)
17:31:32.619:  Current activity: 
17:31:32.619:      while invoking invoker with name handleFullRequest and record {
    "func": undefined,
    "funcName": "kettle.tests.error.handleFullRequest",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": {
        "value": "NO_ARGUMENTS"
    },
    "componentSource": "kettle.tests.error.requestError"
} holding component component { typeName: "kettle.tests.error.requestError id: 2qllb8td-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-2qllb8td-7437.tests.configuration.server.app.requests.request
17:31:32.620:  ASSERTION FAILED: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusi .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]which has already received "reject"
17:31:32.621:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils. .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
Error: Assertion failure - check console for more details: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusi .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]which has already received "reject"
    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)
    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)
    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at Object.fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)
    at Array.that.reject (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:51:23)
    at Object.that.complete (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:72:21)
    at Object.that.reject (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:58:18)
    at /data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:444
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:32.623:  Sending a GET request to: http://127.0.0.1:8081/errorCode
17:31:32.624:  Invoking handler kettle.tests.error.requestErrorCode.handler for route /errorCode with expectedGrade kettle.request.http
17:31:32.634:  Kettle server allocated request object with type kettle.tests.error.requestErrorCode.handler
17:31:32.638:  Stopping Kettle Server 2qllb8td-7496 on port 8081
17:31:32.638:  Kettle Server 2qllb8td-7496 on port 8081 is stopped
17:31:32.659:  Successfully queued test Error tests II
17:31:32.659:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Error tests I": 4/4 passed - PASS
17:31:32.682:  Initializing the Express app
17:31:32.683:  Initializing the HTTP server
17:31:32.684:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:32.684:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:32.684:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:32.685:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:32.685:  Opening Kettle Server on port 8081
17:31:32.685:  Kettle Server 2qllb8td-7658 is listening on port 8081
17:31:32.686:  Sending a GET request to: http://127.0.0.1:8081/errorAsync
17:31:32.696:  Invoking handler kettle.tests.error.requestErrorAsync.handler for route /errorAsync with expectedGrade kettle.request.http
17:31:32.703:  Kettle server allocated request object with type kettle.tests.error.requestErrorAsync.handler
17:31:32.705:  FATAL ERROR: Uncaught exception: Uncharacterised error which should cause request failure
Error: Uncharacterised error which should cause request failure
    at /data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:13:1376
    at wrappedCallback (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:51:625)
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:32.708:  Stopping Kettle Server 2qllb8td-7658 on port 8081
17:31:32.708:  Kettle Server 2qllb8td-7658 on port 8081 is stopped
17:31:32.724:  Successfully queued test Plaintext response error test
17:31:32.725:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Error tests II": 1/1 passed - PASS
17:31:32.747:  Initializing the Express app
17:31:32.747:  Initializing the HTTP server
17:31:32.749:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:32.749:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:32.749:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:32.749:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:32.749:  Opening Kettle Server on port 8081
17:31:32.750:  Kettle Server 2qllb8td-7796 is listening on port 8081
17:31:32.750:  Sending a GET request to: http://127.0.0.1:8081/plainRequestError
17:31:32.751:  Invoking handler kettle.tests.error.plainRequestError.handler for route /plainRequestError with expectedGrade kettle.request.http
17:31:32.758:  Kettle server allocated request object with type kettle.tests.error.plainRequestError.handler
17:31:32.761:  Stopping Kettle Server 2qllb8td-7796 on port 8081
17:31:32.761:  Kettle Server 2qllb8td-7796 on port 8081 is stopped
17:31:32.780:  Successfully queued test Bad config: missing handler test
17:31:32.781:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Plaintext response error test": 2/2 passed - PASS
17:31:32.805:  Initializing the Express app
17:31:32.806:  Initializing the HTTP server
17:31:32.807:  Registering request handler {
    "type": "kettle.tests.badRequest.missing.handler",
    "route": "/",
    "method": "get"
}
17:31:32.807:  Opening Kettle Server on port 8081
17:31:32.808:  Kettle Server 2qllb8td-7940 is listening on port 8081
17:31:32.809:  Sending a GET request to: http://127.0.0.1:8081/
17:31:32.810:  Invoking handler kettle.tests.badRequest.missing.handler for route / with expectedGrade kettle.request.http
17:31:32.810:  ASSERTION FAILED: Error in Kettle application definition - couldn't load handler kettle.tests.badRequest.missing.handler and gradeNames [] to a component derived from kettle.request - got defaults of undefined
17:31:32.811:  Stopping Kettle Server 2qllb8td-7940 on port 8081
17:31:32.811:  Kettle Server 2qllb8td-7940 on port 8081 is stopped
17:31:32.831:  Successfully queued test Bad config: missing handler type test
17:31:32.831:  jq: Test concluded - Module "kettle.tests.badRequest.missing.handler.config.mergedConfig tests" Test name "Bad config: missing handler test": 3/3 passed - PASS
17:31:32.862:  Initializing the Express app
17:31:32.863:  Initializing the HTTP server
17:31:32.866:  Registering request handler {
    "type": null,
    "route": "/",
    "method": "get"
}
17:31:32.866:  Opening Kettle Server on port 8081
17:31:32.867:  Kettle Server 2qllb8td-8066 is listening on port 8081
17:31:32.868:  Sending a GET request to: http://127.0.0.1:8081/
17:31:32.880:  ASSERTION FAILED: Error in Kettle application definition - handler {
    "method": "get",
    "type": null,
    "route": "/",
    "keys": [],
    "regexp": {
        "keys": []
    }
} must have a request grade name registered as member "type"
17:31:32.882:  Stopping Kettle Server 2qllb8td-8066 on port 8081
17:31:32.882:  Kettle Server 2qllb8td-8066 on port 8081 is stopped
17:31:32.902:  Successfully queued test Bad config: missing handler test
17:31:32.902:  jq: Test concluded - Module "kettle.tests.badRequest.missing.handlerType.config.mergedConfig tests" Test name "Bad config: missing handler type test": 4/4 passed - PASS
17:31:32.926:  Initializing the Express app
17:31:32.927:  Initializing the HTTP server
17:31:32.928:  Registering request handler {
    "type": "kettle.tests.badRequest.throwing.handler",
    "route": "/",
    "method": "get"
}
17:31:32.928:  Opening Kettle Server on port 8081
17:31:32.929:  Kettle Server 2qllb8td-8192 is listening on port 8081
17:31:32.929:  Sending a GET request to: http://127.0.0.1:8081/
17:31:32.930:  Invoking handler kettle.tests.badRequest.throwing.handler for route / with expectedGrade kettle.request.http
17:31:32.938:  Kettle server allocated request object with type kettle.tests.badRequest.throwing.handler
17:31:32.942:  Stopping Kettle Server 2qllb8td-8192 on port 8081
17:31:32.942:  Kettle Server 2qllb8td-8192 on port 8081 is stopped
17:31:32.970:  Successfully queued test Bad config: missing middleware test
17:31:32.971:  jq: Test concluded - Module "kettle.tests.badRequest.throwing.handler.config.mergedConfig tests" Test name "Bad config: missing handler test": 3/3 passed - PASS
17:31:33.008:  Initializing the Express app
17:31:33.009:  Initializing the HTTP server
17:31:33.012:  Registering request handler {
    "type": "kettle.tests.badRequest.middleware.missing.handler",
    "route": "/",
    "method": "get"
}
17:31:33.012:  Opening Kettle Server on port 8081
17:31:33.013:  Kettle Server 2qllb8td-8339 is listening on port 8081
17:31:33.014:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.016:  Invoking handler kettle.tests.badRequest.middleware.missing.handler for route / with expectedGrade kettle.request.http
17:31:33.024:  Kettle server allocated request object with type kettle.tests.badRequest.middleware.missing.handler
17:31:33.025:  ASSERTION FAILED: Couldn't resolve reference {middlewareHolder}.missingMiddleware from member "middleware" of record {
    "middleware": "{middlewareHolder}.missingMiddleware"
} to a middleware component for a kettle.tests.badRequest.middleware.missing.handler requestMiddleware  entry: got undefined
17:31:33.025:  Current activity: 
17:31:33.025:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.badRequest.middleware.missing.handler id: 2qllb8td-8410" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.badRequest.middleware.missing.handler"]} at path serverEnvironment-2qllb8td-8285.tests.configuration.server.app.requests.request
17:31:33.027:  Unhandled promise rejection: {
    "isError": true,
    "message": "Couldn't resolve reference {middlewareHolder}.missingMiddleware from member \"middleware\" of record "
}
17:31:33.030:  Stopping Kettle Server 2qllb8td-8339 on port 8081
17:31:33.031:  Kettle Server 2qllb8td-8339 on port 8081 is stopped
17:31:33.053:  Successfully queued test Bad config: bad middleware test
17:31:33.053:  jq: Test concluded - Module "kettle.tests.badRequest.middleware.missing.config.mergedConfig tests" Test name "Bad config: missing middleware test": 4/4 passed - PASS
17:31:33.078:  Initializing the Express app
17:31:33.079:  Initializing the HTTP server
17:31:33.080:  Registering request handler {
    "type": "kettle.tests.badRequest.middleware.bad.handler",
    "route": "/",
    "method": "get"
}
17:31:33.080:  Opening Kettle Server on port 8081
17:31:33.081:  Kettle Server 2qllb8td-8485 is listening on port 8081
17:31:33.082:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.099:  Invoking handler kettle.tests.badRequest.middleware.bad.handler for route / with expectedGrade kettle.request.http
17:31:33.117:  Kettle server allocated request object with type kettle.tests.badRequest.middleware.bad.handler
17:31:33.117:  ASSERTION FAILED: Middleware component {
    "typeName": "kettle.tests.badRequest.bad.middleware",
    "id": "2qllb8td-8557",
    "lifecycleStatus": "treeConstructed",
    "destroy": { Function
        
    },
    "options": {
        "gradeNames": [
            "fluid.component",
            "kettle.middleware",
            "kettle.plainMiddleware",
            "kettle.tests.badRequest.bad.middleware"
        ],
        "events": {
            "onCreate": "promise",
            "onDestroy": "promise",
            "afterDestroy": "promise"
        },
        "invokers": {
            "handle": {
                "func": undefined,
                "funcName": "kettle.plainMiddleware.resolve",
                "listener": undefined,
                "this": undefined,
                "method": undefined,
                "changePath": undefined,
                "value": undefined,
                "componentSource": "kettle.plainMiddleware",
                "args": [
                    "{that}",
                    "{arguments}.0",
                    " .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars] with type kettle.tests.badRequest.bad.middleware is improperly configured - an option named "middleware" of function type is required - got undefined
17:31:33.118:  Current activity: 
17:31:33.118:      while invoking invoker with name handle and record {
    "func": undefined,
    "funcName": "kettle.plainMiddleware.resolve",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "componentSource": "kettle.plainMiddleware",
    "args": [
        "{that}",
        "{arguments}.0",
        "{plainMiddleware}.options.asyncMiddleware"
    ]
} holding component component { typeName: "kettle.tests.badRequest.bad.middleware id: 2qllb8td-8557" gradeNames: ["kettle.middleware","kettle.plainMiddleware","kettle.tests.badRequest.bad.middleware"]} at path serverEnvironment-2qllb8td-8431.tests.configuration.server.app.requests.request.badMiddleware
17:31:33.118:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.badRequest.middleware.bad.handler id: 2qllb8td-8556" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.badRequest.middleware.bad.handler"]} at path serverEnvironment-2qllb8td-8431.tests.configuration.server.app.requests.request
17:31:33.123:  Unhandled promise rejection: {
    "isError": true,
    "message": "Middleware component "
}
17:31:33.124:  Stopping Kettle Server 2qllb8td-8485 on port 8081
17:31:33.125:  Kettle Server 2qllb8td-8485 on port 8081 is stopped
17:31:33.161:  Successfully queued test Bad config: static middleware with no path test
17:31:33.162:  jq: Test concluded - Module "kettle.tests.badRequest.middleware.bad.config.mergedConfig tests" Test name "Bad config: bad middleware test": 4/4 passed - PASS
17:31:33.189:  Initializing the Express app
17:31:33.190:  Initializing the HTTP server
17:31:33.191:  Registering request handler {
    "type": "kettle.tests.badRequest.static.nopath.handler",
    "route": "/",
    "method": "get"
}
17:31:33.192:  Opening Kettle Server on port 8081
17:31:33.192:  Kettle Server 2qllb8td-8635 is listening on port 8081
17:31:33.193:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.194:  Invoking handler kettle.tests.badRequest.static.nopath.handler for route / with expectedGrade kettle.request.http
17:31:33.201:  ASSERTION FAILED: Static middleware must have a root path configured to serve options - got undefined
17:31:33.201:  Current activity: 
17:31:33.201:      while constructing component of type kettle.middleware.static at path serverEnvironment-2qllb8td-8581.tests.configuration.server.app.requests.request.badStatic
17:31:33.203:  Stopping Kettle Server 2qllb8td-8635 on port 8081
17:31:33.204:  Kettle Server 2qllb8td-8635 on port 8081 is stopped
17:31:33.234:  Successfully queued test Bad request: bad URL-encoded request parameter
17:31:33.234:  jq: Test concluded - Module "kettle.tests.badRequest.static.nopath.config.mergedConfig tests" Test name "Bad config: static middleware with no path test": 3/3 passed - PASS
17:31:33.263:  Initializing the Express app
17:31:33.263:  Initializing the HTTP server
17:31:33.265:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/route/:key",
    "method": "get"
}
17:31:33.265:  Opening Kettle Server on port 8081
17:31:33.265:  Kettle Server 2qllb8td-8788 is listening on port 8081
17:31:33.266:  Sending a GET request to: http://127.0.0.1:8081/route/%ZZ
17:31:33.269:  Stopping Kettle Server 2qllb8td-8788 on port 8081
17:31:33.269:  Kettle Server 2qllb8td-8788 on port 8081 is stopped
17:31:33.289:  Successfully queued test Good request: bad URL-encoded request parameter
17:31:33.289:  jq: Test concluded - Module "kettle.tests.badRequest.badURL.config.mergedConfig tests" Test name "Bad request: bad URL-encoded request parameter": 3/3 passed - PASS
17:31:33.315:  Initializing the Express app
17:31:33.315:  Initializing the HTTP server
17:31:33.318:  Registering request handler {
    "type": "kettle.tests.goodRequest.emptyParameter.handler",
    "route": "/route/:key?",
    "method": "get"
}
17:31:33.318:  Opening Kettle Server on port 8081
17:31:33.319:  Kettle Server 2qllb8td-8914 is listening on port 8081
17:31:33.320:  Sending a GET request to: http://127.0.0.1:8081/route
17:31:33.331:  Invoking handler kettle.tests.goodRequest.emptyParameter.handler for route /route/:key? with expectedGrade kettle.request.http
17:31:33.338:  Kettle server allocated request object with type kettle.tests.goodRequest.emptyParameter.handler
17:31:33.341:  Stopping Kettle Server 2qllb8td-8914 on port 8081
17:31:33.341:  Kettle Server 2qllb8td-8914 on port 8081 is stopped
17:31:33.362:  Successfully queued test Good request: double handling test
17:31:33.363:  jq: Test concluded - Module "kettle.tests.goodRequest.emptyParameter.config.mergedConfig tests" Test name "Good request: bad URL-encoded request parameter": 2/2 passed - PASS
17:31:33.386:  Initializing the Express app
17:31:33.386:  Initializing the HTTP server
17:31:33.388:  Registering request handler {
    "type": "kettle.tests.goodRequest.doubleResponse.handler",
    "route": "/",
    "method": "get"
}
17:31:33.388:  Opening Kettle Server on port 8081
17:31:33.388:  Kettle Server 2qllb8td-9055 is listening on port 8081
17:31:33.389:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.390:  Invoking handler kettle.tests.goodRequest.doubleResponse.handler for route / with expectedGrade kettle.request.http
17:31:33.397:  Kettle server allocated request object with type kettle.tests.goodRequest.doubleResponse.handler
17:31:33.397:  Error in forwarding result {
    "message": "Second response"
} to promise resolve: promise has already received resolve
17:31:33.401:  Stopping Kettle Server 2qllb8td-9055 on port 8081
17:31:33.401:  Kettle Server 2qllb8td-9055 on port 8081 is stopped
17:31:33.422:  Successfully queued test Good request: options request
17:31:33.422:  jq: Test concluded - Module "kettle.tests.goodRequest.doubleResponse.config.mergedConfig tests" Test name "Good request: double handling test": 2/2 passed - PASS
17:31:33.449:  Initializing the Express app
17:31:33.449:  Initializing the HTTP server
17:31:33.452:  Registering request handler {
    "type": "kettle.tests.goodRequest.options.handler",
    "method": "options",
    "route": "/"
}
17:31:33.452:  Opening Kettle Server on port 8081
17:31:33.453:  Kettle Server 2qllb8td-9199 is listening on port 8081
17:31:33.454:  Sending a OPTIONS request to: http://127.0.0.1:8081/
17:31:33.455:  Invoking handler kettle.tests.goodRequest.options.handler for route / with expectedGrade kettle.request.http
17:31:33.463:  Kettle server allocated request object with type kettle.tests.goodRequest.options.handler
17:31:33.466:  Stopping Kettle Server 2qllb8td-9199 on port 8081
17:31:33.466:  Kettle Server 2qllb8td-9199 on port 8081 is stopped
17:31:33.487:  Successfully queued test Good request: mismatched route
17:31:33.487:  jq: Test concluded - Module "kettle.tests.goodRequest.options.config.mergedConfig tests" Test name "Good request: options request": 2/2 passed - PASS
17:31:33.512:  Initializing the Express app
17:31:33.513:  Initializing the HTTP server
17:31:33.514:  Skipping empty handler with key testHandler for app { typeName: "kettle.app id: 2qllb8td-9346" gradeNames: ["kettle.app"]}
17:31:33.514:  Opening Kettle Server on port 8081
17:31:33.515:  Kettle Server 2qllb8td-9343 is listening on port 8081
17:31:33.515:  Sending a GET request to: http://127.0.0.1:8081/route
17:31:33.525:  Kettle server getDispatcher found no matching handlers, continuing
17:31:33.526:  Stopping Kettle Server 2qllb8td-9343 on port 8081
17:31:33.526:  Kettle Server 2qllb8td-9343 on port 8081 is stopped
17:31:33.546:  Successfully queued test Good request: gradeNames for handler
17:31:33.546:  jq: Test concluded - Module "kettle.tests.goodRequest.mismatchRoute.config.mergedConfig tests" Test name "Good request: mismatched route": 2/2 passed - PASS
17:31:33.582:  Initializing the Express app
17:31:33.582:  Initializing the HTTP server
17:31:33.584:  Registering request handler {
    "type": "kettle.tests.goodRequest.gradeNames.handler",
    "gradeNames": "kettle.tests.goodRequest.gradeNames.mixin",
    "method": "get",
    "route": "/"
}
17:31:33.584:  Opening Kettle Server on port 8081
17:31:33.585:  Kettle Server 2qllb8td-9463 is listening on port 8081
17:31:33.585:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.586:  Invoking handler kettle.tests.goodRequest.gradeNames.handler for route / with expectedGrade kettle.request.http
17:31:33.596:  Kettle server allocated request object with type kettle.tests.goodRequest.gradeNames.handler
17:31:33.601:  Stopping Kettle Server 2qllb8td-9463 on port 8081
17:31:33.601:  Kettle Server 2qllb8td-9463 on port 8081 is stopped
17:31:33.629:  Successfully queued test Simple MultiConfig Test
17:31:33.630:  jq: Test concluded - Module "kettle.tests.goodRequest.gradeNames.config.mergedConfig tests" Test name "Good request: gradeNames for handler": 2/2 passed - PASS
17:31:33.695:  Initializing the Express app
17:31:33.696:  Initializing the HTTP server
17:31:33.697:  Initializing the Express app
17:31:33.698:  Initializing the HTTP server
17:31:33.700:  Registering request handler {
    "type": "kettle.tests.multiConfig.target.get.handler",
    "route": "/",
    "method": "get"
}
17:31:33.700:  Opening Kettle Server on port 8088
17:31:33.701:  Registering request handler {
    "type": "kettle.tests.multiConfig.source.get.handler",
    "route": "/",
    "method": "get"
}
17:31:33.701:  Opening Kettle Server on port 8081
17:31:33.701:  Kettle Server 2qllb8td-9605 is listening on port 8088
17:31:33.701:  Kettle Server 2qllb8td-9604 is listening on port 8081
17:31:33.702:  Sending a GET request to: http://127.0.0.1:8081/
17:31:33.703:  Invoking handler kettle.tests.multiConfig.source.get.handler for route / with expectedGrade kettle.request.http
17:31:33.717:  Kettle server allocated request object with type kettle.tests.multiConfig.source.get.handler
17:31:33.718:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8088",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8088/",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:33.721:  Invoking handler kettle.tests.multiConfig.target.get.handler for route / with expectedGrade kettle.request.http
17:31:33.729:  Kettle server allocated request object with type kettle.tests.multiConfig.target.get.handler
17:31:33.747:  Stopping Kettle Server 2qllb8td-9604 on port 8081
17:31:33.747:  Stopping Kettle Server 2qllb8td-9605 on port 8088
17:31:33.747:  Kettle Server 2qllb8td-9604 on port 8081 is stopped
17:31:33.747:  Kettle Server 2qllb8td-9605 on port 8088 is stopped
17:31:33.772:  Successfully queued test Static hosting tests
17:31:33.773:  jq: Test concluded - Module "kettle.tests.multiConfig.head.config tests" Test name "Simple MultiConfig Test": 2/2 passed - PASS
17:31:33.810:  Initializing the Express app
17:31:33.811:  Initializing the HTTP server
17:31:33.813:  Registering request handler {
    "type": "kettle.tests.static.handler",
    "prefix": "/infusion",
    "route": "/*",
    "method": "get"
}
17:31:33.813:  Opening Kettle Server on port 8081
17:31:33.813:  Kettle Server 2qllb8td-9870 is listening on port 8081
17:31:33.814:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.json
17:31:33.815:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.json
17:31:33.816:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:33.824:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:33.829:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:33.835:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:33.845:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.jsonx
17:31:33.846:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:33.853:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:33.861:  Stopping Kettle Server 2qllb8td-9870 on port 8081
17:31:33.861:  Kettle Server 2qllb8td-9870 on port 8081 is stopped
17:31:33.900:  Successfully queued test Multer tests
17:31:33.901:  jq: Test concluded - Module "kettle.tests.static.config tests" Test name "Static hosting tests": 9/9 passed - PASS
17:31:33.960:  Initializing the Express app
17:31:33.960:  Initializing the HTTP server
17:31:33.962:  Registering request handler {
    "type": "kettle.tests.multer.handler.single",
    "route": "/multer-single",
    "method": "post"
}
17:31:33.962:  Registering request handler {
    "type": "kettle.tests.multer.handler.array",
    "route": "/multer-array",
    "method": "post"
}
17:31:33.962:  Registering request handler {
    "type": "kettle.tests.multer.handler.fields",
    "route": "/multer-fields",
    "method": "post"
}
17:31:33.962:  Registering request handler {
    "type": "kettle.tests.multer.handler.imageOnly",
    "route": "/multer-image-only",
    "method": "post"
}
17:31:33.962:  Registering request handler {
    "type": "kettle.tests.multer.handler.diskStorage",
    "route": "/multer-disk-storage",
    "method": "post"
}
17:31:33.962:  Opening Kettle Server on port 8081
17:31:33.963:  Kettle Server 2qllb8td-10111 is listening on port 8081
17:31:33.963:  Sending a POST request to: http://127.0.0.1:8081/multer-single
17:31:33.977:  Invoking handler kettle.tests.multer.handler.single for route /multer-single with expectedGrade kettle.request.http
17:31:33.985:  Kettle server allocated request object with type kettle.tests.multer.handler.single
17:31:33.998:  Sending a POST request to: http://127.0.0.1:8081/multer-array
17:31:33.999:  Invoking handler kettle.tests.multer.handler.array for route /multer-array with expectedGrade kettle.request.http
17:31:34.006:  Kettle server allocated request object with type kettle.tests.multer.handler.array
17:31:34.015:  Sending a POST request to: http://127.0.0.1:8081/multer-array
17:31:34.017:  Invoking handler kettle.tests.multer.handler.array for route /multer-array with expectedGrade kettle.request.http
17:31:34.024:  Kettle server allocated request object with type kettle.tests.multer.handler.array
17:31:34.033:  Sending a POST request to: http://127.0.0.1:8081/multer-fields
17:31:34.035:  Invoking handler kettle.tests.multer.handler.fields for route /multer-fields with expectedGrade kettle.request.http
17:31:34.042:  Kettle server allocated request object with type kettle.tests.multer.handler.fields
17:31:34.054:  Sending a POST request to: http://127.0.0.1:8081/multer-image-only
17:31:34.056:  Invoking handler kettle.tests.multer.handler.imageOnly for route /multer-image-only with expectedGrade kettle.request.http
17:31:34.063:  Kettle server allocated request object with type kettle.tests.multer.handler.imageOnly
17:31:34.073:  Sending a POST request to: http://127.0.0.1:8081/multer-image-only
17:31:34.075:  Invoking handler kettle.tests.multer.handler.imageOnly for route /multer-image-only with expectedGrade kettle.request.http
17:31:34.081:  Kettle server allocated request object with type kettle.tests.multer.handler.imageOnly
17:31:34.088:  Sending a POST request to: http://127.0.0.1:8081/multer-disk-storage
17:31:34.090:  Invoking handler kettle.tests.multer.handler.diskStorage for route /multer-disk-storage with expectedGrade kettle.request.http
17:31:34.097:  Kettle server allocated request object with type kettle.tests.multer.handler.diskStorage
17:31:34.105:  Stopping Kettle Server 2qllb8td-10111 on port 8081
17:31:34.105:  Kettle Server 2qllb8td-10111 on port 8081 is stopped
17:31:34.125:  Successfully queued test Asynchronous request startup: basic fetch test
17:31:34.125:  jq: Test concluded - Module "kettle.tests.multer.config tests" Test name "Multer tests": 29/29 passed - PASS
17:31:34.149:  Initializing the Express app
17:31:34.149:  Initializing the HTTP server
17:31:34.151:  Registering request handler {
    "type": "kettle.tests.asyncRequest.handler",
    "route": "/",
    "method": "get"
}
17:31:34.151:  Opening Kettle Server on port 8081
17:31:34.151:  Kettle Server 2qllb8td-10444 is listening on port 8081
17:31:34.152:  Sending a GET request to: http://127.0.0.1:8081/
17:31:34.153:  Invoking handler kettle.tests.asyncRequest.handler for route / with expectedGrade kettle.request.http
17:31:34.175:  Kettle server allocated request object with type kettle.tests.asyncRequest.handler
17:31:34.179:  Stopping Kettle Server 2qllb8td-10444 on port 8081
17:31:34.179:  Kettle Server 2qllb8td-10444 on port 8081 is stopped
17:31:34.204:  Successfully queued test Request abort test
17:31:34.204:  jq: Test concluded - Module "kettle.tests.asyncRequest.handler.config.mergedConfig tests" Test name "Asynchronous request startup: basic fetch test": 2/2 passed - PASS
17:31:34.227:  Initializing the Express app
17:31:34.228:  Initializing the HTTP server
17:31:34.229:  Registering request handler {
    "type": "kettle.tests.requestAbort.handler",
    "route": "/",
    "method": "get"
}
17:31:34.229:  Opening Kettle Server on port 8081
17:31:34.230:  Kettle Server 2qllb8td-10616 is listening on port 8081
17:31:34.230:  Sending a GET request to: http://127.0.0.1:8081/
17:31:34.232:  Invoking handler kettle.tests.requestAbort.handler for route / with expectedGrade kettle.request.http
17:31:34.242:  Kettle server allocated request object with type kettle.tests.requestAbort.handler
17:31:34.744:  Error marking thread to request 2qllb8td-10685 which has already been destroyed
17:31:35.246:  Stopping Kettle Server 2qllb8td-10616 on port 8081
17:31:35.247:  Kettle Server 2qllb8td-10616 on port 8081 is stopped
17:31:35.260:  jq: Test concluded - Module "kettle.tests.requestAbort.config.mergedConfig tests" Test name "Request abort test": 2/2 passed - PASS
17:31:35.262:  jq: ***************
17:31:35.262:  jq: All tests concluded: 358/358 total passed in 8958ms - PASS
17:31:35.262:  jq: ***************
npm uninstall

up to date, audited 949 packages in 3s

109 packages are looking for funding
  run `npm fund` for details

20 vulnerabilities (4 moderate, 14 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> kettle@2.3.0 pretest
> npx rimraf coverage/*


> kettle@2.3.0 test
> nyc --reporter=html node tests/all-tests.js

Infusion at path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion is at top level 
17:31:40.050:  Registering module subbifier from path /data/js-variants/multee/
17:31:40.050:  Registering module kettle from path /data/js-variants/multee/Clients/session/kettle/
17:31:40.051:  Registering module infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/
17:31:40.051:  Registering module infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:40.057:  Registering module kettle from path /data/js-variants/multee/Clients/session/kettle
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/node-jqunit/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:40.489:  Successfully queued test JSON line number diagnostic test
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:40.648:  Registering module fluid-pouchdb from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb
17:31:40.779:  Registering module fluid-express from path /data/js-variants/multee/Clients/session/kettle/node_modules/fluid-pouchdb/node_modules/fluid-express
17:31:41.103:  ASSERTION FAILED: kettle.JSON.parse called on non-string object 3
17:31:41.108:  Unhandled promise rejection: {
    "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING'"
}
17:31:41.121:  jq: Test concluded - Test name "kettle JSON parsing error tests": 2/2 passed - PASS
17:31:41.123:  Received JSON diagnostic error {
  "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING' while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSONFile.json"
}
17:31:41.136:  jq: Test concluded - Test name "kettle.JSON.readFileSync of invalid JSON": 2/2 passed - PASS
17:31:41.151:  jq: Test concluded - Test name "kettle.JSON.readFileSync of valid JSON": 1/1 passed - PASS
17:31:41.152:  Received JSON5 diagnostic error {
  "message": "JSON5: invalid character ']' at 49:9 while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSON5File.json5"
}
17:31:41.166:  jq: Test concluded - Test name "kettle.JSON.readFileSync of invalid JSON5": 2/2 passed - PASS
17:31:41.179:  jq: Test concluded - Test name "kettle.JSON.readFileSync of valid JSON5": 1/1 passed - PASS
17:31:41.194:  jq: Test concluded - Test name "kettle.JSON.readFileSync of nonexistent file": 1/1 passed - PASS
17:31:41.224:  Initializing the Express app
17:31:41.225:  Initializing the HTTP server
17:31:41.229:  Opening Kettle Server on port 8081
17:31:41.231:  Kettle Server cmeckh6s-176 is listening on port 8081
17:31:41.231:  Stopping Kettle Server cmeckh6s-176 on port 8081
17:31:41.232:  Kettle Server cmeckh6s-176 on port 8081 is stopped
17:31:41.245:  jq: Test concluded - Test name "Kettle server initialisation test": 1/1 passed - PASS
17:31:41.246:  Loader running configuration name kettle.tests.HTTPMethods.config
17:31:41.286:  Initializing the Express app
17:31:41.286:  Initializing the HTTP server
17:31:41.290:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:41.291:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:41.292:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:41.292:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:41.292:  Opening Kettle Server on port 8081
17:31:41.300:  Sending a GET request to: http://127.0.0.1:8081/
17:31:41.303:  Kettle Server cmeckh6s-241 is listening on port 8081
17:31:41.317:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:41.326:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:41.338:  Stopping Kettle Server cmeckh6s-241 on port 8081
17:31:41.340:  Kettle Server cmeckh6s-241 on port 8081 is stopped
17:31:41.353:  jq: Test concluded - Test name "Kettle server initialisation test via init.js and args": 2/2 passed - PASS
17:31:41.353:  Loader running configuration name kettle.tests.HTTPMethods.config
17:31:41.382:  Initializing the Express app
17:31:41.382:  Initializing the HTTP server
17:31:41.386:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:41.386:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:41.386:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:41.386:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:41.386:  Opening Kettle Server on port 8081
17:31:41.390:  Sending a GET request to: http://127.0.0.1:8081/
17:31:41.390:  Kettle Server cmeckh6s-351 is listening on port 8081
17:31:41.392:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:41.397:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:41.400:  Stopping Kettle Server cmeckh6s-351 on port 8081
17:31:41.400:  Kettle Server cmeckh6s-351 on port 8081 is stopped
17:31:41.414:  jq: Test concluded - Test name "Kettle server initialisation test via init.js and NODE_ENV": 2/2 passed - PASS
17:31:41.414:  ASSERTION FAILED: No configuration specified in either 1st command line argument, NODE_ENV or internal default
17:31:41.428:  jq: Test concluded - Test name "Kettle server initialisation test via init.js without config name": 1/1 passed - PASS
17:31:41.428:  ASSERTION FAILED: Config path must be specified as 1st command line argument
17:31:41.440:  jq: Test concluded - Test name "Kettle server initialisation test via init.js without config path": 1/1 passed - PASS
17:31:41.445:  Received JSON diagnostic error {
  "message": "Error: Parse error on line 59:\n...W\"        }    },}\n--------------------^\nExpecting 'STRING', got '}'\nJSON parse error at line 59, col 6, found: '}' - expected: 'STRING' while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSONFile.json"
}
17:31:41.462:  Successfully queued test JSON line number diagnostic test
17:31:41.463:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "JSON line number diagnostic test": 2/2 passed - PASS
17:31:41.476:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "GPII-2147: Testing that localhost is properly replaced by 127.0.0.1 in prepareRequestOptions": 1/1 passed - PASS
17:31:41.505:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "DataSource basic init tests": 8/8 passed - PASS
17:31:41.516:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "x-custom-header": "x-custom-value",
        "x-custom-header2": "x-custom-value2"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": 999,
    "pathname": "/path",
    "search": "",
    "family": 4,
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:999/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:41.530:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-34 request option resolution test": 1/1 passed - PASS
17:31:41.538:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "pathname": "/device",
    "search": "",
    "url": "http://localhost:998/device",
    "port": 998,
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:41.552:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-34 request option resolution test": 1/1 passed - PASS
17:31:41.560:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "Authorization": "(SENSITIVE)",
        "X-unrelated-header": "998"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": "997",
    "pathname": "/path",
    "search": "",
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:997/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:41.570:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        "Authorization": "(SENSITIVE)",
        "X-unrelated-header": "998"
    },
    "protocol": "https:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "thing.available",
    "port": "997",
    "pathname": "/path",
    "search": "",
    "url": "https://(SENSITIVE):(SENSITIVE)@thing.available:997/path",
    "termMap": {
        
    },
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:41.584:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-73 censoring test": 6/6 passed - PASS
17:31:41.610:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "KETTLE-38 derived writable dataSource test": 1/1 passed - PASS
17:31:41.631:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Reading file in formenc encoding": 1/1 passed - PASS
17:31:41.654:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Writing file in formenc encoding": 1/1 passed - PASS
17:31:41.666:  ASSERTION FAILED: Cannot operate file dataSource {
    "typeName": "kettle.tests.dataSource.fileWithoutPath",
    "id": "cmeckh6s-628",
    "lifecycleStatus": "treeConstructed",
    "destroy": { Function
        
    },
    "options": {
        "gradeNames": [
            "fluid.component",
            "fluid.contextAware",
            "fluid.dataSource",
            "kettle.dataSource.file",
            "kettle.tests.dataSource.fileWithoutPath"
        ],
        "contextAwareness": {
            "writable": {
                "checks": {
                    "writableValue": {
                        "contextValue": "{fluid.dataSource}.options.writable",
                        "gradeNames": "{fluid.dataSource}.options.writableGrade"
                    }
                }
            }
        },
        "writable": false,
        "components": {
            "encoding": {
                "0": {
                    "type": "fluid.dataSource.encoding.JSON"
                },
                "length": 1
            }
        },
        "events": {
            .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars] without an option named "path"
17:31:41.667:  Current activity: 
17:31:41.667:      while firing to listener to event named onRead of component component { typeName: "kettle.tests.dataSource.fileWithoutPath id: cmeckh6s-628" gradeNames: ["fluid.contextAware","fluid.dataSource","kettle.dataSource.file","kettle.tests.dataSource.fileWithoutPath"]} at path fileWithoutPath-cmeckh6s-628
17:31:41.667:      while invoking invoker with name get and record {
    "func": undefined,
    "funcName": "fluid.dataSource.get",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "{that}",
        "{arguments}.0",
        "{arguments}.1"
    ],
    "componentSource": "fluid.dataSource"
} holding component component { typeName: "kettle.tests.dataSource.fileWithoutPath id: cmeckh6s-628" gradeNames: ["fluid.contextAware","fluid.dataSource","kettle.dataSource.file","kettle.tests.dataSource.fileWithoutPath"]} at path fileWithoutPath-cmeckh6s-628
17:31:41.685:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "DataSource without path": 2/2 passed - PASS
17:31:41.737:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Attached URLResolver tests": 2/2 passed - PASS
17:31:41.760:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test present environment substitution": 1/1 passed - PASS
17:31:41.779:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test absent environment substitution": 1/1 passed - PASS
17:31:41.796:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test present file substitution": 1/1 passed - PASS
17:31:41.815:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test absent file substitution": 1/1 passed - PASS
17:31:41.833:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test args substitution": 1/1 passed - PASS
17:31:41.837:  Registering module test-module from path /data/js-variants/multee/Clients/session/kettle/tests/configs/node_modules/test-module
17:31:41.869:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config defaults with types": 14/14 passed - PASS
17:31:41.885:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config defaults without type": 4/4 passed - PASS
17:31:41.905:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Load config with "loadConfig" directive": 2/2 passed - PASS
17:31:41.919:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Test parsing command line arguments": 4/4 passed - PASS
17:31:41.919:  ASSERTION FAILED: Error in config file at path undefined - key "distributeOptions" found, where the only legal options are type, options, loadConfigs, mergeConfigs, require
17:31:41.933:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "Config with bad top-level keys": 1/1 passed - PASS
17:31:41.936:  Received JSON5 diagnostic error {
  "message": "JSON5: invalid character ']' at 49:9 while reading file /data/js-variants/multee/Clients/session/kettle/tests/data/invalid/invalidJSON5File.json5"
}
17:31:41.958:  Successfully queued test Simple get test
17:31:41.958:  jq: Test concluded - Module "Kettle JSON parsing Tests" Test name "JSON line number diagnostic test": 2/2 passed - PASS
17:31:41.978:  Successfully queued test Simple get test
17:31:41.978:  jq: Test concluded - Module "1. Testing file datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.005:  Successfully queued test Simple get test
17:31:42.006:  jq: Test concluded - Module "2. Testing file datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.026:  Successfully queued test Simple get test
17:31:42.027:  jq: Test concluded - Module "3. Testing CouchDB datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.045:  Successfully queued test Simple get test
17:31:42.045:  jq: Test concluded - Module "4. Testing CouchDB datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.064:  Successfully queued test Simple get test
17:31:42.072:  jq: Test concluded - Module "5. Testing CouchDB file datasource with missing file" Test name "Simple get test": 1/1 passed - PASS
17:31:42.126:  Successfully queued test Simple get test
17:31:42.133:  jq: Test concluded - Module "6. Testing CouchDB datasource with error response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.158:  Successfully queued test Simple get test
17:31:42.159:  jq: Test concluded - Module "7. Testing filesystem datasource with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.183:  Successfully queued test Simple get test
17:31:42.184:  jq: Test concluded - Module "8. Testing file datasource with filesystem with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.201:  Successfully queued test Simple get test
17:31:42.202:  jq: Test concluded - Module "9. Testing file datasource with filesystem with expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.229:  Successfully queued test Simple get test
17:31:42.229:  jq: Test concluded - Module "10. Testing file datasource with filesystem with static expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.248:  Successfully queued test Simple get test
17:31:42.249:  jq: Test concluded - Module "11. Testing couchdb datasource with filesystem with static expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.272:  Successfully queued test Simple set test
17:31:42.272:  jq: Test concluded - Module "12. Testing couchdb datasource with filesystem and dynamic expansion" Test name "Simple get test": 1/1 passed - PASS
17:31:42.294:  Successfully queued test Simple set test
17:31:42.294:  jq: Test concluded - Module "13. Testing file datasource with filesystem - set" Test name "Simple set test": 1/1 passed - PASS
17:31:42.324:  Successfully queued test Simple set test
17:31:42.324:  jq: Test concluded - Module "13a. Testing file datasource with filesystem - set with JSON5 encoding" Test name "Simple set test": 1/1 passed - PASS
17:31:42.351:  Successfully queued test Simple set test
17:31:42.351:  jq: Test concluded - Module "14. Testing CouchDB datasource with filesystem - set" Test name "Simple set test": 1/1 passed - PASS
17:31:42.374:  Successfully queued test Simple set test
17:31:42.380:  jq: Test concluded - Module "15. Testing CouchDB datasource with filesystem existing document - set" Test name "Simple set test": 1/1 passed - PASS
17:31:42.403:  Successfully queued test Simple set test
17:31:42.404:  jq: Test concluded - Module "16. Testing file datasource with filesystem and expansion - set" Test name "Simple set test": 1/1 passed - PASS
17:31:42.423:  Successfully queued test Simple get test
17:31:42.424:  jq: Test concluded - Module "17. Testing couchdb datasource with filesystem, existing document and expansion - set" Test name "Simple set test": 1/1 passed - PASS
17:31:42.441:  Successfully queued test Simple get test
17:31:42.442:  jq: Test concluded - Module "18. Testing JSON5 file datasource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.462:  Successfully queued test Simple get test
17:31:42.462:  jq: Test concluded - Module "19. Testing JSON5 file datasource with empty response" Test name "Simple get test": 1/1 passed - PASS
17:31:42.480:  Successfully queued test Simple get test
17:31:42.480:  jq: Test concluded - Module "1. Testing file datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.519:  Successfully queued test Simple get test
17:31:42.519:  jq: Test concluded - Module "2. Testing file datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.541:  Successfully queued test Simple get test
17:31:42.541:  jq: Test concluded - Module "3. Testing CouchDB datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.565:  Successfully queued test Simple get test
17:31:42.575:  jq: Test concluded - Module "4. Testing CouchDB datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.593:  Successfully queued test Simple get test
17:31:42.593:  jq: Test concluded - Module "5. Testing CouchDB file datasource with missing file - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.612:  Successfully queued test Simple get test
17:31:42.612:  jq: Test concluded - Module "6. Testing CouchDB datasource with error response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.630:  Successfully queued test Simple get test
17:31:42.630:  jq: Test concluded - Module "7. Testing filesystem datasource with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.650:  Successfully queued test Simple get test
17:31:42.650:  jq: Test concluded - Module "8. Testing file datasource with filesystem with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.669:  Successfully queued test Simple get test
17:31:42.669:  jq: Test concluded - Module "9. Testing file datasource with filesystem with expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.690:  Successfully queued test Simple get test
17:31:42.690:  jq: Test concluded - Module "10. Testing file datasource with filesystem with static expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.708:  Successfully queued test Simple get test
17:31:42.709:  jq: Test concluded - Module "11. Testing couchdb datasource with filesystem with static expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.733:  Successfully queued test Simple set test
17:31:42.733:  jq: Test concluded - Module "12. Testing couchdb datasource with filesystem and dynamic expansion - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.753:  Successfully queued test Simple set test
17:31:42.761:  jq: Test concluded - Module "13. Testing file datasource with filesystem - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.788:  Successfully queued test Simple set test
17:31:42.788:  jq: Test concluded - Module "13a. Testing file datasource with filesystem - set with JSON5 encoding - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.812:  Successfully queued test Simple set test
17:31:42.812:  jq: Test concluded - Module "14. Testing CouchDB datasource with filesystem - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.840:  Successfully queued test Simple set test
17:31:42.841:  jq: Test concluded - Module "15. Testing CouchDB datasource with filesystem existing document - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.862:  Successfully queued test Simple set test
17:31:42.863:  jq: Test concluded - Module "16. Testing file datasource with filesystem and expansion - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.883:  Successfully queued test Simple get test
17:31:42.884:  jq: Test concluded - Module "17. Testing couchdb datasource with filesystem, existing document and expansion - set - via promise API" Test name "Simple set test": 1/1 passed - PASS
17:31:42.901:  Successfully queued test Simple get test
17:31:42.901:  jq: Test concluded - Module "18. Testing JSON5 file datasource with standard response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.947:  Initializing the Express app
17:31:42.947:  Initializing the HTTP server
17:31:42.950:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:42.950:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.redirectingRequestHandler",
    "route": "/redirect",
    "method": "get"
}
17:31:42.951:  Opening Kettle Server on port 8081
17:31:42.951:  Successfully queued test Simple get test
17:31:42.952:  Kettle Server cmeckh6s-2853 is listening on port 8081
17:31:42.961:  jq: Test concluded - Module "19. Testing JSON5 file datasource with empty response - via promise API" Test name "Simple get test": 1/1 passed - PASS
17:31:42.962:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/redirect",
    "search": "",
    "url": "http://localhost:8081/redirect",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:42.965:  Invoking handler kettle.tests.dataSource.URL.redirectingRequestHandler for route /redirect with expectedGrade kettle.request.http
17:31:42.972:  Kettle server allocated request object with type kettle.tests.dataSource.URL.redirectingRequestHandler
17:31:42.977:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:42.983:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:42.985:  Stopping Kettle Server cmeckh6s-2853 on port 8081
17:31:42.986:  Kettle Server cmeckh6s-2853 on port 8081 is stopped
17:31:43.030:  Initializing the Express app
17:31:43.031:  Initializing the HTTP server
17:31:43.033:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:43.034:  Opening Kettle Server on port 8081
17:31:43.034:  Successfully queued test Resource model is initialised
17:31:43.034:  Kettle Server cmeckh6s-3005 is listening on port 8081
17:31:43.043:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "dataSource": {
        "typeName": "kettle.dataSource.URL",
        "id": "cmeckh6s-3007",
        "lifecycleStatus": "treeConstructed",
        "destroy": { Function
            
        },
        "options": {
            "gradeNames": [
                "fluid.component",
                "fluid.contextAware",
                "fluid.dataSource",
                "fluid.dataSource.URL",
                "kettle.dataSource.URL"
            ],
            "contextAwareness": {
                "writable": {
                    "checks": {
                        "writableValue": {
                            "contextValue": "{fluid.dataSource}.options.writable",
                            "gradeNames": "{fluid.dataSource}.options.writableGrade"
                        }
    .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:43.044:  jq: Test concluded - Module "KETTLE-89: DataSource support for redirects" Test name "Simple get test": 3/3 passed - PASS
17:31:43.045:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:43.051:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:43.056:  Stopping Kettle Server cmeckh6s-3005 on port 8081
17:31:43.057:  Kettle Server cmeckh6s-3005 on port 8081 is stopped
17:31:43.096:  Initializing the Express app
17:31:43.096:  Initializing the HTTP server
17:31:43.099:  Registering request handler {
    "type": "kettle.request.http",
    "route": "/",
    "method": "get"
}
17:31:43.099:  Opening Kettle Server on port 8081
17:31:43.100:  Successfully queued test Simple get test
17:31:43.100:  Kettle Server cmeckh6s-3171 is listening on port 8081
17:31:43.100:  jq: Test concluded - Module "DataSource during init" Test name "Resource model is initialised": 2/2 passed - PASS
17:31:43.102:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "username": "(SENSITIVE)",
    "password": "(SENSITIVE)",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/notfound",
    "search": "?search",
    "url": "http://(SENSITIVE):(SENSITIVE)@localhost:8081/notfound?search",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:43.105:  Kettle server getDispatcher found no matching handlers, continuing
17:31:43.107:  Stopping Kettle Server cmeckh6s-3171 on port 8081
17:31:43.108:  Kettle Server cmeckh6s-3171 on port 8081 is stopped
17:31:43.145:  Initializing the Express app
17:31:43.146:  Initializing the HTTP server
17:31:43.146:  Initializing the HTTPS server
17:31:43.156:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:43.156:  Opening Kettle Server on port 8081
17:31:43.157:  Successfully queued test Simple get test
17:31:43.157:  Kettle Server cmeckh6s-3284 is listening on port 8081
17:31:43.157:  jq: Test concluded - Module "w. Testing URL dataSource with sensitive info in URL" Test name "Simple get test": 4/4 passed - PASS
17:31:43.159:  DataSource Issuing HTTPS request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "https:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "https://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:43.173:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:43.179:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:43.182:  Stopping Kettle Server cmeckh6s-3284 on port 8081
17:31:43.182:  Kettle Server cmeckh6s-3284 on port 8081 is stopped
17:31:43.224:  Initializing the Express app
17:31:43.225:  Initializing the HTTP server
17:31:43.228:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:43.228:  Opening Kettle Server on port 8081
17:31:43.229:  Successfully queued test Simple get test
17:31:43.229:  Kettle Server cmeckh6s-3418 is listening on port 8081
17:31:43.230:  jq: Test concluded - Module "HTTPS dataSource test" Test name "Simple get test": 2/2 passed - PASS
17:31:43.231:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:43.233:  Invoking handler kettle.tests.dataSource.URL.hangup.handler for route / with expectedGrade kettle.request.http
17:31:43.241:  Kettle server allocated request object with type kettle.tests.dataSource.URL.hangup.handler
17:31:43.244:  Stopping Kettle Server cmeckh6s-3418 on port 8081
17:31:43.244:  Kettle Server cmeckh6s-3418 on port 8081 is stopped
17:31:43.283:  Initializing the Express app
17:31:43.283:  Initializing the HTTP server
17:31:43.286:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:43.286:  Opening Kettle Server on port 8081
17:31:43.287:  Successfully queued test Simple get test
17:31:43.287:  Kettle Server cmeckh6s-3554 is listening on port 8081
17:31:43.287:  jq: Test concluded - Module "x. Testing URL dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:43.289:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:43.291:  Invoking handler kettle.tests.dataSource.URL.hangup.handler for route / with expectedGrade kettle.request.http
17:31:43.296:  Kettle server allocated request object with type kettle.tests.dataSource.URL.hangup.handler
17:31:43.298:  Stopping Kettle Server cmeckh6s-3554 on port 8081
17:31:43.299:  Kettle Server cmeckh6s-3554 on port 8081 is stopped
17:31:43.351:  Initializing the Express app
17:31:43.351:  Initializing the HTTP server
17:31:43.354:  Registering request handler {
    "type": "kettle.tests.dataSource.URL.hangup.handler",
    "route": "/",
    "method": "get"
}
17:31:43.354:  Opening Kettle Server on port 8081
17:31:43.355:  Successfully queued test Simple get test
17:31:43.355:  Kettle Server cmeckh6s-3691 is listening on port 8081
17:31:43.355:  jq: Test concluded - Module "y. Testing CouchDB dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:43.357:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/notFound",
    "search": "",
    "url": "http://localhost:8081/notFound",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:43.368:  Kettle server getDispatcher found no matching handlers, continuing
17:31:43.370:  Stopping Kettle Server cmeckh6s-3691 on port 8081
17:31:43.370:  Kettle Server cmeckh6s-3691 on port 8081 is stopped
17:31:43.419:  Initializing the Express app
17:31:43.419:  Initializing the HTTP server
17:31:43.422:  Registering request handler {
    "method": "put",
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/"
}
17:31:43.422:  Opening Kettle Server on port 8081
17:31:43.423:  Successfully queued test Simple set test
17:31:43.423:  Kettle Server cmeckh6s-3804 is listening on port 8081
17:31:43.423:  jq: Test concluded - Module "z. Testing HTTP dataSource with server hangup" Test name "Simple get test": 1/1 passed - PASS
17:31:43.424:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 24
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8081/",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:43.426:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:43.433:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:43.443:  Stopping Kettle Server cmeckh6s-3804 on port 8081
17:31:43.444:  Kettle Server cmeckh6s-3804 on port 8081 is stopped
17:31:43.464:  Successfully queued test Simple get test
17:31:43.464:  jq: Test concluded - Module "HTTPS dataSource set with special chars test" Test name "Simple set test": 2/2 passed - PASS
17:31:43.482:  express pouchdb instance 'cmeckh6s-4002' initalizing...
17:31:43.482:  Creating directory '/tmp/cmeckh6s-4002' for express pouchdb instance 'cmeckh6s-4002'...
17:31:43.521:  express baseDir: '/tmp/cmeckh6s-4002'...
17:31:43.524:  Express server listening on port 6789
17:31:43.524:  Express started...
Resolved infusion from path /data/js-variants/multee/Clients/session/kettle/node_modules/@the-t-in-rtf/pouchdb-all-dbs/node_modules/infusion/src/module to /data/js-variants/multee/Clients/session/kettle/node_modules/infusion
17:31:43.645:  Data loaded for database 'testFile'...
17:31:43.647:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "writeMethod": "PUT",
    "url": "http://localhost:6789/testFile/test_id"
}
17:31:43.694:  Successfully queued test Simple get test
17:31:43.694:  Express stopped...
17:31:43.695:  jq: Test concluded - Module "3. Testing CouchDB URL DataSource with standard response" Test name "Simple get test": 1/1 passed - PASS
17:31:43.713:  express pouchdb instance 'cmeckh6s-4156' initalizing...
17:31:43.714:  Creating directory '/tmp/cmeckh6s-4156' for express pouchdb instance 'cmeckh6s-4156'...
17:31:43.736:  express baseDir: '/tmp/cmeckh6s-4156'...
17:31:43.738:  Express server listening on port 6789
17:31:43.738:  Express started...
17:31:43.758:  Data loaded for database 'testFile'...
17:31:43.761:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "notFoundIsEmpty": false,
    "writeMethod": "PUT"
}
17:31:43.815:  Successfully queued test Simple get test
17:31:43.816:  Express stopped...
17:31:43.816:  jq: Test concluded - Module "5. Testing CouchDB URL datasource with missing file" Test name "Simple get test": 1/1 passed - PASS
17:31:43.836:  express pouchdb instance 'cmeckh6s-4293' initalizing...
17:31:43.836:  Creating directory '/tmp/cmeckh6s-4293' for express pouchdb instance 'cmeckh6s-4293'...
17:31:43.856:  express baseDir: '/tmp/cmeckh6s-4293'...
17:31:43.857:  Express server listening on port 6789
17:31:43.857:  Express started...
17:31:43.875:  Data loaded for database 'testFile'...
17:31:43.876:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "get",
    "notFoundIsEmpty": true,
    "writeMethod": "PUT"
}
17:31:43.920:  Successfully queued test Simple set test
17:31:43.921:  Express stopped...
17:31:43.921:  jq: Test concluded - Module "5a. Testing CouchDB URL datasource with missing file and notFoundIsEmpty" Test name "Simple get test": 1/1 passed - PASS
17:31:43.934:  express pouchdb instance 'cmeckh6s-4437' initalizing...
17:31:43.934:  Creating directory '/tmp/cmeckh6s-4437' for express pouchdb instance 'cmeckh6s-4437'...
17:31:43.960:  express baseDir: '/tmp/cmeckh6s-4437'...
17:31:43.961:  Express server listening on port 6789
17:31:43.961:  Express started...
17:31:43.979:  Data loaded for database 'testFile'...
17:31:43.981:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "filterNamespaces": [
        "impl",
        "encoding"
    ],
    "notFoundIsEmpty": true,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:44.001:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 47
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:44.007:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/nonexistent_id",
    "search": "",
    "url": "http://localhost:6789/testFile/nonexistent_id",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:44.037:  Successfully queued test Simple set test
17:31:44.038:  Express stopped...
17:31:44.038:  jq: Test concluded - Module "14. Testing CouchDB URL datasource with HTTP - set" Test name "Simple set test": 1/1 passed - PASS
17:31:44.051:  express pouchdb instance 'cmeckh6s-4600' initalizing...
17:31:44.051:  Creating directory '/tmp/cmeckh6s-4600' for express pouchdb instance 'cmeckh6s-4600'...
17:31:44.069:  express baseDir: '/tmp/cmeckh6s-4600'...
17:31:44.071:  Express server listening on port 6789
17:31:44.071:  Express started...
17:31:44.093:  Data loaded for database 'testFile'...
17:31:44.095:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "filterNamespaces": [
        "impl",
        "encoding"
    ],
    "notFoundIsEmpty": true,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:44.114:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 119
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "callback": { Function
        
    },
    "operation": "set",
    "writeMethod": "PUT"
}
17:31:44.118:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "6789",
    "pathname": "/testFile/test_id",
    "search": "",
    "url": "http://localhost:6789/testFile/test_id",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:44.195:  Initializing the Express app
17:31:44.195:  Initializing the HTTP server
17:31:44.197:  Initializing the Express app
17:31:44.197:  Initializing the HTTP server
17:31:44.200:  Registering request handler {
    "type": "kettle.tests.serverPair.getRelay",
    "route": "/relay",
    "method": "get"
}
17:31:44.200:  Registering request handler {
    "type": "kettle.tests.serverPair.postRelay",
    "route": "/relay",
    "method": "post"
}
17:31:44.200:  Registering request handler {
    "type": "kettle.tests.serverPair.putRelay",
    "route": "/relay",
    "method": "put"
}
17:31:44.200:  Registering request handler {
    "type": "kettle.tests.serverPair.errorRelay",
    "route": "/errorRelay",
    "method": "get"
}
17:31:44.200:  Opening Kettle Server on port 8086
17:31:44.200:  Registering request handler {
    "type": "kettle.tests.serverPair.getEndpoint",
    "route": "/endpoint",
    "method": "get"
}
17:31:44.201:  Registering request handler {
    "type": "kettle.tests.serverPair.postEndpoint",
    "route": "/endpoint",
    "method": "post"
}
17:31:44.201:  Registering request handler {
    "type": "kettle.tests.serverPair.putEndpoint",
    "route": "/endpoint",
    "method": "put"
}
17:31:44.201:  Registering request handler {
    "type": "kettle.tests.serverPair.errorEndpoint",
    "route": "/errorEndpoint",
    "method": "get"
}
17:31:44.201:  Opening Kettle Server on port 8087
17:31:44.211:  Successfully queued test Access GET request
17:31:44.211:  Successfully queued test Access SET request via POST
17:31:44.211:  Successfully queued test Access SET request via PUT
17:31:44.211:  Successfully queued test Relay error state via GET
17:31:44.212:  Kettle Server cmeckh6s-4695 is listening on port 8086
17:31:44.212:  Kettle Server cmeckh6s-4693 is listening on port 8087
17:31:44.212:  Express stopped...
17:31:44.212:  jq: Test concluded - Module "15. Testing CouchDB URL datasource with HTTP existing document - set" Test name "Simple set test": 1/1 passed - PASS
17:31:44.213:  Sending a GET request to: http://127.0.0.1:8086/relay
17:31:44.214:  Invoking handler kettle.tests.serverPair.getRelay for route /relay with expectedGrade kettle.request.http
17:31:44.221:  Kettle server allocated request object with type kettle.tests.serverPair.getRelay
17:31:44.222:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "operation": "get",
    "writeMethod": "POST"
}
17:31:44.224:  Invoking handler kettle.tests.serverPair.getEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:44.231:  Kettle server allocated request object with type kettle.tests.serverPair.getEndpoint
17:31:44.233:  ENDPOINT Resolving with value 42
17:31:44.251:  jq: Test concluded - Module "Cross server datasource access" Test name "Access GET request": 3/3 passed - PASS
17:31:44.252:  Sending a POST request to: http://127.0.0.1:8086/relay
17:31:44.253:  Invoking handler kettle.tests.serverPair.postRelay for route /relay with expectedGrade kettle.request.http
17:31:44.259:  Kettle server allocated request object with type kettle.tests.serverPair.postRelay
17:31:44.261:  DataSource Issuing HTTP request with options {
    "method": "POST",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 0
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "operation": "set",
    "writeMethod": "POST"
}
17:31:44.262:  Invoking handler kettle.tests.serverPair.postEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:44.269:  Kettle server allocated request object with type kettle.tests.serverPair.postEndpoint
17:31:44.271:  ENDPOINT Resolving with value {
    "payload": "post return value"
}
17:31:44.289:  jq: Test concluded - Module "Cross server datasource access" Test name "Access SET request via POST": 4/4 passed - PASS
17:31:44.289:  Sending a PUT request to: http://127.0.0.1:8086/relay
17:31:44.291:  Invoking handler kettle.tests.serverPair.putRelay for route /relay with expectedGrade kettle.request.http
17:31:44.298:  Kettle server allocated request object with type kettle.tests.serverPair.putRelay
17:31:44.300:  DataSource Issuing HTTP request with options {
    "method": "PUT",
    "headers": {
        "Content-Type": "application/json",
        "Content-Length": 0
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/endpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/endpoint",
    "writeMethod": "PUT",
    "operation": "set"
}
17:31:44.301:  Invoking handler kettle.tests.serverPair.putEndpoint for route /endpoint with expectedGrade kettle.request.http
17:31:44.309:  Kettle server allocated request object with type kettle.tests.serverPair.putEndpoint
17:31:44.310:  ENDPOINT Resolving with value {
    "payload": "put return value"
}
17:31:44.328:  jq: Test concluded - Module "Cross server datasource access" Test name "Access SET request via PUT": 4/4 passed - PASS
17:31:44.329:  Sending a GET request to: http://127.0.0.1:8086/errorRelay
17:31:44.330:  Invoking handler kettle.tests.serverPair.errorRelay for route /errorRelay with expectedGrade kettle.request.http
17:31:44.337:  Kettle server allocated request object with type kettle.tests.serverPair.errorRelay
17:31:44.339:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8087",
    "pathname": "/errorEndpoint",
    "search": "",
    "termMap": {
        "sourcePort": 8087
    },
    "url": "http://localhost:8087/errorEndpoint",
    "directModel": null,
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:44.341:  Invoking handler kettle.tests.serverPair.errorEndpoint for route /errorEndpoint with expectedGrade kettle.request.http
17:31:44.348:  Kettle server allocated request object with type kettle.tests.serverPair.errorEndpoint
17:31:44.354:  Stopping Kettle Server cmeckh6s-4693 on port 8087
17:31:44.354:  Stopping Kettle Server cmeckh6s-4695 on port 8086
17:31:44.355:  Kettle Server cmeckh6s-4693 on port 8087 is stopped
17:31:44.355:  Kettle Server cmeckh6s-4695 on port 8086 is stopped
17:31:44.375:  Successfully queued test HTTPMethods GET test
17:31:44.376:  jq: Test concluded - Module "Cross server datasource access" Test name "Relay error state via GET": 2/2 passed - PASS
17:31:44.422:  Initializing the Express app
17:31:44.423:  Initializing the HTTP server
17:31:44.425:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:44.425:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:44.425:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:44.425:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:44.425:  Opening Kettle Server on port 8081
17:31:44.426:  Kettle Server cmeckh6s-5127 is listening on port 8081
17:31:44.426:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.428:  Invoking handler kettle.tests.HTTPMethods.get.handler for route / with expectedGrade kettle.request.http
17:31:44.434:  Kettle server allocated request object with type kettle.tests.HTTPMethods.get.handler
17:31:44.436:  Stopping Kettle Server cmeckh6s-5127 on port 8081
17:31:44.436:  Kettle Server cmeckh6s-5127 on port 8081 is stopped
17:31:44.453:  Successfully queued test HTTPMethods POST test
17:31:44.453:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods GET test": 2/2 passed - PASS
17:31:44.476:  Initializing the Express app
17:31:44.477:  Initializing the HTTP server
17:31:44.478:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:44.479:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:44.479:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:44.479:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:44.479:  Opening Kettle Server on port 8081
17:31:44.479:  Kettle Server cmeckh6s-5264 is listening on port 8081
17:31:44.480:  Sending a POST request to: http://127.0.0.1:8081/
17:31:44.492:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:44.499:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:44.502:  Stopping Kettle Server cmeckh6s-5264 on port 8081
17:31:44.502:  Kettle Server cmeckh6s-5264 on port 8081 is stopped
17:31:44.519:  Successfully queued test HTTPMethods PUT test
17:31:44.519:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods POST test": 2/2 passed - PASS
17:31:44.542:  Initializing the Express app
17:31:44.543:  Initializing the HTTP server
17:31:44.545:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:44.545:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:44.545:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:44.545:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:44.545:  Opening Kettle Server on port 8081
17:31:44.545:  Kettle Server cmeckh6s-5401 is listening on port 8081
17:31:44.546:  Sending a PUT request to: http://127.0.0.1:8081/
17:31:44.547:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:44.553:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:44.556:  Stopping Kettle Server cmeckh6s-5401 on port 8081
17:31:44.556:  Kettle Server cmeckh6s-5401 on port 8081 is stopped
17:31:44.580:  Successfully queued test HTTPMethods PUT & POST in sequence test
17:31:44.580:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT test": 2/2 passed - PASS
17:31:44.603:  Initializing the Express app
17:31:44.604:  Initializing the HTTP server
17:31:44.605:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:44.606:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:44.606:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:44.606:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:44.606:  Opening Kettle Server on port 8081
17:31:44.607:  Kettle Server cmeckh6s-5554 is listening on port 8081
17:31:44.607:  Sending a POST request to: http://127.0.0.1:8081/
17:31:44.609:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:44.614:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:44.618:  Sending a PUT request to: http://127.0.0.1:8081/
17:31:44.619:  Invoking handler kettle.tests.HTTPMethods.put.handler for route / with expectedGrade kettle.request.http
17:31:44.625:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put.handler
17:31:44.628:  Sending a POST request to: http://127.0.0.1:8081/
17:31:44.629:  Invoking handler kettle.tests.HTTPMethods.post.handler for route / with expectedGrade kettle.request.http
17:31:44.635:  Kettle server allocated request object with type kettle.tests.HTTPMethods.post.handler
17:31:44.637:  Stopping Kettle Server cmeckh6s-5554 on port 8081
17:31:44.638:  Kettle Server cmeckh6s-5554 on port 8081 is stopped
17:31:44.654:  Successfully queued test HTTPMethods PUT test with alternate response status code
17:31:44.654:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT & POST in sequence test": 6/6 passed - PASS
17:31:44.678:  Initializing the Express app
17:31:44.678:  Initializing the HTTP server
17:31:44.680:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/",
    "method": "get"
}
17:31:44.680:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.post.handler",
    "route": "/",
    "method": "post"
}
17:31:44.680:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put.handler",
    "route": "/",
    "method": "put"
}
17:31:44.680:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.put201.handler",
    "route": "/201",
    "method": "put"
}
17:31:44.680:  Opening Kettle Server on port 8081
17:31:44.681:  Kettle Server cmeckh6s-5735 is listening on port 8081
17:31:44.681:  Sending a PUT request to: http://127.0.0.1:8081/201
17:31:44.693:  Invoking handler kettle.tests.HTTPMethods.put201.handler for route /201 with expectedGrade kettle.request.http
17:31:44.700:  Kettle server allocated request object with type kettle.tests.HTTPMethods.put201.handler
17:31:44.703:  Stopping Kettle Server cmeckh6s-5735 on port 8081
17:31:44.703:  Kettle Server cmeckh6s-5735 on port 8081 is stopped
17:31:44.724:  Successfully queued test CORS middleware tests
17:31:44.724:  jq: Test concluded - Module "kettle.tests.HTTPMethods.config tests" Test name "HTTPMethods PUT test with alternate response status code": 3/3 passed - PASS
17:31:44.747:  Initializing the Express app
17:31:44.747:  Initializing the HTTP server
17:31:44.749:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:44.749:  Opening Kettle Server on port 8081
17:31:44.749:  Kettle Server cmeckh6s-5880 is listening on port 8081
17:31:44.750:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.751:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:44.758:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:44.761:  Sending a OPTIONS request to: http://127.0.0.1:8081/
17:31:44.762:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:44.768:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:44.771:  Stopping Kettle Server cmeckh6s-5880 on port 8081
17:31:44.771:  Kettle Server cmeckh6s-5880 on port 8081 is stopped
17:31:44.788:  Successfully queued test CORS middleware no credential tests
17:31:44.788:  jq: Test concluded - Module "kettle.tests.CORS.config tests" Test name "CORS middleware tests": 11/11 passed - PASS
17:31:44.816:  Initializing the Express app
17:31:44.817:  Initializing the HTTP server
17:31:44.819:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:44.820:  Opening Kettle Server on port 8081
17:31:44.820:  Kettle Server cmeckh6s-6041 is listening on port 8081
17:31:44.821:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.822:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:44.830:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:44.833:  Stopping Kettle Server cmeckh6s-6041 on port 8081
17:31:44.833:  Kettle Server cmeckh6s-6041 on port 8081 is stopped
17:31:44.853:  Successfully queued test CORS middleware custom origin tests
17:31:44.853:  jq: Test concluded - Module "kettle.tests.CORS.noCred.config tests" Test name "CORS middleware no credential tests": 7/7 passed - PASS
17:31:44.877:  Initializing the Express app
17:31:44.877:  Initializing the HTTP server
17:31:44.879:  Registering request handler {
    "type": "kettle.tests.CORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:44.879:  Opening Kettle Server on port 8081
17:31:44.879:  Kettle Server cmeckh6s-6188 is listening on port 8081
17:31:44.880:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.891:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:44.897:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:44.900:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.901:  Invoking handler kettle.tests.CORS.handler for route / with expectedGrade kettle.request.http
17:31:44.907:  Kettle server allocated request object with type kettle.tests.CORS.handler
17:31:44.910:  Stopping Kettle Server cmeckh6s-6188 on port 8081
17:31:44.910:  Kettle Server cmeckh6s-6188 on port 8081 is stopped
17:31:44.928:  Successfully queued test No CORS middleware tests
17:31:44.928:  jq: Test concluded - Module "kettle.tests.CORS.origin.config tests" Test name "CORS middleware custom origin tests": 14/14 passed - PASS
17:31:44.951:  Initializing the Express app
17:31:44.952:  Initializing the HTTP server
17:31:44.953:  Registering request handler {
    "type": "kettle.tests.noCORS.handler",
    "route": "/",
    "method": "get, options"
}
17:31:44.954:  Opening Kettle Server on port 8081
17:31:44.954:  Kettle Server cmeckh6s-6349 is listening on port 8081
17:31:44.954:  Sending a GET request to: http://127.0.0.1:8081/
17:31:44.956:  Invoking handler kettle.tests.noCORS.handler for route / with expectedGrade kettle.request.http
17:31:44.963:  Kettle server allocated request object with type kettle.tests.noCORS.handler
17:31:44.966:  Stopping Kettle Server cmeckh6s-6349 on port 8081
17:31:44.966:  Kettle Server cmeckh6s-6349 on port 8081 is stopped
17:31:45.001:  Successfully queued test Session tests
17:31:45.002:  jq: Test concluded - Module "kettle.tests.CORS.noCORS.config tests" Test name "No CORS middleware tests": 6/6 passed - PASS
17:31:45.037:  Initializing the Express app
17:31:45.037:  Initializing the HTTP server
17:31:45.039:  Registering request handler {
    "type": "kettle.tests.session.none.handler",
    "route": "/testNoSessionRequest",
    "method": "get"
}
17:31:45.039:  Registering request handler {
    "type": "kettle.tests.session.existing.handler",
    "route": "/testExistingSessionRequest",
    "method": "get"
}
17:31:45.039:  Registering request handler {
    "type": "kettle.tests.session.start.handler",
    "route": "/testSessionStart/:token",
    "method": "get"
}
17:31:45.039:  Registering request handler {
    "type": "kettle.tests.session.end.handler",
    "route": "/testSessionEnd/:token",
    "method": "get"
}
17:31:45.040:  Opening Kettle Server on port 8081
17:31:45.040:  Kettle Server cmeckh6s-6526 is listening on port 8081
17:31:45.041:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:45.042:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:45.049:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:45.051:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:45.053:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:45.062:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:45.076:  Sending a GET request to: http://127.0.0.1:8081/testSessionStart/123
17:31:45.077:  Invoking handler kettle.tests.session.start.handler for route /testSessionStart/:token with expectedGrade kettle.request.http
17:31:45.085:  Kettle server allocated request object with type kettle.tests.session.start.handler
17:31:45.090:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:45.091:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:45.099:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:45.104:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:45.105:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:45.111:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:45.113:  Sending a GET request to: http://127.0.0.1:8081/testSessionEnd/123
17:31:45.114:  Invoking handler kettle.tests.session.end.handler for route /testSessionEnd/:token with expectedGrade kettle.request.http
17:31:45.122:  Kettle server allocated request object with type kettle.tests.session.end.handler
17:31:45.125:  Stopping Kettle Server cmeckh6s-6526 on port 8081
17:31:45.125:  Kettle Server cmeckh6s-6526 on port 8081 is stopped
17:31:45.153:  Successfully queued test WebSockets tests
17:31:45.154:  jq: Test concluded - Module "kettle.tests.session.config tests" Test name "Session tests": 24/24 passed - PASS
17:31:45.182:  Initializing the Express app
17:31:45.183:  Initializing the HTTP server
17:31:45.184:  Initializing the ws server
17:31:45.185:  Registering request handler {
    "type": "kettle.tests.ws.testSocket.handler",
    "route": "/socket_path"
}
17:31:45.185:  Registering request handler {
    "type": "kettle.tests.ws.testGet.handler",
    "route": "/"
}
17:31:45.185:  Registering request handler {
    "type": "kettle.tests.ws.testClose.handler",
    "route": "/close_path"
}
17:31:45.185:  Opening Kettle Server on port 8081
17:31:45.186:  Kettle Server cmeckh6s-6838 is listening on port 8081
17:31:45.187:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:45.189:  Invoking handler kettle.tests.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:45.197:  Kettle server allocated request object with type kettle.tests.ws.testSocket.handler
17:31:45.199:  Received WebSockets connection on path /socket_path
17:31:45.205:  kettle.test.request.ws client message{"success":true}
17:31:45.207:  kettle.test.request.ws client message{"success":true}
17:31:45.208:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.210:  Invoking handler kettle.tests.ws.testGet.handler for route / with expectedGrade kettle.request.http
17:31:45.217:  Kettle server allocated request object with type kettle.tests.ws.testGet.handler
17:31:45.222:  Sending a GET request to: http://127.0.0.1:8081/socket_path
17:31:45.222:  kettle.test.request.ws closed, response code: 1005, reason: ""
17:31:45.223:  Invoking handler kettle.tests.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.http
17:31:45.230:  Kettle server allocated request object with type kettle.request.http.mismatch
17:31:45.233:  connecting ws.WebSocket to: ws://127.0.0.1:8081/ with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/"
}
17:31:45.234:  Invoking handler kettle.tests.ws.testGet.handler for route / with expectedGrade kettle.request.ws
17:31:45.243:  Kettle server allocated request object with type kettle.request.ws.mismatch
17:31:45.246:  connecting ws.WebSocket to: ws://127.0.0.1:8081/close_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/close_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/close_path"
}
17:31:45.247:  Invoking handler kettle.tests.ws.testClose.handler for route /close_path with expectedGrade kettle.request.ws
17:31:45.255:  Kettle server allocated request object with type kettle.tests.ws.testClose.handler
17:31:45.256:  Received WebSockets connection on path /close_path
17:31:45.262:  kettle.test.request.ws closed, response code: 1000, reason: ""
17:31:45.263:  Stopping Kettle Server cmeckh6s-6838 on port 8081
17:31:45.263:  Kettle Server cmeckh6s-6838 on port 8081 is stopped
17:31:45.264:  kettle.test.request.ws client error{
    
}
17:31:45.264:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:45.307:  Successfully queued test WebSockets Session tests
17:31:45.307:  jq: Test concluded - Module "kettle.tests.webSockets.config tests" Test name "WebSockets tests": 17/17 passed - PASS
17:31:45.347:  Initializing the Express app
17:31:45.348:  Initializing the HTTP server
17:31:45.349:  Initializing the ws server
17:31:45.350:  Registering request handler {
    "type": "kettle.tests.session.ws.testSocket.handler",
    "route": "/socket_path"
}
17:31:45.350:  Registering request handler {
    "type": "kettle.tests.session.none.handler",
    "route": "/testNoSessionRequest",
    "method": "get"
}
17:31:45.351:  Registering request handler {
    "type": "kettle.tests.session.existing.handler",
    "route": "/testExistingSessionRequest",
    "method": "get"
}
17:31:45.351:  Registering request handler {
    "type": "kettle.tests.session.start.handler",
    "route": "/testSessionStart/:token",
    "method": "get"
}
17:31:45.351:  Registering request handler {
    "type": "kettle.tests.session.end.handler",
    "route": "/testSessionEnd/:token",
    "method": "get"
}
17:31:45.351:  Opening Kettle Server on port 8081
17:31:45.352:  Kettle Server cmeckh6s-7145 is listening on port 8081
17:31:45.352:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:45.353:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:45.359:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:45.362:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:45.364:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:45.372:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:45.376:  Sending a GET request to: http://127.0.0.1:8081/testSessionStart/123
17:31:45.377:  Invoking handler kettle.tests.session.start.handler for route /testSessionStart/:token with expectedGrade kettle.request.http
17:31:45.383:  Kettle server allocated request object with type kettle.tests.session.start.handler
17:31:45.387:  Sending a GET request to: http://127.0.0.1:8081/testExistingSessionRequest
17:31:45.388:  Invoking handler kettle.tests.session.existing.handler for route /testExistingSessionRequest with expectedGrade kettle.request.http
17:31:45.396:  Kettle server allocated request object with type kettle.tests.session.existing.handler
17:31:45.401:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        "Cookie": [
            "kettle.sid=s%3AyP8GlW7O77BsO_mn7BCU42_sd5Zvxe7x.hC21Nj6eEOjgzqL3D%2BSDJKz4bJC9IoaZM450f1eHSBs; Path=/; HttpOnly"
        ]
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:45.404:  Invoking handler kettle.tests.session.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:45.417:  Kettle server allocated request object with type kettle.tests.session.ws.testSocket.handler
17:31:45.419:  Received WebSockets connection on path /socket_path
17:31:45.422:  testSocket.receiveMessage got session {
    "cookie": {
        "path": "/",
        "_expires": null,
        "originalMaxAge": null,
        "httpOnly": true,
        "secure": false,
        "expires": [Synthetic property],
        "maxAge": [Synthetic property],
        "data": [Synthetic property],
        "serialize": [Synthetic property],
        "toJSON": [Synthetic property]
    },
    "token": "123"
}
17:31:45.424:  kettle.test.request.ws client message{"type":"midSuccess","payload":{"token":"123","success":true}}
17:31:45.425:  connecting ws.WebSocket to: ws://127.0.0.1:8081/socket_path with request options {
    "headers": {
        
    },
    "protocol": "ws",
    "username": "",
    "password": "",
    "hostname": "127.0.0.1",
    "port": "8081",
    "pathname": "/socket_path",
    "search": "",
    "termMap": {
        
    },
    "writeMethod": "PUT",
    "url": "ws://127.0.0.1:8081/socket_path"
}
17:31:45.426:  Invoking handler kettle.tests.session.ws.testSocket.handler for route /socket_path with expectedGrade kettle.request.ws
17:31:45.435:  Kettle server allocated request object with type kettle.tests.session.ws.testSocket.handler
17:31:45.438:  Sending a GET request to: http://127.0.0.1:8081/testNoSessionRequest
17:31:45.439:  Invoking handler kettle.tests.session.none.handler for route /testNoSessionRequest with expectedGrade kettle.request.http
17:31:45.444:  Kettle server allocated request object with type kettle.tests.session.none.handler
17:31:45.447:  Sending a GET request to: http://127.0.0.1:8081/testSessionEnd/123
17:31:45.448:  Invoking handler kettle.tests.session.end.handler for route /testSessionEnd/:token with expectedGrade kettle.request.http
17:31:45.455:  Kettle server allocated request object with type kettle.tests.session.end.handler
17:31:45.458:  Stopping Kettle Server cmeckh6s-7145 on port 8081
17:31:45.458:  Kettle Server cmeckh6s-7145 on port 8081 is stopped
17:31:45.459:  kettle.test.request.ws client error{
    
}
17:31:45.460:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:45.487:  Successfully queued test Error tests I
17:31:45.488:  kettle.test.request.ws closed, response code: 1006, reason: ""
17:31:45.488:  Failing to resume callback for request cmeckh6s-7323 which has already concluded
17:31:45.488:  jq: Test concluded - Module "kettle.tests.session.webSockets.config tests" Test name "WebSockets Session tests": 31/31 passed - PASS
17:31:45.517:  Initializing the Express app
17:31:45.518:  Initializing the HTTP server
17:31:45.522:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:45.522:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:45.522:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:45.522:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:45.523:  Opening Kettle Server on port 8081
17:31:45.523:  Kettle Server cmeckh6s-7496 is listening on port 8081
17:31:45.524:  FATAL ERROR: Uncaught exception: "Global Error Triggered".triggerError is not a function
TypeError: "Global Error Triggered".triggerError is not a function
    at Object.kettle.tests.triggerGlobalErrorSync (/data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:15:778)
    at /data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:16:14
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:45.526:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.538:  Invoking handler kettle.tests.error.requestError for route / with expectedGrade kettle.request.http
17:31:45.550:  Kettle server allocated request object with type kettle.tests.error.requestError
17:31:45.550:  ASSERTION FAILED: Simulated assertion failed in request - this failure is expected: 
17:31:45.550:  Current activity: 
17:31:45.551:      while invoking invoker with name handleRequest and record {
    "func": undefined,
    "funcName": "fluid.fail",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": [
        "Simulated assertion failed in request - this failure is expected: "
    ],
    "componentSource": "kettle.tests.error.requestError"
} holding component component { typeName: "kettle.tests.error.requestError id: cmeckh6s-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-cmeckh6s-7437.tests.configuration.server.app.requests.request
17:31:45.551:      while firing to listener to event named onHandle of component component { typeName: "kettle.tests.error.requestError id: cmeckh6s-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-cmeckh6s-7437.tests.configuration.server.app.requests.request
17:31:45.551:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.error.requestError id: cmeckh6s-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-cmeckh6s-7437.tests.configuration.server.app.requests.request
17:31:45.554:  kettle.tests.error.handleFullRequest forwarding error to express
17:31:45.554:  kettle.tests.server.upgradeError received error {
    "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
    "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)\n    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)\n    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:45.554:  kettle.tests.server.upgradeError throwing uncaught exception error {
    "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
    "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)\n    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)\n    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
17:31:45.554:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: 
Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: 
    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)
    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)
    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)
    at fluid.componentConstructor.invokeInvoker [as handleRequest] (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2781:25)
    at kettle.request.handleRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:97:157)
    at togo (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2849:29)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at kettle.request.handleRequestTask (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:104:25)
    at Object.invokeNext (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:257:52)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:237:35)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:241:31
    at Function.fluid.promise.pushHandler (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:85:17)
    at Object.that.then (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:32:23)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:240:19)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:241:31
    at Function.fluid.promise.pushHandler (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:85:17)
    at Object.that.then (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:32:23)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:240:19)
    at Function.fluid.promise.sequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:270:19)
    at Function.kettle.request.sequenceRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:120:169)
    at kettle.request.initiateHandleRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:132:530)
    at togo (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2849:29)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at fluid.concludeComponentInit (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:1536:26)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2208:25
    at Array.forEach (<anonymous>)
    at localWorkflowTask (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2207:37)
    at Object.invokeNext (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:257:52)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:237:35)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at Function.fluid.promise.progressSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:218:19)
    at Function.fluid.promise.resumeSequence (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:246:27)
    at commitPotentiae (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2329:27)
    at Object.fluid.tryCatch (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:241:20)
    at Object.fluid.commitPotentiae (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:2314:11)
    at fluid.concludeAnyTreeTransaction (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidIoC.js:1429:15)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at Function.kettle.server.checkCreateRequest (/data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:53:303)
    at fluid.componentConstructor.dispatcher (/data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:59:232)
    at /data/js-variants/multee/Clients/session/kettle/lib/KettleServer.js:69:213
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at expressInit (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at query (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/middleware/query.js:45:5)
    at Layer.handle [as handle_request] (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:323:13)
    at /data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:341:12)
    at next (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/router/index.js:174:3)
    at Function.handle (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/application.js:174:10)
    at Server.app (/data/js-variants/multee/Clients/session/kettle/node_modules/express/lib/express.js:39:9)
    at Server.emit (node:events:513:28)
    at parserOnIncoming (node:_http_server:980:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)
17:31:45.554:  Current activity: 
17:31:45.554:      while invoking invoker with name handleFullRequest and record {
    "func": undefined,
    "funcName": "kettle.tests.error.handleFullRequest",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "args": {
        "value": "NO_ARGUMENTS"
    },
    "componentSource": "kettle.tests.error.requestError"
} holding component component { typeName: "kettle.tests.error.requestError id: cmeckh6s-7566" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.error.requestError"]} at path serverEnvironment-cmeckh6s-7437.tests.configuration.server.app.requests.request
17:31:45.555:  ASSERTION FAILED: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusi .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]which has already received "reject"
17:31:45.556:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils. .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
Error: Assertion failure - check console for more details: Error: rejecting promise {
    "then": { Function
        
    },
    "resolve": { Function
        
    },
    "reject": { Function
        
    },
    "cancel": { Function
        
    },
    "complete": { Function
        
    },
    "disposition": "reject",
    "value": {
        "message": "Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: ",
        "stack": "Error: Assertion failure - check console for more details: Simulated assertion failed in request - this failure is expected: \n    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)\n    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)\n    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)\n    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusi .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]which has already received "reject"
    at new fluid.FluidError (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:182:22)
    at Object.fluid.builtinFail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:206:11)
    at kettle.failureHandler (/data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:585)
    at fluid.event.firer.fire (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:1764:36)
    at Object.fluid.fail (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/Fluid.js:222:28)
    at Array.that.reject (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:51:23)
    at Object.that.complete (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:72:21)
    at Object.that.reject (/data/js-variants/multee/Clients/session/kettle/node_modules/infusion/src/framework/core/js/FluidPromises.js:58:18)
    at /data/js-variants/multee/Clients/session/kettle/lib/KettleUtils.js:18:444
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:45.558:  Sending a GET request to: http://127.0.0.1:8081/errorCode
17:31:45.559:  Invoking handler kettle.tests.error.requestErrorCode.handler for route /errorCode with expectedGrade kettle.request.http
17:31:45.569:  Kettle server allocated request object with type kettle.tests.error.requestErrorCode.handler
17:31:45.573:  Stopping Kettle Server cmeckh6s-7496 on port 8081
17:31:45.574:  Kettle Server cmeckh6s-7496 on port 8081 is stopped
17:31:45.594:  Successfully queued test Error tests II
17:31:45.594:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Error tests I": 4/4 passed - PASS
17:31:45.625:  Initializing the Express app
17:31:45.626:  Initializing the HTTP server
17:31:45.629:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:45.629:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:45.629:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:45.629:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:45.629:  Opening Kettle Server on port 8081
17:31:45.629:  Kettle Server cmeckh6s-7658 is listening on port 8081
17:31:45.630:  Sending a GET request to: http://127.0.0.1:8081/errorAsync
17:31:45.631:  Invoking handler kettle.tests.error.requestErrorAsync.handler for route /errorAsync with expectedGrade kettle.request.http
17:31:45.638:  Kettle server allocated request object with type kettle.tests.error.requestErrorAsync.handler
17:31:45.640:  FATAL ERROR: Uncaught exception: Uncharacterised error which should cause request failure
Error: Uncharacterised error which should cause request failure
    at /data/js-variants/multee/Clients/session/kettle/tests/ErrorTests.js:13:1376
    at wrappedCallback (/data/js-variants/multee/Clients/session/kettle/lib/KettleRequest.js:51:625)
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
17:31:45.644:  Stopping Kettle Server cmeckh6s-7658 on port 8081
17:31:45.644:  Kettle Server cmeckh6s-7658 on port 8081 is stopped
17:31:45.661:  Successfully queued test Plaintext response error test
17:31:45.661:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Error tests II": 1/1 passed - PASS
17:31:45.684:  Initializing the Express app
17:31:45.685:  Initializing the HTTP server
17:31:45.686:  Registering request handler {
    "type": "kettle.tests.error.requestError",
    "route": "/",
    "method": "get"
}
17:31:45.686:  Registering request handler {
    "type": "kettle.tests.error.requestErrorCode.handler",
    "route": "/errorCode",
    "method": "get"
}
17:31:45.687:  Registering request handler {
    "type": "kettle.tests.error.requestErrorAsync.handler",
    "route": "/errorAsync",
    "method": "get"
}
17:31:45.687:  Registering request handler {
    "type": "kettle.tests.error.plainRequestError.handler",
    "route": "/plainRequestError",
    "method": "get"
}
17:31:45.687:  Opening Kettle Server on port 8081
17:31:45.687:  Kettle Server cmeckh6s-7796 is listening on port 8081
17:31:45.688:  Sending a GET request to: http://127.0.0.1:8081/plainRequestError
17:31:45.689:  Invoking handler kettle.tests.error.plainRequestError.handler for route /plainRequestError with expectedGrade kettle.request.http
17:31:45.696:  Kettle server allocated request object with type kettle.tests.error.plainRequestError.handler
17:31:45.699:  Stopping Kettle Server cmeckh6s-7796 on port 8081
17:31:45.699:  Kettle Server cmeckh6s-7796 on port 8081 is stopped
17:31:45.720:  Successfully queued test Bad config: missing handler test
17:31:45.720:  jq: Test concluded - Module "kettle.tests.error.config tests" Test name "Plaintext response error test": 2/2 passed - PASS
17:31:45.745:  Initializing the Express app
17:31:45.745:  Initializing the HTTP server
17:31:45.747:  Registering request handler {
    "type": "kettle.tests.badRequest.missing.handler",
    "route": "/",
    "method": "get"
}
17:31:45.747:  Opening Kettle Server on port 8081
17:31:45.748:  Kettle Server cmeckh6s-7940 is listening on port 8081
17:31:45.749:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.760:  Invoking handler kettle.tests.badRequest.missing.handler for route / with expectedGrade kettle.request.http
17:31:45.760:  ASSERTION FAILED: Error in Kettle application definition - couldn't load handler kettle.tests.badRequest.missing.handler and gradeNames [] to a component derived from kettle.request - got defaults of undefined
17:31:45.762:  Stopping Kettle Server cmeckh6s-7940 on port 8081
17:31:45.762:  Kettle Server cmeckh6s-7940 on port 8081 is stopped
17:31:45.782:  Successfully queued test Bad config: missing handler type test
17:31:45.782:  jq: Test concluded - Module "kettle.tests.badRequest.missing.handler.config.mergedConfig tests" Test name "Bad config: missing handler test": 3/3 passed - PASS
17:31:45.813:  Initializing the Express app
17:31:45.814:  Initializing the HTTP server
17:31:45.817:  Registering request handler {
    "type": null,
    "route": "/",
    "method": "get"
}
17:31:45.817:  Opening Kettle Server on port 8081
17:31:45.818:  Kettle Server cmeckh6s-8066 is listening on port 8081
17:31:45.819:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.821:  ASSERTION FAILED: Error in Kettle application definition - handler {
    "method": "get",
    "type": null,
    "route": "/",
    "keys": [],
    "regexp": {
        "keys": []
    }
} must have a request grade name registered as member "type"
17:31:45.823:  Stopping Kettle Server cmeckh6s-8066 on port 8081
17:31:45.823:  Kettle Server cmeckh6s-8066 on port 8081 is stopped
17:31:45.856:  Successfully queued test Bad config: missing handler test
17:31:45.856:  jq: Test concluded - Module "kettle.tests.badRequest.missing.handlerType.config.mergedConfig tests" Test name "Bad config: missing handler type test": 4/4 passed - PASS
17:31:45.904:  Initializing the Express app
17:31:45.905:  Initializing the HTTP server
17:31:45.908:  Registering request handler {
    "type": "kettle.tests.badRequest.throwing.handler",
    "route": "/",
    "method": "get"
}
17:31:45.908:  Opening Kettle Server on port 8081
17:31:45.909:  Kettle Server cmeckh6s-8192 is listening on port 8081
17:31:45.910:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.912:  Invoking handler kettle.tests.badRequest.throwing.handler for route / with expectedGrade kettle.request.http
17:31:45.920:  Kettle server allocated request object with type kettle.tests.badRequest.throwing.handler
17:31:45.924:  Stopping Kettle Server cmeckh6s-8192 on port 8081
17:31:45.924:  Kettle Server cmeckh6s-8192 on port 8081 is stopped
17:31:45.944:  Successfully queued test Bad config: missing middleware test
17:31:45.944:  jq: Test concluded - Module "kettle.tests.badRequest.throwing.handler.config.mergedConfig tests" Test name "Bad config: missing handler test": 3/3 passed - PASS
17:31:45.974:  Initializing the Express app
17:31:45.975:  Initializing the HTTP server
17:31:45.978:  Registering request handler {
    "type": "kettle.tests.badRequest.middleware.missing.handler",
    "route": "/",
    "method": "get"
}
17:31:45.978:  Opening Kettle Server on port 8081
17:31:45.978:  Kettle Server cmeckh6s-8339 is listening on port 8081
17:31:45.980:  Sending a GET request to: http://127.0.0.1:8081/
17:31:45.990:  Invoking handler kettle.tests.badRequest.middleware.missing.handler for route / with expectedGrade kettle.request.http
17:31:45.998:  Kettle server allocated request object with type kettle.tests.badRequest.middleware.missing.handler
17:31:45.999:  ASSERTION FAILED: Couldn't resolve reference {middlewareHolder}.missingMiddleware from member "middleware" of record {
    "middleware": "{middlewareHolder}.missingMiddleware"
} to a middleware component for a kettle.tests.badRequest.middleware.missing.handler requestMiddleware  entry: got undefined
17:31:45.999:  Current activity: 
17:31:45.999:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.badRequest.middleware.missing.handler id: cmeckh6s-8410" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.badRequest.middleware.missing.handler"]} at path serverEnvironment-cmeckh6s-8285.tests.configuration.server.app.requests.request
17:31:46.001:  Unhandled promise rejection: {
    "isError": true,
    "message": "Couldn't resolve reference {middlewareHolder}.missingMiddleware from member \"middleware\" of record "
}
17:31:46.004:  Stopping Kettle Server cmeckh6s-8339 on port 8081
17:31:46.005:  Kettle Server cmeckh6s-8339 on port 8081 is stopped
17:31:46.027:  Successfully queued test Bad config: bad middleware test
17:31:46.027:  jq: Test concluded - Module "kettle.tests.badRequest.middleware.missing.config.mergedConfig tests" Test name "Bad config: missing middleware test": 4/4 passed - PASS
17:31:46.051:  Initializing the Express app
17:31:46.051:  Initializing the HTTP server
17:31:46.053:  Registering request handler {
    "type": "kettle.tests.badRequest.middleware.bad.handler",
    "route": "/",
    "method": "get"
}
17:31:46.053:  Opening Kettle Server on port 8081
17:31:46.054:  Kettle Server cmeckh6s-8485 is listening on port 8081
17:31:46.054:  Sending a GET request to: http://127.0.0.1:8081/
17:31:46.055:  Invoking handler kettle.tests.badRequest.middleware.bad.handler for route / with expectedGrade kettle.request.http
17:31:46.065:  Kettle server allocated request object with type kettle.tests.badRequest.middleware.bad.handler
17:31:46.065:  ASSERTION FAILED: Middleware component {
    "typeName": "kettle.tests.badRequest.bad.middleware",
    "id": "cmeckh6s-8557",
    "lifecycleStatus": "treeConstructed",
    "destroy": { Function
        
    },
    "options": {
        "gradeNames": [
            "fluid.component",
            "kettle.middleware",
            "kettle.plainMiddleware",
            "kettle.tests.badRequest.bad.middleware"
        ],
        "events": {
            "onCreate": "promise",
            "onDestroy": "promise",
            "afterDestroy": "promise"
        },
        "invokers": {
            "handle": {
                "func": undefined,
                "funcName": "kettle.plainMiddleware.resolve",
                "listener": undefined,
                "this": undefined,
                "method": undefined,
                "changePath": undefined,
                "value": undefined,
                "componentSource": "kettle.plainMiddleware",
                "args": [
                    "{that}",
                    "{arguments}.0",
                    " .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars] with type kettle.tests.badRequest.bad.middleware is improperly configured - an option named "middleware" of function type is required - got undefined
17:31:46.065:  Current activity: 
17:31:46.065:      while invoking invoker with name handle and record {
    "func": undefined,
    "funcName": "kettle.plainMiddleware.resolve",
    "listener": undefined,
    "this": undefined,
    "method": undefined,
    "changePath": undefined,
    "value": undefined,
    "componentSource": "kettle.plainMiddleware",
    "args": [
        "{that}",
        "{arguments}.0",
        "{plainMiddleware}.options.asyncMiddleware"
    ]
} holding component component { typeName: "kettle.tests.badRequest.bad.middleware id: cmeckh6s-8557" gradeNames: ["kettle.middleware","kettle.plainMiddleware","kettle.tests.badRequest.bad.middleware"]} at path serverEnvironment-cmeckh6s-8431.tests.configuration.server.app.requests.request.badMiddleware
17:31:46.065:      while firing to listener to event named onCreate of component component { typeName: "kettle.tests.badRequest.middleware.bad.handler id: cmeckh6s-8556" gradeNames: ["kettle.request","kettle.request.http","kettle.tests.badRequest.middleware.bad.handler"]} at path serverEnvironment-cmeckh6s-8431.tests.configuration.server.app.requests.request
17:31:46.068:  Unhandled promise rejection: {
    "isError": true,
    "message": "Middleware component "
}
17:31:46.069:  Stopping Kettle Server cmeckh6s-8485 on port 8081
17:31:46.069:  Kettle Server cmeckh6s-8485 on port 8081 is stopped
17:31:46.089:  Successfully queued test Bad config: static middleware with no path test
17:31:46.089:  jq: Test concluded - Module "kettle.tests.badRequest.middleware.bad.config.mergedConfig tests" Test name "Bad config: bad middleware test": 4/4 passed - PASS
17:31:46.113:  Initializing the Express app
17:31:46.114:  Initializing the HTTP server
17:31:46.115:  Registering request handler {
    "type": "kettle.tests.badRequest.static.nopath.handler",
    "route": "/",
    "method": "get"
}
17:31:46.116:  Opening Kettle Server on port 8081
17:31:46.116:  Kettle Server cmeckh6s-8635 is listening on port 8081
17:31:46.117:  Sending a GET request to: http://127.0.0.1:8081/
17:31:46.118:  Invoking handler kettle.tests.badRequest.static.nopath.handler for route / with expectedGrade kettle.request.http
17:31:46.125:  ASSERTION FAILED: Static middleware must have a root path configured to serve options - got undefined
17:31:46.125:  Current activity: 
17:31:46.125:      while constructing component of type kettle.middleware.static at path serverEnvironment-cmeckh6s-8581.tests.configuration.server.app.requests.request.badStatic
17:31:46.127:  Stopping Kettle Server cmeckh6s-8635 on port 8081
17:31:46.127:  Kettle Server cmeckh6s-8635 on port 8081 is stopped
17:31:46.157:  Successfully queued test Bad request: bad URL-encoded request parameter
17:31:46.157:  jq: Test concluded - Module "kettle.tests.badRequest.static.nopath.config.mergedConfig tests" Test name "Bad config: static middleware with no path test": 3/3 passed - PASS
17:31:46.184:  Initializing the Express app
17:31:46.185:  Initializing the HTTP server
17:31:46.186:  Registering request handler {
    "type": "kettle.tests.HTTPMethods.get.handler",
    "route": "/route/:key",
    "method": "get"
}
17:31:46.187:  Opening Kettle Server on port 8081
17:31:46.187:  Kettle Server cmeckh6s-8788 is listening on port 8081
17:31:46.188:  Sending a GET request to: http://127.0.0.1:8081/route/%ZZ
17:31:46.199:  Stopping Kettle Server cmeckh6s-8788 on port 8081
17:31:46.199:  Kettle Server cmeckh6s-8788 on port 8081 is stopped
17:31:46.219:  Successfully queued test Good request: bad URL-encoded request parameter
17:31:46.219:  jq: Test concluded - Module "kettle.tests.badRequest.badURL.config.mergedConfig tests" Test name "Bad request: bad URL-encoded request parameter": 3/3 passed - PASS
17:31:46.245:  Initializing the Express app
17:31:46.245:  Initializing the HTTP server
17:31:46.248:  Registering request handler {
    "type": "kettle.tests.goodRequest.emptyParameter.handler",
    "route": "/route/:key?",
    "method": "get"
}
17:31:46.248:  Opening Kettle Server on port 8081
17:31:46.249:  Kettle Server cmeckh6s-8914 is listening on port 8081
17:31:46.250:  Sending a GET request to: http://127.0.0.1:8081/route
17:31:46.251:  Invoking handler kettle.tests.goodRequest.emptyParameter.handler for route /route/:key? with expectedGrade kettle.request.http
17:31:46.258:  Kettle server allocated request object with type kettle.tests.goodRequest.emptyParameter.handler
17:31:46.261:  Stopping Kettle Server cmeckh6s-8914 on port 8081
17:31:46.261:  Kettle Server cmeckh6s-8914 on port 8081 is stopped
17:31:46.282:  Successfully queued test Good request: double handling test
17:31:46.282:  jq: Test concluded - Module "kettle.tests.goodRequest.emptyParameter.config.mergedConfig tests" Test name "Good request: bad URL-encoded request parameter": 2/2 passed - PASS
17:31:46.305:  Initializing the Express app
17:31:46.306:  Initializing the HTTP server
17:31:46.308:  Registering request handler {
    "type": "kettle.tests.goodRequest.doubleResponse.handler",
    "route": "/",
    "method": "get"
}
17:31:46.308:  Opening Kettle Server on port 8081
17:31:46.308:  Kettle Server cmeckh6s-9055 is listening on port 8081
17:31:46.309:  Sending a GET request to: http://127.0.0.1:8081/
17:31:46.310:  Invoking handler kettle.tests.goodRequest.doubleResponse.handler for route / with expectedGrade kettle.request.http
17:31:46.317:  Kettle server allocated request object with type kettle.tests.goodRequest.doubleResponse.handler
17:31:46.318:  Error in forwarding result {
    "message": "Second response"
} to promise resolve: promise has already received resolve
17:31:46.322:  Stopping Kettle Server cmeckh6s-9055 on port 8081
17:31:46.322:  Kettle Server cmeckh6s-9055 on port 8081 is stopped
17:31:46.343:  Successfully queued test Good request: options request
17:31:46.343:  jq: Test concluded - Module "kettle.tests.goodRequest.doubleResponse.config.mergedConfig tests" Test name "Good request: double handling test": 2/2 passed - PASS
17:31:46.407:  Initializing the Express app
17:31:46.412:  Initializing the HTTP server
17:31:46.422:  Registering request handler {
    "type": "kettle.tests.goodRequest.options.handler",
    "method": "options",
    "route": "/"
}
17:31:46.423:  Opening Kettle Server on port 8081
17:31:46.424:  Kettle Server cmeckh6s-9199 is listening on port 8081
17:31:46.427:  Sending a OPTIONS request to: http://127.0.0.1:8081/
17:31:46.459:  Invoking handler kettle.tests.goodRequest.options.handler for route / with expectedGrade kettle.request.http
17:31:46.474:  Kettle server allocated request object with type kettle.tests.goodRequest.options.handler
17:31:46.481:  Stopping Kettle Server cmeckh6s-9199 on port 8081
17:31:46.482:  Kettle Server cmeckh6s-9199 on port 8081 is stopped
17:31:46.525:  Successfully queued test Good request: mismatched route
17:31:46.526:  jq: Test concluded - Module "kettle.tests.goodRequest.options.config.mergedConfig tests" Test name "Good request: options request": 2/2 passed - PASS
17:31:46.567:  Initializing the Express app
17:31:46.567:  Initializing the HTTP server
17:31:46.569:  Skipping empty handler with key testHandler for app { typeName: "kettle.app id: cmeckh6s-9346" gradeNames: ["kettle.app"]}
17:31:46.569:  Opening Kettle Server on port 8081
17:31:46.569:  Kettle Server cmeckh6s-9343 is listening on port 8081
17:31:46.570:  Sending a GET request to: http://127.0.0.1:8081/route
17:31:46.571:  Kettle server getDispatcher found no matching handlers, continuing
17:31:46.573:  Stopping Kettle Server cmeckh6s-9343 on port 8081
17:31:46.573:  Kettle Server cmeckh6s-9343 on port 8081 is stopped
17:31:46.592:  Successfully queued test Good request: gradeNames for handler
17:31:46.592:  jq: Test concluded - Module "kettle.tests.goodRequest.mismatchRoute.config.mergedConfig tests" Test name "Good request: mismatched route": 2/2 passed - PASS
17:31:46.616:  Initializing the Express app
17:31:46.617:  Initializing the HTTP server
17:31:46.619:  Registering request handler {
    "type": "kettle.tests.goodRequest.gradeNames.handler",
    "gradeNames": "kettle.tests.goodRequest.gradeNames.mixin",
    "method": "get",
    "route": "/"
}
17:31:46.619:  Opening Kettle Server on port 8081
17:31:46.619:  Kettle Server cmeckh6s-9463 is listening on port 8081
17:31:46.620:  Sending a GET request to: http://127.0.0.1:8081/
17:31:46.621:  Invoking handler kettle.tests.goodRequest.gradeNames.handler for route / with expectedGrade kettle.request.http
17:31:46.630:  Kettle server allocated request object with type kettle.tests.goodRequest.gradeNames.handler
17:31:46.636:  Stopping Kettle Server cmeckh6s-9463 on port 8081
17:31:46.636:  Kettle Server cmeckh6s-9463 on port 8081 is stopped
17:31:46.663:  Successfully queued test Simple MultiConfig Test
17:31:46.664:  jq: Test concluded - Module "kettle.tests.goodRequest.gradeNames.config.mergedConfig tests" Test name "Good request: gradeNames for handler": 2/2 passed - PASS
17:31:46.728:  Initializing the Express app
17:31:46.728:  Initializing the HTTP server
17:31:46.730:  Initializing the Express app
17:31:46.731:  Initializing the HTTP server
17:31:46.743:  Registering request handler {
    "type": "kettle.tests.multiConfig.target.get.handler",
    "route": "/",
    "method": "get"
}
17:31:46.743:  Opening Kettle Server on port 8088
17:31:46.743:  Registering request handler {
    "type": "kettle.tests.multiConfig.source.get.handler",
    "route": "/",
    "method": "get"
}
17:31:46.744:  Opening Kettle Server on port 8081
17:31:46.744:  Kettle Server cmeckh6s-9605 is listening on port 8088
17:31:46.744:  Kettle Server cmeckh6s-9604 is listening on port 8081
17:31:46.745:  Sending a GET request to: http://127.0.0.1:8081/
17:31:46.746:  Invoking handler kettle.tests.multiConfig.source.get.handler for route / with expectedGrade kettle.request.http
17:31:46.759:  Kettle server allocated request object with type kettle.tests.multiConfig.source.get.handler
17:31:46.760:  DataSource Issuing HTTP request with options {
    "method": "GET",
    "headers": {
        
    },
    "protocol": "http:",
    "hostname": "localhost",
    "port": "8088",
    "pathname": "/",
    "search": "",
    "url": "http://localhost:8088/",
    "termMap": {
        
    },
    "operation": "get",
    "writeMethod": "PUT"
}
17:31:46.763:  Invoking handler kettle.tests.multiConfig.target.get.handler for route / with expectedGrade kettle.request.http
17:31:46.770:  Kettle server allocated request object with type kettle.tests.multiConfig.target.get.handler
17:31:46.778:  Stopping Kettle Server cmeckh6s-9604 on port 8081
17:31:46.778:  Stopping Kettle Server cmeckh6s-9605 on port 8088
17:31:46.778:  Kettle Server cmeckh6s-9604 on port 8081 is stopped
17:31:46.778:  Kettle Server cmeckh6s-9605 on port 8088 is stopped
17:31:46.803:  Successfully queued test Static hosting tests
17:31:46.803:  jq: Test concluded - Module "kettle.tests.multiConfig.head.config tests" Test name "Simple MultiConfig Test": 2/2 passed - PASS
17:31:46.840:  Initializing the Express app
17:31:46.841:  Initializing the HTTP server
17:31:46.842:  Registering request handler {
    "type": "kettle.tests.static.handler",
    "prefix": "/infusion",
    "route": "/*",
    "method": "get"
}
17:31:46.843:  Opening Kettle Server on port 8081
17:31:46.843:  Kettle Server cmeckh6s-9870 is listening on port 8081
17:31:46.844:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.json
17:31:46.844:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.json
17:31:46.846:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:46.854:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:46.860:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:46.866:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:46.876:  Sending a GET request to: http://127.0.0.1:8081/infusion/package.jsonx
17:31:46.877:  Invoking handler kettle.tests.static.handler for route /* with expectedGrade kettle.request.http
17:31:46.884:  Kettle server allocated request object with type kettle.tests.static.handler
17:31:46.892:  Stopping Kettle Server cmeckh6s-9870 on port 8081
17:31:46.892:  Kettle Server cmeckh6s-9870 on port 8081 is stopped
17:31:46.929:  Successfully queued test Multer tests
17:31:46.929:  jq: Test concluded - Module "kettle.tests.static.config tests" Test name "Static hosting tests": 9/9 passed - PASS
17:31:46.999:  Initializing the Express app
17:31:47.000:  Initializing the HTTP server
17:31:47.001:  Registering request handler {
    "type": "kettle.tests.multer.handler.single",
    "route": "/multer-single",
    "method": "post"
}
17:31:47.001:  Registering request handler {
    "type": "kettle.tests.multer.handler.array",
    "route": "/multer-array",
    "method": "post"
}
17:31:47.002:  Registering request handler {
    "type": "kettle.tests.multer.handler.fields",
    "route": "/multer-fields",
    "method": "post"
}
17:31:47.002:  Registering request handler {
    "type": "kettle.tests.multer.handler.imageOnly",
    "route": "/multer-image-only",
    "method": "post"
}
17:31:47.002:  Registering request handler {
    "type": "kettle.tests.multer.handler.diskStorage",
    "route": "/multer-disk-storage",
    "method": "post"
}
17:31:47.002:  Opening Kettle Server on port 8081
17:31:47.002:  Kettle Server cmeckh6s-10111 is listening on port 8081
17:31:47.003:  Sending a POST request to: http://127.0.0.1:8081/multer-single
17:31:47.007:  Invoking handler kettle.tests.multer.handler.single for route /multer-single with expectedGrade kettle.request.http
17:31:47.014:  Kettle server allocated request object with type kettle.tests.multer.handler.single
17:31:47.026:  Sending a POST request to: http://127.0.0.1:8081/multer-array
17:31:47.028:  Invoking handler kettle.tests.multer.handler.array for route /multer-array with expectedGrade kettle.request.http
17:31:47.035:  Kettle server allocated request object with type kettle.tests.multer.handler.array
17:31:47.044:  Sending a POST request to: http://127.0.0.1:8081/multer-array
17:31:47.046:  Invoking handler kettle.tests.multer.handler.array for route /multer-array with expectedGrade kettle.request.http
17:31:47.053:  Kettle server allocated request object with type kettle.tests.multer.handler.array
17:31:47.062:  Sending a POST request to: http://127.0.0.1:8081/multer-fields
17:31:47.064:  Invoking handler kettle.tests.multer.handler.fields for route /multer-fields with expectedGrade kettle.request.http
17:31:47.072:  Kettle server allocated request object with type kettle.tests.multer.handler.fields
17:31:47.084:  Sending a POST request to: http://127.0.0.1:8081/multer-image-only
17:31:47.086:  Invoking handler kettle.tests.multer.handler.imageOnly for route /multer-image-only with expectedGrade kettle.request.http
17:31:47.093:  Kettle server allocated request object with type kettle.tests.multer.handler.imageOnly
17:31:47.103:  Sending a POST request to: http://127.0.0.1:8081/multer-image-only
17:31:47.105:  Invoking handler kettle.tests.multer.handler.imageOnly for route /multer-image-only with expectedGrade kettle.request.http
17:31:47.111:  Kettle server allocated request object with type kettle.tests.multer.handler.imageOnly
17:31:47.118:  Sending a POST request to: http://127.0.0.1:8081/multer-disk-storage
17:31:47.120:  Invoking handler kettle.tests.multer.handler.diskStorage for route /multer-disk-storage with expectedGrade kettle.request.http
17:31:47.127:  Kettle server allocated request object with type kettle.tests.multer.handler.diskStorage
17:31:47.134:  Stopping Kettle Server cmeckh6s-10111 on port 8081
17:31:47.135:  Kettle Server cmeckh6s-10111 on port 8081 is stopped
17:31:47.155:  Successfully queued test Asynchronous request startup: basic fetch test
17:31:47.155:  jq: Test concluded - Module "kettle.tests.multer.config tests" Test name "Multer tests": 29/29 passed - PASS
17:31:47.188:  Initializing the Express app
17:31:47.189:  Initializing the HTTP server
17:31:47.192:  Registering request handler {
    "type": "kettle.tests.asyncRequest.handler",
    "route": "/",
    "method": "get"
}
17:31:47.192:  Opening Kettle Server on port 8081
17:31:47.192:  Kettle Server cmeckh6s-10444 is listening on port 8081
17:31:47.193:  Sending a GET request to: http://127.0.0.1:8081/
17:31:47.212:  Invoking handler kettle.tests.asyncRequest.handler for route / with expectedGrade kettle.request.http
17:31:47.225:  Kettle server allocated request object with type kettle.tests.asyncRequest.handler
17:31:47.229:  Stopping Kettle Server cmeckh6s-10444 on port 8081
17:31:47.230:  Kettle Server cmeckh6s-10444 on port 8081 is stopped
17:31:47.254:  Successfully queued test Request abort test
17:31:47.254:  jq: Test concluded - Module "kettle.tests.asyncRequest.handler.config.mergedConfig tests" Test name "Asynchronous request startup: basic fetch test": 2/2 passed - PASS
17:31:47.277:  Initializing the Express app
17:31:47.278:  Initializing the HTTP server
17:31:47.279:  Registering request handler {
    "type": "kettle.tests.requestAbort.handler",
    "route": "/",
    "method": "get"
}
17:31:47.280:  Opening Kettle Server on port 8081
17:31:47.280:  Kettle Server cmeckh6s-10616 is listening on port 8081
17:31:47.281:  Sending a GET request to: http://127.0.0.1:8081/
17:31:47.282:  Invoking handler kettle.tests.requestAbort.handler for route / with expectedGrade kettle.request.http
17:31:47.296:  Kettle server allocated request object with type kettle.tests.requestAbort.handler
17:31:47.799:  Error marking thread to request cmeckh6s-10685 which has already been destroyed
17:31:48.301:  Stopping Kettle Server cmeckh6s-10616 on port 8081
17:31:48.301:  Kettle Server cmeckh6s-10616 on port 8081 is stopped
17:31:48.315:  jq: Test concluded - Module "kettle.tests.requestAbort.config.mergedConfig tests" Test name "Request abort test": 2/2 passed - PASS
17:31:48.316:  jq: ***************
17:31:48.316:  jq: All tests concluded: 358/358 total passed in 7894ms - PASS
17:31:48.316:  jq: ***************
----------------------run test done----------------------
----------------------client kraken-js of session----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> kraken-js@2.4.0 test
> tape test/*.js

TAP version 13
# composition
# plugin
ok 1 should not be equal
ok 2 should not be equal
ok 3 Expected 'x-powered-by' to be equal.
ok 4 Expected 'etag' to be equal.
ok 5 Expected 'env' to be equal.
ok 6 Expected 'query parser' to be equal.
ok 7 Expected 'subdomain offset' to be equal.
ok 8 Expected 'trust proxy' to be equal.
ok 9 Expected 'jsonp callback name' to be equal.
ok 10 Expected 'case sensitive routing' to be equal.
ok 11 Expected 'strict routing' to be equal.
ok 12 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:49 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:49 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 13 null
# plugin with mountpath
ok 14 should not be equal
ok 15 should not be equal
ok 16 Expected 'x-powered-by' to be equal.
ok 17 Expected 'etag' to be equal.
ok 18 Expected 'env' to be equal.
ok 19 Expected 'query parser' to be equal.
ok 20 Expected 'subdomain offset' to be equal.
ok 21 Expected 'trust proxy' to be equal.
ok 22 Expected 'jsonp callback name' to be equal.
ok 23 Expected 'case sensitive routing' to be equal.
ok 24 Expected 'strict routing' to be equal.
ok 25 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:49 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:49 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 26 null
# inherited views
ok 27 should be equal
ok 28 should be equal
ok 29 Expected 'x-powered-by' to be equal.
ok 30 Expected 'etag' to be equal.
ok 31 Expected 'env' to be equal.
ok 32 Expected 'query parser' to be equal.
ok 33 Expected 'subdomain offset' to be equal.
ok 34 Expected 'trust proxy' to be equal.
ok 35 Expected 'jsonp callback name' to be equal.
ok 36 Expected 'case sensitive routing' to be equal.
ok 37 Expected 'strict routing' to be equal.
ok 38 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:50 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:50 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 39 null
# late mounting
ok 40 should not be equal
ok 41 should not be equal
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:50 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 42 null
# kraken
# startup without options
ok 43 server started
# startup with basedir
ok 44 server started
# startup with options
ok 45 server started
# startup with custom config directory
ok 46 server started
# mount point
ok 47 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:50 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 48 null
# express route
ok 49 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:50 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 50 null
# startup delay
ok 51 server started
# onKrakenMount
ok 52 app instance exist
ok 53 app is a function
ok 54 length of args is 2
ok 55 bootstrap successful
# server 503 until started
ok 56 server starting
ok 57 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:52 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 58 server is accepting requests
# server 503 until started with custom headers
ok 59 server starting
ok 60 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:53 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 61 server is accepting requests
# startup error
ok 62 server starting
ok 63 server startup failed
ok 64 server is accepting requests
# shutdown
ok 65 server stopped
ok 66 correct exit code
ok 67 server stopped
ok 68 correct exit code
# shutdown headers
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 69 null
ok 70 correct status code.
ok 71 null
ok 72 correct status code.
ok 73 has custom header 1.
ok 74 has custom header 1.
# shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 75 null
ok 76 correct status code.
ok 77 null
ok 78 correct status code.
# override shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 79 null
ok 80 correct status code.
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 81 null
ok 82 correct status code.
# shutdown should only emit once, ever
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 83 no error.
ok 84 correct status code.
ok 85 shutdown emitted once.
# middleware
# no config
# multipart
ok 86 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "POST / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 87 should be truthy
ok 88 should be equal
ok 89 should be equal
ok 90 should be equal
ok 91 should be equal
ok 92 server is accepting requests
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 93 null
# settings
# custom
ok 94 should be equal
ok 95 should be equal
ok 96 should be equal
ok 97 should be equivalent
# should resolve from config (shortstop-resolve)
ok 98 should be equal
# should not clobber `trust proxy fn`
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:55 +0000] "GET /ip HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 99 null
# views
# renderer
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 100 null
# renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 101 null
# alt renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 102 null
# configured renderer function
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 103 null
# configured renderer factory function
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 104 null
# configured renderer exported function
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 105 null
# custom view implementation
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 106 null
# custom renderer module implementation
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 107 null
# built-in shim
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 108 null
# built-in shim with precompiled templates
::ffff:127.0.0.1 - - [25/Aug/2022:17:31:56 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 109 null

1..109
# tests 109
# pass  109

# ok

npm uninstall

up to date, audited 432 packages in 3s

44 packages are looking for funding
  run `npm fund` for details

14 vulnerabilities (3 low, 6 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> kraken-js@2.4.0 test
> tape test/*.js

TAP version 13
# composition
# plugin
ok 1 should not be equal
ok 2 should not be equal
ok 3 Expected 'x-powered-by' to be equal.
ok 4 Expected 'etag' to be equal.
ok 5 Expected 'env' to be equal.
ok 6 Expected 'query parser' to be equal.
ok 7 Expected 'subdomain offset' to be equal.
ok 8 Expected 'trust proxy' to be equal.
ok 9 Expected 'jsonp callback name' to be equal.
ok 10 Expected 'case sensitive routing' to be equal.
ok 11 Expected 'strict routing' to be equal.
ok 12 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 13 null
# plugin with mountpath
ok 14 should not be equal
ok 15 should not be equal
ok 16 Expected 'x-powered-by' to be equal.
ok 17 Expected 'etag' to be equal.
ok 18 Expected 'env' to be equal.
ok 19 Expected 'query parser' to be equal.
ok 20 Expected 'subdomain offset' to be equal.
ok 21 Expected 'trust proxy' to be equal.
ok 22 Expected 'jsonp callback name' to be equal.
ok 23 Expected 'case sensitive routing' to be equal.
ok 24 Expected 'strict routing' to be equal.
ok 25 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 26 null
# inherited views
ok 27 should be equal
ok 28 should be equal
ok 29 Expected 'x-powered-by' to be equal.
ok 30 Expected 'etag' to be equal.
ok 31 Expected 'env' to be equal.
ok 32 Expected 'query parser' to be equal.
ok 33 Expected 'subdomain offset' to be equal.
ok 34 Expected 'trust proxy' to be equal.
ok 35 Expected 'jsonp callback name' to be equal.
ok 36 Expected 'case sensitive routing' to be equal.
ok 37 Expected 'strict routing' to be equal.
ok 38 Expected 'query parser fn' to be equal.
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 39 null
# late mounting
ok 40 should not be equal
ok 41 should not be equal
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /plugin HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 42 null
# kraken
# startup without options
ok 43 server started
# startup with basedir
ok 44 server started
# startup with options
ok 45 server started
# startup with custom config directory
ok 46 server started
# mount point
ok 47 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 48 null
# express route
ok 49 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:01 +0000] "GET /foo/ HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 50 null
# startup delay
ok 51 server started
# onKrakenMount
ok 52 app instance exist
ok 53 app is a function
ok 54 length of args is 2
ok 55 bootstrap successful
# server 503 until started
ok 56 server starting
ok 57 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:03 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 58 server is accepting requests
# server 503 until started with custom headers
ok 59 server starting
ok 60 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:04 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 61 server is accepting requests
# startup error
ok 62 server starting
ok 63 server startup failed
ok 64 server is accepting requests
# shutdown
ok 65 server stopped
ok 66 correct exit code
ok 67 server stopped
ok 68 correct exit code
# shutdown headers
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 69 null
ok 70 correct status code.
ok 71 null
ok 72 correct status code.
ok 73 has custom header 1.
ok 74 has custom header 1.
# shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 75 null
ok 76 correct status code.
ok 77 null
ok 78 correct status code.
# override shutdown on uncaught
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET /uncaught HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 79 null
ok 80 correct status code.
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 81 null
ok 82 correct status code.
# shutdown should only emit once, ever
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 83 no error.
ok 84 correct status code.
ok 85 shutdown emitted once.
# middleware
# no config
# multipart
ok 86 server started
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "POST / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 87 should be truthy
ok 88 should be equal
ok 89 should be equal
ok 90 should be equal
ok 91 should be equal
ok 92 server is accepting requests
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 93 null
# settings
# custom
ok 94 should be equal
ok 95 should be equal
ok 96 should be equal
ok 97 should be equivalent
# should resolve from config (shortstop-resolve)
ok 98 should be equal
# should not clobber `trust proxy fn`
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:06 +0000] "GET /ip HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 99 null
# views
# renderer
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 100 null
# renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 101 null
# alt renderer with consolidate
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 102 null
# configured renderer function
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 103 null
# configured renderer factory function
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 104 null
# configured renderer exported function
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 105 null
# custom view implementation
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 106 null
# custom renderer module implementation
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 107 null
# built-in shim
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 108 null
# built-in shim with precompiled templates
::ffff:127.0.0.1 - - [25/Aug/2022:17:32:07 +0000] "GET / HTTP/1.1" - - "-" "node-superagent/3.8.3"
ok 109 null

1..109
# tests 109
# pass  109

# ok

----------------------run test done----------------------
----------------------client routing-controllers of session----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.questionErrorMiddleware (test/fakes/global-options/FakeService.ts:25:13)

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

npm uninstall

up to date, audited 1000 packages in 5s

49 packages are looking for funding
  run `npm fund` for details

26 vulnerabilities (9 moderate, 14 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> routing-controllers@0.9.0 test
> jest --verbose --runInBand

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.postMiddleware (test/fakes/global-options/FakeService.ts:30:13)

  console.log
    fake service!

      at FakeService.questionMiddleware (test/fakes/global-options/FakeService.ts:20:13)

  console.log
    fake service!

      at FakeService.questionErrorMiddleware (test/fakes/global-options/FakeService.ts:25:13)

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

  console.warn
    No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.

      at ValidationExecutor.execute (node_modules/src/validation/ValidationExecutor.ts:50:21)
      at Validator.coreValidate (node_modules/src/validation/Validator.ts:30:18)
      at Validator.<anonymous> (node_modules/src/validation/Validator.ts:72:35)
      at step (node_modules/tslib/tslib.js:141:27)
      at Object.next (node_modules/tslib/tslib.js:122:57)
      at node_modules/tslib/tslib.js:115:75

----------------------run test done----------------------
----------------------client server of session----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> server@1.0.37 pretest
> cp .env.demo .env


> server@1.0.37 test
> jest --coverage --forceExit

---------------------------|---------|----------|---------|---------|-------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------------|---------|----------|---------|---------|-------------------
All files                  |   90.29 |    77.27 |   89.02 |   92.69 |                   
 server                    |     100 |      100 |     100 |     100 |                   
  server.js                |     100 |      100 |     100 |     100 |                   
 server/error              |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/examples/supertest |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/compress   |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/express    |   85.29 |       50 |     100 |   86.66 |                   
  index.js                 |   85.29 |       50 |     100 |   86.66 | 47,64-66          
 server/plugins/favicon    |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/final      |     100 |    86.66 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |    86.66 |     100 |     100 | 8,26              
 server/plugins/log        |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/parser     |   82.85 |    56.25 |     100 |     100 |                   
  index.js                 |   82.85 |    56.25 |     100 |     100 | 40-82             
 server/plugins/security   |     100 |     62.5 |     100 |     100 |                   
  index.js                 |     100 |     62.5 |     100 |     100 | 51-61             
 server/plugins/session    |   78.57 |       60 |      75 |   84.61 |                   
  index.js                 |   78.57 |       60 |      75 |   84.61 | 37,48             
 server/plugins/socket     |   31.81 |       20 |   14.28 |   36.84 |                   
  index.js                 |   31.81 |       20 |   14.28 |   36.84 | 31-32,37,42-59    
 server/plugins/static     |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/reply              |     100 |    91.42 |     100 |     100 |                   
  cookie.js                |     100 |      100 |     100 |     100 |                   
  download.js              |     100 |      100 |     100 |     100 |                   
  end.js                   |     100 |      100 |     100 |     100 |                   
  file.js                  |     100 |      100 |     100 |     100 |                   
  header.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  json.js                  |     100 |      100 |     100 |     100 |                   
  jsonp.js                 |     100 |      100 |     100 |     100 |                   
  redirect.js              |     100 |      100 |     100 |     100 |                   
  render.js                |     100 |      100 |     100 |     100 |                   
  reply.js                 |     100 |    91.42 |     100 |     100 | 47,86,138         
  send.js                  |     100 |      100 |     100 |     100 |                   
  status.js                |     100 |      100 |     100 |     100 |                   
  type.js                  |     100 |      100 |     100 |     100 |                   
 server/router             |   74.28 |     37.5 |      50 |   79.68 |                   
  del.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  error.js                 |   94.11 |    66.66 |     100 |     100 | 22                
  errors.js                |     100 |      100 |     100 |     100 |                   
  generic.js               |      70 |     37.5 |   66.66 |   82.35 | 30-32             
  get.js                   |     100 |      100 |     100 |     100 |                   
  head.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  index.js                 |     100 |      100 |     100 |     100 |                   
  parse.js                 |     100 |      100 |     100 |     100 |                   
  post.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  put.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  sub.js                   |   22.22 |        0 |       0 |      25 | 4-12              
 server/src/config         |   89.31 |     82.4 |   88.88 |   92.17 |                   
  env.js                   |    91.3 |    83.33 |     100 |     100 | 13,15             
  errors.js                |      90 |        0 |      75 |     100 | 25                
  index.js                 |     100 |       75 |     100 |     100 | 13                
  parse.js                 |   92.75 |    90.72 |     100 |   92.42 | 45,50,64-65,90    
  schema.js                |   54.54 |       20 |     100 |      60 | 17-21             
 server/src/join           |     100 |     87.5 |     100 |     100 |                   
  index.js                 |     100 |     87.5 |     100 |     100 | 36-40             
 server/src/modern         |     100 |      100 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  validate.js              |     100 |      100 |     100 |     100 |                   
 server/test               |   92.47 |    82.97 |   94.73 |   93.82 |                   
  a.js                     |     100 |      100 |     100 |     100 |                   
  port.js                  |   84.61 |       60 |     100 |   83.33 | 14,21             
  run.js                   |   93.58 |    85.71 |   93.75 |   95.58 | 135-138           
---------------------------|---------|----------|---------|---------|-------------------
npm uninstall

up to date, audited 1109 packages in 3s

42 packages are looking for funding
  run `npm fund` for details

21 vulnerabilities (16 moderate, 5 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> server@1.0.37 pretest
> cp .env.demo .env


> server@1.0.37 test
> jest --coverage --forceExit

---------------------------|---------|----------|---------|---------|-------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------------|---------|----------|---------|---------|-------------------
All files                  |   90.15 |    77.27 |   88.41 |   92.69 |                   
 server                    |     100 |      100 |     100 |     100 |                   
  server.js                |     100 |      100 |     100 |     100 |                   
 server/error              |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/examples/supertest |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/compress   |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/express    |   82.35 |       50 |      90 |   86.66 |                   
  index.js                 |   82.35 |       50 |      90 |   86.66 | 47,64-66          
 server/plugins/favicon    |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/final      |     100 |    86.66 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |    86.66 |     100 |     100 | 8,26              
 server/plugins/log        |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/plugins/parser     |   82.85 |    56.25 |     100 |     100 |                   
  index.js                 |   82.85 |    56.25 |     100 |     100 | 40-82             
 server/plugins/security   |     100 |     62.5 |     100 |     100 |                   
  index.js                 |     100 |     62.5 |     100 |     100 | 51-61             
 server/plugins/session    |   78.57 |       60 |      75 |   84.61 |                   
  index.js                 |   78.57 |       60 |      75 |   84.61 | 37,48             
 server/plugins/socket     |   31.81 |       20 |   14.28 |   36.84 |                   
  index.js                 |   31.81 |       20 |   14.28 |   36.84 | 31-32,37,42-59    
 server/plugins/static     |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
 server/reply              |     100 |    91.42 |     100 |     100 |                   
  cookie.js                |     100 |      100 |     100 |     100 |                   
  download.js              |     100 |      100 |     100 |     100 |                   
  end.js                   |     100 |      100 |     100 |     100 |                   
  file.js                  |     100 |      100 |     100 |     100 |                   
  header.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  json.js                  |     100 |      100 |     100 |     100 |                   
  jsonp.js                 |     100 |      100 |     100 |     100 |                   
  redirect.js              |     100 |      100 |     100 |     100 |                   
  render.js                |     100 |      100 |     100 |     100 |                   
  reply.js                 |     100 |    91.42 |     100 |     100 | 47,86,138         
  send.js                  |     100 |      100 |     100 |     100 |                   
  status.js                |     100 |      100 |     100 |     100 |                   
  type.js                  |     100 |      100 |     100 |     100 |                   
 server/router             |   74.28 |     37.5 |      50 |   79.68 |                   
  del.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  error.js                 |   94.11 |    66.66 |     100 |     100 | 22                
  errors.js                |     100 |      100 |     100 |     100 |                   
  generic.js               |      70 |     37.5 |   66.66 |   82.35 | 30-32             
  get.js                   |     100 |      100 |     100 |     100 |                   
  head.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  index.js                 |     100 |      100 |     100 |     100 |                   
  parse.js                 |     100 |      100 |     100 |     100 |                   
  post.js                  |   66.66 |      100 |       0 |   66.66 | 6                 
  put.js                   |   66.66 |      100 |       0 |   66.66 | 6                 
  sub.js                   |   22.22 |        0 |       0 |      25 | 4-12              
 server/src/config         |   89.31 |     82.4 |   88.88 |   92.17 |                   
  env.js                   |    91.3 |    83.33 |     100 |     100 | 13,15             
  errors.js                |      90 |        0 |      75 |     100 | 25                
  index.js                 |     100 |       75 |     100 |     100 | 13                
  parse.js                 |   92.75 |    90.72 |     100 |   92.42 | 45,50,64-65,90    
  schema.js                |   54.54 |       20 |     100 |      60 | 17-21             
 server/src/join           |     100 |     87.5 |     100 |     100 |                   
  index.js                 |     100 |     87.5 |     100 |     100 | 36-40             
 server/src/modern         |     100 |      100 |     100 |     100 |                   
  errors.js                |     100 |      100 |     100 |     100 |                   
  index.js                 |     100 |      100 |     100 |     100 |                   
  validate.js              |     100 |      100 |     100 |     100 |                   
 server/test               |   92.47 |    82.97 |   94.73 |   93.82 |                   
  a.js                     |     100 |      100 |     100 |     100 |                   
  port.js                  |   84.61 |       60 |     100 |   83.33 | 14,21             
  run.js                   |   93.58 |    85.71 |   93.75 |   95.58 | 135-138           
---------------------------|---------|----------|---------|---------|-------------------
----------------------run test done----------------------
sharp
subdir: favicons image-thumbnail npm-icon-gen numjs wa-sticker-formatter
----------------------client favicons of sharp----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> favicons@7.0.0-beta.4 pretest
> npm run lint && npm run fmt-check


> favicons@7.0.0-beta.4 lint
> eslint . --ignore-path .gitignore


> favicons@7.0.0-beta.4 fmt-check
> prettier --check .

Checking formatting...
All matched files use Prettier code style!

> favicons@7.0.0-beta.4 test
> npm run test-only


> favicons@7.0.0-beta.4 test-only
> npm run build && jest


> favicons@7.0.0-beta.4 build
> unbuild

ℹ Building favicons
✔ Build succeed for favicons
  dist/index.cjs (size: 117 kB, exports: config, default, favicons, stream)
  dist/index.mjs (size: 114 kB, exports: config, default, favicons, stream)


=============================== Coverage summary ===============================
Statements   : 0% ( 0/320 )
Branches     : 0% ( 0/186 )
Functions    : 0% ( 0/97 )
Lines        : 0% ( 0/303 )
================================================================================
npm uninstall

removed 1 package, and audited 786 packages in 4s

63 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> favicons@7.0.0-beta.4 pretest
> npm run lint && npm run fmt-check


> favicons@7.0.0-beta.4 lint
> eslint . --ignore-path .gitignore


> favicons@7.0.0-beta.4 fmt-check
> prettier --check .

Checking formatting...
All matched files use Prettier code style!

> favicons@7.0.0-beta.4 test
> npm run test-only


> favicons@7.0.0-beta.4 test-only
> npm run build && jest


> favicons@7.0.0-beta.4 build
> unbuild

ℹ Building favicons
----------------------run test done----------------------
----------------------client image-thumbnail of sharp----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> image-thumbnail@1.0.15 test
> jest

npm uninstall

removed 1 package, and audited 541 packages in 3s

25 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (1 moderate, 2 high, 3 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> image-thumbnail@1.0.15 test
> jest

----------------------run test done----------------------
----------------------client npm-icon-gen of sharp----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> icon-gen@3.0.1 test
> jest

npm uninstall

removed 1 package, and audited 375 packages in 2s

34 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> icon-gen@3.0.1 test
> jest

----------------------run test done----------------------
----------------------client numjs of sharp----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> numjs@0.16.1 test
> grunt test

Running "simplemocha:full" (simplemocha) task
Warning: Cannot read properties of null (reading 'version') Use --force to continue.

Aborted due to warnings.
npm uninstall

removed 1 package, changed 1 package, and audited 1138 packages in 25s

10 packages are looking for funding
  run `npm fund` for details

116 vulnerabilities (5 low, 27 moderate, 69 high, 15 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> numjs@0.16.1 test
> grunt test

Running "simplemocha:full" (simplemocha) task
Warning: Cannot find module 'sharp'
Require stack:
- /data/js-variants/multee/Clients/sharp/numjs/src/images/read.js
- /data/js-variants/multee/Clients/sharp/numjs/src/images/data.js
- /data/js-variants/multee/Clients/sharp/numjs/src/images/index.js
- /data/js-variants/multee/Clients/sharp/numjs/src/index.js
- /data/js-variants/multee/Clients/sharp/numjs/test/mocha/abs.spec.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/grunt-simple-mocha/tasks/simple-mocha.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/grunt/lib/grunt/task.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/grunt/lib/grunt.js
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/grunt/node_modules/grunt-cli/bin/grunt
- /data/js-variants/multee/Clients/sharp/numjs/node_modules/grunt/bin/grunt Use --force to continue.

Aborted due to warnings.
----------------------run test done----------------------
----------------------client wa-sticker-formatter of sharp----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> wa-sticker-formatter@4.3.2 test
> mocha --timeout 60000 -r ts-node/register "tests/**/*.test.ts"

npm uninstall

removed 1 package, and audited 456 packages in 4s

88 packages are looking for funding
  run `npm fund` for details

16 vulnerabilities (6 moderate, 8 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> wa-sticker-formatter@4.3.2 test
> mocha --timeout 60000 -r ts-node/register "tests/**/*.test.ts"

----------------------run test done----------------------
yeoman-generator
subdir: generator-cxcloud generator-nuxeo generator-py generator-tabris-js sfdx-plugin-generate
----------------------client generator-cxcloud of yeoman-generator----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> generator-cxcloud@0.6.3 pretest
> eslint .


> generator-cxcloud@0.6.3 test
> jest

  console.error node_modules/jest-jasmine2/build/jasmine/Env.js:248
    Unhandled error

  console.error node_modules/jest-jasmine2/build/jasmine/Env.js:249
    Error: Current environment doesn't provides some necessary feature this generator needs.
        at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:259:13)
        at new Object.<anonymous>.module.exports (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/generators/app/index.js:27:18)
        at Environment.instantiate (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/yeoman-test/node_modules/yeoman-environment/lib/environment.js:427:12)
        at Environment.create (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/yeoman-test/node_modules/yeoman-environment/lib/environment.js:405:17)
        at RunContext.Object.<anonymous>.RunContext._run (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/yeoman-test/lib/run-context.js:92:29)
        at RunContext.<anonymous> (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/yeoman-test/lib/run-context.js:60:10)
        at /data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/lodash/lodash.js:5118:35
        at /data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/yeoman-test/lib/index.js:94:5
        at next (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/rimraf/rimraf.js:75:7)
        at CB (/data/js-variants/multee/Clients/yeoman-generator/generator-cxcloud/node_modules/rimraf/rimraf.js:111:9)

npm uninstall

added 4 packages, removed 5 packages, changed 19 packages, and audited 1332 packages in 11s

81 vulnerabilities (1 low, 35 moderate, 27 high, 18 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> generator-cxcloud@0.6.3 pretest
> eslint .


> generator-cxcloud@0.6.3 test
> jest

----------------------run test done----------------------
----------------------client generator-nuxeo of yeoman-generator----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> generator-nuxeo@3.0.1 test
> gulp test

[17:38:18] Using gulpfile /data/js-variants/multee/Clients/yeoman-generator/generator-nuxeo/gulpfile.js
[17:38:18] Starting 'test'...
[17:38:18] Starting 'taskPreTest'...
[17:38:18] gulp-debug: generators/app/index.js
[17:38:19] gulp-debug: generators/app/nuxeo-base.js
[17:38:19] gulp-debug: generators/app/nuxeo-folder.js
[17:38:19] gulp-debug: generators/app/nuxeo-helper.js
[17:38:19] gulp-debug: generators/app/nuxeo-init-meta.js
[17:38:19] gulp-debug: generators/app/nuxeo-module.js
[17:38:19] gulp-debug: generators/app/nuxeo-version.js
[17:38:19] gulp-debug: generators/hotreload/configure-delegate.js
[17:38:19] gulp-debug: generators/hotreload/configure.js
[17:38:19] gulp-debug: generators/hotreload/hotreload-delegate.js
[17:38:19] gulp-debug: generators/hotreload/hotreload.js
[17:38:19] gulp-debug: generators/hotreload/index.js
[17:38:19] gulp-debug: generators/project/index.js
[17:38:19] gulp-debug: generators/project/maven.js
[17:38:19] gulp-debug: generators/project/release-delegate.js
[17:38:19] gulp-debug: generators/project/status-delegate.js
[17:38:19] gulp-debug: generators/sample/github-provider.js
[17:38:19] gulp-debug: generators/sample/index.js
[17:38:19] gulp-debug: generators/studio/connect.js
[17:38:19] gulp-debug: generators/studio/export-delegate.js
[17:38:19] gulp-debug: generators/studio/import-delegate.js
[17:38:19] gulp-debug: generators/studio/index.js
[17:38:19] gulp-debug: generators/studio/link-delegate.js
[17:38:19] gulp-debug: generators/studio/maven.js
[17:38:19] gulp-debug: generators/studio/release-delegate.js
[17:38:19] gulp-debug: generators/studio/studio.js
[17:38:19] gulp-debug: generators/studio/unlink-delegate.js
[17:38:19] gulp-debug: generators/synchronize/configure-delegate.js
[17:38:19] gulp-debug: generators/synchronize/configure.js
[17:38:19] gulp-debug: generators/synchronize/index.js
[17:38:19] gulp-debug: generators/synchronize/synchronize-delegate.js
[17:38:19] gulp-debug: generators/hotreload/hotreload/ComposeHotReload.js
[17:38:19] gulp-debug: generators/hotreload/hotreload/LocalHotReload.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/ActionTrigger.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/ComposeSynchronize.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/LocalSynchronize.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/Watcher.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/path_child_finder.js
[17:38:19] gulp-debug: generators/synchronize/synchronize/path_resolver.js
[17:38:19] gulp-debug: utils/cmd-spawner.js
[17:38:19] gulp-debug: utils/conflicter.js
[17:38:19] gulp-debug: utils/deployment-helper.js
[17:38:19] gulp-debug: utils/manifestmf.js
[17:38:19] gulp-debug: utils/maven-settings.js
[17:38:19] gulp-debug: utils/maven.js
[17:38:19] gulp-debug: utils/modules-helper.js
[17:38:19] gulp-debug: utils/nuxeo-package.js
[17:38:19] gulp-debug: utils/nuxeo-version-available.js
[17:38:19] gulp-debug: utils/nuxeo.string.js
[17:38:19] gulp-debug: utils/property-holder.js
[17:38:19] gulp-debug: utils/recursive-readdirSync.js
[17:38:19] gulp-debug: utils/spinner.js
[17:38:19] gulp-debug: utils/usage.js
[17:38:19] gulp-debug: utils/version-helper.js
[17:38:19] gulp-debug: 54 items
[17:38:19] Finished 'taskPreTest' after 469 ms
[17:38:19] Starting 'taskTest'...
[17:38:19] gulp-debug: test/app.js
[17:38:19] gulp-debug: test/conflicter.js
[17:38:19] gulp-debug: test/connect.js
[17:38:19] gulp-debug: test/constant_template.js
[17:38:19] gulp-debug: test/hotreload-configure.js
[17:38:19] gulp-debug: test/hotreload-hotreload.js
[17:38:19] gulp-debug: test/manifestmf.js
[17:38:19] gulp-debug: test/maven-settings.js
[17:38:19] gulp-debug: test/maven.js
[17:38:19] gulp-debug: test/nuxeo-base.js
[17:38:19] gulp-debug: test/nuxeo-package.js
[17:38:19] gulp-debug: test/nuxeo-version-available.js
[17:38:19] gulp-debug: test/nuxeo-version.js
[17:38:19] gulp-debug: test/prop-holder.js
[17:38:19] gulp-debug: test/sync_lib_test.js
[17:38:19] gulp-debug: test/synchronize.js
[17:38:19] gulp-debug: test/templating.js
[17:38:19] gulp-debug: test/usage-name.js
[17:38:19] gulp-debug: test/version-helper.js
[17:38:19] gulp-debug: 19 items
[17:38:23] The following tasks did not complete: test, taskTest
[17:38:23] Did you forget to signal async completion?
npm uninstall

removed 1 package, and audited 1571 packages in 7s

63 packages are looking for funding
  run `npm fund` for details

48 vulnerabilities (2 low, 15 moderate, 19 high, 12 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> generator-nuxeo@3.0.1 test
> gulp test

[17:38:31] Using gulpfile /data/js-variants/multee/Clients/yeoman-generator/generator-nuxeo/gulpfile.js
[17:38:31] Starting 'test'...
[17:38:31] Starting 'taskPreTest'...
[17:38:32] gulp-debug: generators/app/index.js
[17:38:32] gulp-debug: generators/app/nuxeo-base.js
[17:38:32] gulp-debug: generators/app/nuxeo-folder.js
[17:38:32] gulp-debug: generators/app/nuxeo-helper.js
[17:38:32] gulp-debug: generators/app/nuxeo-init-meta.js
[17:38:32] gulp-debug: generators/app/nuxeo-module.js
[17:38:32] gulp-debug: generators/app/nuxeo-version.js
[17:38:32] gulp-debug: generators/hotreload/configure-delegate.js
[17:38:32] gulp-debug: generators/hotreload/configure.js
[17:38:32] gulp-debug: generators/hotreload/hotreload-delegate.js
[17:38:32] gulp-debug: generators/hotreload/hotreload.js
[17:38:32] gulp-debug: generators/hotreload/index.js
[17:38:32] gulp-debug: generators/project/index.js
[17:38:32] gulp-debug: generators/project/maven.js
[17:38:32] gulp-debug: generators/project/release-delegate.js
[17:38:32] gulp-debug: generators/project/status-delegate.js
[17:38:32] gulp-debug: generators/sample/github-provider.js
[17:38:32] gulp-debug: generators/sample/index.js
[17:38:32] gulp-debug: generators/studio/connect.js
[17:38:32] gulp-debug: generators/studio/export-delegate.js
[17:38:32] gulp-debug: generators/studio/import-delegate.js
[17:38:32] gulp-debug: generators/studio/index.js
[17:38:32] gulp-debug: generators/studio/link-delegate.js
[17:38:32] gulp-debug: generators/studio/maven.js
[17:38:32] gulp-debug: generators/studio/release-delegate.js
[17:38:32] gulp-debug: generators/studio/studio.js
[17:38:32] gulp-debug: generators/studio/unlink-delegate.js
[17:38:32] gulp-debug: generators/synchronize/configure-delegate.js
[17:38:32] gulp-debug: generators/synchronize/configure.js
[17:38:32] gulp-debug: generators/synchronize/index.js
[17:38:32] gulp-debug: generators/synchronize/synchronize-delegate.js
[17:38:32] gulp-debug: generators/hotreload/hotreload/ComposeHotReload.js
[17:38:32] gulp-debug: generators/hotreload/hotreload/LocalHotReload.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/ActionTrigger.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/ComposeSynchronize.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/LocalSynchronize.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/Watcher.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/path_child_finder.js
[17:38:32] gulp-debug: generators/synchronize/synchronize/path_resolver.js
[17:38:32] gulp-debug: utils/cmd-spawner.js
[17:38:32] gulp-debug: utils/conflicter.js
[17:38:32] gulp-debug: utils/deployment-helper.js
[17:38:32] gulp-debug: utils/manifestmf.js
[17:38:32] gulp-debug: utils/maven-settings.js
[17:38:32] gulp-debug: utils/maven.js
[17:38:32] gulp-debug: utils/modules-helper.js
[17:38:32] gulp-debug: utils/nuxeo-package.js
[17:38:32] gulp-debug: utils/nuxeo-version-available.js
[17:38:32] gulp-debug: utils/nuxeo.string.js
[17:38:32] gulp-debug: utils/property-holder.js
[17:38:32] gulp-debug: utils/recursive-readdirSync.js
[17:38:32] gulp-debug: utils/spinner.js
[17:38:32] gulp-debug: utils/usage.js
[17:38:32] gulp-debug: utils/version-helper.js
[17:38:32] gulp-debug: 54 items
[17:38:32] Finished 'taskPreTest' after 457 ms
[17:38:32] Starting 'taskTest'...
[17:38:32] gulp-debug: test/app.js
[17:38:32] gulp-debug: test/conflicter.js
[17:38:32] gulp-debug: test/connect.js
[17:38:32] gulp-debug: test/constant_template.js
[17:38:32] gulp-debug: test/hotreload-configure.js
[17:38:32] gulp-debug: test/hotreload-hotreload.js
[17:38:32] gulp-debug: test/manifestmf.js
[17:38:32] gulp-debug: test/maven-settings.js
[17:38:32] gulp-debug: test/maven.js
[17:38:32] gulp-debug: test/nuxeo-base.js
[17:38:32] gulp-debug: test/nuxeo-package.js
[17:38:32] gulp-debug: test/nuxeo-version-available.js
[17:38:32] gulp-debug: test/nuxeo-version.js
[17:38:32] gulp-debug: test/prop-holder.js
[17:38:32] gulp-debug: test/sync_lib_test.js
[17:38:32] gulp-debug: test/synchronize.js
[17:38:32] gulp-debug: test/templating.js
[17:38:32] gulp-debug: test/usage-name.js
[17:38:32] gulp-debug: test/version-helper.js
[17:38:32] gulp-debug: 19 items
[17:38:33] The following tasks did not complete: test, taskTest
[17:38:33] Did you forget to signal async completion?
----------------------run test done----------------------
----------------------client generator-py of yeoman-generator----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> generator-py@1.7.0 test
> mocha



  generator-py
    1) could generate a python project


  0 passing (399ms)
  1 failing

  1) generator-py
       could generate a python project:
     Uncaught Error: This generator (py:app) requires yeoman-environment at least 3.0.0, current version is 2.10.3, try reinstalling latest version of 'yo' or use '--ignore-version-check' option
      at returnError (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:420:14)
      at BFFGenerator.checkEnvironmentVersion (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:453:11)
      at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:307:12)
      at new BFFGenerator (generators/app/index.js:25:18)
      at Environment.instantiate (node_modules/yeoman-environment/lib/environment.js:673:23)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:645:19)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:138:29)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)



npm uninstall

added 8 packages, removed 22 packages, changed 1 package, and audited 669 packages in 3s

71 packages are looking for funding
  run `npm fund` for details

13 vulnerabilities (3 moderate, 5 high, 5 critical)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> generator-py@1.7.0 test
> mocha



  generator-py
    ✓ could generate a python project (239ms)


  1 passing (242ms)

----------------------run test done----------------------
----------------------client generator-tabris-js of yeoman-generator----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> generator-tabris-js@3.8.0 pretest
> npm run lint


> generator-tabris-js@3.8.0 lint
> eslint --color --f visualstudio --ext .js,.jsx,.ts,.tsx .

no problems

> generator-tabris-js@3.8.0 test
> mocha



  Generator
    creates vanilla JavaScript projects
      1) "before all" hook
    generates tsc-compiled JavaScript/JSX projects
      2) "before all" hook
    generates TypeScript projects
      without mocha tests
        3) "before all" hook
      with mocha tests
        4) "before all" hook

  Generator utilities:
    toAppId
      ✓ translates a single word to lowercase
      ✓ strips spaces, translates to lowercase
      ✓ uses github user name as prefix
      ✓ uses user email name as prefix
    toName
      ✓ replaces periods, dashes, and underscores with spaces, translates to titlecase
      ✓ reduces subsequent spaces to single space
    isValidAppId
      ✓ accepts valid app id, words separated by periods
      ✓ accepts id with two segments
      ✓ rejects id without periods (single word)
      ✓ rejects ids with illegal periods
      ✓ rejects ids with invalid characters
    templateRequiresTsc
      ✓ returns correct values
      ✓ matches template description
    templateSupportsMocha
      ✓ returns correct values
      ✓ matches template folders
    templateRequiresDecorators
      ✓ returns correct values


  16 passing (260ms)
  4 failing

  1) Generator
       creates vanilla JavaScript projects
         "before all" hook:
     Uncaught Error: This generator (tabris-js:app) requires yeoman-environment at least 3.0.0, current version is 2.10.3, try reinstalling latest version of 'yo' or use '--ignore-version-check' option
      at returnError (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:420:14)
      at module.exports.checkEnvironmentVersion (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:453:11)
      at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:307:12)
      at new module.exports (app/generator.js:30:18)
      at Environment.instantiate (node_modules/yeoman-environment/lib/environment.js:673:23)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:645:19)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  2) Generator
       generates tsc-compiled JavaScript/JSX projects
         "before all" hook:
     Uncaught Error: This generator (tabris-js:app) requires yeoman-environment at least 3.0.0, current version is 2.10.3, try reinstalling latest version of 'yo' or use '--ignore-version-check' option
      at returnError (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:420:14)
      at module.exports.checkEnvironmentVersion (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:453:11)
      at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:307:12)
      at new module.exports (app/generator.js:30:18)
      at Environment.instantiate (node_modules/yeoman-environment/lib/environment.js:673:23)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:645:19)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  3) Generator
       generates TypeScript projects
         without mocha tests
           "before all" hook:
     Uncaught Error: This generator (tabris-js:app) requires yeoman-environment at least 3.0.0, current version is 2.10.3, try reinstalling latest version of 'yo' or use '--ignore-version-check' option
      at returnError (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:420:14)
      at module.exports.checkEnvironmentVersion (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:453:11)
      at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:307:12)
      at new module.exports (app/generator.js:30:18)
      at Environment.instantiate (node_modules/yeoman-environment/lib/environment.js:673:23)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:645:19)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  4) Generator
       generates TypeScript projects
         with mocha tests
           "before all" hook:
     Uncaught Error: This generator (tabris-js:app) requires yeoman-environment at least 3.0.0, current version is 2.10.3, try reinstalling latest version of 'yo' or use '--ignore-version-check' option
      at returnError (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:420:14)
      at module.exports.checkEnvironmentVersion (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:453:11)
      at new Generator (/data/js-variants/multee/VariantsDeps/yeoman-generator/variant1/yeoman-generator/lib/index.js:307:12)
      at new module.exports (app/generator.js:30:18)
      at Environment.instantiate (node_modules/yeoman-environment/lib/environment.js:673:23)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:645:19)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)



npm uninstall

removed 1 package, and audited 607 packages in 5s

28 vulnerabilities (8 moderate, 11 high, 9 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
----------------------start run test after uninstall----------------------

> generator-tabris-js@3.8.0 pretest
> npm run lint


> generator-tabris-js@3.8.0 lint
> eslint --color --f visualstudio --ext .js,.jsx,.ts,.tsx .

no problems

> generator-tabris-js@3.8.0 test
> mocha



  Generator
    creates vanilla JavaScript projects
      1) "before all" hook
    generates tsc-compiled JavaScript/JSX projects
      2) "before all" hook
    generates TypeScript projects
      without mocha tests
        3) "before all" hook
      with mocha tests
        4) "before all" hook

  Generator utilities:
    toAppId
      ✓ translates a single word to lowercase
      ✓ strips spaces, translates to lowercase
      ✓ uses github user name as prefix
      ✓ uses user email name as prefix
    toName
      ✓ replaces periods, dashes, and underscores with spaces, translates to titlecase
      ✓ reduces subsequent spaces to single space
    isValidAppId
      ✓ accepts valid app id, words separated by periods
      ✓ accepts id with two segments
      ✓ rejects id without periods (single word)
      ✓ rejects ids with illegal periods
      ✓ rejects ids with invalid characters
    templateRequiresTsc
      ✓ returns correct values
      ✓ matches template description
    templateSupportsMocha
      ✓ returns correct values
      ✓ matches template folders
    templateRequiresDecorators
      ✓ returns correct values


  16 passing (79ms)
  4 failing

  1) Generator
       creates vanilla JavaScript projects
         "before all" hook:
     Uncaught Cannot find module 'yeoman-generator'
Require stack:
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'yeoman-generator'
  Require stack:
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Function.Module._load (node:internal/modules/cjs/loader:804:27)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/generator.js:2:19)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/index.js:7:18)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.get [as tabris-js:app] (node_modules/yeoman-environment/lib/store.js:47:27)
      at Store.get (node_modules/yeoman-environment/lib/store.js:71:39)
      at Environment.get (node_modules/yeoman-environment/lib/environment.js:540:48)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:613:37)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  2) Generator
       generates tsc-compiled JavaScript/JSX projects
         "before all" hook:
     Uncaught Cannot find module 'yeoman-generator'
Require stack:
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'yeoman-generator'
  Require stack:
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Function.Module._load (node:internal/modules/cjs/loader:804:27)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/generator.js:2:19)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/index.js:7:18)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.get [as tabris-js:app] (node_modules/yeoman-environment/lib/store.js:47:27)
      at Store.get (node_modules/yeoman-environment/lib/store.js:71:39)
      at Environment.get (node_modules/yeoman-environment/lib/environment.js:540:48)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:613:37)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  3) Generator
       generates TypeScript projects
         without mocha tests
           "before all" hook:
     Uncaught Cannot find module 'yeoman-generator'
Require stack:
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'yeoman-generator'
  Require stack:
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Function.Module._load (node:internal/modules/cjs/loader:804:27)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/generator.js:2:19)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/index.js:7:18)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.get [as tabris-js:app] (node_modules/yeoman-environment/lib/store.js:47:27)
      at Store.get (node_modules/yeoman-environment/lib/store.js:71:39)
      at Environment.get (node_modules/yeoman-environment/lib/environment.js:540:48)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:613:37)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)

  4) Generator
       generates TypeScript projects
         with mocha tests
           "before all" hook:
     Uncaught Cannot find module 'yeoman-generator'
Require stack:
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'yeoman-generator'
  Require stack:
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/generator.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/app/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/store.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-environment/lib/environment.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js
  - /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/test/generator.test.js
      at Function.Module._resolveFilename (node:internal/modules/cjs/loader:956:15)
      at Function.Module._load (node:internal/modules/cjs/loader:804:27)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/generator.js:2:19)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (app/index.js:7:18)
      at Module._compile (node:internal/modules/cjs/loader:1126:14)
      at Object.Module._extensions..js (node:internal/modules/cjs/loader:1180:10)
      at Module.load (node:internal/modules/cjs/loader:1004:32)
      at Function.Module._load (node:internal/modules/cjs/loader:839:12)
      at Module.require (node:internal/modules/cjs/loader:1028:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.get [as tabris-js:app] (node_modules/yeoman-environment/lib/store.js:47:27)
      at Store.get (node_modules/yeoman-environment/lib/store.js:71:39)
      at Environment.get (node_modules/yeoman-environment/lib/environment.js:540:48)
      at Environment.create (node_modules/yeoman-environment/lib/environment.js:613:37)
      at RunContext._run (node_modules/yeoman-test/lib/run-context.js:92:29)
      at RunContext.<anonymous> (node_modules/yeoman-test/lib/run-context.js:60:10)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/lodash/lodash.js:5118:35
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/yeoman-test/lib/index.js:94:5
      at next (node_modules/rimraf/rimraf.js:83:7)
      at CB (node_modules/rimraf/rimraf.js:119:9)
      at /data/js-variants/multee/Clients/yeoman-generator/generator-tabris-js/node_modules/rimraf/rimraf.js:145:14
      at FSReqCallback.oncomplete (node:fs:206:21)



----------------------run test done----------------------
----------------------client sfdx-plugin-generate of yeoman-generator----------------------
/data/js-variants/multee
----------------------start run test before uninstall----------------------

> @salesforce/plugin-generator@2.0.2 pretest
> sf-compile-test


> @salesforce/plugin-generator@2.0.2 test
> sf-test


[0m[0m
[0m  sfdx:plugin generator[0m

Created sfdx-plugin-org in /tmp/dbab4d3b186cc761e8f1f36a587953b7f7a0783c
  [32m  [32m✔[39m[0m[90m generates an sfdx plugin[0m[31m (2141ms)[0m
  [32m  [32m✔[39m[0m[90m generates a valid package.json[0m
  [32m  [32m✔[39m[0m[90m generates config files[0m
  [32m  [32m✔[39m[0m[90m generates command and tests files[0m


[92m [0m[32m 4 passing[0m[90m (2s)[0m

----------|---------|----------|---------|---------|---------------------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s               
----------|---------|----------|---------|---------|---------------------------------
[32;1mAll files[0m | [32;1m   86.6[0m | [33;1m   53.57[0m | [32;1m    100[0m | [32;1m  88.88[0m | [31;1m                               [0m 
[32;1m app.ts  [0m | [32;1m   86.6[0m | [33;1m   53.57[0m | [32;1m    100[0m | [32;1m  88.88[0m | [31;1m113-114,120,236,259,317-325,331[0m 
----------|---------|----------|---------|---------|---------------------------------

> @salesforce/plugin-generator@2.0.2 posttest
> yarn lint && yarn test:deprecation-policy && yarn test:command-reference

npm uninstall

added 35 packages, changed 1 package, and audited 1254 packages in 4s

133 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
----------------------start run test after uninstall----------------------

> @salesforce/plugin-generator@2.0.2 pretest
> sf-compile-test


> @salesforce/plugin-generator@2.0.2 test
> sf-test


[0m[0m
[0m  sfdx:plugin generator[0m

Created sfdx-plugin-org in /tmp/dd8cde2546524fdddd60fa2f297e2bcd025f8b78
  [32m  [32m✔[39m[0m[90m generates an sfdx plugin[0m[31m (1833ms)[0m
  [32m  [32m✔[39m[0m[90m generates a valid package.json[0m
  [32m  [32m✔[39m[0m[90m generates config files[0m
  [32m  [32m✔[39m[0m[90m generates command and tests files[0m


[92m [0m[32m 4 passing[0m[90m (2s)[0m

----------|---------|----------|---------|---------|---------------------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s               
----------|---------|----------|---------|---------|---------------------------------
[32;1mAll files[0m | [32;1m   86.6[0m | [33;1m   53.57[0m | [32;1m    100[0m | [32;1m  88.88[0m | [31;1m                               [0m 
[32;1m app.ts  [0m | [32;1m   86.6[0m | [33;1m   53.57[0m | [32;1m    100[0m | [32;1m  88.88[0m | [31;1m113-114,120,236,259,317-325,331[0m 
----------|---------|----------|---------|---------|---------------------------------

> @salesforce/plugin-generator@2.0.2 posttest
> yarn lint && yarn test:deprecation-policy && yarn test:command-reference

----------------------run test done----------------------

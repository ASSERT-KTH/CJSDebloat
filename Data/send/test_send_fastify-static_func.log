/data/js-variants/multee
4
fastify-static is testing ./Variants/send/variant4/send
/data/js-variants/multee
************* npm unlink module *************

removed 18 packages, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 460ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 412ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=11.698ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.734ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.132ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.365ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.861ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=73.624ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=45.389ms
        
    ok 7 - dir list default options # time=78.786ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=24.058ms
        
    ok 8 - dir list, custom options # time=32.655ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=33.245ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=7.827ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=7.222ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=7.23ms
        
    ok 9 - dir list html format # time=170.289ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=26.938ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=13.204ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=25.599ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=12.099ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=8.56ms
        
    ok 10 - dir list href nested structure # time=97.39ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=25.938ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=9.826ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=67.529ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=6.881ms
        
    ok 13 - dir list json format # time=15.705ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=5.044ms
        
    ok 14 - dir list json format - extended info # time=25.762ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=16.021ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=19.373ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=24.245ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=4.48ms
        
    ok 18 - dir list on empty dir # time=10.53ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=51.614ms
        
    ok 19 - dir list serve index.html on index option # time=80.008ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=4.215ms
        
    ok 20 - serve a non existent dir and get error # time=11.052ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=3.007ms
        
    ok 21 - serve a non existent dir and get error # time=8.281ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.868ms
        
    ok 22 - dir list with dotfiles allow option # time=11.673ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.992ms
        
    ok 23 - dir list with dotfiles deny option # time=9.899ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=27.468ms
        
    ok 24 - dir list with dotfiles ignore option # time=32.391ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=41.642ms
    
    1..25
    # time=926.877ms
ok 1 - test/dir-list.test.js # time=926.877ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=62.509ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=25.766ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=11.862ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=6.492ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.726ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.058ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.512ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.008ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=6.13ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.486ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=4.384ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=377.244ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=14.334ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.104ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=5.977ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=3.345ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=5.172ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=5.797ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=3.646ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=3.537ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=3.446ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=6.752ms
        
    ok 2 - register /static # time=67.803ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=26.253ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.518ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=3.957ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=4.529ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=2.512ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=3.884ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=4.308ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=2.712ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=2.746ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=2.839ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=10.609ms
        
    ok 3 - register /static/ # time=90.979ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=11.895ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.222ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=4.206ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=4.465ms
        
    ok 4 - register /static and /static2 # time=33.019ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=5.285ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.233ms
        
    ok 5 - payload.filename is set # time=14.902ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.838ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=36.672ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=4.633ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=14.635ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=2.709ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=8.254ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.381ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=4.179ms
        
    ok 9 - serving disabled # time=28.041ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=17.714ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=18.858ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.777ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=13.011ms
        
    ok 10 - sendFile # time=61.599ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.27ms
        
    ok 11 - sendFile disabled # time=8.473ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=5.249ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.79ms
        
    ok 12 - allowedPath option - pathname # time=13.561ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=7.146ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=7.292ms
        
    ok 13 - allowedPath option - request # time=30.013ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=22.707ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=10.232ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=4.549ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=4.077ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=4.012ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=12.792ms
        
    ok 14 - download # time=71.326ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.253ms
        
    ok 15 - sendFile disabled # time=16.44ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.033ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=18.284ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.416ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=16.858ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=59.152ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=20.364ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=6.766ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=16.904ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.492ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.813ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.532ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.434ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.455ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=2.046ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.972ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.663ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.455ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.494ms
        
    ok 22 - errors # time=39.047ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=12.997ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.907ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=6.015ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.571ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.265ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.665ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.224ms
        
    ok 23 - register no prefix # time=39.069ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.008ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.046ms
        
    ok 24 - with fastify-compress # time=28.698ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.447ms
        
    ok 25 - register /static/ with schemaHide true # time=8.671ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.587ms
        
    ok 26 - register /static/ with schemaHide false # time=9.412ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=5.693ms
        
    ok 27 - register /static/ without schemaHide # time=11.38ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.599ms
        
    ok 28 - fastify with exposeHeadRoutes # time=27.172ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=10.532ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=4.196ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.882ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.135ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.852ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.885ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.254ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.514ms
        
    ok 29 - register with wildcard false # time=56.532ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=1.655ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=1.648ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=8.413ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.539ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.73ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.962ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.519ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.225ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.861ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.262ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=7.941ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.152ms
        
    ok 32 - register with wildcard false and alternative index # time=53.886ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=8.259ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=5.622ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=6.183ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.797ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=3.214ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.348ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=1.888ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=2.697ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=10.099ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2.283ms
        
    ok 33 - register /static with wildcard false and alternative index # time=60.135ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.088ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.473ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.553ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.034ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=9.82ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.561ms
        
    ok 34 - register /static with redirect true # time=33.821ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.54ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.615ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.321ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=5.248ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=6.783ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=4.397ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.261ms
        
    ok 35 - register /static with redirect true and wildcard false # time=54.537ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=3.908ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.914ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.815ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.889ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=1.901ms
        
    ok 36 - trailing slash behavior with redirect = false # time=16.446ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=5.872ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.239ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.271ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=15.292ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.459ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=9.134ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=9.361ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=2.465ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.139ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=4.336ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.488ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.615ms
        
    ok 44 - register /static and /static2 without wildcard # time=17.595ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=4.992ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.869ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.489ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.569ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=5.104ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=22.96ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=15.801ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=9.943ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=17.104ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.862ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.082ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=5.44ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.259ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=3.28ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.256ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=10.909ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=13.643ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.334ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.814ms
        
    ok 62 - should not serve index if option is `false` # time=8.419ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=8.213ms
    
    1..63
    # time=1699.528ms
ok 2 - test/static.test.js # time=1699.528ms

1..2
# time=4552.519ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./Variants/send/variant3/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 461ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 418ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=9.99ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.916ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.321ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.333ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.918ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=83.142ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=28.938ms
        
    ok 7 - dir list default options # time=44.364ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.599ms
        
    ok 8 - dir list, custom options # time=29.669ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=36.804ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=7.36ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=5.926ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=5.931ms
        
    ok 9 - dir list html format # time=112.091ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=22.925ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=11.075ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=8.283ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=7.674ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=8.354ms
        
    ok 10 - dir list href nested structure # time=68.557ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=16.993ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=6.919ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=67.427ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=4.499ms
        
    ok 13 - dir list json format # time=11.818ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=4.994ms
        
    ok 14 - dir list json format - extended info # time=17.386ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=20.48ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=21.231ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=20.355ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=3.387ms
        
    ok 18 - dir list on empty dir # time=18.855ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=51.776ms
        
    ok 19 - dir list serve index.html on index option # time=58.765ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=3.04ms
        
    ok 20 - serve a non existent dir and get error # time=11.414ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=3.277ms
        
    ok 21 - serve a non existent dir and get error # time=8.079ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.492ms
        
    ok 22 - dir list with dotfiles allow option # time=11.624ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.98ms
        
    ok 23 - dir list with dotfiles deny option # time=10.607ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.815ms
        
    ok 24 - dir list with dotfiles ignore option # time=8.882ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=21.343ms
    
    1..25
    # time=730.534ms
ok 1 - test/dir-list.test.js # time=730.534ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=51.739ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=8.656ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=6.877ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=5.617ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.125ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=6.017ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.397ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.037ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=6.703ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=4.333ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=8.316ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=310.223ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=42.028ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.112ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=22.714ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=3.537ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=9.602ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.36ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=3.7ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=3.348ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=3.011ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.356ms
        
    ok 2 - register /static # time=113.926ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=16.19ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=5.097ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=7.927ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=4.199ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=2.505ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=5.313ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=7.772ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=4.44ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=4.313ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=4.358ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=7.191ms
        
    ok 3 - register /static/ # time=105.797ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=11.909ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.152ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=3.705ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=12.094ms
        
    ok 4 - register /static and /static2 # time=40.427ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=15.016ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.095ms
        
    ok 5 - payload.filename is set # time=25.27ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.734ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=22.461ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=2.731ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=7.955ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=2.111ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=5.878ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.848ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=5.5ms
        
    ok 9 - serving disabled # time=20.333ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=4.852ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=3.346ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=13.29ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=4.722ms
        
    ok 10 - sendFile # time=32.926ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.051ms
        
    ok 11 - sendFile disabled # time=9.438ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=7.098ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=11.15ms
        
    ok 12 - allowedPath option - pathname # time=33.728ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.781ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.343ms
        
    ok 13 - allowedPath option - request # time=12.634ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=15.378ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=9.794ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.726ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.502ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.063ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=2.847ms
        
    ok 14 - download # time=53.906ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=6.468ms
        
    ok 15 - sendFile disabled # time=20.409ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.553ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=6.741ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.168ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=5.356ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=20.131ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.375ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.459ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=12.093ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.481ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=8.497ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.585ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.45ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.442ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.546ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.546ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.498ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.485ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.498ms
        
    ok 22 - errors # time=39.371ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=6.653ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=6.359ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=5.767ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=2.959ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=2.956ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.134ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.231ms
        
    ok 23 - register no prefix # time=34.407ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.468ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.321ms
        
    ok 24 - with fastify-compress # time=22.242ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=11.657ms
        
    ok 25 - register /static/ with schemaHide true # time=23.77ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.958ms
        
    ok 26 - register /static/ with schemaHide false # time=8.323ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.74ms
        
    ok 27 - register /static/ without schemaHide # time=14.948ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.554ms
        
    ok 28 - fastify with exposeHeadRoutes # time=27.027ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.181ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.7ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.832ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.091ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.791ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.823ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.578ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.44ms
        
    ok 29 - register with wildcard false # time=40.088ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.267ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.76ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=9.124ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.523ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.683ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.953ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.557ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=3.06ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.872ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.174ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.774ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=5.45ms
        
    ok 32 - register with wildcard false and alternative index # time=68.107ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=12.845ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=2.493ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.78ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.493ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=8.632ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.357ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=1.855ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=2.726ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=10.677ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2ms
        
    ok 33 - register /static with wildcard false and alternative index # time=63.936ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.083ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.492ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.522ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=2.961ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=6.959ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=4.497ms
        
    ok 34 - register /static with redirect true # time=31.104ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.498ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.563ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.283ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=7.683ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=6.864ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=7ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.928ms
        
    ok 35 - register /static with redirect true and wildcard false # time=53.92ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=8.66ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.882ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.781ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.006ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=1.899ms
        
    ok 36 - trailing slash behavior with redirect = false # time=20.202ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=5.953ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.176ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.222ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=15.045ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.651ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=9.036ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=20.209ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=8.802ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.667ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=16.023ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=8.908ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.727ms
        
    ok 44 - register /static and /static2 without wildcard # time=24.459ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=5.059ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.966ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.324ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.464ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=7.517ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=11.378ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=16.695ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=9.149ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=9.896ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.788ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.034ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=3.183ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=7.233ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=3.26ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.88ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.951ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=19.266ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.307ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.792ms
        
    ok 62 - should not serve index if option is `false` # time=8.22ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.939ms
    
    1..63
    # time=1590.433ms
ok 2 - test/static.test.js # time=1590.433ms

1..2
# time=2881.635ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./Variants/send/variant2/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 462ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 406ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=6.097ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=1.408ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=1.539ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=1.339ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=0.958ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=83.996ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=23.189ms
        
    ok 7 - dir list default options # time=38.779ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.479ms
        
    ok 8 - dir list, custom options # time=36.802ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=40.194ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=7.152ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=6.304ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=6.043ms
        
    ok 9 - dir list html format # time=139.888ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=29.934ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=14.136ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=10.299ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=7.525ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=11.363ms
        
    ok 10 - dir list href nested structure # time=85.461ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=23.911ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=6.838ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=83.021ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=6.225ms
        
    ok 13 - dir list json format # time=16.274ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=5.059ms
        
    ok 14 - dir list json format - extended info # time=11.539ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=42.849ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=29.914ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=32.643ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=5.979ms
        
    ok 18 - dir list on empty dir # time=26.218ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=62.488ms
        
    ok 19 - dir list serve index.html on index option # time=84.157ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=3.115ms
        
    ok 20 - serve a non existent dir and get error # time=8.998ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=3.063ms
        
    ok 21 - serve a non existent dir and get error # time=8.318ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.673ms
        
    ok 22 - dir list with dotfiles allow option # time=12.281ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.488ms
        
    ok 23 - dir list with dotfiles deny option # time=9.116ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.87ms
        
    ok 24 - dir list with dotfiles ignore option # time=9.886ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=21.836ms
    
    1..25
    # time=856.237ms
ok 1 - test/dir-list.test.js # time=856.237ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=44.307ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=8.448ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=6.765ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=5.674ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.221ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=6.018ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.732ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.29ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=10.411ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.558ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=4.617ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=267.678ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=27.105ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.004ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=7.058ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=3.738ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.465ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=6.661ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.457ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.748ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=2.919ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.373ms
        
    ok 2 - register /static # time=84.588ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=17.798ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=34.102ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=4.572ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=8.769ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=5.743ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=9.656ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=10.897ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.858ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=3.843ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=2.764ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=10.725ms
        
    ok 3 - register /static/ # time=148.936ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=30.273ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=16.556ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=9.749ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=24.378ms
        
    ok 4 - register /static and /static2 # time=90.829ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=16.345ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.182ms
        
    ok 5 - payload.filename is set # time=36.06ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=3.234ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=25.32ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=12.594ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=22.195ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=2.673ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=8.315ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.965ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=12.379ms
        
    ok 9 - serving disabled # time=31.675ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=6.863ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=11.33ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=16.203ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.375ms
        
    ok 10 - sendFile # time=48.377ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.65ms
        
    ok 11 - sendFile disabled # time=5.906ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=2.609ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.329ms
        
    ok 12 - allowedPath option - pathname # time=8.687ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=4.089ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.548ms
        
    ok 13 - allowedPath option - request # time=14.843ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=9.126ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=5.325ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.893ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.315ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.055ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=3.725ms
        
    ok 14 - download # time=43.778ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.522ms
        
    ok 15 - sendFile disabled # time=11.855ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.901ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=6.563ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.425ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=7.872ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=22.9ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.45ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.742ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=11.972ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.513ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=8.737ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.516ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.431ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.455ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.562ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.538ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.524ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.466ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.526ms
        
    ok 22 - errors # time=39.213ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=6.633ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.869ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=6.479ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.696ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.482ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.129ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.217ms
        
    ok 23 - register no prefix # time=32.86ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.311ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=9.498ms
        
    ok 24 - with fastify-compress # time=29.531ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=4.249ms
        
    ok 25 - register /static/ with schemaHide true # time=10.309ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=10.684ms
        
    ok 26 - register /static/ with schemaHide false # time=16.317ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.318ms
        
    ok 27 - register /static/ without schemaHide # time=9.56ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.415ms
        
    ok 28 - fastify with exposeHeadRoutes # time=29.584ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.121ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.662ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.945ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.093ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.782ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.757ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.229ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.46ms
        
    ok 29 - register with wildcard false # time=40.383ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.309ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.684ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=8.427ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.569ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.647ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.946ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.519ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.575ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=5.022ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=2.955ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=3.06ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.152ms
        
    ok 32 - register with wildcard false and alternative index # time=67.127ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=13.242ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.028ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=3.589ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.795ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=3.005ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.657ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.418ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=3.632ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=6.553ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2.633ms
        
    ok 33 - register /static with wildcard false and alternative index # time=58.704ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=7.959ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.446ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.583ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.001ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=9.581ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.486ms
        
    ok 34 - register /static with redirect true # time=33.679ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.542ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.591ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=9.09ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=2.54ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=4.599ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=5.782ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.699ms
        
    ok 35 - register /static with redirect true and wildcard false # time=51.06ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=8.372ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.923ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.769ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.047ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.471ms
        
    ok 36 - trailing slash behavior with redirect = false # time=20.529ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=6.493ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.213ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.172ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=16.245ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.483ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=9.131ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=26.111ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=3.274ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.715ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=16.129ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.663ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.722ms
        
    ok 44 - register /static and /static2 without wildcard # time=16.427ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=4.99ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.861ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.326ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.477ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=7.457ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=12.16ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=11.774ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=10.132ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=9.883ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.799ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.057ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=3.231ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=9.214ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.11ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.968ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.932ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=15.756ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.255ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.797ms
        
    ok 62 - should not serve index if option is `false` # time=8.17ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.959ms
    
    1..63
    # time=1613.68ms
ok 2 - test/static.test.js # time=1613.68ms

1..2
# time=2899.031ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./Variants/send/variant1/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 462ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=10.034ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.797ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.296ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.298ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.874ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=82.508ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=23.514ms
        
    ok 7 - dir list default options # time=40.171ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.93ms
        
    ok 8 - dir list, custom options # time=37.645ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=30.828ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=8.636ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=7.943ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=7.396ms
        
    ok 9 - dir list html format # time=247.376ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=21.4ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=19.898ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=9.001ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=7.692ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=13.345ms
        
    ok 10 - dir list href nested structure # time=81.894ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=30.631ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=5.224ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=73.796ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=7.424ms
        
    ok 13 - dir list json format # time=14.045ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=13.949ms
        
    ok 14 - dir list json format - extended info # time=43.716ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=35.7ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=24.568ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=19.778ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=7.147ms
        
    ok 18 - dir list on empty dir # time=54.252ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=29.127ms
        
    ok 19 - dir list serve index.html on index option # time=39.52ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=3.173ms
        
    ok 20 - serve a non existent dir and get error # time=10.664ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=12.411ms
        
    ok 21 - serve a non existent dir and get error # time=38.972ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.162ms
        
    ok 22 - dir list with dotfiles allow option # time=9.225ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.049ms
        
    ok 23 - dir list with dotfiles deny option # time=7.691ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.116ms
        
    ok 24 - dir list with dotfiles ignore option # time=7.661ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=18.378ms
    
    1..25
    # time=994.638ms
ok 1 - test/dir-list.test.js # time=994.638ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=86.467ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=9.359ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=8.119ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=7.743ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.314ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=5.99ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.604ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.179ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=5.866ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=9.696ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=4.536ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=386.709ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=29.063ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.909ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=7.79ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=4.031ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=8.184ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.466ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=4.388ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.1ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=2.908ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.398ms
        
    ok 2 - register /static # time=90.609ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=15.168ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.162ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=8.615ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=13.25ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=3.411ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=4.042ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=5.485ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=2.675ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=2.854ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=2.993ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=6.901ms
        
    ok 3 - register /static/ # time=79.696ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=12.057ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.106ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=4.38ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=4.469ms
        
    ok 4 - register /static and /static2 # time=32.989ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=5.693ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=11.137ms
        
    ok 5 - payload.filename is set # time=23.106ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.8ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=8.429ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=7.091ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=15.757ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=4.977ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=13.235ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.712ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=4.729ms
        
    ok 9 - serving disabled # time=15.405ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=6.604ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=4.591ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.587ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.719ms
        
    ok 10 - sendFile # time=26.968ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.421ms
        
    ok 11 - sendFile disabled # time=8.168ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=5.56ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=4.039ms
        
    ok 12 - allowedPath option - pathname # time=23.13ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.609ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=9.01ms
        
    ok 13 - allowedPath option - request # time=18.483ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=19.541ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=7.394ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=5.64ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=5.787ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=5.185ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=6.246ms
        
    ok 14 - download # time=59.519ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=4.807ms
        
    ok 15 - sendFile disabled # time=11.279ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=7.728ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=27.67ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=10.337ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=11.314ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=31.41ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=8.273ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=6.264ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=23.38ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.511ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.826ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.539ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.443ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.488ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=2.465ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.998ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.491ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.497ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.533ms
        
    ok 22 - errors # time=46.657ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=10.885ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.912ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=9.511ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=2.94ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=4.879ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.779ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.167ms
        
    ok 23 - register no prefix # time=43.287ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=17.086ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=6.885ms
        
    ok 24 - with fastify-compress # time=28.374ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=15.81ms
        
    ok 25 - register /static/ with schemaHide true # time=25.315ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.766ms
        
    ok 26 - register /static/ with schemaHide false # time=6.824ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.738ms
        
    ok 27 - register /static/ without schemaHide # time=6.562ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.513ms
        
    ok 28 - fastify with exposeHeadRoutes # time=28.689ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.177ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.697ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.912ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.11ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.816ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.835ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.214ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.455ms
        
    ok 29 - register with wildcard false # time=39.764ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.322ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.63ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=8.826ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.618ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.639ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.947ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=5.863ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.183ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.827ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.3ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.596ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.795ms
        
    ok 32 - register with wildcard false and alternative index # time=69.313ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=15.106ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=2.365ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.705ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.11ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=2.648ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.352ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=1.856ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=4.021ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=6.335ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=3.101ms
        
    ok 33 - register /static with wildcard false and alternative index # time=62.035ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=7.94ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.461ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.54ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.023ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=8.874ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.456ms
        
    ok 34 - register /static with redirect true # time=32.168ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.467ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.58ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.276ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=5.992ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.449ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.71ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.579ms
        
    ok 35 - register /static with redirect true and wildcard false # time=46.075ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=8.396ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.931ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.779ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.066ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=1.881ms
        
    ok 36 - trailing slash behavior with redirect = false # time=20.001ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=5.992ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.258ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.269ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=15.244ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.724ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=9.129ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=18.314ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=4.31ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=6.197ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=24.782ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.592ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.721ms
        
    ok 44 - register /static and /static2 without wildcard # time=17.355ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=4.873ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.821ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.766ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.582ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=4.382ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=14.71ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=13.125ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=8.95ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=9.859ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.71ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=2.967ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=6.804ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.206ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.174ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.651ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.952ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=15.4ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.322ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.778ms
        
    ok 62 - should not serve index if option is `false` # time=9.308ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.929ms
    
    1..63
    # time=1646.829ms
ok 2 - test/static.test.js # time=1646.829ms

1..2
# time=2906.411ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
variantsDepsNum: 3
/data/js-variants/multee
3
fastify-static is testing ./VariantsDeps/send/variant3/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 494ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 403ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=6.296ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=1.299ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=1.539ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=1.329ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=0.932ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=82.531ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=23.324ms
        
    ok 7 - dir list default options # time=40.502ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.529ms
        
    ok 8 - dir list, custom options # time=37.114ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=34.743ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=6.834ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=5.498ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=5.163ms
        
    ok 9 - dir list html format # time=125.41ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=25.744ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=9.602ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=7.295ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=11.042ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=7.405ms
        
    ok 10 - dir list href nested structure # time=69.186ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=26.737ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=2.659ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=43.474ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=3.69ms
        
    ok 13 - dir list json format # time=22.344ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=12.758ms
        
    ok 14 - dir list json format - extended info # time=31.53ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=20.49ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=17.396ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=15.39ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=3.042ms
        
    ok 18 - dir list on empty dir # time=30.003ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=17.031ms
        
    ok 19 - dir list serve index.html on index option # time=33.552ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=2.791ms
        
    ok 20 - serve a non existent dir and get error # time=23.805ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=2.554ms
        
    ok 21 - serve a non existent dir and get error # time=7.457ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=2.911ms
        
    ok 22 - dir list with dotfiles allow option # time=8.691ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=2.937ms
        
    ok 23 - dir list with dotfiles deny option # time=7.426ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.092ms
        
    ok 24 - dir list with dotfiles ignore option # time=7.594ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=33.762ms
    
    1..25
    # time=737.127ms
ok 1 - test/dir-list.test.js # time=737.127ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=49.819ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=11.357ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=10.356ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=8.29ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.684ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.432ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=7.902ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.177ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=6.735ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=4.036ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=5.707ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=291.875ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=36.069ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=6.56ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=14.636ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=4.735ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.643ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.215ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=6.106ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.393ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=4.163ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.444ms
        
    ok 2 - register /static # time=115.042ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=24.488ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=6ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=5.264ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=6.151ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=3.116ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=8.817ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=7.789ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.375ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=3.641ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=3.619ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=10.449ms
        
    ok 3 - register /static/ # time=111.847ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=16.148ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=6.801ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=5.396ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=5.346ms
        
    ok 4 - register /static and /static2 # time=44.868ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=18.408ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.781ms
        
    ok 5 - payload.filename is set # time=29.368ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.62ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=11.243ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=7.664ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=13.183ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=2.688ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=16.301ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=2.374ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=3.314ms
        
    ok 9 - serving disabled # time=11.285ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=7.993ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=3.376ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=13.274ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.087ms
        
    ok 10 - sendFile # time=33.392ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.681ms
        
    ok 11 - sendFile disabled # time=7.43ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=6.063ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.32ms
        
    ok 12 - allowedPath option - pathname # time=18.932ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=2.569ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.262ms
        
    ok 13 - allowedPath option - request # time=9.649ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=9.008ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=5.346ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.947ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.293ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=2.996ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=2.85ms
        
    ok 14 - download # time=40.12ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.897ms
        
    ok 15 - sendFile disabled # time=14.093ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.993ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=7.336ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.425ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=8.021ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=20.154ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.604ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.602ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=11.987ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.492ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=9.882ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.52ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.444ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.469ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.541ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.574ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.494ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.534ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.516ms
        
    ok 22 - errors # time=40.562ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=6.747ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=6.526ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=5.806ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.005ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.86ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.15ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.252ms
        
    ok 23 - register no prefix # time=35.817ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=14.833ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.059ms
        
    ok 24 - with fastify-compress # time=25.974ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=4.587ms
        
    ok 25 - register /static/ with schemaHide true # time=8.773ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.993ms
        
    ok 26 - register /static/ with schemaHide false # time=8.55ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=4.771ms
        
    ok 27 - register /static/ without schemaHide # time=20.088ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.541ms
        
    ok 28 - fastify with exposeHeadRoutes # time=28.261ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.092ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.724ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.845ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.093ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.786ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.818ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.606ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.445ms
        
    ok 29 - register with wildcard false # time=39.864ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.415ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.659ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=10.725ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.517ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.678ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.958ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.539ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.527ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.916ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.97ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.862ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.155ms
        
    ok 32 - register with wildcard false and alternative index # time=65.292ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=12.554ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=2.518ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.843ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.411ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=3.141ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=3.076ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=5.361ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=3.312ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=3.422ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=3.997ms
        
    ok 33 - register /static with wildcard false and alternative index # time=57.738ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.924ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.452ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.561ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.013ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=9.523ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.468ms
        
    ok 34 - register /static with redirect true # time=35.025ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.488ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.636ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.261ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=2.892ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.336ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=11.789ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=4.86ms
        
    ok 35 - register /static with redirect true and wildcard false # time=54.419ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=16.21ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=3.319ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=3.089ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=3.442ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=3.239ms
        
    ok 36 - trailing slash behavior with redirect = false # time=36.024ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=10.19ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=4.976ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=18.065ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=38.226ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.132ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=7.871ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=5.997ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=4.985ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=5.718ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=8.59ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=5.52ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=3.483ms
        
    ok 44 - register /static and /static2 without wildcard # time=35.181ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=6.805ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=4.67ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.368ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.367ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=4.32ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=9.836ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=11.288ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=11.557ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=10.901ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=8.365ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.006ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=3.121ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.201ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=3.244ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.626ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.876ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=24.723ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.289ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.762ms
        
    ok 62 - should not serve index if option is `false` # time=8.176ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.871ms
    
    1..63
    # time=1565.462ms
ok 2 - test/static.test.js # time=1565.462ms

1..2
# time=2895.382ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./VariantsDeps/send/variant2/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 478ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 403ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=9.758ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.899ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.273ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.204ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.87ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=80.596ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=23.758ms
        
    ok 7 - dir list default options # time=42.25ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=23.548ms
        
    ok 8 - dir list, custom options # time=39.037ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=40.047ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=7.113ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=6.408ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=6.535ms
        
    ok 9 - dir list html format # time=115.021ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=29.886ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=13.998ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=9.766ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=13.392ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=8.521ms
        
    ok 10 - dir list href nested structure # time=86.655ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=25.848ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=4.926ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=57.471ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=4.393ms
        
    ok 13 - dir list json format # time=11.46ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=15.161ms
        
    ok 14 - dir list json format - extended info # time=29.378ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=38.228ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=20.646ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=23.387ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=3.411ms
        
    ok 18 - dir list on empty dir # time=16.934ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=17.082ms
        
    ok 19 - dir list serve index.html on index option # time=24.965ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=2.528ms
        
    ok 20 - serve a non existent dir and get error # time=35.339ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=3.11ms
        
    ok 21 - serve a non existent dir and get error # time=10.703ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=5.191ms
        
    ok 22 - dir list with dotfiles allow option # time=12.799ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.673ms
        
    ok 23 - dir list with dotfiles deny option # time=10.102ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.45ms
        
    ok 24 - dir list with dotfiles ignore option # time=9.378ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=40.584ms
    
    1..25
    # time=794.709ms
ok 1 - test/dir-list.test.js # time=794.709ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=44.807ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=8.868ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=6.952ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=9.301ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=5.997ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=6.247ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.681ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.255ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=5.962ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.771ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=4.447ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=280.466ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=26.958ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.047ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=15.389ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=3.351ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=9.001ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=5.353ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=4.489ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=2.978ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=3.003ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.371ms
        
    ok 2 - register /static # time=89.311ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=34.578ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.644ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=4.298ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=4.34ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=2.615ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=7.13ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=4.52ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.024ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=2.821ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=2.932ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=7.517ms
        
    ok 3 - register /static/ # time=100.364ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=11.961ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.347ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=4.138ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=4.478ms
        
    ok 4 - register /static and /static2 # time=33.182ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=24.887ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=6.142ms
        
    ok 5 - payload.filename is set # time=37.63ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.818ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=27.945ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=7.666ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=12.737ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=11.022ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=16.316ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.349ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=4.238ms
        
    ok 9 - serving disabled # time=14.249ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=7.115ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=12.682ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=14.792ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=7.843ms
        
    ok 10 - sendFile # time=50.927ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.182ms
        
    ok 11 - sendFile disabled # time=11.946ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=8.663ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.722ms
        
    ok 12 - allowedPath option - pathname # time=25.547ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.631ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.222ms
        
    ok 13 - allowedPath option - request # time=19.36ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=6.547ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=3.596ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.248ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=8.463ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.051ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=2.924ms
        
    ok 14 - download # time=43.793ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.951ms
        
    ok 15 - sendFile disabled # time=7.346ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.888ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=11.475ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.734ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=8.49ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=21.212ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.306ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.975ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=16.634ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=2.22ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=9.829ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=3.866ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=2.371ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=2.398ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=3.832ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=2.624ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=2.463ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=2.823ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=2.726ms
        
    ok 22 - errors # time=59.821ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=8.605ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=5.554ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=6.992ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=4.963ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=4.808ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=3.786ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=5.337ms
        
    ok 23 - register no prefix # time=49.201ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.588ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=4.946ms
        
    ok 24 - with fastify-compress # time=23.743ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.939ms
        
    ok 25 - register /static/ with schemaHide true # time=7.215ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=4.957ms
        
    ok 26 - register /static/ with schemaHide false # time=28.664ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.812ms
        
    ok 27 - register /static/ without schemaHide # time=8.935ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.564ms
        
    ok 28 - fastify with exposeHeadRoutes # time=27.673ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.192ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.68ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.867ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.077ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.831ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.856ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.576ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.471ms
        
    ok 29 - register with wildcard false # time=40.231ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.393ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.692ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=11.116ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.592ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.656ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.902ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.691ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.217ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.881ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=5.017ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=6.424ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.184ms
        
    ok 32 - register with wildcard false and alternative index # time=69.213ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=14.173ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=2.475ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.804ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=5.174ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=4.743ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.706ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.278ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=9.25ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=2.733ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=1.983ms
        
    ok 33 - register /static with wildcard false and alternative index # time=63.468ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.045ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.447ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.562ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=2.975ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=4.594ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.52ms
        
    ok 34 - register /static with redirect true # time=27.515ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.443ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.612ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=9.014ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=2.589ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=10.346ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=4.014ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.828ms
        
    ok 35 - register /static with redirect true and wildcard false # time=56.416ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=8.298ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.93ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.771ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.047ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=1.874ms
        
    ok 36 - trailing slash behavior with redirect = false # time=19.811ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=5.84ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.172ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.213ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=14.981ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.452ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=8.902ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=7.875ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=4.217ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=5.306ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=7.82ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=5.386ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=3.356ms
        
    ok 44 - register /static and /static2 without wildcard # time=34.698ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=6.895ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=4.307ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.354ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.343ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=4.626ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=13.393ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=13.009ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=11.444ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=8.403ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.707ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=2.9ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=4.021ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.386ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=3.347ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.667ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=8.711ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=16.946ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.312ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.76ms
        
    ok 62 - should not serve index if option is `false` # time=8.253ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.867ms
    
    1..63
    # time=1576.426ms
ok 2 - test/static.test.js # time=1576.426ms

1..2
# time=2858.856ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./VariantsDeps/send/variant1/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 465ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=9.959ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.958ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.349ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.309ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.771ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=85.317ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=30.746ms
        
    ok 7 - dir list default options # time=49.94ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=23.009ms
        
    ok 8 - dir list, custom options # time=29.916ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=36.426ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=7.264ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=6.773ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=7.263ms
        
    ok 9 - dir list html format # time=146.272ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=27.671ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=13.043ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=11.153ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=12.677ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=11.143ms
        
    ok 10 - dir list href nested structure # time=87.893ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=8.62ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=8.565ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=39.456ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=7.109ms
        
    ok 13 - dir list json format # time=18.864ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=11.087ms
        
    ok 14 - dir list json format - extended info # time=24.266ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=53.844ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=35.734ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=52.289ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=9.453ms
        
    ok 18 - dir list on empty dir # time=27.72ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=38.66ms
        
    ok 19 - dir list serve index.html on index option # time=64.187ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=7.267ms
        
    ok 20 - serve a non existent dir and get error # time=33.089ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=2.934ms
        
    ok 21 - serve a non existent dir and get error # time=15.113ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.373ms
        
    ok 22 - dir list with dotfiles allow option # time=10.736ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.285ms
        
    ok 23 - dir list with dotfiles deny option # time=9.873ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=5.274ms
        
    ok 24 - dir list with dotfiles ignore option # time=10.398ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=33.338ms
    
    1..25
    # time=895.342ms
ok 1 - test/dir-list.test.js # time=895.342ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=44.279ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=8.682ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=9.755ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=8.268ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.283ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=5.964ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=5.666ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.325ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=6.04ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.721ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=4.634ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=268.157ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=40.316ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=8.66ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=13.346ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=8.931ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.767ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=8.167ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=6.132ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=6.027ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=2.728ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.493ms
        
    ok 2 - register /static # time=115.595ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=27.138ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=3.262ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=3.773ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=4.423ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=2.394ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=11.073ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=6.884ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=4.337ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=4.933ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=2.981ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=7.237ms
        
    ok 3 - register /static/ # time=95.462ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=14.095ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.302ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=6.183ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=4.524ms
        
    ok 4 - register /static and /static2 # time=37.342ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=22.477ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.326ms
        
    ok 5 - payload.filename is set # time=32.551ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=2.828ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=24.08ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=20.204ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=29.358ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=2.794ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=16.3ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.795ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=4.171ms
        
    ok 9 - serving disabled # time=25.968ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=6.757ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=17.517ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=13.578ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=8.677ms
        
    ok 10 - sendFile # time=54.906ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.066ms
        
    ok 11 - sendFile disabled # time=8.148ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.265ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.814ms
        
    ok 12 - allowedPath option - pathname # time=11.253ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.436ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=13.577ms
        
    ok 13 - allowedPath option - request # time=22.668ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=16.287ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=4.039ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=3.179ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.63ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.733ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=3.44ms
        
    ok 14 - download # time=43.157ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.932ms
        
    ok 15 - sendFile disabled # time=11.771ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=10.272ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=24.189ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.461ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=7.063ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=19.951ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.476ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.549ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=19.095ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.483ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.808ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.507ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.439ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.567ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.536ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.58ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.49ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.497ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.504ms
        
    ok 22 - errors # time=40.263ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=6.641ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=6.713ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=5.704ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=2.935ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=2.994ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.129ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.208ms
        
    ok 23 - register no prefix # time=34.765ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.464ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.123ms
        
    ok 24 - with fastify-compress # time=22.5ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=9.84ms
        
    ok 25 - register /static/ with schemaHide true # time=21.584ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.914ms
        
    ok 26 - register /static/ with schemaHide false # time=8.419ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.316ms
        
    ok 27 - register /static/ without schemaHide # time=8.831ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.448ms
        
    ok 28 - fastify with exposeHeadRoutes # time=30.8ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.357ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.67ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.867ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.079ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.805ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.817ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.581ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=7.891ms
        
    ok 29 - register with wildcard false # time=45.595ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.322ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.648ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=11.087ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.647ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.623ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.932ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.476ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.219ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.931ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.861ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.609ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.099ms
        
    ok 32 - register with wildcard false and alternative index # time=58.8ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=15.384ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=5.675ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=3.508ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=3.313ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=10.159ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.311ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.085ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=3.348ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=3.521ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=1.962ms
        
    ok 33 - register /static with wildcard false and alternative index # time=67.294ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=7.891ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.488ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.498ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.024ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=9.44ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.44ms
        
    ok 34 - register /static with redirect true # time=32.238ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.419ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.522ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.252ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=6.742ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.811ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=4.22ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.253ms
        
    ok 35 - register /static with redirect true and wildcard false # time=47.381ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=9.008ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=1.909ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=1.797ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=1.998ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.783ms
        
    ok 36 - trailing slash behavior with redirect = false # time=21.515ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=5.849ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=3.216ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=3.224ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=14.956ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.448ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=8.982ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=17.02ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=11.221ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.726ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=11.611ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.554ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.692ms
        
    ok 44 - register /static and /static2 without wildcard # time=18.657ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=4.94ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.84ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.532ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.434ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=4.388ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=9.539ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=13.577ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=12.292ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=9.074ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.888ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=2.995ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=7.02ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.204ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.753ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.34ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=10.33ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //:/..
        ok 5 - should be equal
        ok 6 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 7 - should be equal
        ok 8 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status /^
        ok 11 - expect falsey value
        ok 12 - status //google.com/%2e%2e
        ok 13 - should be equal
        ok 14 - status //users/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users
        ok 17 - expect falsey value
        ok 18 - status //^/.
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=13.736ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.293ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.76ms
        
    ok 62 - should not serve index if option is `false` # time=8.23ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.938ms
    
    1..63
    # time=1570.338ms
ok 2 - test/static.test.js # time=1570.338ms

1..2
# time=2850.614ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************

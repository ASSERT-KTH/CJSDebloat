/data/js-variants/multee
4
fastify-static is testing ./Variants/send/variant4/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 484ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=10.008ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.868ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.561ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.304ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.848ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=79.325ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=23.645ms
        
    ok 7 - dir list default options # time=50.453ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=23.239ms
        
    ok 8 - dir list, custom options # time=37.929ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=36.168ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=6.397ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=6.103ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=5.299ms
        
    ok 9 - dir list html format # time=139.247ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=24.061ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=12.217ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=7.281ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=10.833ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=6.879ms
        
    ok 10 - dir list href nested structure # time=69.326ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=21.106ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=2.704ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=49.062ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=3.642ms
        
    ok 13 - dir list json format # time=9.941ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=12.192ms
        
    ok 14 - dir list json format - extended info # time=31.575ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=20.169ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=16.636ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=29.842ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=2.959ms
        
    ok 18 - dir list on empty dir # time=24.082ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=15.558ms
        
    ok 19 - dir list serve index.html on index option # time=20.709ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=17.184ms
        
    ok 20 - serve a non existent dir and get error # time=22.733ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=2.565ms
        
    ok 21 - serve a non existent dir and get error # time=7.394ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=2.813ms
        
    ok 22 - dir list with dotfiles allow option # time=8.538ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=2.752ms
        
    ok 23 - dir list with dotfiles deny option # time=7.033ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=2.943ms
        
    ok 24 - dir list with dotfiles ignore option # time=7.19ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=18.327ms
    
    1..25
    # time=733.585ms
ok 1 - test/dir-list.test.js # time=733.585ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=45.473ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=9.975ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=8.439ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=7.461ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=9.567ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=9.494ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=6.844ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.11ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=7.245ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.94ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=6.781ms
        
    ok 1 - register /static prefixAvoidTrailingSlash # time=291.06ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=31.947ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=5.938ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=16.982ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=8.908ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.313ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=6.574ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=4.22ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=4.047ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/../index.js # time=6.801ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=3.092ms
        
    ok 2 - register /static # time=110.59ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=27.417ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=5.707ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=5.505ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=6.073ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=4.56ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=9.504ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=10.461ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.712ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=3.605ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 11 - /static/../index.js # time=4.043ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=10.862ms
        
    ok 3 - register /static/ # time=115.932ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=13.825ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=7.041ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=5.623ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=5.904ms
        
    ok 4 - register /static and /static2 # time=42.194ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=17.729ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=4.614ms
        
    ok 5 - payload.filename is set # time=31.272ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /../index.js # time=8.604ms
        
    ok 6 - error responses can be customized with fastify.setErrorHandler() # time=30.385ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=12.22ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=24.712ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/.exist.html # time=4.356ms
        
    ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=9.235ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.346ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=3.724ms
        
    ok 9 - serving disabled # time=13.383ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=6.806ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=3.954ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.557ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.649ms
        
    ok 10 - sendFile # time=26.083ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.342ms
        
    ok 11 - sendFile disabled # time=8.114ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.419ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.059ms
        
    ok 12 - allowedPath option - pathname # time=11.868ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.429ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.102ms
        
    ok 13 - allowedPath option - request # time=12.193ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=7.798ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=3.403ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=4.302ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=4.313ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.716ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=3.247ms
        
    ok 14 - download # time=42.422ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.95ms
        
    ok 15 - sendFile disabled # time=8.08ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.889ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=7.186ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.38ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=8.832ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=24.716ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=5.846ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=4.597ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=12.179ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.489ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=10.531ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.572ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.444ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.442ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.576ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.507ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.506ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.455ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.803ms
        
    ok 22 - errors # time=41.522ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=6.847ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.863ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=9.805ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.827ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.12ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.601ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /../index.js # time=2.714ms
        
    ok 23 - register no prefix # time=37.198ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=13.602ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=4.795ms
        
    ok 24 - with fastify-compress # time=25.851ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.764ms
        
    ok 25 - register /static/ with schemaHide true # time=7.241ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.007ms
        
    ok 26 - register /static/ with schemaHide false # time=8.519ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.782ms
        
    ok 27 - register /static/ without schemaHide # time=23.085ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.498ms
        
    ok 28 - fastify with exposeHeadRoutes # time=34.128ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.195ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.71ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=3.375ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.121ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.754ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.822ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.238ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.457ms
        
    ok 29 - register with wildcard false # time=40.389ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.356ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.655ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=10.985ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.552ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=3.437ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=2.785ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=2.53ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.213ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=2.849ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=4.946ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.568ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.616ms
        
    ok 32 - register with wildcard false and alternative index # time=66.428ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=15.499ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=2.481ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=2.514ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=3.679ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=3.094ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.732ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.345ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=4.654ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=2.845ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=1.997ms
        
    ok 33 - register /static with wildcard false and alternative index # time=59.883ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=7.937ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.455ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.535ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.001ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=4.564ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.506ms
        
    ok 34 - register /static with redirect true # time=27.43ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.548ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=2.516ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.313ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=8.081ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=13.698ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=6.869ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.202ms
        
    ok 35 - register /static with redirect true and wildcard false # time=60.835ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=11.713ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=2.627ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=2.437ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.859ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.613ms
        
    ok 36 - trailing slash behavior with redirect = false # time=35.04ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=9.229ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 2 - ignore dotfiles # time=4.73ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
        ok 3 - deny requests to serve a dotfile # time=4.719ms
        
    ok 37 - if dotfiles are properly served according to plugin options # time=22.426ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=14.649ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=11.856ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=37.162ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=3.234ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.778ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=16.432ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.552ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.779ms
        
    ok 44 - register /static and /static2 without wildcard # time=16.442ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=5.304ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.941ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.235ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.396ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=10.52ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=8.836ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=18.146ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=16.446ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=8.948ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=8.334ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=3.038ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=8.028ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=3.248ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.058ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.779ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=3.007ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=15.987ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.259ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.737ms
        
    ok 62 - should not serve index if option is `false` # time=8.324ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.804ms
    
    1..63
    # time=1604.85ms
ok 2 - test/static.test.js # time=1604.85ms

1..2
# time=2891.302ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |     100 |      100 |     100 |     100 |                   
 fastify-static     |     100 |      100 |     100 |     100 |                   
  index.js          |     100 |      100 |     100 |     100 |                   
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------

> @fastify/static@6.5.0 typescript
> tsd

************* run test done *************
fastify-static is testing ./Variants/send/variant3/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 468ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 400ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    1..0 # no tests found
not ok 1 - test/dir-list.test.js # time=1076.208ms
  ---
  env: {}
  file: test/dir-list.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/dir-list.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

# Subtest: test/static.test.js
    1..0 # no tests found
not ok 2 - test/static.test.js # time=1159.989ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 2 of 2 tests
# time=1186.383ms
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     2.3 |        0 |       0 |    2.34 |                   
 index.js |     2.3 |        0 |       0 |    2.34 | 8-517             
----------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-static is testing ./Variants/send/variant2/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 499ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 525ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    1..0 # no tests found
not ok 1 - test/dir-list.test.js # time=1081.282ms
  ---
  env: {}
  file: test/dir-list.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/dir-list.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

# Subtest: test/static.test.js
    1..0 # no tests found
not ok 2 - test/static.test.js # time=1159.782ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 2 of 2 tests
# time=1186.05ms
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     2.3 |        0 |       0 |    2.34 |                   
 index.js |     2.3 |        0 |       0 |    2.34 | 8-517             
----------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-static is testing ./Variants/send/variant1/send
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 494ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=9.961ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.918ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.265ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.277ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.905ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=82.498ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=22.874ms
        
    ok 7 - dir list default options # time=39.107ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.519ms
        
    ok 8 - dir list, custom options # time=37.363ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=50.203ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=19.261ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=9.371ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=6.436ms
        
    ok 9 - dir list html format # time=166.348ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=34.009ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=22.521ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=13.01ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=16.09ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=8.788ms
        
    ok 10 - dir list href nested structure # time=109.97ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=24.537ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=2.442ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=46.01ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=3.722ms
        
    ok 13 - dir list json format # time=9.739ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=3.859ms
        
    ok 14 - dir list json format - extended info # time=9.471ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=14.653ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=16.047ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=14.176ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=2.737ms
        
    ok 18 - dir list on empty dir # time=8.87ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=50.501ms
        
    ok 19 - dir list serve index.html on index option # time=56.076ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=2.653ms
        
    ok 20 - serve a non existent dir and get error # time=13.121ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=2.377ms
        
    ok 21 - serve a non existent dir and get error # time=7.695ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=11.897ms
        
    ok 22 - dir list with dotfiles allow option # time=29.73ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=4.583ms
        
    ok 23 - dir list with dotfiles deny option # time=15.845ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.73ms
        
    ok 24 - dir list with dotfiles ignore option # time=13.663ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=24.338ms
    
    1..25
    # time=801.965ms
ok 1 - test/dir-list.test.js # time=801.965ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=45.242ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=10.235ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=8.279ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=7.475ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.959ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.724ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=7.749ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=6.75ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 199
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:199:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=93.043ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=9.591ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=16.717ms
        
        # failed 1 of 12 tests
    not ok 1 - register /static prefixAvoidTrailingSlash # time=385.726ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=28.533ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=11.923ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=12.042ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=3.217ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=6.454ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=7.355ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=32.749ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=11.293ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 357
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:357:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=30.591ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=2.571ms
        
        # failed 1 of 11 tests
    not ok 2 - register /static # time=174.692ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=16.006ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=5.025ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=5.307ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=6.467ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=3.248ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=13.481ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=4.394ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=3.178ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=2.996ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 515
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:515:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 11 - /static/../index.js # time=9.05ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=7.663ms
        
        # failed 1 of 12 tests
    not ok 3 - register /static/ # time=94.444ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=12.448ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=16.522ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=4.227ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=3.931ms
        
    ok 4 - register /static and /static2 # time=45.215ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=5.544ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=3.076ms
        
    ok 5 - payload.filename is set # time=15.645ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 712
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:712:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '403 Custom error message')
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403 Custom error message
                +undefined Custom error message
              ...
            
            # failed 1 of 4 tests
        not ok 2 - /../index.js # time=8.099ms
        
        # failed 1 of 2 tests
    not ok 6 - error responses can be customized with fastify.setErrorHandler() # time=26.539ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=2.974ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=17.045ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 791
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:791:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 792
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:792:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.statusCode, 404)
                        t.equal(response.headers['content-type'], 'text/plain')
                ----------^
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -text/plain
                +application/json; charset=utf-8
              ...
            
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 793
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:793:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                ----------^
                      })
                    })
              diff: >
                --- expected
              
                +++ actual
              
                @@ -1,1 +1,1 @@
              
                -/path/does/not/.exist.html Not Found
              
                +{"statusCode":500,"error":"Internal Server Error","message":"setPrototypeOf is not a function"}
              ...
            
            # failed 3 of 4 tests
        not ok 2 - /path/does/not/.exist.html # time=21.793ms
        
        # failed 1 of 2 tests
    not ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=26.378ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=3.247ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=3.903ms
        
    ok 9 - serving disabled # time=12.564ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=6.528ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=8.974ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.254ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.553ms
        
    ok 10 - sendFile # time=30.382ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.637ms
        
    ok 11 - sendFile disabled # time=7.288ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=2.631ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.264ms
        
    ok 12 - allowedPath option - pathname # time=8.58ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.426ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.946ms
        
    ok 13 - allowedPath option - request # time=11.573ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=8.364ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=3.106ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=2.973ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.485ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.138ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=2.99ms
        
    ok 14 - download # time=32.851ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.971ms
        
    ok 15 - sendFile disabled # time=7.301ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=2.658ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=11.81ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.734ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=10.116ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=21.263ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=11.628ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=6.032ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=12.041ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.483ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.841ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.513ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.46ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.461ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.562ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.522ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.554ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.49ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.502ms
        
    ok 22 - errors # time=32.623ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=13.422ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=4.466ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=9.114ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=2.925ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.025ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.135ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 1631
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:1631:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 8 - /../index.js # time=7.646ms
        
        # failed 1 of 8 tests
    not ok 23 - register no prefix # time=48.281ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=12.36ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=6.092ms
        
    ok 24 - with fastify-compress # time=24.716ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.767ms
        
    ok 25 - register /static/ with schemaHide true # time=9.652ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.5ms
        
    ok 26 - register /static/ with schemaHide false # time=9.301ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.591ms
        
    ok 27 - register /static/ without schemaHide # time=9.166ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.561ms
        
    ok 28 - fastify with exposeHeadRoutes # time=37.899ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.347ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.686ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.902ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.115ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.835ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.844ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.179ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.456ms
        
    ok 29 - register with wildcard false # time=46.742ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.545ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.695ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=9.071ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=2.389ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=2.772ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=3.081ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=8.249ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=2.066ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=5.051ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=3.009ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=2.55ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=2.054ms
        
    ok 32 - register with wildcard false and alternative index # time=66.535ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=8.336ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=6.003ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=3.553ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=2.58ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=7.126ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=4.312ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.445ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=2.643ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=3.068ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2.138ms
        
    ok 33 - register /static with wildcard false and alternative index # time=58.088ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=8.003ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.5ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.507ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=9.403ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=8.798ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=6.369ms
        
    ok 34 - register /static with redirect true # time=41.612ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=10.669ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=4.774ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.292ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=8.59ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.819ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.712ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.961ms
        
    ok 35 - register /static with redirect true and wildcard false # time=92.8ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=5.297ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=2.627ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=2.368ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.401ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.544ms
        
    ok 36 - trailing slash behavior with redirect = false # time=20.631ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=8.668ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2710
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2710:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 2 - ignore dotfiles # time=10.766ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2736
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2736:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 3 - deny requests to serve a dotfile # time=9.278ms
        
        # failed 2 of 3 tests
    not ok 37 - if dotfiles are properly served according to plugin options # time=32.586ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=17.23ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=11.11ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=12.338ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=3.716ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=4.38ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=5.89ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.45ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=4.838ms
        
    ok 44 - register /static and /static2 without wildcard # time=17.736ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=4.85ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.712ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.376ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=3.366ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=7.384ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=12.741ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=13.347ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=13.908ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=13.563ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.568ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=2.883ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=4.062ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=4.259ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=4.128ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=4.439ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.76ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 5 - should be equal
        ok 6 - status /^
        ok 7 - expect falsey value
        ok 8 - status //google.com/%2e%2e
        ok 9 - should be equal
        ok 10 - status //users/%2e%2e
        ok 11 - should be equal
        ok 12 - status //users
        ok 13 - expect falsey value
        ok 14 - status //^/.
        ok 15 - expect falsey value
        ok 16 - status //:/..
        ok 17 - should be equal
        ok 18 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 19 - should be equal
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=16.961ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.308ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.788ms
        
    ok 62 - should not serve index if option is `false` # time=8.277ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=9.834ms
    
    1..63
    # failed 7 of 63 tests
    # time=1747.068ms
not ok 2 - test/static.test.js # time=1747.068ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 1 of 2 tests
# time=3041.904ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |   99.04 |    98.58 |     100 |      99 |                   
 fastify-static     |   98.61 |    98.03 |     100 |   98.59 |                   
  index.js          |   98.61 |    98.03 |     100 |   98.59 | 254-258           
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------
************* run test done *************
variantsDepsNum: 3
/data/js-variants/multee
3
fastify-static is testing ./VariantsDeps/send/variant3/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 464ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    1..0 # no tests found
not ok 1 - test/dir-list.test.js # time=1025.98ms
  ---
  env: {}
  file: test/dir-list.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/dir-list.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

# Subtest: test/static.test.js
    1..0 # no tests found
not ok 2 - test/static.test.js # time=1104.016ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 2 of 2 tests
# time=1130.402ms
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     2.3 |        0 |       0 |    2.34 |                   
 index.js |     2.3 |        0 |       0 |    2.34 | 8-517             
----------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-static is testing ./VariantsDeps/send/variant2/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 453ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    1..0 # no tests found
not ok 1 - test/dir-list.test.js # time=1135.442ms
  ---
  env: {}
  file: test/dir-list.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/dir-list.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

# Subtest: test/static.test.js
    1..0 # no tests found
not ok 2 - test/static.test.js # time=1156.867ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 2 of 2 tests
# time=1183.313ms
----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |     2.3 |        0 |       0 |    2.34 |                   
 index.js |     2.3 |        0 |       0 |    2.34 | 8-517             
----------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-static is testing ./VariantsDeps/send/variant1/send
************* npm unlink module *************

removed 1 package, and audited 888 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 464ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 396ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 890 packages in 2s

126 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> @fastify/static@6.5.0 test
> npm run lint && npm run unit && npm run typescript


> @fastify/static@6.5.0 lint
> standard | snazzy


> @fastify/static@6.5.0 unit
> tap test/*.test.js

TAP version 13
# Subtest: test/dir-list.test.js
    # Subtest: throws when `root` is an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 1 - throws when `root` is an array # time=10.027ms
    
    # Subtest: throws when `list.format` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 2 - throws when `list.format` option is invalid # time=2.934ms
    
    # Subtest: throws when `list.names option` is not an array
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 3 - throws when `list.names option` is not an array # time=2.272ms
    
    # Subtest: throws when `list.jsonFormat` option is invalid
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 4 - throws when `list.jsonFormat` option is invalid # time=2.214ms
    
    # Subtest: throws when `list.format` is html and `list render` is not a function
        1..2
        ok 1 - type is TypeError
        ok 2 - should be equal
    ok 5 - throws when `list.format` is html and `list render` is not a function # time=1.882ms
    
    # Subtest: dir list wrong options
        1..3
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
    ok 6 - dir list wrong options # time=84.255ms
    
    # Subtest: dir list default options
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow # time=22.816ms
        
    ok 7 - dir list default options # time=38.725ms
    
    # Subtest: dir list, custom options
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=22.926ms
        
    ok 8 - dir list, custom options # time=29.868ms
    
    # Subtest: dir list html format
        1..6
        ok 1 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/index.htm # time=34.393ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 3 - /public/index # time=6.071ms
        
        ok 4 - should not error
        # Subtest: /public/index.htm
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 5 - /public/index.htm # time=6.094ms
        
        # Subtest: /public/index
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 6 - /public/index # time=6.064ms
        
    ok 9 - dir list html format # time=132.337ms
    
    # Subtest: dir list href nested structure
        1..6
        ok 1 - should not error
        # Subtest: /public/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 2 - /public/ # time=14.114ms
        
        # Subtest: /public/index
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 3 - /public/index # time=24.93ms
        
        # Subtest: /public/deep/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 4 - /public/deep/ # time=7.877ms
        
        # Subtest: /public/deep/index.htm
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 5 - /public/deep/index.htm # time=11.476ms
        
        # Subtest: /public/deep/path/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
        ok 6 - /public/deep/path/ # time=10.017ms
        
    ok 10 - dir list href nested structure # time=76.796ms
    
    # Subtest: dir list html format - stats
        1..7
        ok 1 - should not error
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
    ok 11 - dir list html format - stats # time=22.94ms
    
    # Subtest: dir list html format - extended info
        1..4
        ok 1 - should not error
        # Subtest: dirs
            1..14
            ok 1 - expect truthy value
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - should be equal
            ok 7 - should be equal
            ok 8 - expect truthy value
            ok 9 - should be equal
            ok 10 - should be equal
            ok 11 - should be equal
            ok 12 - should be equal
            ok 13 - should be equal
            ok 14 - should be equal
        ok 2 - dirs # time=2.578ms
        
        ok 3 - should not error
        ok 4 - should be equal
    ok 12 - dir list html format - extended info # time=56.76ms
    
    # Subtest: dir list json format
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/ # time=3.673ms
        
    ok 13 - dir list json format # time=9.574ms
    
    # Subtest: dir list json format - extended info
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
        ok 2 - /public/shallow/ # time=12.5ms
        
    ok 14 - dir list json format - extended info # time=31.164ms
    
    # Subtest: json format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 15 - json format with url parameter format # time=17.671ms
    
    # Subtest: json format with url parameter format and without render option
        1..12
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - expect truthy value
        ok 9 - should not error
        ok 10 - should be equal
        ok 11 - should be equal
        ok 12 - expect truthy value
    ok 16 - json format with url parameter format and without render option # time=15.953ms
    
    # Subtest: html format with url parameter format
        1..13
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - expect truthy value
        ok 6 - should not error
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - expect truthy value
        ok 10 - should not error
        ok 11 - should be equal
        ok 12 - should be equal
        ok 13 - expect truthy value
    ok 17 - html format with url parameter format # time=46.045ms
    
    # Subtest: dir list on empty dir
        1..2
        ok 1 - should not error
        # Subtest: /public/shallow/empty
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/shallow/empty # time=2.97ms
        
    ok 18 - dir list on empty dir # time=21.591ms
    
    # Subtest: dir list serve index.html on index option
        1..2
        ok 1 - should not error
        # Subtest: serve index.html from fs
            1..6
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should not error
            ok 5 - should be equal
            ok 6 - should be equal
        ok 2 - serve index.html from fs # time=19.808ms
        
    ok 19 - dir list serve index.html on index option # time=26.134ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/ # time=9.626ms
        
    ok 20 - serve a non existent dir and get error # time=32.84ms
    
    # Subtest: serve a non existent dir and get error
        1..2
        ok 1 - should not error
        # Subtest: /public/none/index
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /public/none/index # time=4.899ms
        
    ok 21 - serve a non existent dir and get error # time=20.061ms
    
    # Subtest: dir list with dotfiles allow option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=24.511ms
        
    ok 22 - dir list with dotfiles allow option # time=31.408ms
    
    # Subtest: dir list with dotfiles deny option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=7.231ms
        
    ok 23 - dir list with dotfiles deny option # time=14.24ms
    
    # Subtest: dir list with dotfiles ignore option
        1..2
        ok 1 - should not error
        # Subtest: /public/
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - /public/ # time=3.706ms
        
    ok 24 - dir list with dotfiles ignore option # time=9.926ms
    
    # Subtest: dir list error
        1..7
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        ok 7 - should be equal
    ok 25 - dir list error # time=40.845ms
    
    1..25
    # time=824.592ms
ok 1 - test/dir-list.test.js # time=824.592ms

# Subtest: test/static.test.js
    # Subtest: register /static prefixAvoidTrailingSlash
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=51.963ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=11.432ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=9.17ms
        
        # Subtest: /static
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static # time=8.812ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=8.301ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=8.82ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=8.123ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.028ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 199
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:199:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=47.405ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=4.155ms
        
        # Subtest: file not exposed outside of the plugin
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 12 - file not exposed outside of the plugin # time=5.899ms
        
        # failed 1 of 12 tests
    not ok 1 - register /static prefixAvoidTrailingSlash # time=341.146ms
    
    # Subtest: register /static
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=30.504ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /static/index.css # time=25.231ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=18.805ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - /static # time=4.295ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/deep/path/for/test/purpose/foo.html # time=7.738ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/ # time=10.057ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 8 - /static/this/path/for/test # time=17.786ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/doesnt/exist.html # time=5.191ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 357
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:357:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 10 - /static/../index.js # time=26.053ms
        
        # Subtest: file not exposed outside of the plugin
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 11 - file not exposed outside of the plugin # time=12.153ms
        
        # failed 1 of 11 tests
    not ok 2 - register /static # time=178.604ms
    
    # Subtest: register /static/
        1..12
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=21.968ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=10.819ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=4.187ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /static/ # time=13.205ms
        
        # Subtest: /static
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - /static # time=4.379ms
        
        # Subtest: /static/deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test/purpose/foo.html # time=5.624ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test/ # time=4.098ms
        
        # Subtest: /static/this/path/for/test
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 9 - /static/this/path/for/test # time=2.956ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 10 - /static/this/path/doesnt/exist.html # time=3.234ms
        
        # Subtest: /static/../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 515
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:515:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 11 - /static/../index.js # time=8.753ms
        
        # Subtest: 304
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - should not error
            ok 10 - should be equal
        ok 12 - 304 # time=7.786ms
        
        # failed 1 of 12 tests
    not ok 3 - register /static/ # time=117.763ms
    
    # Subtest: register /static and /static2
        1..5
        ok 1 - should not error
        # Subtest: /static/index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /static/index.html # time=11.95ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=9.087ms
        
        # Subtest: sendFile foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - sendFile foo.html # time=4.038ms
        
        # Subtest: sendFile bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - sendFile bar.html # time=3.935ms
        
    ok 4 - register /static and /static2 # time=37.258ms
    
    # Subtest: payload.filename is set
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static/index.html # time=5.223ms
        
        # Subtest: /static/this/path/doesnt/exist.html
            1..5
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
        ok 3 - /static/this/path/doesnt/exist.html # time=2.885ms
        
    ok 5 - payload.filename is set # time=25.542ms
    
    # Subtest: error responses can be customized with fastify.setErrorHandler()
        1..2
        ok 1 - should not error
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 712
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:712:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '403 Custom error message')
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403 Custom error message
                +undefined Custom error message
              ...
            
            # failed 1 of 4 tests
        not ok 2 - /../index.js # time=14.05ms
        
        # failed 1 of 2 tests
    not ok 6 - error responses can be customized with fastify.setErrorHandler() # time=26.965ms
    
    # Subtest: not found responses can be customized with fastify.setNotFoundHandler()
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
        ok 2 - /path/does/not/exist.html # time=2.772ms
        
    ok 7 - not found responses can be customized with fastify.setNotFoundHandler() # time=8.086ms
    
    # Subtest: fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles
        1..2
        ok 1 - should not error
        # Subtest: /path/does/not/.exist.html
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 791
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:791:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 792
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:792:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.statusCode, 404)
                        t.equal(response.headers['content-type'], 'text/plain')
                ----------^
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -text/plain
                +application/json; charset=utf-8
              ...
            
            not ok 4 - should be equal
              ---
              compare: ===
              at:
                line: 793
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:793:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.equal(response.headers['content-type'], 'text/plain')
                        t.equal(body.toString(), '/path/does/not/.exist.html Not Found')
                ----------^
                      })
                    })
              diff: >
                --- expected
              
                +++ actual
              
                @@ -1,1 +1,1 @@
              
                -/path/does/not/.exist.html Not Found
              
                +{"statusCode":500,"error":"Internal Server Error","message":"setPrototypeOf is not a function"}
              ...
            
            # failed 3 of 4 tests
        not ok 2 - /path/does/not/.exist.html # time=29.871ms
        
        # failed 1 of 2 tests
    not ok 8 - fastify.setNotFoundHandler() is called for dotfiles when when send is configured to ignore dotfiles # time=35.859ms
    
    # Subtest: serving disabled
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html not found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - /static/index.html not found # time=2.378ms
        
        # Subtest: /static/index.html via sendFile found
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html via sendFile found # time=3.157ms
        
    ok 9 - serving disabled # time=10.052ms
    
    # Subtest: sendFile
        1..5
        ok 1 - should not error
        # Subtest: reply.sendFile()
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - reply.sendFile() # time=4.728ms
        
        # Subtest: reply.sendFile() with rootPath
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - reply.sendFile() with rootPath # time=3.217ms
        
        # Subtest: reply.sendFile() again without root path
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - reply.sendFile() again without root path # time=3.188ms
        
        # Subtest: reply.sendFile() with options
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 5 - reply.sendFile() with options # time=3.488ms
        
    ok 10 - sendFile # time=20.234ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.712ms
        
    ok 11 - sendFile disabled # time=13.125ms
    
    # Subtest: allowedPath option - pathname
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.182ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=2.675ms
        
    ok 12 - allowedPath option - pathname # time=11.027ms
    
    # Subtest: allowedPath option - request
        1..3
        ok 1 - should not error
        # Subtest: /foobar.html not found
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 2 - /foobar.html not found # time=3.397ms
        
        # Subtest: /index.css found
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - /index.css found # time=3.907ms
        
    ok 13 - allowedPath option - request # time=12.639ms
    
    # Subtest: download
        1..7
        ok 1 - should not error
        # Subtest: reply.download()
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - reply.download() # time=7.743ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 3 - reply.download() with fileName # time=3.092ms
        
        # Subtest: reply.download() with fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 4 - reply.download() with fileName # time=2.983ms
        
        # Subtest: reply.download() with custom opts
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 5 - reply.download() with custom opts # time=3.371ms
        
        # Subtest: reply.download() with custom opts (2)
            1..10
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - reply.download() with custom opts (2) # time=3.135ms
        
        # Subtest: reply.download() with rootPath and fileName
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 7 - reply.download() with rootPath and fileName # time=2.925ms
        
    ok 14 - download # time=31.515ms
    
    # Subtest: sendFile disabled
        1..2
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.598ms
        
    ok 15 - sendFile disabled # time=13.139ms
    
    # Subtest: download disabled
        1..3
        ok 1 - should not error
        # Subtest: reply.sendFile undefined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
        ok 2 - reply.sendFile undefined # time=1.837ms
        
        ok 3 - should be equal
    ok 16 - download disabled # time=6.651ms
    
    # Subtest: prefix default
        1..1
        ok 1 - expected to not throw
    ok 17 - prefix default # time=1.366ms
    
    # Subtest: root not found warning
        1..2
        ok 1 - should not error
        ok 2 - should be equal
    ok 18 - root not found warning # time=7.96ms
    
    # Subtest: send options
        1..11
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        ok 9 - should be equal
        ok 10 - should be equal
        ok 11 - should be equal
    ok 19 - send options # time=22.741ms
    
    # Subtest: setHeaders option
        1..11
        ok 1 - should not error
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - should be equal
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
        ok 11 - expect truthy value
    ok 20 - setHeaders option # time=11.213ms
    
    # Subtest: maxAge option
        1..10
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
        ok 5 - should be equal
        ok 6 - expect truthy value
        ok 7 - expect truthy value
        ok 8 - expect truthy value
        ok 9 - expect truthy value
        ok 10 - expect truthy value
    ok 21 - maxAge option # time=6.714ms
    
    # Subtest: errors
        1..11
        # Subtest: no root
            1..1
            ok 1 - should be equal
        ok 1 - no root # time=12.107ms
        
        # Subtest: root is not a string
            1..1
            ok 1 - should be equal
        ok 2 - root is not a string # time=1.481ms
        
        # Subtest: root is not an absolute path
            1..1
            ok 1 - should be equal
        ok 3 - root is not an absolute path # time=1.872ms
        
        # Subtest: root is not a directory
            1..1
            ok 1 - should be equal
        ok 4 - root is not a directory # time=1.517ms
        
        # Subtest: root is an empty array
            1..1
            ok 1 - should be equal
        ok 5 - root is an empty array # time=1.46ms
        
        # Subtest: root array does not contain strings
            1..1
            ok 1 - should be equal
        ok 6 - root array does not contain strings # time=1.477ms
        
        # Subtest: root array does not contain an absolute path
            1..1
            ok 1 - should be equal
        ok 7 - root array does not contain an absolute path # time=1.556ms
        
        # Subtest: root array path is not a directory
            1..1
            ok 1 - should be equal
        ok 8 - root array path is not a directory # time=1.518ms
        
        # Subtest: all root array paths must be valid
            1..1
            ok 1 - should be equal
        ok 9 - all root array paths must be valid # time=1.796ms
        
        # Subtest: duplicate root paths are not allowed
            1..1
            ok 1 - should be equal
        ok 10 - duplicate root paths are not allowed # time=1.551ms
        
        # Subtest: setHeaders is not a function
            1..1
            ok 1 - should be equal
        ok 11 - setHeaders is not a function # time=1.512ms
        
    ok 22 - errors # time=34.285ms
    
    # Subtest: register no prefix
        1..8
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=13.365ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.875ms
        
        # Subtest: /
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 4 - / # time=4.918ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /deep/path/for/test/purpose/foo.html # time=3.546ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/ # time=3.651ms
        
        # Subtest: /this/path/doesnt/exist.html
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 7 - /this/path/doesnt/exist.html # time=2.504ms
        
        # Subtest: /../index.js
            1..4
            ok 1 - should not error
            not ok 2 - should be equal
              ---
              compare: ===
              at:
                line: 1631
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:1631:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                        genericErrorResponseChecks(t, response)
                      })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            ok 3 - should be equal
            ok 4 - expect truthy value
            # failed 1 of 4 tests
        not ok 8 - /../index.js # time=14.144ms
        
        # failed 1 of 8 tests
    not ok 23 - register no prefix # time=51.674ms
    
    # Subtest: with fastify-compress
        1..3
        ok 1 - should not error
        # Subtest: deflate
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - deflate # time=11.906ms
        
        # Subtest: gzip
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - gzip # time=5.053ms
        
    ok 24 - with fastify-compress # time=23.382ms
    
    # Subtest: register /static/ with schemaHide true
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=2.894ms
        
    ok 25 - register /static/ with schemaHide true # time=7.114ms
    
    # Subtest: register /static/ with schemaHide false
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.368ms
        
    ok 26 - register /static/ with schemaHide false # time=8.77ms
    
    # Subtest: register /static/ without schemaHide
        1..4
        ok 1 - should be equivalent
        ok 2 - should be equivalent
        ok 3 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/index.html # time=3.39ms
        
    ok 27 - register /static/ without schemaHide # time=8.881ms
    
    # Subtest: fastify with exposeHeadRoutes
        1..2
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=2.762ms
        
    ok 28 - fastify with exposeHeadRoutes # time=37.386ms
    
    # Subtest: register with wildcard false
        1..9
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=7.43ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 3 - /index.css # time=2.685ms
        
        # Subtest: /
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - / # time=2.947ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 5 - /not-defined # time=2.05ms
        
        # Subtest: /deep/path/for/test/purpose/foo.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /deep/path/for/test/purpose/foo.html # time=2.887ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /deep/path/for/test/ # time=2.777ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /../index.js # time=2.371ms
        
        # Subtest: /index.css
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /index.css # time=2.428ms
        
    ok 29 - register with wildcard false # time=46.155ms
    
    # Subtest: register with wildcard string
        1..1
        ok 1 - expect truthy value
    ok 30 - register with wildcard string # time=2.417ms
    
    # Subtest: register with wildcard string on multiple root paths
        1..1
        ok 1 - expect truthy value
    ok 31 - register with wildcard string on multiple root paths # time=2.705ms
    
    # Subtest: register with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /index.html # time=25.827ms
        
        # Subtest: /index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /index.html # time=3.879ms
        
        # Subtest: /index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /index.css # time=10.528ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 5 - /?a=b # time=7.549ms
        
        # Subtest: /?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /?a=b # time=3.491ms
        
        # Subtest: /not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 7 - /not-defined # time=3.464ms
        
        # Subtest: /deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /deep/path/for/test/purpose/ # time=5.88ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /deep/path/for/test/ # time=6.211ms
        
        # Subtest: /deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /deep/path/for/test/ # time=6.457ms
        
        # Subtest: /../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /../index.js # time=4.749ms
        
    ok 32 - register with wildcard false and alternative index # time=116.424ms
    
    # Subtest: register /static with wildcard false and alternative index
        1..11
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=8.766ms
        
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/index.html # time=4.307ms
        
        # Subtest: /static/index.css
            1..7
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - expect truthy value
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
        ok 4 - /static/index.css # time=4.777ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equivalent
        ok 5 - /static # time=3.145ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 6 - /static/ # time=4.433ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/ # time=2.361ms
        
        # Subtest: /static/not-defined
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 8 - /static/not-defined # time=2.996ms
        
        # Subtest: /static/deep/path/for/test/purpose/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 9 - /static/deep/path/for/test/purpose/ # time=8.201ms
        
        # Subtest: /static/deep/path/for/test/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 10 - /static/deep/path/for/test/ # time=3.127ms
        
        # Subtest: /static/../index.js
            1..3
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equivalent
        ok 11 - /static/../index.js # time=2.151ms
        
    ok 33 - register /static with wildcard false and alternative index # time=67.702ms
    
    # Subtest: register /static with redirect true
        1..7
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=12.659ms
        
        # Subtest: /static
            1..2
            ok 1 - should be equal
            ok 2 - should be equal
        ok 3 - /static # time=1.475ms
        
        # Subtest: /static/
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/ # time=2.537ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=3.094ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=7.821ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=10.155ms
        
    ok 34 - register /static with redirect true # time=42.266ms
    
    # Subtest: register /static with redirect true and wildcard false
        1..8
        ok 1 - should not error
        # Subtest: /static?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 2 - /static?a=b # time=11.469ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/?a=b # time=3.047ms
        
        # Subtest: /static/?a=b
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 4 - /static/?a=b # time=2.347ms
        
        # Subtest: /static/deep
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 5 - /static/deep # time=8.085ms
        
        # Subtest: /static/deep/path/for/test?a=b
            1..10
            ok 1 - should be equal
            ok 2 - should be equal
            ok 3 - should not error
            ok 4 - should be equal
            ok 5 - should be equal
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
            ok 10 - expect truthy value
        ok 6 - /static/deep/path/for/test?a=b # time=5.538ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 7 - /static/deep/path/for/test # time=3.438ms
        
        # Subtest: /static/deep/path/for/test
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 8 - /static/deep/path/for/test # time=3.207ms
        
    ok 35 - register /static with redirect true and wildcard false # time=55.37ms
    
    # Subtest: trailing slash behavior with redirect = false
        1..6
        ok 1 - should not error
        # Subtest: prefix with no trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 2 - prefix with no trailing slash => 404 # time=25.048ms
        
        # Subtest: prefix with trailing trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 3 - prefix with trailing trailing slash => 200 # time=8.536ms
        
        # Subtest: deep path with no index.html or trailing slash => 404
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 4 - deep path with no index.html or trailing slash => 404 # time=2.682ms
        
        # Subtest: deep path with index.html but no trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 5 - deep path with index.html but no trailing slash => 200 # time=2.819ms
        
        # Subtest: deep path with index.html and trailing slash => 200
            1..2
            ok 1 - should not error
            ok 2 - should be equal
        ok 6 - deep path with index.html and trailing slash => 200 # time=2.24ms
        
    ok 36 - trailing slash behavior with redirect = false # time=47.356ms
    
    # Subtest: if dotfiles are properly served according to plugin options
        1..3
        # Subtest: freely serve dotfiles
            1..4
            ok 1 - should not error
            ok 2 - should not error
            ok 3 - should be equal
            ok 4 - should be equal
        ok 1 - freely serve dotfiles # time=6.192ms
        
        # Subtest: ignore dotfiles
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2710
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2710:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 404)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -404
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 2 - ignore dotfiles # time=7.35ms
        
        # Subtest: deny requests to serve a dotfile
            1..3
            ok 1 - should not error
            ok 2 - should not error
            not ok 3 - should be equal
              ---
              compare: ===
              at:
                line: 2736
                column: 11
                file: test/static.test.js
              stack: |
                test/static.test.js:2736:11
                node_modules/simple-get/index.js:98:7
                IncomingMessage.<anonymous> (node_modules/simple-concat/index.js:8:13)
              source: |2
                        t.error(err)
                        t.equal(response.statusCode, 403)
                ----------^
                      })
                    })
              diff: |
                --- expected
                +++ actual
                @@ -1,1 +1,1 @@
                -403
                +500
              ...
            
            # failed 1 of 3 tests
        not ok 3 - deny requests to serve a dotfile # time=6.753ms
        
        # failed 2 of 3 tests
    not ok 37 - if dotfiles are properly served according to plugin options # time=23.625ms
    
    # Subtest: register with failing glob handler
        ok 1 - expect truthy value
        1..1
    ok 38 - register with failing glob handler # time=10.342ms
    
    # Subtest: register with rootpath that causes statSync to fail with non-ENOENT code
        ok 1 - expect truthy value
        1..1
    ok 39 - register with rootpath that causes statSync to fail with non-ENOENT code # time=7.896ms
    
    # Subtest: inject support
        ok 1 - should be equal
        ok 2 - should be equal
        1..2
    ok 40 - inject support # time=4.071ms
    
    # Subtest: routes should use custom errorHandler premature stream close
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equal
    ok 41 - routes should use custom errorHandler premature stream close # time=2.437ms
    
    # Subtest: routes should fallback to default errorHandler
        1..4
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - should not error
        ok 4 - should be equivalent
    ok 42 - routes should fallback to default errorHandler # time=3.335ms
    
    # Subtest: percent encoded URLs in glob mode
        1..4
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should be equal
    ok 43 - percent encoded URLs in glob mode # time=4.02ms
    
    # Subtest: register /static and /static2 without wildcard
        1..3
        ok 1 - should not error
        # Subtest: /index.html
            1..9
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should not be equal
            ok 4 - should be equal
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
            ok 9 - expect truthy value
        ok 2 - /index.html # time=3.37ms
        
        # Subtest: /static/bar.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 3 - /static/bar.html # time=2.946ms
        
    ok 44 - register /static and /static2 without wildcard # time=16.236ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 45 - will serve pre-compressed files with .br at the highest priority # time=6.011ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 46 - will serve pre-compressed files and fallback to .gz if .br is not on disk # time=3.717ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 47 - will serve pre-compressed files with .gzip if * directive used # time=3.402ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 48 - will serve pre-compressed files with .gzip if multiple * directives used # time=8.433ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 49 - will serve uncompressed files if there are no compressed variants on disk # time=7.313ms
    
    # Subtest: will serve pre-compressed files with .br at the highest priority (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 50 - will serve pre-compressed files with .br at the highest priority (with wildcard: false) # time=11.637ms
    
    # Subtest: will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 51 - will serve pre-compressed files and fallback to .gz if .br is not on disk (with wildcard: false) # time=11.56ms
    
    # Subtest: will serve pre-compressed files with .gzip if * directive used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 52 - will serve pre-compressed files with .gzip if * directive used (with wildcard: false) # time=13.178ms
    
    # Subtest: will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 53 - will serve pre-compressed files with .gzip if multiple * directives used (with wildcard: false) # time=8.023ms
    
    # Subtest: will serve uncompressed files if there are no compressed variants on disk (with wildcard: false)
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 54 - will serve uncompressed files if there are no compressed variants on disk (with wildcard: false) # time=7.863ms
    
    # Subtest: will serve uncompressed files the accept-encoding header is missing
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 55 - will serve uncompressed files the accept-encoding header is missing # time=2.996ms
    
    # Subtest: will serve precompressed index
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 56 - will serve precompressed index # time=6.335ms
    
    # Subtest: will serve preCompressed index without trailing slash
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 57 - will serve preCompressed index without trailing slash # time=5.499ms
    
    # Subtest: will serve precompressed index with alternative index option
        ok 1 - expect truthy value
        ok 2 - expect truthy value
        ok 3 - expect truthy value
        ok 4 - expect truthy value
        ok 5 - expect truthy value
        ok 6 - should be equal
        ok 7 - should be equal
        ok 8 - should be equivalent
        1..8
    ok 58 - will serve precompressed index with alternative index option # time=3.668ms
    
    # Subtest: will serve precompressed file without content-type charset
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - should be equal
        1..3
    ok 59 - will serve precompressed file without content-type charset # time=3.555ms
    
    # Subtest: nonexistent index with precompressed option
        ok 1 - should be equal
        ok 2 - should be equal
        ok 3 - expect truthy value
        1..3
    ok 60 - nonexistent index with precompressed option # time=2.912ms
    
    # Subtest: should not redirect to protocol-relative locations
        1..21
        ok 1 - should not error
        ok 2 - status //^/..
        ok 3 - should be equal
        ok 4 - status //^/.
        ok 5 - expect falsey value
        ok 6 - status //:/..
        ok 7 - should be equal
        ok 8 - status /\\\\a//google.com/%2e%2e%2f%2e%2e
        ok 9 - should be equal
        ok 10 - status //a//youtube.com/%2e%2e%2f%2e%2e
        ok 11 - should be equal
        ok 12 - status /^
        ok 13 - expect falsey value
        ok 14 - status //google.com/%2e%2e
        ok 15 - should be equal
        ok 16 - status //users/%2e%2e
        ok 17 - should be equal
        ok 18 - status //users
        ok 19 - expect falsey value
        ok 20 - status ///deep/path//for//test//index.html
        ok 21 - expect falsey value
    ok 61 - should not redirect to protocol-relative locations # time=23.217ms
    
    # Subtest: should not serve index if option is `false`
        1..3
        ok 1 - should not error
        # Subtest: /static/index.html
            1..8
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
            ok 5 - expect truthy value
            ok 6 - expect truthy value
            ok 7 - expect truthy value
            ok 8 - expect truthy value
        ok 2 - /static/index.html # time=3.281ms
        
        # Subtest: /static
            1..4
            ok 1 - should not error
            ok 2 - should be equal
            ok 3 - should be equal
            ok 4 - expect truthy value
        ok 3 - /static # time=1.751ms
        
    ok 62 - should not serve index if option is `false` # time=8.237ms
    
    # Subtest: should follow symbolic link without wildcard
        1..5
        ok 1 - should not error
        ok 2 - should not error
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
    ok 63 - should follow symbolic link without wildcard # time=7.904ms
    
    1..63
    # failed 7 of 63 tests
    # time=1752.32ms
not ok 2 - test/static.test.js # time=1752.32ms
  ---
  env: {}
  file: test/static.test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test/static.test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/send/fastify-static
  exitCode: 1
  ...

1..2
# failed 1 of 2 tests
# time=3057.895ms
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |   99.04 |    98.58 |     100 |      99 |                   
 fastify-static     |   98.61 |    98.03 |     100 |   98.59 |                   
  index.js          |   98.61 |    98.03 |     100 |   98.59 | 254-258           
 fastify-static/lib |     100 |      100 |     100 |     100 |                   
  dirList.js        |     100 |      100 |     100 |     100 |                   
--------------------|---------|----------|---------|---------|-------------------
************* run test done *************

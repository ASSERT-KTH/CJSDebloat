6
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant6/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059068027.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant6/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant6/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:278894) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant6/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant6/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_31_07_842Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (11 ms)
      ✓ should return a buffer image thumbnail from an image uri (157 ms)
      ✓ should return a buffer image thumbnail from a file path (16 ms)
      ✓ should return a buffer image thumbnail from a stream (30 ms)
      ✓ should return a buffer image thumbnail from a buffer (13 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (8 ms)
      ✓ should return a base64 image thumbnail from an image uri (144 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (58 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (13 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height
        ✓ should return an object only with width (1 ms)
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.176 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant5/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059079662.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant5/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant5/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:279308) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant5/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant5/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_31_19_476Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (12 ms)
      ✓ should return a buffer image thumbnail from an image uri (134 ms)
      ✓ should return a buffer image thumbnail from a file path (16 ms)
      ✓ should return a buffer image thumbnail from a stream (33 ms)
      ✓ should return a buffer image thumbnail from a buffer (17 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (8 ms)
      ✓ should return a base64 image thumbnail from an image uri (65 ms)
      ✓ should return a base64 image thumbnail from a file path (19 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (71 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (13 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (12 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height
        ✓ should return an object only with width (1 ms)
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.1 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant4/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059091083.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant4/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant4/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:279725) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant4/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant4/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_31_30_897Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (11 ms)
      ✓ should return a buffer image thumbnail from an image uri (158 ms)
      ✓ should return a buffer image thumbnail from a file path (15 ms)
      ✓ should return a buffer image thumbnail from a stream (31 ms)
      ✓ should return a buffer image thumbnail from a buffer (13 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (8 ms)
      ✓ should return a base64 image thumbnail from an image uri (65 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (90 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (13 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height (1 ms)
        ✓ should return an object only with width
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.121 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant3/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059102479.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant3/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant3/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:280139) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant3/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant3/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_31_42_296Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (10 ms)
      ✓ should return a buffer image thumbnail from an image uri (134 ms)
      ✓ should return a buffer image thumbnail from a file path (16 ms)
      ✓ should return a buffer image thumbnail from a stream (32 ms)
      ✓ should return a buffer image thumbnail from a buffer (17 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (4 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (8 ms)
      ✓ should return a base64 image thumbnail from an image uri (61 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (92 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (12 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (17 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height
        ✓ should return an object only with width (1 ms)
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.101 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant2/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059113810.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant2/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant2/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:280556) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant2/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant2/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_31_53_628Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (10 ms)
      ✓ should return a buffer image thumbnail from an image uri (135 ms)
      ✓ should return a buffer image thumbnail from a file path (50 ms)
      ✓ should return a buffer image thumbnail from a stream (42 ms)
      ✓ should return a buffer image thumbnail from a buffer (13 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (9 ms)
      ✓ should return a base64 image thumbnail from an image uri (61 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (58 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (12 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (13 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (10 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height
        ✓ should return an object only with width
        ✓ should return an object with width and height (1 ms)

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.111 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant1/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059125307.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant1/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant1/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:280970) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant1/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant1/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_32_05_123Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (11 ms)
      ✓ should return a buffer image thumbnail from an image uri (130 ms)
      ✓ should return a buffer image thumbnail from a file path (16 ms)
      ✓ should return a buffer image thumbnail from a stream (31 ms)
      ✓ should return a buffer image thumbnail from a buffer (18 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (4 ms)
      ✓ should return a base64 image thumbnail from a buffer (8 ms)
      ✓ should return a base64 image thumbnail from a stream (8 ms)
      ✓ should return a base64 image thumbnail from an image uri (55 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (92 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (13 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (17 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height (1 ms)
        ✓ should return an object only with width
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.083 s, estimated 2 s
Ran all test suites.
3
npm ERR! code 1
npm ERR! path /data/js-variants/multee/VariantsDeps/sharp/variant3/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660058680249.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:273872) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/VariantsDeps/sharp/variant3/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/VariantsDeps/sharp/variant3/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_24_40_064Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (12 ms)
      ✓ should return a buffer image thumbnail from an image uri (173 ms)
      ✓ should return a buffer image thumbnail from a file path (16 ms)
      ✓ should return a buffer image thumbnail from a stream (22 ms)
      ✓ should return a buffer image thumbnail from a buffer (12 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (4 ms)
      ✓ should return a base64 image thumbnail from a buffer (7 ms)
      ✓ should return a base64 image thumbnail from a stream (9 ms)
      ✓ should return a base64 image thumbnail from an image uri (72 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (63 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (12 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height (1 ms)
        ✓ should return an object only with width
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.872 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/VariantsDeps/sharp/variant2/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660058693194.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:274296) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/VariantsDeps/sharp/variant2/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/VariantsDeps/sharp/variant2/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_24_53_008Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (11 ms)
      ✓ should return a buffer image thumbnail from an image uri (136 ms)
      ✓ should return a buffer image thumbnail from a file path (15 ms)
      ✓ should return a buffer image thumbnail from a stream (27 ms)
      ✓ should return a buffer image thumbnail from a buffer (14 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (9 ms)
      ✓ should return a base64 image thumbnail from a stream (10 ms)
      ✓ should return a base64 image thumbnail from an image uri (83 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (63 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (12 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (18 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height (6 ms)
        ✓ should return an object only with width
        ✓ should return an object with width and height (1 ms)

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.851 s, estimated 2 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/VariantsDeps/sharp/variant1/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660058705511.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:274711) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/VariantsDeps/sharp/variant1/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/VariantsDeps/sharp/variant1/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_25_05_327Z-debug-0.log
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
PASS test/imageThumbnail.test.js
  Image Thumbnail
    Thumbnail Buffer
      ✓ should return a buffer image thumbnail from an image base64 (12 ms)
      ✓ should return a buffer image thumbnail from an image uri (147 ms)
      ✓ should return a buffer image thumbnail from a file path (15 ms)
      ✓ should return a buffer image thumbnail from a stream (20 ms)
      ✓ should return a buffer image thumbnail from a buffer (19 ms)
    Thumbnail Base64
      ✓ should return a base64 image thumbnail from an image base64 (5 ms)
      ✓ should return a base64 image thumbnail from a buffer (7 ms)
      ✓ should return a base64 image thumbnail from a stream (9 ms)
      ✓ should return a base64 image thumbnail from an image uri (57 ms)
      ✓ should return a base64 image thumbnail from a file path (8 ms)
      ✓ should return a base64 image thumbnail from an image from samsung phones due to weird encoding and failOnError set (63 ms)
    Options
      ✓ should return a buffer image and keep aspect 300x200 (13 ms)
      ✓ should return a buffer image with width equals 300 (12 ms)
      ✓ should return a buffer image with height equals 300 (17 ms)
      ✓ should return a buffer image with width equals 300 and height equals 200 (12 ms)
      ✓ should return a buffer image with width quals 200 (11 ms)
      ✓ should return a buffer image with width equals 144 and height equals 96 (9 ms)
    Utils
      RemoveUndefined
        ✓ should return an object only with height (1 ms)
        ✓ should return an object only with width
        ✓ should return an object with width and height

Test Suites: 1 passed, 1 total
Tests:       20 passed, 20 total
Snapshots:   0 total
Time:        1.861 s, estimated 2 s
Ran all test suites.

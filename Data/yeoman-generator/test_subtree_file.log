44
./VariantsSubtree/yeoman-generator/variant44/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (78ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (240ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (83ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (134ms)
      ✔ runs 3 composed generators (120ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (332ms)
      ✔ should accept semver version (56ms)
      ✔ should accept github repository (1357ms)
      ✔ should accept github repository version (879ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (272ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (225ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (50ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (254ms)
        ✔ cache the value (265ms)
        ✔ cache is linked to the CWD (515ms)
      .email()
        ✔ is the email used by git (272ms)
        ✔ handle cache (238ms)
        ✔ cache is linked to the CWD (504ms)
    .github
      .username()
        ✔ is the username used by GitHub (392ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant43/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (231ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (42ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (115ms)
      ✔ runs multiple composed generators (reverse) (131ms)
      ✔ runs 3 composed generators (116ms)
      ✔ runs multiple composed generators inside a running generator (113ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process (38ms)
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version (65ms)
      ✔ should accept github repository (1459ms)
      ✔ should accept github repository version (1006ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (224ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (291ms)
        ✔ cache the value (255ms)
        ✔ cache is linked to the CWD (554ms)
      .email()
        ✔ is the email used by git (249ms)
        ✔ handle cache (251ms)
        ✔ cache is linked to the CWD (553ms)
    .github
      .username()
        ✔ is the username used by GitHub (298ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant42/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (181ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (114ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (118ms)
      ✔ runs 3 composed generators (122ms)
      ✔ runs multiple composed generators inside a running generator (126ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (384ms)
      ✔ should accept semver version (55ms)
      ✔ should accept github repository (1247ms)
      ✔ should accept github repository version (1141ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (94ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (256ms)
        ✔ cache the value (307ms)
        ✔ cache is linked to the CWD (536ms)
      .email()
        ✔ is the email used by git (182ms)
        ✔ handle cache (254ms)
        ✔ cache is linked to the CWD (505ms)
    .github
      .username()
        ✔ is the username used by GitHub (291ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant41/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (158ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (46ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (40ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (44ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (127ms)
      ✔ runs multiple composed generators (reverse) (117ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (123ms)
      ✔ runs multiple composed generators inside a running generator (124ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (101ms)
      ✔ should accept semver version (55ms)
      ✔ should accept github repository (1140ms)
      ✔ should accept github repository version (839ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (66ms)
      ✔ should accept arrays (237ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (66ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (60ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (253ms)
        ✔ cache the value (357ms)
        ✔ cache is linked to the CWD (513ms)
      .email()
        ✔ is the email used by git (263ms)
        ✔ handle cache (251ms)
        ✔ cache is linked to the CWD (497ms)
    .github
      .username()
        ✔ is the username used by GitHub (277ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant40/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (64ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (40ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (66ms)
      ✔ triggers end event after all generators methods are ran (#709) (39ms)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (114ms)
      ✔ runs multiple composed generators inside a running generator (141ms)
      ✔ runs multiple composed generators inside a running generator (119ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (103ms)
      ✔ should accept semver version (43ms)
      ✔ should accept github repository (992ms)
      ✔ should accept github repository version (889ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (85ms)
      ✔ should accept arrays (55ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (254ms)
        ✔ cache the value (262ms)
        ✔ cache is linked to the CWD (603ms)
      .email()
        ✔ is the email used by git (252ms)
        ✔ handle cache (255ms)
        ✔ cache is linked to the CWD (492ms)
    .github
      .username()
        ✔ is the username used by GitHub (273ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant39/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (369ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (123ms)
      ✔ runs multiple composed generators (reverse) (118ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (1787ms)
      ✔ should accept semver version (69ms)
      ✔ should accept github repository (1434ms)
      ✔ should accept github repository version (984ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (42ms)
      ✔ should accept arrays (83ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (259ms)
        ✔ cache the value (252ms)
        ✔ cache is linked to the CWD (507ms)
      .email()
        ✔ is the email used by git (273ms)
        ✔ handle cache (255ms)
        ✔ cache is linked to the CWD (529ms)
    .github
      .username()
        ✔ is the username used by GitHub (282ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant38/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (55ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (208ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (72ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (91ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (121ms)
      ✔ runs multiple composed generators (reverse) (121ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (115ms)
      ✔ runs multiple composed generators inside a running generator (122ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (205ms)
      ✔ should accept semver version (60ms)
      ✔ should accept github repository (1281ms)
      ✔ should accept github repository version (813ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (45ms)
      ✔ should accept arrays (67ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (71ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (51ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (395ms)
        ✔ cache the value (250ms)
        ✔ cache is linked to the CWD (545ms)
      .email()
        ✔ is the email used by git (249ms)
        ✔ handle cache (255ms)
        ✔ cache is linked to the CWD (575ms)
    .github
      .username()
        ✔ is the username used by GitHub (285ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant37/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (506ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (47ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (112ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (77ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator (38ms)
      ✔ only call the end event once (bug #402) (62ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (118ms)
      ✔ runs multiple composed generators inside a running generator (113ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (127ms)
      ✔ should accept semver version (85ms)
      ✔ should accept github repository (1426ms)
      ✔ should accept github repository version (935ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (71ms)
      ✔ should accept arrays (70ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (292ms)
        ✔ cache the value (313ms)
        ✔ cache is linked to the CWD (518ms)
      .email()
        ✔ is the email used by git (251ms)
        ✔ handle cache (271ms)
        ✔ cache is linked to the CWD (469ms)
    .github
      .username()
        ✔ is the username used by GitHub (361ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant36/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (80ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (236ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (43ms)
      ✔ add multiple transform streams to the commit stream (62ms)
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (82ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (119ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (128ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (114ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (104ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (1163ms)
      ✔ should accept github repository version (896ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (50ms)
      ✔ should accept arrays (76ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (264ms)
        ✔ cache the value (249ms)
        ✔ cache is linked to the CWD (505ms)
      .email()
        ✔ is the email used by git (281ms)
        ✔ handle cache (260ms)
        ✔ cache is linked to the CWD (503ms)
    .github
      .username()
        ✔ is the username used by GitHub (291ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant35/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (40ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (394ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (38ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (124ms)
      ✔ runs 3 composed generators (126ms)
      ✔ runs multiple composed generators inside a running generator (123ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (158ms)
      ✔ should accept semver version (75ms)
      ✔ should accept github repository (1450ms)
      ✔ should accept github repository version (1027ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (69ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (72ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (269ms)
        ✔ cache the value (204ms)
        ✔ cache is linked to the CWD (526ms)
      .email()
        ✔ is the email used by git (326ms)
        ✔ handle cache (265ms)
        ✔ cache is linked to the CWD (536ms)
    .github
      .username()
        ✔ is the username used by GitHub (283ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant34/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (505ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities (41ms)
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (52ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (40ms)
      ✔ triggers end event after all generators methods are ran (#709) (49ms)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (122ms)
      ✔ runs multiple composed generators (reverse) (116ms)
      ✔ runs 3 composed generators (124ms)
      ✔ runs multiple composed generators inside a running generator (126ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (292ms)
      ✔ should accept semver version (77ms)
      ✔ should accept github repository (1460ms)
      ✔ should accept github repository version (971ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (48ms)
      ✔ should accept arrays (271ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (209ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (85ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (264ms)
        ✔ cache the value (257ms)
        ✔ cache is linked to the CWD (505ms)
      .email()
        ✔ is the email used by git (267ms)
        ✔ handle cache (258ms)
        ✔ cache is linked to the CWD (522ms)
    .github
      .username()
        ✔ is the username used by GitHub (282ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant33/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (69ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (208ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (47ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (41ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (136ms)
      ✔ runs 3 composed generators (127ms)
      ✔ runs multiple composed generators inside a running generator (121ms)
      ✔ runs multiple composed generators inside a running generator (113ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (91ms)
      ✔ should accept semver version (43ms)
      ✔ should accept github repository (1223ms)
      ✔ should accept github repository version (1042ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (39ms)
      ✔ should accept arrays (267ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (78ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (59ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (195ms)
        ✔ cache the value (255ms)
        ✔ cache is linked to the CWD (510ms)
      .email()
        ✔ is the email used by git (255ms)
        ✔ handle cache (259ms)
        ✔ cache is linked to the CWD (548ms)
    .github
      .username()
        ✔ is the username used by GitHub (312ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant32/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (39ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (113ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (118ms)
      ✔ runs multiple composed generators inside a running generator (127ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (136ms)
      ✔ should accept semver version (46ms)
      ✔ should accept github repository (1226ms)
      ✔ should accept github repository version (958ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (77ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (65ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (82ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (250ms)
        ✔ cache the value (252ms)
        ✔ cache is linked to the CWD (494ms)
      .email()
        ✔ is the email used by git (258ms)
        ✔ handle cache (268ms)
        ✔ cache is linked to the CWD (563ms)
    .github
      .username()
        ✔ is the username used by GitHub (298ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant31/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (338ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (39ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk (49ms)
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (38ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (121ms)
      ✔ runs 3 composed generators (127ms)
      ✔ runs multiple composed generators inside a running generator (123ms)
      ✔ runs multiple composed generators inside a running generator (117ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (758ms)
      ✔ should accept semver version (64ms)
      ✔ should accept github repository (1055ms)
      ✔ should accept github repository version (862ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (223ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (54ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (62ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (258ms)
        ✔ cache the value (254ms)
        ✔ cache is linked to the CWD (543ms)
      .email()
        ✔ is the email used by git (255ms)
        ✔ handle cache (255ms)
        ✔ cache is linked to the CWD (507ms)
    .github
      .username()
        ✔ is the username used by GitHub (285ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant30/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (59ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (173ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods (46ms)
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (45ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (108ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (58ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (124ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (121ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (210ms)
      ✔ should accept semver version (49ms)
      ✔ should accept github repository (1101ms)
      ✔ should accept github repository version (856ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (72ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (55ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (254ms)
        ✔ cache the value (258ms)
        ✔ cache is linked to the CWD (510ms)
      .email()
        ✔ is the email used by git (257ms)
        ✔ handle cache (263ms)
        ✔ cache is linked to the CWD (513ms)
    .github
      .username()
        ✔ is the username used by GitHub (250ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant29/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (47ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (361ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (76ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames (49ms)
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (115ms)
      ✔ runs multiple composed generators (reverse) (120ms)
      ✔ runs 3 composed generators (117ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (129ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (304ms)
      ✔ should accept semver version (78ms)
      ✔ should accept github repository (1442ms)
      ✔ should accept github repository version (915ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (54ms)
      ✔ should accept arrays (79ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (56ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (361ms)
        ✔ cache the value (260ms)
        ✔ cache is linked to the CWD (472ms)
      .email()
        ✔ is the email used by git (266ms)
        ✔ handle cache (257ms)
        ✔ cache is linked to the CWD (559ms)
    .github
      .username()
        1) is the username used by GitHub


  353 passing (16s)
  1 failing

  1) Base#user
       .github
         .username()
           is the username used by GitHub:
     TypeError: Bind must be called on a function
      at Object.bind (<anonymous>)
      at bindApi (node_modules/before-after-hook/index.js:10:50)
      at new HookCollection (node_modules/before-after-hook/index.js:36:3)
      at new Octokit (node_modules/@octokit/core/dist-node/index.js:52:18)
      at new _a (node_modules/@octokit/core/dist-node/index.js:167:30)
      at new OctokitWithDefaults (node_modules/@octokit/core/dist-node/index.js:147:9)
      at module.exports (node_modules/github-username/index.js:24:18)
      at Object.user.github.username (lib/actions/user.js:17:111)
      at Context.<anonymous> (test/user.js:110:33)
      at processImmediate (node:internal/timers:466:21)



-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant28/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |    9.36 |        0 |    1.29 |    9.39 |                                   
 lib                   |    5.32 |        0 |    1.21 |    5.24 |                                   
  index.js             |    5.32 |        0 |    1.21 |    5.24 | 30-1561,1572                      
 lib/actions           |   21.42 |        0 |    2.43 |   21.68 |                                   
  fs.js                |   26.02 |        0 |       0 |   26.02 | ...40-252,274-281,301-310,323-336 
  help.js              |   22.72 |        0 |       0 |   23.25 | 20-50,60-75,85-86,94-104,112-126  
  package-json.js      |      10 |        0 |   14.28 |      10 | 17-71                             
  spawn-command.js     |   66.66 |      100 |       0 |   66.66 | 19,35                             
  user.js              |       4 |        0 |       0 |    4.16 | 3-66                              
 lib/util              |    9.52 |        0 |       0 |    9.52 |                                   
  prompt-suggestion.js |   13.04 |        0 |       0 |   13.04 | ...42,56-71,86-90,101-140,153-191 
  storage.js           |    6.41 |        0 |       0 |    6.41 | 11-261                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant27/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsSubtree/yeoman-generator/variant26/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (591ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (52ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (127ms)
      ✔ should accept semver version (85ms)
      ✔ should accept github repository (1416ms)
      ✔ should accept github repository version (1105ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (96ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (189ms)
        ✔ cache the value (257ms)
        ✔ cache is linked to the CWD (507ms)
      .email()
        ✔ is the email used by git (228ms)
        ✔ handle cache (317ms)
        ✔ cache is linked to the CWD (512ms)
    .github
      .username()
        ✔ is the username used by GitHub (295ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant25/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (161ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (316ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (68ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order (56ms)
      ✔ correctly run custom priority with once option (39ms)
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (130ms)
      ✔ runs multiple composed generators (reverse) (113ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (177ms)
      ✔ should accept semver version (49ms)
      ✔ should accept github repository (1259ms)
      ✔ should accept github repository version (974ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (50ms)
      ✔ should accept arrays (105ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (82ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (263ms)
        ✔ cache the value (263ms)
        ✔ cache is linked to the CWD (516ms)
      .email()
        ✔ is the email used by git (260ms)
        ✔ handle cache (259ms)
        ✔ cache is linked to the CWD (555ms)
    .github
      .username()
        ✔ is the username used by GitHub (263ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant24/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (297ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities (46ms)
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (63ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (127ms)
      ✔ runs multiple composed generators (reverse) (117ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (136ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (1378ms)
      ✔ should accept github repository version (891ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (88ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (54ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (158ms)
        ✔ cache the value (257ms)
        ✔ cache is linked to the CWD (555ms)
      .email()
        ✔ is the email used by git (258ms)
        ✔ handle cache (255ms)
        ✔ cache is linked to the CWD (507ms)
    .github
      .username()
        ✔ is the username used by GitHub (239ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant23/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsSubtree/yeoman-generator/variant22/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (219ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (122ms)
      ✔ runs 3 composed generators (115ms)
      ✔ runs multiple composed generators inside a running generator (114ms)
      ✔ runs multiple composed generators inside a running generator (121ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (152ms)
      ✔ should accept semver version (42ms)
      ✔ should accept github repository (1439ms)
      ✔ should accept github repository version (962ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (69ms)
      ✔ should accept arrays (249ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (67ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (244ms)
        ✔ cache the value (294ms)
        ✔ cache is linked to the CWD (555ms)
      .email()
        ✔ is the email used by git (230ms)
        ✔ handle cache (254ms)
        ✔ cache is linked to the CWD (512ms)
    .github
      .username()
        ✔ is the username used by GitHub (289ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant21/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsSubtree/yeoman-generator/variant20/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (551ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (73ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (44ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (45ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (123ms)
      ✔ runs multiple composed generators (reverse) (123ms)
      ✔ runs 3 composed generators (131ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (89ms)
      ✔ should accept semver version
      ✔ should accept github repository (1003ms)
      ✔ should accept github repository version (775ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (77ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (52ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (51ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (234ms)
        ✔ cache the value (331ms)
        ✔ cache is linked to the CWD (497ms)
      .email()
        ✔ is the email used by git (252ms)
        ✔ handle cache (250ms)
        ✔ cache is linked to the CWD (509ms)
    .github
      .username()
        ✔ is the username used by GitHub (277ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant19/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (126ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (42ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (139ms)
      ✔ runs multiple composed generators (reverse) (140ms)
      ✔ runs 3 composed generators (115ms)
      ✔ runs multiple composed generators inside a running generator (116ms)
      ✔ runs multiple composed generators inside a running generator (117ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (311ms)
      ✔ should accept semver version
      ✔ should accept github repository (1064ms)
      ✔ should accept github repository version (863ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (77ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (86ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (254ms)
        ✔ cache the value (225ms)
        ✔ cache is linked to the CWD (548ms)
      .email()
        ✔ is the email used by git (257ms)
        ✔ handle cache (204ms)
        ✔ cache is linked to the CWD (501ms)
    .github
      .username()
        ✔ is the username used by GitHub (282ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant18/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (324ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (108ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (46ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator (41ms)
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (115ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (129ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (116ms)
      ✔ should accept semver version (49ms)
      ✔ should accept github repository (1396ms)
      ✔ should accept github repository version (1047ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (81ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (56ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (254ms)
        ✔ cache the value (253ms)
        ✔ cache is linked to the CWD (545ms)
      .email()
        ✔ is the email used by git (219ms)
        ✔ handle cache (256ms)
        ✔ cache is linked to the CWD (505ms)
    .github
      .username()
        ✔ is the username used by GitHub (311ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant17/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (39ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (186ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (43ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (80ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (119ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (159ms)
      ✔ should accept semver version (77ms)
      ✔ should accept github repository (1247ms)
      ✔ should accept github repository version (1034ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (239ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (70ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (257ms)
        ✔ cache the value (313ms)
        ✔ cache is linked to the CWD (536ms)
      .email()
        ✔ is the email used by git (260ms)
        ✔ handle cache (264ms)
        ✔ cache is linked to the CWD (515ms)
    .github
      .username()
        ✔ is the username used by GitHub (328ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant16/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (41ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (529ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (114ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (62ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (98ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (112ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (112ms)
      ✔ runs multiple composed generators inside a running generator (115ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (283ms)
      ✔ should accept semver version (59ms)
      ✔ should accept github repository (1486ms)
      ✔ should accept github repository version (1162ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (243ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (70ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (64ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (280ms)
        ✔ cache is linked to the CWD (510ms)
      .email()
        ✔ is the email used by git (261ms)
        ✔ handle cache (263ms)
        ✔ cache is linked to the CWD (531ms)
    .github
      .username()
        ✔ is the username used by GitHub (310ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant15/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (424ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (64ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (84ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (114ms)
      ✔ runs multiple composed generators (reverse) (128ms)
      ✔ runs 3 composed generators (127ms)
      ✔ runs multiple composed generators inside a running generator (140ms)
      ✔ runs multiple composed generators inside a running generator (120ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (116ms)
      ✔ should accept semver version (43ms)
      ✔ should accept github repository (1223ms)
      ✔ should accept github repository version (914ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (47ms)
      ✔ should accept arrays (79ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (69ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (261ms)
        ✔ cache the value (257ms)
        ✔ cache is linked to the CWD (530ms)
      .email()
        ✔ is the email used by git (298ms)
        ✔ handle cache (257ms)
        ✔ cache is linked to the CWD (522ms)
    .github
      .username()
        ✔ is the username used by GitHub (218ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant14/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (48ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (320ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (40ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (57ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options (39ms)
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (128ms)
      ✔ runs multiple composed generators (reverse) (117ms)
      ✔ runs 3 composed generators (118ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (127ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (105ms)
      ✔ should accept semver version (39ms)
      ✔ should accept github repository (1184ms)
      ✔ should accept github repository version (860ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (73ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (67ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (237ms)
        ✔ cache the value (260ms)
        ✔ cache is linked to the CWD (505ms)
      .email()
        ✔ is the email used by git (277ms)
        ✔ handle cache (337ms)
        ✔ cache is linked to the CWD (518ms)
    .github
      .username()
        ✔ is the username used by GitHub (232ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant13/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (184ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (40ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (115ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (124ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (115ms)
      ✔ runs multiple composed generators inside a running generator (121ms)
      ✔ runs multiple composed generators inside a running generator (117ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (171ms)
      ✔ should accept semver version (71ms)
      ✔ should accept github repository (1358ms)
      ✔ should accept github repository version (1142ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (85ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (69ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (280ms)
        ✔ cache the value (261ms)
        ✔ cache is linked to the CWD (529ms)
      .email()
        ✔ is the email used by git (258ms)
        ✔ handle cache (260ms)
        ✔ cache is linked to the CWD (529ms)
    .github
      .username()
        ✔ is the username used by GitHub (290ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant12/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (83ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (470ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (48ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (51ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (88ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (121ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (114ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (138ms)
      ✔ should accept semver version (52ms)
      ✔ should accept github repository (1294ms)
      ✔ should accept github repository version (1077ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (57ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (46ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (260ms)
        ✔ cache the value (255ms)
        ✔ cache is linked to the CWD (651ms)
      .email()
        ✔ is the email used by git (259ms)
        ✔ handle cache (256ms)
        ✔ cache is linked to the CWD (540ms)
    .github
      .username()
        ✔ is the username used by GitHub (297ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant11/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsSubtree/yeoman-generator/variant10/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (181ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (92ms)
      ✔ add multiple transform streams to the commit stream (48ms)
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (69ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (122ms)
      ✔ runs multiple composed generators inside a running generator (118ms)
      ✔ runs multiple composed generators inside a running generator (115ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (145ms)
      ✔ should accept semver version (68ms)
      ✔ should accept github repository (1490ms)
      ✔ should accept github repository version (1048ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (62ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (267ms)
        ✔ cache the value (260ms)
        ✔ cache is linked to the CWD (617ms)
      .email()
        ✔ is the email used by git (253ms)
        ✔ handle cache (318ms)
        ✔ cache is linked to the CWD (522ms)
    .github
      .username()
        ✔ is the username used by GitHub (292ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant9/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (487ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous (40ms)
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (121ms)
      ✔ runs multiple composed generators (reverse) (122ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (113ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (139ms)
      ✔ should accept semver version
      ✔ should accept github repository (1047ms)
      ✔ should accept github repository version (876ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (288ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (693ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (59ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (263ms)
        ✔ cache the value (259ms)
        ✔ cache is linked to the CWD (507ms)
      .email()
        ✔ is the email used by git (260ms)
        ✔ handle cache (326ms)
        ✔ cache is linked to the CWD (476ms)
    .github
      .username()
        ✔ is the username used by GitHub (280ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant8/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsSubtree/yeoman-generator/variant7/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (43ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (393ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again (63ms)
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (48ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator (38ms)
      ✔ only call the end event once (bug #402) (54ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (128ms)
      ✔ runs multiple composed generators inside a running generator (117ms)
      ✔ runs multiple composed generators inside a running generator (132ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (319ms)
      ✔ should accept semver version (78ms)
      ✔ should accept github repository (1697ms)
      ✔ should accept github repository version (883ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (114ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (85ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (72ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (257ms)
        ✔ cache the value (260ms)
        ✔ cache is linked to the CWD (492ms)
      .email()
        ✔ is the email used by git (317ms)
        ✔ handle cache (247ms)
        ✔ cache is linked to the CWD (528ms)
    .github
      .username()
        ✔ is the username used by GitHub (262ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant6/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (371ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (64ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (69ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (113ms)
      ✔ runs 3 composed generators (119ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (233ms)
      ✔ should accept semver version (58ms)
      ✔ should accept github repository (1435ms)
      ✔ should accept github repository version (866ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (48ms)
      ✔ should accept arrays (78ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (264ms)
        ✔ cache the value (260ms)
        ✔ cache is linked to the CWD (564ms)
      .email()
        ✔ is the email used by git (249ms)
        ✔ handle cache (251ms)
        ✔ cache is linked to the CWD (493ms)
    .github
      .username()
        ✔ is the username used by GitHub (302ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant5/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (46ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (121ms)
      ✔ runs multiple composed generators (reverse) (116ms)
      ✔ runs 3 composed generators (126ms)
      ✔ runs multiple composed generators inside a running generator (125ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (103ms)
      ✔ should accept semver version (78ms)
      ✔ should accept github repository (1317ms)
      ✔ should accept github repository version (951ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (55ms)
      ✔ should accept arrays (78ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (237ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (261ms)
        ✔ cache the value (256ms)
        ✔ cache is linked to the CWD (424ms)
      .email()
        ✔ is the email used by git (382ms)
        ✔ handle cache (259ms)
        ✔ cache is linked to the CWD (408ms)
    .github
      .username()
        ✔ is the username used by GitHub (285ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant4/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (39ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (122ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (53ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (115ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running. (44ms)
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (39ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (129ms)
      ✔ runs multiple composed generators (reverse) (124ms)
      ✔ runs 3 composed generators (145ms)
      ✔ runs multiple composed generators inside a running generator (116ms)
      ✔ runs multiple composed generators inside a running generator (144ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (161ms)
      ✔ should accept semver version (56ms)
      ✔ should accept github repository (1278ms)
      ✔ should accept github repository version (890ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (88ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (63ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (250ms)
        ✔ cache the value (269ms)
        ✔ cache is linked to the CWD (516ms)
      .email()
        ✔ is the email used by git (293ms)
        ✔ handle cache (252ms)
        ✔ cache is linked to the CWD (442ms)
    .github
      .username()
        ✔ is the username used by GitHub (286ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant3/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (45ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (411ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (47ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (139ms)
      ✔ runs 3 composed generators (133ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (156ms)
      ✔ should accept semver version (79ms)
      ✔ should accept github repository (1470ms)
      ✔ should accept github repository version (980ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (236ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (54ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (265ms)
        ✔ cache the value (248ms)
        ✔ cache is linked to the CWD (584ms)
      .email()
        ✔ is the email used by git (255ms)
        ✔ handle cache (253ms)
        ✔ cache is linked to the CWD (566ms)
    .github
      .username()
        ✔ is the username used by GitHub (291ms)


  354 passing (17s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant2/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (73ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (346ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (57ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402) (71ms)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (119ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (126ms)
      ✔ runs multiple composed generators inside a running generator (131ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (173ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (1157ms)
      ✔ should accept github repository version (892ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (219ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (221ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (257ms)
        ✔ cache the value (257ms)
        ✔ cache is linked to the CWD (557ms)
      .email()
        ✔ is the email used by git (249ms)
        ✔ handle cache (258ms)
        ✔ cache is linked to the CWD (520ms)
    .github
      .username()
        ✔ is the username used by GitHub (290ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsSubtree/yeoman-generator/variant1/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (43ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (125ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk (42ms)
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (110ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream (65ms)
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (112ms)
      ✔ runs multiple composed generators (reverse) (125ms)
      ✔ runs 3 composed generators (115ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (120ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (109ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (1135ms)
      ✔ should accept github repository version (960ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (104ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (69ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (67ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (262ms)
        ✔ cache the value (254ms)
        ✔ cache is linked to the CWD (556ms)
      .email()
        ✔ is the email used by git (257ms)
        ✔ handle cache (256ms)
        ✔ cache is linked to the CWD (584ms)
    .github
      .username()
        ✔ is the username used by GitHub (248ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------

103
./VariantsFile/yeoman-generator/variant103/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (52ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (252ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (120ms)
      ✔ runs multiple composed generators (reverse) (114ms)
      ✔ runs 3 composed generators (112ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (439ms)
      ✔ should accept semver version (39ms)
      ✔ should accept github repository (1327ms)
      ✔ should accept github repository version (751ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (60ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (220ms)
        ✔ cache the value (214ms)
        ✔ cache is linked to the CWD (410ms)
      .email()
        ✔ is the email used by git (207ms)
        ✔ handle cache (241ms)
        ✔ cache is linked to the CWD (422ms)
    .github
      .username()
        ✔ is the username used by GitHub (257ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant102/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (39ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (294ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (114ms)
      ✔ runs multiple composed generators (reverse) (113ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (113ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn (54ms)
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (105ms)
      ✔ should accept semver version
      ✔ should accept github repository (1016ms)
      ✔ should accept github repository version (698ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (379ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (201ms)
        ✔ cache the value (244ms)
        ✔ cache is linked to the CWD (470ms)
      .email()
        ✔ is the email used by git (347ms)
        ✔ handle cache (227ms)
        ✔ cache is linked to the CWD (515ms)
    .github
      .username()
        ✔ is the username used by GitHub (240ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant101/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (136ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (79ms)
      ✔ should accept semver version
      ✔ should accept github repository (1153ms)
      ✔ should accept github repository version (850ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (235ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (174ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (176ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant100/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (156ms)
      ✔ should accept semver version (54ms)
      ✔ should accept github repository (940ms)
      ✔ should accept github repository version (732ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (41ms)
      ✔ should accept arrays (91ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (184ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (323ms)
      .email()
        ✔ is the email used by git (157ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (313ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant99/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (275ms)
      ✔ should accept semver version (44ms)
      ✔ should accept github repository (1000ms)
      ✔ should accept github repository version (650ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (53ms)
      ✔ should accept arrays (235ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (169ms)
        ✔ cache the value (158ms)
        ✔ cache is linked to the CWD (330ms)
      .email()
        ✔ is the email used by git (165ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (172ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant98/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (91ms)
      ✔ should accept semver version
      ✔ should accept github repository (922ms)
      ✔ should accept github repository version (665ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (67ms)
      ✔ should accept arrays (59ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (341ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant97/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (146ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (81ms)
      ✔ should accept semver version
      ✔ should accept github repository (955ms)
      ✔ should accept github repository version (693ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (54ms)
      ✔ should accept arrays (80ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (174ms)
        ✔ cache is linked to the CWD (330ms)
      .email()
        ✔ is the email used by git (204ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (320ms)
    .github
      .username()
        ✔ is the username used by GitHub (175ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant96/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (109ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (115ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (82ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (922ms)
      ✔ should accept github repository version (660ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (54ms)
      ✔ should accept arrays (70ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (323ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (364ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant95/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (124ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (110ms)
      ✔ should accept semver version
      ✔ should accept github repository (1253ms)
      ✔ should accept github repository version (736ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (47ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (173ms)
        ✔ cache the value (169ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (179ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant94/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (99ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (939ms)
      ✔ should accept github repository version (656ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (42ms)
      ✔ should accept arrays (62ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (183ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (168ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant93/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (103ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (74ms)
      ✔ should accept semver version
      ✔ should accept github repository (920ms)
      ✔ should accept github repository version (738ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (68ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (321ms)
    .github
      .username()
        ✔ is the username used by GitHub (226ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant92/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (90ms)
      ✔ should accept semver version (62ms)
      ✔ should accept github repository (966ms)
      ✔ should accept github repository version (721ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (49ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (213ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (50ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (324ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (182ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant91/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (144ms)
      ✔ should accept semver version
      ✔ should accept github repository (944ms)
      ✔ should accept github repository version (674ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (54ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (46ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (338ms)
      .email()
        ✔ is the email used by git (165ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (356ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant90/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (149ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (71ms)
      ✔ should accept semver version
      ✔ should accept github repository (1079ms)
      ✔ should accept github repository version (651ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (45ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (323ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (194ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant89/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (116ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (176ms)
      ✔ should accept semver version (51ms)
      ✔ should accept github repository (919ms)
      ✔ should accept github repository version (908ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (54ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (196ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (165ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant88/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (89ms)
      ✔ should accept semver version
      ✔ should accept github repository (946ms)
      ✔ should accept github repository version (685ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (60ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (202ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (170ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (329ms)
    .github
      .username()
        ✔ is the username used by GitHub (188ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant87/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (112ms)
      ✔ should accept semver version (40ms)
      ✔ should accept github repository (916ms)
      ✔ should accept github repository version (2551ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (65ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (170ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (328ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (167ms)
        ✔ cache is linked to the CWD (335ms)
    .github
      .username()
        ✔ is the username used by GitHub (188ms)


  354 passing (12s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant86/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (119ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (107ms)
      ✔ should accept semver version (51ms)
      ✔ should accept github repository (945ms)
      ✔ should accept github repository version (651ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (63ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (217ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (182ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (324ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant85/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (114ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (80ms)
      ✔ should accept semver version (46ms)
      ✔ should accept github repository (1020ms)
      ✔ should accept github repository version (742ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (52ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (187ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (322ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (178ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant84/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (122ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (76ms)
      ✔ should accept semver version
      ✔ should accept github repository (928ms)
      ✔ should accept github repository version (913ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (58ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (320ms)
      .email()
        ✔ is the email used by git (169ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (206ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant83/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (114ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (129ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (106ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (3512ms)
      ✔ should accept github repository version (708ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (50ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (156ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (332ms)
      .email()
        ✔ is the email used by git (168ms)
        ✔ handle cache (173ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant82/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |    9.48 |        0 |    1.29 |    9.51 |                                   
 lib                   |    5.32 |        0 |    1.21 |    5.24 |                                   
  index.js             |    5.32 |        0 |    1.21 |    5.24 | 30-1561,1572                      
 lib/actions           |   22.02 |        0 |    2.43 |   22.28 |                                   
  fs.js                |   26.02 |        0 |       0 |   26.02 | ...40-252,274-281,301-310,323-336 
  help.js              |   22.72 |        0 |       0 |   23.25 | 20-50,60-75,85-86,94-104,112-126  
  package-json.js      |      10 |        0 |   14.28 |      10 | 17-71                             
  spawn-command.js     |   66.66 |      100 |       0 |   66.66 | 19,35                             
  user.js              |       8 |        0 |       0 |    8.33 | 5-66                              
 lib/util              |    9.52 |        0 |       0 |    9.52 |                                   
  prompt-suggestion.js |   13.04 |        0 |       0 |   13.04 | ...42,56-71,86-90,101-140,153-191 
  storage.js           |    6.41 |        0 |       0 |    6.41 | 11-261                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant81/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (141ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (93ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (936ms)
      ✔ should accept github repository version (1064ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (49ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (178ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (363ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (171ms)
        ✔ cache is linked to the CWD (337ms)
    .github
      .username()
        1) is the username used by GitHub


  353 passing (10s)
  1 failing

  1) Base#user
       .github
         .username()
           is the username used by GitHub:
     TypeError: Bind must be called on a function
      at Object.bind (<anonymous>)
      at bindApi (node_modules/before-after-hook/index.js:10:50)
      at new HookCollection (node_modules/before-after-hook/index.js:36:3)
      at new Octokit (node_modules/@octokit/core/dist-node/index.js:52:18)
      at new _a (node_modules/@octokit/core/dist-node/index.js:167:30)
      at new OctokitWithDefaults (node_modules/@octokit/core/dist-node/index.js:147:9)
      at module.exports (node_modules/github-username/index.js:24:18)
      at Object.user.github.username (lib/actions/user.js:17:111)
      at Context.<anonymous> (test/user.js:110:33)
      at processImmediate (node:internal/timers:466:21)



-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant80/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (86ms)
      ✔ should accept semver version
      ✔ should accept github repository (1333ms)
      ✔ should accept github repository version (676ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (78ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (225ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (186ms)
        ✔ cache the value (230ms)
        ✔ cache is linked to the CWD (334ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (329ms)
    .github
      .username()
        1) is the username used by GitHub


  353 passing (11s)
  1 failing

  1) Base#user
       .github
         .username()
           is the username used by GitHub:
     TypeError: Octokit is not a constructor
      at module.exports (node_modules/github-username/index.js:24:18)
      at Object.user.github.username (lib/actions/user.js:17:111)
      at Context.<anonymous> (test/user.js:110:33)
      at processImmediate (node:internal/timers:466:21)



-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant79/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (114ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (78ms)
      ✔ should accept semver version (42ms)
      ✔ should accept github repository (5777ms)
      ✔ should accept github repository version (705ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (97ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (61ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (175ms)
        ✔ cache is linked to the CWD (330ms)
      .email()
        ✔ is the email used by git (171ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (337ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (15s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant78/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |    9.36 |        0 |    1.29 |    9.39 |                                   
 lib                   |    5.32 |        0 |    1.21 |    5.24 |                                   
  index.js             |    5.32 |        0 |    1.21 |    5.24 | 30-1561,1572                      
 lib/actions           |   21.42 |        0 |    2.43 |   21.68 |                                   
  fs.js                |   26.02 |        0 |       0 |   26.02 | ...40-252,274-281,301-310,323-336 
  help.js              |   22.72 |        0 |       0 |   23.25 | 20-50,60-75,85-86,94-104,112-126  
  package-json.js      |      10 |        0 |   14.28 |      10 | 17-71                             
  spawn-command.js     |   66.66 |      100 |       0 |   66.66 | 19,35                             
  user.js              |       4 |        0 |       0 |    4.16 | 3-66                              
 lib/util              |    9.52 |        0 |       0 |    9.52 |                                   
  prompt-suggestion.js |   13.04 |        0 |       0 |   13.04 | ...42,56-71,86-90,101-140,153-191 
  storage.js           |    6.41 |        0 |       0 |    6.41 | 11-261                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant77/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (104ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (76ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (1063ms)
      ✔ should accept github repository version (692ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (63ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (160ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (213ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant76/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (117ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (89ms)
      ✔ should accept semver version
      ✔ should accept github repository (1659ms)
      ✔ should accept github repository version (687ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (51ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (357ms)
      .email()
        ✔ is the email used by git (157ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (378ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant75/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version
      ✔ should accept github repository (2260ms)
      ✔ should accept github repository version (678ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (42ms)
      ✔ should accept arrays (50ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (175ms)
        ✔ cache the value (167ms)
        ✔ cache is linked to the CWD (320ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (185ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant74/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant73/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (38ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (109ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (80ms)
      ✔ should accept semver version (40ms)
      ✔ should accept github repository (1013ms)
      ✔ should accept github repository version (642ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (48ms)
      ✔ should accept arrays (52ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (338ms)
      .email()
        ✔ is the email used by git (161ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (320ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant72/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (46ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (80ms)
      ✔ should accept semver version (46ms)
      ✔ should accept github repository (997ms)
      ✔ should accept github repository version (670ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (39ms)
      ✔ should accept arrays (54ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (61ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (382ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant71/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (137ms)
      ✔ should accept semver version (38ms)
      ✔ should accept github repository (945ms)
      ✔ should accept github repository version (1671ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (218ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (62ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (329ms)
    .github
      .username()
        ✔ is the username used by GitHub (178ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant70/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (114ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (86ms)
      ✔ should accept semver version
      ✔ should accept github repository (1057ms)
      ✔ should accept github repository version (845ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (49ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (61ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (171ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (168ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (220ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant69/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (79ms)
      ✔ should accept semver version
      ✔ should accept github repository (929ms)
      ✔ should accept github repository version (703ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (63ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (50ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (318ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant68/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (118ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (74ms)
      ✔ should accept semver version (53ms)
      ✔ should accept github repository (1054ms)
      ✔ should accept github repository version (997ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (46ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (177ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (360ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (364ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant67/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (76ms)
      ✔ should accept semver version (40ms)
      ✔ should accept github repository (1330ms)
      ✔ should accept github repository version (1215ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (52ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (62ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (199ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (331ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (158ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (194ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant66/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (112ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (960ms)
      ✔ should accept github repository version (874ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (68ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (174ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (203ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant65/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant64/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (107ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (116ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (75ms)
      ✔ should accept semver version
      ✔ should accept github repository (943ms)
      ✔ should accept github repository version (887ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (46ms)
      ✔ should accept arrays (67ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (50ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (193ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (196ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (186ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant63/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (115ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (750ms)
      ✔ should accept semver version
      ✔ should accept github repository (1023ms)
      ✔ should accept github repository version (660ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (50ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (173ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (205ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant62/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant61/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (111ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (77ms)
      ✔ should accept semver version
      ✔ should accept github repository (1037ms)
      ✔ should accept github repository version (672ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (61ms)
      ✔ should accept arrays (57ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (62ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (165ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant60/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (121ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (109ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (113ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (944ms)
      ✔ should accept github repository version (737ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (44ms)
      ✔ should accept arrays (219ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (238ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (60ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (216ms)
        ✔ cache the value (158ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (168ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (319ms)
    .github
      .username()
        ✔ is the username used by GitHub (184ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant59/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (84ms)
      ✔ should accept semver version
      ✔ should accept github repository (2029ms)
      ✔ should accept github repository version (653ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (99ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (81ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (157ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (158ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (174ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant58/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (73ms)
      ✔ should accept semver version (87ms)
      ✔ should accept github repository (3422ms)
      ✔ should accept github repository version (703ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (45ms)
      ✔ should accept arrays (47ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (65ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (166ms)
        ✔ cache is linked to the CWD (332ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (166ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (12s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant57/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (259ms)
      ✔ should accept semver version
      ✔ should accept github repository (928ms)
      ✔ should accept github repository version (664ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (51ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant56/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (130ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (99ms)
      ✔ should accept semver version
      ✔ should accept github repository (920ms)
      ✔ should accept github repository version (657ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (46ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (166ms)
        ✔ cache is linked to the CWD (326ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (321ms)
    .github
      .username()
        ✔ is the username used by GitHub (188ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant55/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (117ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (104ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (109ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version (38ms)
      ✔ should accept github repository (886ms)
      ✔ should accept github repository version (663ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (50ms)
      ✔ should accept arrays (57ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (365ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (364ms)
    .github
      .username()
        ✔ is the username used by GitHub (178ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant54/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (112ms)
      ✔ should accept semver version (50ms)
      ✔ should accept github repository (1138ms)
      ✔ should accept github repository version (704ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (53ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (204ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (175ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant53/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (139ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (947ms)
      ✔ should accept github repository version (695ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (68ms)
      ✔ should accept arrays (65ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (337ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (330ms)
    .github
      .username()
        ✔ is the username used by GitHub (181ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant52/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (79ms)
      ✔ should accept semver version (49ms)
      ✔ should accept github repository (939ms)
      ✔ should accept github repository version (672ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (49ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (160ms)
        ✔ cache is linked to the CWD (320ms)
      .email()
        ✔ is the email used by git (158ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant51/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (115ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (83ms)
      ✔ should accept semver version (51ms)
      ✔ should accept github repository (1169ms)
      ✔ should accept github repository version (1761ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (212ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (175ms)
        ✔ cache the value (166ms)
        ✔ cache is linked to the CWD (322ms)
      .email()
        ✔ is the email used by git (203ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (215ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant50/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (115ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (88ms)
      ✔ should accept semver version
      ✔ should accept github repository (982ms)
      ✔ should accept github repository version (758ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (52ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (159ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (357ms)
      .email()
        ✔ is the email used by git (160ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (324ms)
    .github
      .username()
        ✔ is the username used by GitHub (185ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant49/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (130ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (84ms)
      ✔ should accept semver version
      ✔ should accept github repository (1363ms)
      ✔ should accept github repository version (663ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (60ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (70ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (171ms)
        ✔ cache the value (160ms)
        ✔ cache is linked to the CWD (315ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (188ms)
        ✔ cache is linked to the CWD (310ms)
    .github
      .username()
        ✔ is the username used by GitHub (176ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant48/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (112ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (87ms)
      ✔ should accept semver version
      ✔ should accept github repository (1862ms)
      ✔ should accept github repository version (660ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (59ms)
      ✔ should accept arrays (72ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (228ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (332ms)
      .email()
        ✔ is the email used by git (171ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (182ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant47/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (124ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (92ms)
      ✔ should accept semver version (44ms)
      ✔ should accept github repository (1102ms)
      ✔ should accept github repository version (761ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (40ms)
      ✔ should accept arrays (92ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (168ms)
        ✔ cache is linked to the CWD (330ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (195ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant46/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version (50ms)
      ✔ should accept github repository (1909ms)
      ✔ should accept github repository version (693ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (73ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (54ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (59ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (215ms)
        ✔ cache is linked to the CWD (328ms)
      .email()
        ✔ is the email used by git (166ms)
        ✔ handle cache (169ms)
        ✔ cache is linked to the CWD (346ms)
    .github
      .username()
        ✔ is the username used by GitHub (189ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant45/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant44/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (116ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (107ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version (42ms)
      ✔ should accept github repository (1463ms)
      ✔ should accept github repository version (672ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (86ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (59ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (160ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (326ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (369ms)
    .github
      .username()
        ✔ is the username used by GitHub (181ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant43/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (100ms)
      ✔ should accept semver version
      ✔ should accept github repository (1601ms)
      ✔ should accept github repository version (646ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (48ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (324ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (169ms)
        ✔ cache is linked to the CWD (332ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant42/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant41/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant40/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version
      ✔ should accept github repository (1060ms)
      ✔ should accept github repository version (662ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (41ms)
      ✔ should accept arrays (98ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (158ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (166ms)
        ✔ handle cache (168ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (181ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant39/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (115ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (257ms)
      ✔ should accept semver version
      ✔ should accept github repository (1471ms)
      ✔ should accept github repository version (908ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (46ms)
      ✔ should accept arrays (59ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (46ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (191ms)
        ✔ cache the value (171ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (336ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant38/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant37/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (107ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (83ms)
      ✔ should accept semver version
      ✔ should accept github repository (915ms)
      ✔ should accept github repository version (691ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (230ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (169ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (174ms)
        ✔ cache is linked to the CWD (337ms)
    .github
      .username()
        ✔ is the username used by GitHub (182ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant36/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo

./VariantsFile/yeoman-generator/variant35/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (43ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (99ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (927ms)
      ✔ should accept github repository version (647ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (87ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (67ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (165ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (362ms)
      .email()
        ✔ is the email used by git (161ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (363ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant34/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (113ms)
      ✔ runs multiple composed generators (reverse) (110ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (82ms)
      ✔ should accept semver version
      ✔ should accept github repository (941ms)
      ✔ should accept github repository version (658ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (45ms)
      ✔ should accept arrays (131ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (168ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (332ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant33/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (107ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (90ms)
      ✔ should accept semver version
      ✔ should accept github repository (3762ms)
      ✔ should accept github repository version (869ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (217ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (167ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant32/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (122ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (271ms)
      ✔ should accept semver version (48ms)
      ✔ should accept github repository (1171ms)
      ✔ should accept github repository version (687ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (79ms)
      ✔ should accept arrays (90ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (323ms)
      .email()
        ✔ is the email used by git (170ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant31/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options (46ms)
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (127ms)
      ✔ should accept semver version (41ms)
      ✔ should accept github repository (1393ms)
      ✔ should accept github repository version (692ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (74ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (46ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (170ms)
        ✔ cache the value (158ms)
        ✔ cache is linked to the CWD (326ms)
      .email()
        ✔ is the email used by git (158ms)
        ✔ handle cache (160ms)
        ✔ cache is linked to the CWD (330ms)
    .github
      .username()
        ✔ is the username used by GitHub (189ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant30/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (112ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (95ms)
      ✔ should accept semver version (39ms)
      ✔ should accept github repository (903ms)
      ✔ should accept github repository version (698ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (54ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (172ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (326ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (160ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (178ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant29/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (149ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (114ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (81ms)
      ✔ should accept semver version
      ✔ should accept github repository (955ms)
      ✔ should accept github repository version (662ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (72ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (47ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (48ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (360ms)
      .email()
        ✔ is the email used by git (165ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (365ms)
    .github
      .username()
        ✔ is the username used by GitHub (181ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant28/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (113ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (124ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (91ms)
      ✔ should accept semver version
      ✔ should accept github repository (979ms)
      ✔ should accept github repository version (763ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (46ms)
      ✔ should accept arrays (241ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (51ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant27/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (168ms)
      ✔ should accept semver version (85ms)
      ✔ should accept github repository (3893ms)
      ✔ should accept github repository version (697ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (48ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (197ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (201ms)
        ✔ cache is linked to the CWD (332ms)
    .github
      .username()
        ✔ is the username used by GitHub (185ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant26/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (72ms)
      ✔ should accept semver version
      ✔ should accept github repository (916ms)
      ✔ should accept github repository version (685ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (58ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (330ms)
      .email()
        ✔ is the email used by git (170ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (183ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant25/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (278ms)
      ✔ should accept semver version (65ms)
      ✔ should accept github repository (1949ms)
      ✔ should accept github repository version (2065ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (41ms)
      ✔ should accept arrays (95ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (173ms)
        ✔ cache is linked to the CWD (336ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (173ms)


  354 passing (12s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant24/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (86ms)
      ✔ should accept semver version
      ✔ should accept github repository (952ms)
      ✔ should accept github repository version (754ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (75ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (168ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant23/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (97ms)
      ✔ should accept semver version (47ms)
      ✔ should accept github repository (1225ms)
      ✔ should accept github repository version (762ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (59ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (177ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (331ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (167ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (184ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant22/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version (39ms)
      ✔ should accept github repository (5086ms)
      ✔ should accept github repository version (1043ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (55ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (206ms)
        ✔ cache the value (159ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (161ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (329ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (14s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant21/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (79ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (1135ms)
      ✔ should accept github repository version (1737ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (60ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (320ms)
      .email()
        ✔ is the email used by git (169ms)
        ✔ handle cache (160ms)
        ✔ cache is linked to the CWD (324ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant20/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (114ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (91ms)
      ✔ should accept semver version (51ms)
      ✔ should accept github repository (922ms)
      ✔ should accept github repository version (1007ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (48ms)
      ✔ should accept arrays (96ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (58ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (177ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant19/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (116ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (259ms)
      ✔ should accept semver version
      ✔ should accept github repository (1033ms)
      ✔ should accept github repository version (1494ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (63ms)
      ✔ should accept arrays (59ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (43ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (172ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (335ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant18/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (109ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version (38ms)
      ✔ should accept github repository (1046ms)
      ✔ should accept github repository version (649ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (233ms)
      ✔ should accept arrays (233ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (174ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (340ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (164ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (194ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant17/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (114ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (104ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (1354ms)
      ✔ should accept github repository version (871ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (50ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (164ms)
        ✔ cache is linked to the CWD (328ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (187ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant16/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (112ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (113ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (101ms)
      ✔ should accept semver version (40ms)
      ✔ should accept github repository (7366ms)
      ✔ should accept github repository version (661ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (60ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (160ms)
        ✔ cache is linked to the CWD (331ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (16s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant15/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (86ms)
      ✔ should accept semver version (58ms)
      ✔ should accept github repository (2659ms)
      ✔ should accept github repository version (1155ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (713ms)
      ✔ should accept arrays (69ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (50ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (52ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (207ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (320ms)
      .email()
        ✔ is the email used by git (201ms)
        ✔ handle cache (170ms)
        ✔ cache is linked to the CWD (325ms)
    .github
      .username()
        ✔ is the username used by GitHub (217ms)


  354 passing (13s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant14/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (112ms)
      ✔ runs multiple composed generators inside a running generator (111ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (90ms)
      ✔ should accept semver version (38ms)
      ✔ should accept github repository (1450ms)
      ✔ should accept github repository version (852ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (72ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (46ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (45ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (178ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant13/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (86ms)
      ✔ should accept semver version
      ✔ should accept github repository (1022ms)
      ✔ should accept github repository version (858ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (230ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (172ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (325ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (160ms)
        ✔ cache is linked to the CWD (338ms)
    .github
      .username()
        ✔ is the username used by GitHub (244ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant12/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (106ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (85ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (922ms)
      ✔ should accept github repository version (665ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (38ms)
      ✔ should accept arrays (252ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (49ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (53ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (203ms)
        ✔ cache the value (165ms)
        ✔ cache is linked to the CWD (327ms)
      .email()
        ✔ is the email used by git (203ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (215ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant11/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (111ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (111ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (98ms)
      ✔ should accept semver version (43ms)
      ✔ should accept github repository (1092ms)
      ✔ should accept github repository version (712ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (48ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (163ms)
        ✔ cache the value (162ms)
        ✔ cache is linked to the CWD (318ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (158ms)
        ✔ cache is linked to the CWD (321ms)
    .github
      .username()
        ✔ is the username used by GitHub (180ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant10/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (139ms)
      ✔ should accept semver version (45ms)
      ✔ should accept github repository (2447ms)
      ✔ should accept github repository version (725ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (224ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (62ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (44ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (161ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (328ms)
      .email()
        ✔ is the email used by git (171ms)
        ✔ handle cache (163ms)
        ✔ cache is linked to the CWD (340ms)
    .github
      .username()
        ✔ is the username used by GitHub (187ms)


  354 passing (12s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant9/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (134ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (113ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version
      ✔ should accept github repository (1501ms)
      ✔ should accept github repository version (739ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (57ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (160ms)
        ✔ cache the value (177ms)
        ✔ cache is linked to the CWD (322ms)
      .email()
        ✔ is the email used by git (158ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (321ms)
    .github
      .username()
        ✔ is the username used by GitHub (182ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant8/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (104ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (96ms)
      ✔ should accept semver version
      ✔ should accept github repository (1107ms)
      ✔ should accept github repository version (1308ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (39ms)
      ✔ should accept arrays (53ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (39ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (324ms)
      .email()
        ✔ is the email used by git (158ms)
        ✔ handle cache (161ms)
        ✔ cache is linked to the CWD (343ms)
    .github
      .username()
        ✔ is the username used by GitHub (175ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant7/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (106ms)
      ✔ runs 3 composed generators (113ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (87ms)
      ✔ should accept semver version (39ms)
      ✔ should accept github repository (916ms)
      ✔ should accept github repository version (688ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve
      ✔ should accept arrays (57ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (171ms)
        ✔ cache the value (175ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (159ms)
        ✔ handle cache (188ms)
        ✔ cache is linked to the CWD (318ms)
    .github
      .username()
        ✔ is the username used by GitHub (176ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant6/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (108ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (93ms)
      ✔ should accept semver version (44ms)
      ✔ should accept github repository (1078ms)
      ✔ should accept github repository version (648ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (45ms)
      ✔ should accept arrays (50ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (38ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (329ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (166ms)
        ✔ cache is linked to the CWD (320ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant5/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (122ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (107ms)
      ✔ runs 3 composed generators (109ms)
      ✔ runs multiple composed generators inside a running generator (111ms)
      ✔ runs multiple composed generators inside a running generator (110ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (88ms)
      ✔ should accept semver version (49ms)
      ✔ should accept github repository (1900ms)
      ✔ should accept github repository version (1812ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (41ms)
      ✔ should accept arrays (65ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (164ms)
        ✔ cache the value (186ms)
        ✔ cache is linked to the CWD (326ms)
      .email()
        ✔ is the email used by git (164ms)
        ✔ handle cache (175ms)
        ✔ cache is linked to the CWD (323ms)
    .github
      .username()
        ✔ is the username used by GitHub (179ms)


  354 passing (12s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant4/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (87ms)
      ✔ should accept semver version
      ✔ should accept github repository (932ms)
      ✔ should accept github repository version (692ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (66ms)
    addDependencies()
      ✔ should generate dependencies inside package.json
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (166ms)
        ✔ cache the value (163ms)
        ✔ cache is linked to the CWD (322ms)
      .email()
        ✔ is the email used by git (162ms)
        ✔ handle cache (159ms)
        ✔ cache is linked to the CWD (326ms)
    .github
      .username()
        ✔ is the username used by GitHub (177ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant3/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (110ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (105ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (109ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (109ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (98ms)
      ✔ should accept semver version
      ✔ should accept github repository (1558ms)
      ✔ should accept github repository version (677ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (139ms)
      ✔ should accept arrays (54ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (41ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (194ms)
        ✔ cache the value (160ms)
        ✔ cache is linked to the CWD (321ms)
      .email()
        ✔ is the email used by git (247ms)
        ✔ handle cache (165ms)
        ✔ cache is linked to the CWD (327ms)
    .github
      .username()
        ✔ is the username used by GitHub (229ms)


  354 passing (11s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant2/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


  lib/index.js:140:14
  ⚠  140:14  Constructor has a complexity of 30. Maximum allowed is 20.  complexity

  1 warning

> yeoman-generator@5.6.1 test
> nyc mocha --forbid-only



  Base
    constructor
      ✔ uses the destinationRoot passed at options
      ✔ use the environment options
      ✔ set generator.options from constructor options
      ✔ set options based on nopt arguments
      ✔ set arguments based on nopt arguments
      ✔ set options with false values (113ms)
      ✔ setup fs editor
      ✔ setup required fields for a working generator for help
      ✔ should not fail without an env for help
    prototype
      ✔ methods doesn't conflict with Env#runQueue
    #appname
      ✔ is set to the `determineAppname()` return value
    #determineAppname()
      ✔ returns appname from bower.json
      ✔ returns appname from package.json
      ✔ returns appname from the current directory
    #run()
      ✔ run all methods in the given generator
      ✔ turn on _running flag
      ✔ should call _beforeQueue
      ✔ run prototype methods (not instances one)
      ✔ don't try running prototype attributes
      ✔ pass instance .args property to the called methods
      ✔ can emit error from async methods
      ✔ can emit error from sync methods
      ✔ stop queue processing once an error is thrown
      ✔ handle function returning promises as asynchronous
      ✔ handle failing promises as errors
      ✔ run methods in series
      ✔ throws if no method is available
      ✔ will run non-enumerable methods
      ✔ ignore underscore prefixed method
      ✔ ignore hashtag prefixed method
      ✔ run methods in a queue hash
      ✔ ignore underscore prefixed method in a queue hash
      ✔ run named queued methods in order
      ✔ run queued methods in order even if not in order in prototype
      ✔ commit mem-fs to disk
      ✔ allow skipping file writes to disk
      ✔ allows file writes in any priorities
      ✔ can cancel cancellable tasks
      ✔ can start over the generator
      ✔ can queue a method again
    #run() with task prefix
      ✔ should run hashtag prefixed method
      ✔ should call beforeQueue
    #argument()
      ✔ add a new argument to the generator instance
      ✔ create the property specified with value from positional args
      ✔ allows specifying default argument values
      ✔ allows specifying default argument values
      ✔ properly uses arguments values passed from constructor
      ✔ slice positional arguments when config.type is Array
      ✔ raise an error if required arguments are not provided
      ✔ doesn't raise an error if required arguments are not provided, but the help option has been specified
      ✔ can be called before #option()
    #option()
      ✔ add a new option to the set of generator expected options
      ✔ allow aliasing options
      ✔ allows Boolean options to be undefined
      ✔ disallows Boolean options starting with no-
    #registerConfigPrompts()
      ✔ adds an prompt with common definitions
      ✔ should export option
      ✔ allows to customize option config
    #registerPriorities()
      ✔ adds a new priority
      ✔ edits a existing priority
    #parseOptions()
      ✔ set generator options
      ✔ set generator alias options
      ✔ set args to what remains
      ✔ gracefully handle no args
    #composeWith()
      ✔ returns the composed generator
      ✔ should add to _composedWith
      ✔ should not add to _composedWith when immediately is true
      ✔ runs the composed generators (104ms)
      ✔ runs the composed Generator class in the passed path
      ✔ run the composed generator even if main generator is already running.
      ✔ pass options and arguments to the composed generators
      object as first argument
        ✔ fails for missing Generator property
        ✔ fails for missing path property
      when passing a local path to a generator
        ✔ runs the composed generator
        ✔ pass options and arguments to the composed generators
        ✔ sets correct metadata on the Generator constructor
    #desc()
      ✔ update the internal description
    #help()
      ✔ return the expected help output
    #usage()
      ✔ returns the expected usage output with arguments
      ✔ returns the expected usage output without arguments
      ✔ returns the expected usage output without options
    #config
      ✔ provide a storage instance
      ✔ is updated when destinationRoot change
    #templatePath()
      ✔ joins path to the source root
    #destinationPath()
      ✔ joins path to the source root
    #registerTransformStream()
      ✔ add the transform stream to the commit stream
      ✔ add multiple transform streams to the commit stream
    Events
      ✔ emits the series of event on a specific generator
      ✔ only call the end event once (bug #402)
      ✔ triggers end event after all generators methods are ran (#709)
    #rootGeneratorName
      ✔ returns the default name
      ✔ returns generator name
    #rootGeneratorVersion
      ✔ returns the default version
      ✔ returns generator version
    #queueMethod()
      ✔ queued method is executed
      ✔ queued method is executed by derived generator
      ✔ queued method with function, methodName and reject
      ✔ queued method with object, queueName and reject
    #queueTask()
      ✔ queued method with function and options
      ✔ queued method with function and options with reject
    Custom priorities
      ✔ generates correct _queues and runLoop queueNames
      ✔ run custom priorities in correct order
      ✔ correctly run custom priority with once option
    Custom priorities errors
      ✔ error is thrown with duplicate custom queue
    #prompt
      ✔ passes config value as answer to adapter
      ✔ passes config values as answers to adapter
      ✔ passes config values as the question default
      ✔ saves answers to config
      ✔ saves answers to config when specified as a property name
      ✔ saves answers to specific storage
      ✔ passes correct askAnswered option to adapter
    #getFeatures
      ✔ should return namespace as uniqueBy when unique is true
      ✔ should return namespace as uniqueBy when unique is 'namespace'
      ✔ should return namespace with first argument as uniqueBy when unique is 'namespace'
    getTaskNames
      ✔ should return any public member when tasksMatchingPriority is undefined
      ✔ should return any public member when tasksMatchingPriority is true

  deprecate()
(!) foo
    ✔ log a message
    .object()
(!) func is deprecated
      ✔ wrap an object and log a message
    .property()
(!) foo is deprecated
      ✔ wrap a property getter and log a message

  Generator with environment version
    mocked 3.0.0
      #checkEnvironmentVersion
        without args
          ✔ returns true
        with required environment
          ✔ returns true
          with ignoreVersionCheck
            ✔ returns true
        with greater than required environment
          ✔ returns true
        with less than required environment
          ✔ should throw
          with warning
            ✔ should return false
          with ignoreVersionCheck
            ✔ returns false
        with required inquirer
          ✔ returns true
        with greater than required inquirer
          ✔ returns true
        with less than required inquirer
          ✔ throws exception
          with warning
            ✔ returns false
          with ignoreVersionCheck
            ✔ returns false
      #prompt with storage
        ✔ with incompatible inquirer
        ✔ with compatible environment
    mocked 2.8.1
      #checkEnvironmentVersion
        without args
          ✔ throws exception
        with ignoreVersionCheck
          without args
            ✔ returns false
          without less then 3.0.0
            ✔ returns undefined

  generators.Base (actions/fs)
    #readTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #readDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #writeDestinationJSON
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #deleteDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #copyDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #moveDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #existsDestination
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplateAsync
      ✔ exists on the generator
      ✔ returns the correct value
      ✔ handles the first parameter
      ✔ handles the second parameter
      ✔ calls fs with correct arguments
    #renderTemplate
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplateAsync
      ✔ gets default data from config
      ✔ gets data with path from config
      ✔ concatenates source and destination
    #renderTemplates
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback
    #renderTemplatesAsync
      ✔ handles 1 template
      ✔ handles more than 1 template
      ✔ skips templates based on when callback
      ✔ passes the data to when callback

  Multiples generators
    ✔ #composeWith() inside contructor
    #composeWith() with multiples generators
      ✔ runs multiple composed generators (110ms)
      ✔ runs multiple composed generators (reverse) (108ms)
      ✔ runs 3 composed generators (110ms)
      ✔ runs multiple composed generators inside a running generator (108ms)
      ✔ runs multiple composed generators inside a running generator (109ms)

  Generators module
    ✔ without localConfigOnly option
    ✔ with localConfigOnly option
    ✔ running standalone
    ✔ running with an empty env
    Base
      ✔ is an EventEmitter
      ✔ emits done event
    #run
      ✔ forwards error to environment
    #createStorage
      ✔ with path and name
      ✔ with path

  Base (actions/install mixin)
    #scheduleInstallTask()
      ✔ takes a config object and passes it to the spawned process
      without --force-install
        ✔ should not fail on bad exit code without forceInstall
        ✔ should not fail on exit signal without forceInstall
        ✔ should not fail on error without forceInstall
      with --force-install
        ✔ fails on bad exit code with forceInstall
        ✔ fails on exit signal with forceInstall
        ✔ fails on error with forceInstall
      with --skip-install
        ✔ does not spawn anything with skipInstall
        ✔ does not spawn anything with skipInstall
        ✔ logs the skipped install command
    #bowerInstall()
      ✔ spawn a bower process once per commands
      ✔ spawn a bower process with formatted options
    #npmInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #yarnInstall()
      ✔ spawn an install process once per commands
      ✔ run with options
      ✔ spawn separate install processes if spawnOptions differs
    #installDependencies()
      ✔ spawn npm and bower
      ✔ spawn yarn
      ✔ spawn yarn and bower with options

  Integration
    ✔ writes prompt value to foo-template.js
    ✔ writes option value foo-template.js

  Base#package-json
    _resolvePackageJsonDependencies()
      ✔ should accept empty version and resolve (81ms)
      ✔ should accept semver version
      ✔ should accept github repository (957ms)
      ✔ should accept github repository version (1309ms)
      ✔ should accept object and return it
      ✔ should resolve object with empty version and resolve (43ms)
      ✔ should accept arrays (68ms)
    addDependencies()
      ✔ should generate dependencies inside package.json (40ms)
      ✔ should accept object and merge inside package.json
    addDependencies()
      ✔ should generate dependencies inside package.json (42ms)
      ✔ should accept object and merge devDependencies inside package.json

  PromptSuggestion
    .prefillQuestions()
      ✔ require a store parameter
      ✔ require a questions parameter
      ✔ take a questions parameter
      ✔ take a question object
      ✔ take a question array
      ✔ don't override default when store is set to false
      ✔ override default when store is set to true
      ✔ keep inquirer objects
      take a checkbox
        ✔ override default from an array with objects
        ✔ override default from an array with strings
        with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a checkbox with choices from a function
        ✔ does not override default from an array with objects
        ✔ does not override default from an array with strings
        does not override even with multiple defaults
          ✔ from an array with objects
          ✔ from an array with strings
      take a rawlist / expand
        ✔ override default arrayWithObjects
        ✔ override default arrayWithObjects
    .storeAnswers()
      ✔ require a store parameter
      ✔ require a question parameter
      ✔ require a answer parameter
      ✔ take a answer parameter
      ✔ take a storeAll parameter
      ✔ store answer in global store
      ✔ don't store default answer in global store
      ✔ force store default answer in global store
      ✔ don't store answer in global store
      ✔ store answer from rawlist type
      ✔ store falsy answer (but not undefined) in global store
      empty store
        ✔ don't store default answer from rawlist type
        ✔ force store default answer from rawlist type

  generators.Base (actions/spawn-command)
    #spawnCommand()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options
    #spawnCommandSync()
      ✔ provide default options
      ✔ pass arguments
      ✔ pass options
      ✔ allow overriding default options

  Storage
    ✔ a config path is required
    .constructor()
      ✔ require a parameter
      ✔ require at least 2 parameter
      ✔ take a path parameter
      ✔ take a fs and path parameter without name
    #get()
      ✔ namespace each store sharing the same store file
      ✔ get values
    #set()
      ✔ set values
      ✔ set multiple values at once
      ✔ throws when invalid JSON values are passed
      ✔ save on each changes
      @return
        ✔ the saved value (with key)
        ✔ the saved value (without key)
        ✔ the saved value (update values)
      when multiples instances share the same file
        ✔ only update modified namespace
      when multiples instances share the same namespace
        ✔ only update modified namespace
    #getAll()
      ✔ get all values
      ✔ does not return a reference to the inner store
    #delete()
      ✔ delete value
    #defaults()
      ✔ set defaults values if not predefined
      ✔ require an Object as argument
      @return
        ✔ the saved value when passed an empty object
        ✔ the saved value when passed the same key
        ✔ the saved value when passed new key
    #merge()
      ✔ should merge values if not predefined
      ✔ should require an Object as argument
      @return
        ✔ should return the original object
        ✔ should return an object with replaced values
        ✔ should return an object with new values
    with namespace
      ✔ stores sharing the same store file with and without namespace
    #getPath() & #setPath()
      ✔ #getPath() & #setPath()
    #getStorage()
      with a path safe string
        ✔ should get and set value
      with a path unsafe string
        ✔ should get and set value
    .constructor() with lodashPath
      ✔ get and set value
    #createProxy()
      ✔ sets values
      ✔ sets multiple values at once
      ✔ gets values
      ✔ works with spread operator
      ✔ works with in operator
      ✔ works with deepEquals
    caching
      ✔ should load
      ✔ should not load when disabled
      ✔ cleanups when the file changes
      ✔ doesn't cleanup when another file changes
      ✔ cleanups when per file cache is disabled and another file changes
      ✔ cleanups when change event argument is undefined
    non sorted store
      ✔ should write non sorted file
    sorted store
      ✔ should write sorted file

  Base#user
    ✔ is exposed on the Base generator
    .git
      .name()
        ✔ is the name used by git (162ms)
        ✔ cache the value (161ms)
        ✔ cache is linked to the CWD (328ms)
      .email()
        ✔ is the email used by git (163ms)
        ✔ handle cache (162ms)
        ✔ cache is linked to the CWD (328ms)
    .github
      .username()
        ✔ is the username used by GitHub (176ms)


  354 passing (10s)

-----------------------|---------|----------|---------|---------|-----------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                 
-----------------------|---------|----------|---------|---------|-----------------------------------
All files              |   94.43 |    88.38 |   92.89 |    94.8 |                                   
 lib                   |   92.11 |     88.7 |   89.02 |   92.74 |                                   
  index.js             |   92.11 |     88.7 |   89.02 |   92.74 | ...-1366,1407-1408,1410,1426-1427 
 lib/actions           |   96.81 |     82.4 |      98 |   96.78 |                                   
  fs.js                |   93.15 |    79.41 |      95 |   93.15 | 98,276,304,329,333                
  help.js              |   97.72 |       70 |     100 |   97.67 | 37                                
  install.js           |     100 |    93.02 |     100 |     100 | 140,165-175                       
  package-json.js      |      95 |       90 |     100 |      95 | 20                                
  spawn-command.js     |     100 |      100 |     100 |     100 |                                   
  user.js              |     100 |       75 |     100 |     100 | 29,51                             
 lib/util              |   98.24 |    96.25 |   94.59 |   98.24 |                                   
  deprecate.js         |     100 |      100 |     100 |     100 |                                   
  prompt-suggestion.js |   98.55 |    97.72 |     100 |   98.55 | 58                                
  storage.js           |   97.43 |    94.11 |   90.47 |   97.43 | 25,143                            
-----------------------|---------|----------|---------|---------|-----------------------------------
./VariantsFile/yeoman-generator/variant1/yeoman-generator

> yeoman-generator@5.6.1 pretest
> xo


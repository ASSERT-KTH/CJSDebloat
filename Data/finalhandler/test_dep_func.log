2
./VariantsPureDep/finalhandler/variant2/finalhandler

> finalhandler@1.2.0 test
> mocha --reporter spec --bail --check-leaks test/



  finalhandler(req, res)
    headers
      ✔ should ignore err.headers without status code
      ✔ should ignore err.headers with invalid res.status
      ✔ should ignore err.headers with invalid res.statusCode
      ✔ should include err.headers with err.status
      ✔ should include err.headers with err.statusCode
      ✔ should ignore err.headers when not an object
    status code
      ✔ should 404 on no error
      ✔ should 500 on error
      ✔ should use err.statusCode
      ✔ should ignore non-error err.statusCode code
      ✔ should ignore non-numeric err.statusCode
      ✔ should use err.status
      ✔ should use err.status over err.statusCode
      ✔ should set status to 500 when err.status < 400
      ✔ should set status to 500 when err.status > 599
      ✔ should use err.statusCode over invalid err.status
      ✔ should ignore non-error err.status code
      ✔ should ignore non-numeric err.status
    status message
      ✔ should be "Not Found" on no error
      ✔ should be "Internal Server Error" on error
      ✔ should be "Bad Request" when err.statusCode = 400
      ✔ should reset existing res.statusMessage
    404 response
      ✔ should include method and pathname
      ✔ should escape method and pathname characters
      ✔ should encode bad pathname characters
      ✔ should fallback to generic pathname without URL
      ✔ should include original pathname
      ✔ should include pathname only
      ✔ should handle HEAD
      ✔ should include X-Content-Type-Options header
      ✔ should include Content-Security-Policy header
      ✔ should not hang/error if there is a request body
    error response
      ✔ should include error stack
      ✔ should handle HEAD
      ✔ should include X-Content-Type-Options header
      ✔ should includeContent-Security-Policy header
      ✔ should handle non-error-objects
      ✔ should handle null prototype objects
      ✔ should send staus code name when production
      when there is a request body
        ✔ should not hang/error when unread
        ✔ should not hang/error when actively piped
        ✔ should not hang/error when read
      when res.statusCode set
        ✔ should keep when >= 400
        ✔ should convert to 500 is not a number
        ✔ should override with err.status
        ✔ should default body to status message in production
      when res.statusCode undefined
        ✔ should set to 500
    headers set
      ✔ should persist set headers
      ✔ should override content-type and length
      ✔ should remove other content headers
    request started
      ✔ should not respond
      ✔ should terminate on error
    onerror
      ✔ should be invoked when error


  53 passing (176ms)

./VariantsPureDep/finalhandler/variant1/finalhandler

> finalhandler@1.2.0 test
> mocha --reporter spec --bail --check-leaks test/



  finalhandler(req, res)
    headers
      ✔ should ignore err.headers without status code
      ✔ should ignore err.headers with invalid res.status
      ✔ should ignore err.headers with invalid res.statusCode
      ✔ should include err.headers with err.status
      ✔ should include err.headers with err.statusCode
      ✔ should ignore err.headers when not an object
    status code
      ✔ should 404 on no error
      ✔ should 500 on error
      ✔ should use err.statusCode
      ✔ should ignore non-error err.statusCode code
      ✔ should ignore non-numeric err.statusCode
      ✔ should use err.status
      ✔ should use err.status over err.statusCode
      ✔ should set status to 500 when err.status < 400
      ✔ should set status to 500 when err.status > 599
      ✔ should use err.statusCode over invalid err.status
      ✔ should ignore non-error err.status code
      ✔ should ignore non-numeric err.status
    status message
      ✔ should be "Not Found" on no error
      ✔ should be "Internal Server Error" on error
      ✔ should be "Bad Request" when err.statusCode = 400
      ✔ should reset existing res.statusMessage
    404 response
      ✔ should include method and pathname
      ✔ should escape method and pathname characters
      ✔ should encode bad pathname characters
      ✔ should fallback to generic pathname without URL
      ✔ should include original pathname
      ✔ should include pathname only
      ✔ should handle HEAD
      ✔ should include X-Content-Type-Options header
      ✔ should include Content-Security-Policy header
      ✔ should not hang/error if there is a request body
    error response
      ✔ should include error stack
      ✔ should handle HEAD
      ✔ should include X-Content-Type-Options header
      ✔ should includeContent-Security-Policy header
      ✔ should handle non-error-objects
      ✔ should handle null prototype objects
      ✔ should send staus code name when production
      when there is a request body
        ✔ should not hang/error when unread
        ✔ should not hang/error when actively piped
        ✔ should not hang/error when read
      when res.statusCode set
        ✔ should keep when >= 400
        ✔ should convert to 500 is not a number
        ✔ should override with err.status
        ✔ should default body to status message in production
      when res.statusCode undefined
        ✔ should set to 500
    headers set
      ✔ should persist set headers
      ✔ should override content-type and length
      ✔ should remove other content headers
    request started
      ✔ should not respond
      ✔ should terminate on error
    onerror
      ✔ should be invoked when error


  53 passing (134ms)


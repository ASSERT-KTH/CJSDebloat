/data/js-variants/multee
17
hubot is testing ./Variants/express/variant17/express
/data/js-variants/multee
************* npm unlink module *************

removed 49 packages, and audited 1248 packages in 8s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 450ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          1) "before each" hook for "is the listener object that matched"
          2) "after each" hook for "is the listener object that matched"

  Robot
    Unit Tests
      #http
        3) "before each" hook for "creates a new ScopedHttpClient"
        4) "after each" hook for "creates a new ScopedHttpClient"

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  121 passing (161ms)
  1 pending
  4 failing

  1) Middleware
       Public Middleware APIs
         "before each" hook for "is the listener object that matched":
     Cannot find module 'express'
Require stack:
- /data/js-variants/multee/Clients/express/hubot/src/robot.js
- /data/js-variants/multee/Clients/express/hubot/es2015.js
- /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'express'
  Require stack:
  - /data/js-variants/multee/Clients/express/hubot/src/robot.js
  - /data/js-variants/multee/Clients/express/hubot/es2015.js
  - /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
      at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
      at Module._load (node:internal/modules/cjs/loader:780:27)
      at Function.hookedLoader [as _load] (node_modules/mockery/mockery.js:111:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Robot.setupExpress (src/robot.js:181:895)
      at new Robot (src/robot.js:9:1261)
      at Context.<anonymous> (test/middleware_test.js:354:20)
      at process.processImmediate (node:internal/timers:471:21)

  2) Middleware
       Public Middleware APIs
         "after each" hook for "is the listener object that matched":
     TypeError: Cannot read properties of undefined (reading 'shutdown')
      at Context.<anonymous> (test/middleware_test.js:381:18)
      at process.processImmediate (node:internal/timers:471:21)

  3) Robot
       "before each" hook for "creates a new ScopedHttpClient":
     Cannot find module 'express'
Require stack:
- /data/js-variants/multee/Clients/express/hubot/src/robot.js
- /data/js-variants/multee/Clients/express/hubot/es2015.js
- /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/lib/mocha.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/index.js
- /data/js-variants/multee/Clients/express/hubot/node_modules/mocha/bin/_mocha
  Error: Cannot find module 'express'
  Require stack:
  - /data/js-variants/multee/Clients/express/hubot/src/robot.js
  - /data/js-variants/multee/Clients/express/hubot/es2015.js
  - /data/js-variants/multee/Clients/express/hubot/test/es2015_test.js
      at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
      at Module._load (node:internal/modules/cjs/loader:780:27)
      at Function.hookedLoader [as _load] (node_modules/mockery/mockery.js:111:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Robot.setupExpress (src/robot.js:181:895)
      at new Robot (src/robot.js:9:1261)
      at Context.<anonymous> (test/robot_test.js:31:18)
      at process.processImmediate (node:internal/timers:471:21)

  4) Robot
       "after each" hook for "creates a new ScopedHttpClient":
     TypeError: Cannot read properties of undefined (reading 'shutdown')
      at Context.<anonymous> (test/robot_test.js:53:16)
      at process.processImmediate (node:internal/timers:471:21)



----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    55.09 |    55.14 |    48.75 |    55.71 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |    52.21 |    54.64 |    46.41 |    52.78 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    93.62 |    84.62 |      100 |    93.33 |          27,40,71 |
  message.js          |    91.67 |      100 |    83.33 |    91.67 |                46 |
  middleware.js       |      100 |      100 |    85.71 |      100 |                   |
  response.js         |    14.71 |        0 |     7.69 |    14.71 |... 20,129,136,146 |
  robot.js            |    24.59 |    21.25 |     9.52 |    25.53 |... 47,750,751,755 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant16/express
/data/js-variants/multee
************* npm unlink module *************

up to date, audited 1248 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 1s

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 635ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 7s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (670ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant15/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 5s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 745ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 807ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 7s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (887ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant14/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 723ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 600ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 5s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (786ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant13/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 8s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 1s

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 725ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 5s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (506ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant12/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 8s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 1s

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 679ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (540ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant11/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 860ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 683ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 7s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (585ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant10/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 778ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 527ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 7s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (801ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant9/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 7s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 733ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 715ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 5s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (917ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant8/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 8s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 1s

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 557ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (329ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant7/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 4s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 452ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 406ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (319ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant6/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 454ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 428ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (324ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant5/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 489ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (319ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant4/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 457ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 417ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (313ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant3/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 450ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (316ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant2/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 4s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 474ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (313ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./Variants/express/variant1/express
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 1248 packages in 4s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 440ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 389ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (318ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
variantsDepsNum: 11
/data/js-variants/multee
11
hubot is testing ./VariantsDeps/express/variant11/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 441ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 415ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (341ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant10/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 460ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 412ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 6s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (310ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant9/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 456ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 407ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (314ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant8/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 451ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 466ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (316ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant7/express

removed 1 package, and audited 1248 packages in 4s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 447ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 410ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (314ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant6/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 441ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (317ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant5/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 470ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 436ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (288ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant4/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 452ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (314ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant3/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 448ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 458ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (313ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant2/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 445ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (329ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
hubot is testing ./VariantsDeps/express/variant1/express

removed 1 package, and audited 1248 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

removed 1 package, and audited 1 package in 444ms

found 0 vulnerabilities

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities

added 1 package, and audited 1250 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

36 vulnerabilities (16 moderate, 17 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> hubot@0.0.0-development pretest
> standard


> hubot@0.0.0-development test
> nyc --reporter=html --reporter=text mocha



  Adapter
    - can load adapter by name
    ✓ dispatches received messages to the robot
    Public API
      ✓ assigns robot
      send
        ✓ is a function
        ✓ does nothing
      reply
        ✓ is a function
        ✓ does nothing
      topic
        ✓ is a function
        ✓ does nothing
      play
        ✓ is a function
        ✓ does nothing
      run
        ✓ is a function
        ✓ does nothing
      close
        ✓ is a function
        ✓ does nothing

  Brain
    Unit Tests
      #mergeData
        ✓ performs a proper merge with the new data taking precedent
        ✓ emits a loaded event with the new data
        ✓ coerces loaded data into User objects
      #save
        ✓ emits a save event
      #resetSaveInterval
        ✓ updates the auto-save interval
      #close
        ✓ saves
        ✓ emits a close event
        ✓ saves before emitting the close event
        ✓ stops auto-saving
      #get
        ✓ returns the saved value
        ✓ returns null if object is not found
      #set
        ✓ saves the value
        ✓ sets multiple keys at once if an object is provided
        ✓ emits loaded
        ✓ returns the brain
      #remove
        ✓ removes the specified key
      #userForId
        ✓ returns the user object
        ✓ does an exact match
        ✓ recreates the user if the room option differs from the user object
        when there is no matching user ID
          ✓ creates a new User
          ✓ passes the provided options to the new User
      #userForName
        ✓ returns the user with a matching name
        ✓ does a case-insensitive match
        ✓ returns null if no user matches
      #usersForRawFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match (case-insensitive)
        ✓ returns all matching users (prefix match) when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
      #usersForFuzzyName
        ✓ does a case-insensitive match
        ✓ returns all matching users (prefix match) when there is not an exact match
        ✓ returns just the user when there is an exact match (case-insensitive)
        ✓ returns an empty array if no users match
    Auto-Save
      ✓ is on by default
      ✓ automatically saves every 5 seconds when turned on
      ✓ does not auto-save when turned off
    User Searching
      ✓ finds users by ID
      ✓ finds users by exact name
      ✓ finds users by fuzzy name (prefix match)
      ✓ returns User objects, not POJOs

  Datastore
    global scope
      ✓ returns undefined for values not in the datastore
      ✓ can store simple values
      ✓ can store arbitrary JavaScript values
      ✓ can dig inside objects for values
      ✓ can set individual keys inside objects
      ✓ creates an object from scratch when none exists
      ✓ can append to an existing array
      ✓ creates an array from scratch when none exists
    User scope
      ✓ has access to the robot object
      ✓ can store user data which is separate from global data
      ✓ stores user data separate per-user

  hubot/es2015
    ✓ exports User class
    ✓ exports Brain class
    ✓ exports Robot class
    ✓ exports Adapter class
    ✓ exports Response class
    ✓ exports Listener class
    ✓ exports TextListener class
    ✓ exports Message class
    ✓ exports TextMessage class
    ✓ exports EnterMessage class
    ✓ exports LeaveMessage class
    ✓ exports TopicMessage class
    ✓ exports CatchAllMessage class
    ✓ exports loadBot function

  Listener
    Unit Tests
      #call
        ✓ calls the matcher
        ✓ passes the matcher result on to the listener callback
        if the matcher returns true
          ✓ executes the listener callback
          ✓ returns true
          ✓ calls the provided callback with true
          ✓ calls the provided callback after the function returns
          ✓ handles uncaught errors from the listener callback
          ✓ calls the provided callback with true if there is an error thrown by the listener callback
          ✓ calls the listener callback with a Response that wraps the Message
          ✓ passes through the provided middleware stack
          ✓ executes the listener callback if middleware succeeds
          ✓ does not execute the listener callback if middleware fails
          ✓ unwinds the middleware stack if there is an error in the listener callback
        if the matcher returns false
          ✓ does not execute the listener callback
          ✓ returns false
          ✓ calls the provided callback with false
          ✓ calls the provided callback after the function returns
          ✓ does not execute any middleware
      #constructor
        ✓ requires a matcher
        ✓ requires a callback
        ✓ gracefully handles missing options
        ✓ gracefully handles a missing ID (set to null)
      TextListener
        #matcher
          ✓ matches TextMessages
          ✓ does not match EnterMessages

  Message
    Unit Tests
      #finish
        ✓ marks the message as done
      TextMessage
        #match
          ✓ should perform standard regex matching

  Middleware
    Unit Tests
      #execute
        ✓ executes synchronous middleware
        ✓ executes asynchronous middleware
        ✓ passes the correct arguments to each middleware
        ✓ executes all registered middleware in definition order
        ✓ executes the next callback after the function returns when there is no middleware
        ✓ always executes middleware after the function returns
        ✓ creates a default "done" function
        ✓ does the right thing with done callbacks
        ✓ defaults to the latest done callback if none is provided
        error handling
          ✓ does not execute subsequent middleware after the error is thrown
          ✓ emits an error event
          ✓ unwinds the middleware stack (calling all done functions)
      #register
        ✓ adds to the list of middleware
        ✓ validates the arity of middleware
    Public Middleware APIs
      listener middleware context
        listener
          ✓ is the listener object that matched
          ✓ has options.id (metadata)
        response
          ✓ is a Response that wraps the message
      receive middleware context
        response
          ✓ is a match-less Response object
      next
        ✓ is a function with arity one
      done
        ✓ is a function with arity zero

  Robot
    Unit Tests
      #http
        ✓ creates a new ScopedHttpClient
        ✓ passes options through to the ScopedHttpClient
        ✓ sets a sane user agent
        ✓ merges in any global http options
        ✓ local options override global http options
      #respondPattern
        ✓ matches messages starting with robot's name
        ✓ matches messages starting with robot's alias
        ✓ does not match unaddressed messages
        ✓ matches properly when name is substring of alias
        ✓ matches properly when alias is substring of name
      #listen
        ✓ registers a new listener directly
      #hear
        ✓ registers a new listener directly
      #respond
        ✓ registers a new listener using hear
      #enter
        ✓ registers a new listener using listen
      #leave
        ✓ registers a new listener using listen
      #topic
        ✓ registers a new listener using listen
      #catchAll
        ✓ registers a new listener using listen
      #receive
        ✓ calls all registered listeners
        ✓ sends a CatchAllMessage if no listener matches
        ✓ does not trigger a CatchAllMessage if a listener matches
        ✓ stops processing if a listener marks the message as done
        ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
        ✓ executes the callback after the function returns when there are no listeners
      #loadFile
        ✓ should require the specified file
        proper script
          ✓ should call the script with the Robot
          ✓ should parse the script documentation
        non-Function script
          ✓ logs a warning
        unsupported file extension
          ✓ should not be loaded by the Robot
      #send
        ✓ delegates to adapter "send" with proper context
      #reply
        ✓ delegates to adapter "reply" with proper context
      #messageRoom
        ✓ delegates to adapter "send" with proper context
      #on
        ✓ delegates to events "on" with proper context
      #emit
        ✓ delegates to events "emit" with proper context
    Listener Registration
      #listen
        ✓ forwards the matcher, options, and callback to Listener
      #hear
        ✓ matches TextMessages
        ✓ does not match EnterMessages
      #respond
        ✓ matches TextMessages addressed to the robot
        ✓ does not match EnterMessages
      #enter
        ✓ matches EnterMessages
        ✓ does not match TextMessages
      #leave
        ✓ matches LeaveMessages
        ✓ does not match TextMessages
      #topic
        ✓ matches TopicMessages
        ✓ does not match TextMessages
      #catchAll
        ✓ matches CatchAllMessages
        ✓ does not match TextMessages
    Message Processing
      ✓ calls a matching listener
      ✓ calls multiple matching listeners
      ✓ calls the catch-all listener if no listeners match
      ✓ does not call the catch-all listener if any listener matched
      ✓ stops processing if message.finish() is called synchronously
      ✓ calls non-TextListener objects
      ✓ gracefully handles listener uncaughtExceptions (move on to next listener)
      Listener Middleware
        ✓ allows listener callback execution
        ✓ can block listener callback execution
        ✓ receives the correct arguments
        ✓ executes middleware in order of definition
      Receive Middleware
        ✓ fires for all messages, including non-matching ones
        ✓ can block listener execution
        ✓ receives the correct arguments
        ✓ executes receive middleware in order of definition
        ✓ allows editing the message portion of the given response
      Response Middleware
        ✓ executes response middleware in order
        ✓ allows replacing outgoing strings
        ✓ marks plaintext as plaintext
        ✓ does not send trailing functions to middleware

  User
    new
      ✓ uses id as the default name
      ✓ sets attributes passed in
      ✓ uses name attribute when passed in, not id


  193 passing (281ms)
  1 pending

----------------------|----------|----------|----------|----------|-------------------|
File                  |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------|----------|----------|----------|----------|-------------------|
All files             |    76.98 |    72.97 |    73.75 |    77.56 |                   |
 hubot                |      100 |      100 |      100 |      100 |                   |
  es2015.js           |      100 |      100 |      100 |      100 |                   |
  index.js            |      100 |      100 |      100 |      100 |                   |
 hubot/src            |     75.5 |    72.68 |    72.55 |    76.08 |                   |
  adapter.js          |    26.32 |      100 |    53.33 |    26.32 |... 16,117,127,128 |
  brain.js            |    96.34 |    86.67 |    95.24 |     96.3 |         15,30,164 |
  datastore.js        |    83.33 |       75 |    81.82 |    83.33 |          40,73,85 |
  listener.js         |    95.74 |    88.46 |      100 |    95.56 |             27,40 |
  message.js          |      100 |      100 |      100 |      100 |                   |
  middleware.js       |      100 |      100 |      100 |      100 |                   |
  response.js         |    67.65 |      100 |    46.15 |    67.65 |... 85,129,136,146 |
  robot.js            |    63.93 |    53.75 |     61.9 |    65.11 |... 28,731,735,739 |
  user.js             |       96 |       80 |    88.89 |    95.83 |                53 |
 hubot/src/datastores |      100 |      100 |      100 |      100 |                   |
  memory.js           |      100 |      100 |      100 |      100 |                   |
----------------------|----------|----------|----------|----------|-------------------|
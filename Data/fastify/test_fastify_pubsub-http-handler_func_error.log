14
FAIL src/__tests__/fastify-plugin.test.ts
  ● fastify-plugin › should forward requests

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

  ● fastify-plugin › should forward statusCode

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

  ● fastify-plugin › should return onError on throw

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

  ● fastify-plugin › should not return onError on throw

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

  ● fastify-plugin › should not throw if request is missing attributes

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

FAIL src/__tests__/server.test.ts
  ● server › should forward requests

    ReferenceError: lyx is not defined

      at validate10 (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/lib/configValidator.js:10:3)
      at doInject (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:36:27)
      at Chain.<computed> [as then] (../../../VariantsDeps/fastify/variant14/fastify/node_modules/light-my-request/index.js:144:23)

PASS src/__tests__/index.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/server-utils.test.ts
Jest: "global" coverage threshold for branches (80%) not met: 68.42%

Test Suites: 2 failed, 4 passed, 6 total
Tests:       6 failed, 8 passed, 14 total
Snapshots:   1 passed, 1 total
Time:        4.267 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.313 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.36 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.369 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.427 s, estimated 5 s
Ran all test suites matching /src/i.
FAIL src/__tests__/fastify-plugin.test.ts
  ● fastify-plugin › should forward requests

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

  ● fastify-plugin › should forward statusCode

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

  ● fastify-plugin › should return onError on throw

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

  ● fastify-plugin › should not return onError on throw

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

  ● fastify-plugin › should not throw if request is missing attributes

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

FAIL src/__tests__/server.test.ts
  ● server › should forward requests

    FastifyError: Failed building the validation schema for POST: /, due to error lyx is not defined

      317 |               compileSchemasForValidation(context, opts.validatorCompiler || schemaController.validatorCompiler)
      318 |             } catch (error) {
    > 319 |               throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
          |                     ^
      320 |             }
      321 |
      322 |             if (opts.schema.response && !opts.serializerCompiler) {

      at Boot.<anonymous> (../../../VariantsDeps/fastify/variant9/fastify/lib/route.js:319:21)
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
      at ../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:275:7
      at done (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:200:5)
      at check (../../../VariantsDeps/fastify/variant9/fastify/node_modules/avvio/plugin.js:224:9)

PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts
Jest: "global" coverage threshold for branches (80%) not met: 68.42%

Test Suites: 2 failed, 4 passed, 6 total
Tests:       6 failed, 8 passed, 14 total
Snapshots:   1 passed, 1 total
Time:        4.424 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.32 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.334 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.437 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.517 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.324 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.355 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.344 s, estimated 5 s
Ran all test suites matching /src/i.
PASS src/__tests__/fastify-plugin.test.ts
PASS src/__tests__/server.test.ts
PASS src/__tests__/index.test.ts
PASS src/__tests__/cloud-functions.test.ts
PASS src/__tests__/common.test.ts
PASS src/__tests__/server-utils.test.ts

Test Suites: 6 passed, 6 total
Tests:       14 passed, 14 total
Snapshots:   2 passed, 2 total
Time:        4.317 s, estimated 5 s
Ran all test suites matching /src/i.

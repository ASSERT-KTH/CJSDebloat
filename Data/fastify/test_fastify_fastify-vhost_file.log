/data/js-variants/multee
84
fastify-vhost is testing ./Variants/fastify/variant84/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 36 packages, and audited 428 packages in 1s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 888ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 428ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.878ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=124.006ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.148ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.148ms
}

1..2
# failed 1 of 2 tests
# time=30069.055ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant83/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 390ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.48ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=123.194ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.168ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.168ms
}

1..2
# failed 1 of 2 tests
# time=30075.772ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant82/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 851ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30036.303ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=131.829ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.858ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.858ms
}

1..2
# failed 1 of 2 tests
# time=30074.762ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant81/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 845ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=436.238ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  exitCode: 1
  ...
{
    1..0 # no tests found
}

ok 2 - lib/matches.test.js # time=7.588ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=7.588ms
}

1..2
# failed 1 of 2 tests
# time=505.762ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant80/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 850ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 419ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.361ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=133.128ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.239ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.239ms
}

1..2
# failed 1 of 2 tests
# time=30068.82ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant79/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 887ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30026.532ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.222ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.474ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.474ms
}

1..2
# failed 1 of 2 tests
# time=30062.443ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant78/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 872ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 413ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.44ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.944ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.607ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.607ms
}

1..2
# failed 1 of 2 tests
# time=30072.698ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant77/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 851ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.697ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant77/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant77/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant77/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant77/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant77/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant77/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=85.603ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 2 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.934ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.934ms
}

1..2
# failed 1 of 2 tests
# time=30064.548ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant76/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 869ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30025.578ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant76/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant76/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant76/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant76/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant76/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant76/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=86.823ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=15.987ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=15.987ms
}

1..2
# failed 1 of 2 tests
# time=30058.622ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant75/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 863ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 403ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30060.235ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.463ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.298ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.298ms
}

1..2
# failed 1 of 2 tests
# time=30095.326ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant74/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 871ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 398ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.542ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.823ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=11.578ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.578ms
}

1..2
# failed 1 of 2 tests
# time=30082.553ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant73/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 883ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.144ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant73/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant73/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant73/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant73/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant73/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant73/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=85.873ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 2 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=21.769ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=21.769ms
}

1..2
# failed 1 of 2 tests
# time=30062.802ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant72/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 847ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30041.434ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant72/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant72/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant72/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant72/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant72/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant72/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=82.734ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.782ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.782ms
}

1..2
# failed 1 of 2 tests
# time=30077.131ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant71/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.808ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.786ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.953ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.953ms
}

1..2
# failed 1 of 2 tests
# time=30072.026ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant70/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 390ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.058ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=159.046ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.135ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.135ms
}

1..2
# failed 1 of 2 tests
# time=30071.892ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant69/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 892ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 391ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30041.413ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.727ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.045ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.045ms
}

1..2
# failed 1 of 2 tests
# time=30093.48ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant68/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 869ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.378ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=123.139ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.915ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.915ms
}

1..2
# failed 1 of 2 tests
# time=30066.54ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant67/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 884ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.048ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.224ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.282ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.282ms
}

1..2
# failed 1 of 2 tests
# time=30069.129ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant66/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 870ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 403ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30033.15ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant66/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant66/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant66/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant66/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant66/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant66/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=86.384ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=10.162ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=10.162ms
}

1..2
# failed 1 of 2 tests
# time=30066.51ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant65/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 874ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30023.309ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant65/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant65/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant65/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant65/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant65/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant65/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=84.023ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.353ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.353ms
}

1..2
# failed 1 of 2 tests
# time=30058.745ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant64/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 859ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 411ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30021.962ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant64/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant64/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant64/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant64/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant64/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant64/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=84.522ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.807ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.807ms
}

1..2
# failed 1 of 2 tests
# time=30056.033ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant63/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 869ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.641ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.709ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.163ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.163ms
}

1..2
# failed 1 of 2 tests
# time=30073.297ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant62/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 852ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.094ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant62/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant62/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant62/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant62/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant62/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant62/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=85.865ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=12.024ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=12.024ms
}

1..2
# failed 1 of 2 tests
# time=30063.614ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant61/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 850ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 403ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30032.787ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - definitions is not iterable
          ---
          stack: >
            Ajv.addVocabulary
            (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/core.ts:580:23)
          
            /data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant61/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/Variants/fastify/variant61/fastify/lib/route.js:314:32)
          at:
            line: 580
            column: 23
            file: /data/js-variants/multee/Variants/fastify/variant61/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addVocabulary
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
              addVocabulary(definitions: Vocabulary): Ajv {
                for (const def of definitions) this.addKeyword(def)
            ----------------------^
                return this
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=124.71ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.265ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.265ms
}

1..2
# failed 1 of 2 tests
# time=30068.937ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant60/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 851ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 395ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.356ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - definitions is not iterable
          ---
          stack: >
            Ajv.addVocabulary
            (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/core.ts:580:23)
          
            /data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant60/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/Variants/fastify/variant60/fastify/lib/route.js:314:32)
          at:
            line: 580
            column: 23
            file: /data/js-variants/multee/Variants/fastify/variant60/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addVocabulary
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
              addVocabulary(definitions: Vocabulary): Ajv {
                for (const def of definitions) this.addKeyword(def)
            ----------------------^
                return this
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=116.289ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.977ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.977ms
}

1..2
# failed 1 of 2 tests
# time=30067.466ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant59/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 845ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30025.72ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant59/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant59/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=116.651ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.928ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.928ms
}

1..2
# failed 1 of 2 tests
# time=30059.58ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant58/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 843ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.635ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant58/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant58/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=152.634ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.303ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.303ms
}

1..2
# failed 1 of 2 tests
# time=30067.019ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant57/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 839ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.355ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant57/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant57/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=128.645ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
    # test count(13) != plan(null)
    # failed 2 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.244ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.244ms
}

1..2
# failed 1 of 2 tests
# time=30067.094ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant56/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 839ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.982ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant56/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant56/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=122.163ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.649ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.649ms
}

1..2
# failed 1 of 2 tests
# time=30072.34ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant55/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 826ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.604ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant55/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant55/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=113.314ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.726ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.726ms
}

1..2
# failed 1 of 2 tests
# time=30065.56ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant54/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30021.662ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant54/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant54/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=146.952ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.899ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.899ms
}

1..2
# failed 1 of 2 tests
# time=30055.293ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant53/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 841ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 432ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30027.567ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant53/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant53/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=127.727ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.935ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.935ms
}

1..2
# failed 1 of 2 tests
# time=30059.824ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant52/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 843ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30025.802ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant52/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant52/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant52/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant52/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant52/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant52/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=85.583ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=24.729ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=24.729ms
}

1..2
# failed 1 of 2 tests
# time=30061.53ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant51/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 831ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.372ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant51/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant51/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=129.514ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.981ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.981ms
}

1..2
# failed 1 of 2 tests
# time=30065.754ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant50/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 844ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 407ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30026.877ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant50/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant50/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=111.241ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.167ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.167ms
}

1..2
# failed 1 of 2 tests
# time=30061.09ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant49/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 822ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 395ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30027.825ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant49/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant49/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=114.886ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.318ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.318ms
}

1..2
# failed 1 of 2 tests
# time=30063.879ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant48/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 842ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 390ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.628ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.079ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=21.223ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=21.223ms
}

1..2
# failed 1 of 2 tests
# time=30070.771ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant47/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 833ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 445ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30021.397ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - definitions is not iterable
          ---
          stack: >
            Ajv.addVocabulary
            (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/core.ts:580:23)
          
            /data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant47/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/Variants/fastify/variant47/fastify/lib/route.js:314:32)
          at:
            line: 580
            column: 23
            file: /data/js-variants/multee/Variants/fastify/variant47/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addVocabulary
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
              addVocabulary(definitions: Vocabulary): Ajv {
                for (const def of definitions) this.addKeyword(def)
            ----------------------^
                return this
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=130.806ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.347ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.347ms
}

1..2
# failed 1 of 2 tests
# time=30056.921ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant46/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 838ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 424ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.613ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - invalid addKeywords parameters
          ---
          stack: >
            Ajv.addKeyword
            (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/core.ts:602:13)
          
            Ajv.addVocabulary (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/core.ts:580:41)
          
            /data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant46/fastify/lib/schema-controller.js:100:56)
          at:
            line: 602
            column: 13
            file: /data/js-variants/multee/Variants/fastify/variant46/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addKeyword
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                } else {
                  throw new Error("invalid addKeywords parameters")
            ------------^
                }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=127.726ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=9.027ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.027ms
}

1..2
# failed 1 of 2 tests
# time=30074.18ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant45/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 848ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 391ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.852ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - definitions is not iterable
          ---
          stack: >
            Ajv.addVocabulary
            (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/core.ts:580:23)
          
            /data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/ajv.ts:14:44
          
            Array.forEach (<anonymous>)
          
            Ajv._addVocabularies (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant45/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/Variants/fastify/variant45/fastify/lib/route.js:314:32)
          at:
            line: 580
            column: 23
            file: /data/js-variants/multee/Variants/fastify/variant45/fastify/node_modules/ajv/lib/core.ts
            function: Ajv.addVocabulary
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
              addVocabulary(definitions: Vocabulary): Ajv {
                for (const def of definitions) this.addKeyword(def)
            ----------------------^
                return this
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=122.19ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.622ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.622ms
}

1..2
# failed 1 of 2 tests
# time=30067.317ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant44/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 848ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.097ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Cannot read properties of undefined (reading 'forEach')
          ---
          stack: >
            Ajv._addVocabularies
            (/data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/Variants/fastify/variant44/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/Variants/fastify/variant44/fastify/lib/route.js:314:32)
          
            /data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/avvio/boot.js:160:12
          at:
            line: 14
            column: 24
            file: /data/js-variants/multee/Variants/fastify/variant44/fastify/node_modules/ajv/lib/ajv.ts
            function: Ajv._addVocabularies
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                super._addVocabularies()
                draft7Vocabularies.forEach((v) => this.addVocabulary(v))
            -----------------------^
                if (this.opts.discriminator) this.addKeyword(discriminator)
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=108.04ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.751ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.751ms
}

1..2
# failed 1 of 2 tests
# time=30072.789ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant43/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 857ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.898ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=132.536ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=15.451ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=15.451ms
}

1..2
# failed 1 of 2 tests
# time=30067.988ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant42/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 835ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 392ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30033.232ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.011ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.229ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.229ms
}

1..2
# failed 1 of 2 tests
# time=30070.251ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant41/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 845ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 530ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30024.038ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant41/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant41/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant41/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant41/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant41/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant41/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=86.642ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.764ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.764ms
}

1..2
# failed 1 of 2 tests
# time=30057.635ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant40/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 843ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 433ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30021.55ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'data')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant40/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant40/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant40/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant40/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant40/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant40/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=88.057ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=18.641ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=18.641ms
}

1..2
# failed 1 of 2 tests
# time=30056.512ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant39/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 412ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.974ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Failed building the validation schema for DELETE: /, due to error Cannot read properties of undefined (reading 'code')
          ---
          stack: >
            Boot.<anonymous>
            (/data/js-variants/multee/Variants/fastify/variant39/fastify/lib/route.js:319:21)
          
            /data/js-variants/multee/Variants/fastify/variant39/fastify/node_modules/avvio/boot.js:160:12
          
            /data/js-variants/multee/Variants/fastify/variant39/fastify/node_modules/avvio/plugin.js:275:7
          
            done (/data/js-variants/multee/Variants/fastify/variant39/fastify/node_modules/avvio/plugin.js:200:5)
          
            check (/data/js-variants/multee/Variants/fastify/variant39/fastify/node_modules/avvio/plugin.js:224:9)
          at:
            line: 319
            column: 21
            file: /data/js-variants/multee/Variants/fastify/variant39/fastify/lib/route.js
            function: Boot.<anonymous>
          type: FastifyError
          code: FST_ERR_SCH_VALIDATION_BUILD
          statusCode: 500
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
                        } catch (error) {
                          throw new FST_ERR_SCH_VALIDATION_BUILD(opts.method, url, error.message)
            --------------------^
                        }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=102.237ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=18.809ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=18.809ms
}

1..2
# failed 1 of 2 tests
# time=30067.678ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant38/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 859ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 391ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30055.03ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.766ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.982ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.982ms
}

1..2
# failed 1 of 2 tests
# time=30088.055ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant37/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 845ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 427ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30044.969ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.854ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.184ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.184ms
}

1..2
# failed 1 of 2 tests
# time=30077.774ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant36/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 853ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 426ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.088ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.08ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.069ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.069ms
}

1..2
# failed 1 of 2 tests
# time=30074.439ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant35/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 835ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 383ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30040.015ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=156.633ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.354ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.354ms
}

1..2
# failed 1 of 2 tests
# time=30074.961ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant34/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 850ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30032.219ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.576ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.187ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.187ms
}

1..2
# failed 1 of 2 tests
# time=30083.411ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant33/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 393ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30035.418ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.521ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.243ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.243ms
}

1..2
# failed 1 of 2 tests
# time=30069.494ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant32/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 847ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.448ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=129.854ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.132ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.132ms
}

1..2
# failed 1 of 2 tests
# time=30070.368ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant31/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 877ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.944ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.227ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.328ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.328ms
}

1..2
# failed 1 of 2 tests
# time=30074.574ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant30/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 872ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 392ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.726ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=119.876ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.565ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.565ms
}

1..2
# failed 1 of 2 tests
# time=30074.755ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant29/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 947ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30036.1ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.783ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.247ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.247ms
}

1..2
# failed 1 of 2 tests
# time=30072.67ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant28/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 891ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 419ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.918ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.102ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=11.805ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.805ms
}

1..2
# failed 1 of 2 tests
# time=30073.541ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant27/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 879ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 398ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.77ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.746ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=9.615ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.615ms
}

1..2
# failed 1 of 2 tests
# time=30067.474ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant26/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 887ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30032.449ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=119.837ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.624ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.624ms
}

1..2
# failed 1 of 2 tests
# time=30069.479ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant25/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 887ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.873ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=118.604ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.879ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.879ms
}

1..2
# failed 1 of 2 tests
# time=30069.297ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant24/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 892ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30035.266ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.913ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=9.059ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.059ms
}

1..2
# failed 1 of 2 tests
# time=30071.899ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant23/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 877ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.977ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=123.657ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.782ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.782ms
}

1..2
# failed 1 of 2 tests
# time=30067.008ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant22/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 885ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.619ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.914ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.845ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.845ms
}

1..2
# failed 1 of 2 tests
# time=30070.117ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant21/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 969ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 396ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30041.856ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.051ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=12.522ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=12.522ms
}

1..2
# failed 1 of 2 tests
# time=30075.438ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant20/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 860ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 386ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.025ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=118.752ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=9.084ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.084ms
}

1..2
# failed 1 of 2 tests
# time=30073.965ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant19/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 859ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 439ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30035.754ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=123.658ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.535ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.535ms
}

1..2
# failed 1 of 2 tests
# time=30071.034ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant18/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 858ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 428ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30040ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=151.011ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=9.153ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.153ms
}

1..2
# failed 1 of 2 tests
# time=30072.645ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant17/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 845ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 385ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.801ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.653ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.316ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.316ms
}

1..2
# failed 1 of 2 tests
# time=30066.726ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant16/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 837ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 418ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.279ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.874ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.99ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.99ms
}

1..2
# failed 1 of 2 tests
# time=30067.817ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant15/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 838ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 402ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30040.975ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - semver.satisfies is not a function
          ---
          stack: >
            Object.checkVersion
            (/data/js-variants/multee/Variants/fastify/variant15/fastify/lib/pluginUtils.js:113:33)
          
            Object.registerPlugin (/data/js-variants/multee/Variants/fastify/variant15/fastify/lib/pluginUtils.js:133:16)
          
            Boot.override (/data/js-variants/multee/Variants/fastify/variant15/fastify/lib/pluginOverride.js:28:57)
          
            Plugin.exec (/data/js-variants/multee/Variants/fastify/variant15/fastify/node_modules/avvio/plugin.js:79:33)
          
            Boot.loadPlugin (/data/js-variants/multee/Variants/fastify/variant15/fastify/node_modules/avvio/plugin.js:272:10)
          at:
            line: 113
            column: 33
            file: /data/js-variants/multee/Variants/fastify/variant15/fastify/lib/pluginUtils.js
            function: Object.checkVersion
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
              }
              if (requiredVersion && semver.satisfies(this.version, requiredVersion, { includePrerelease: fastifyRc }) === false) {
            --------------------------------^
                // We are not in a release candidate phase. Thus, we must honor the semver
                // ranges defined by the plugin's metadata. Which is to say, if the plugin
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=126.086ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.159ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.159ms
}

1..2
# failed 1 of 2 tests
# time=30083.103ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant14/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 834ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 386ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.537ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.374ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.951ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.951ms
}

1..2
# failed 1 of 2 tests
# time=30076.844ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant13/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 827ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 389ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.033ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=164.392ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.809ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.809ms
}

1..2
# failed 1 of 2 tests
# time=30077.422ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant12/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 852ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 433ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.361ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.545ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.871ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.871ms
}

1..2
# failed 1 of 2 tests
# time=30070.259ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant11/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 834ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 407ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30038.963ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=128.773ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.074ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.074ms
}

1..2
# failed 1 of 2 tests
# time=30072.696ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant10/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 859ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.84ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.439ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=9.007ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.007ms
}

1..2
# failed 1 of 2 tests
# time=30074.608ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant9/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 846ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 410ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.505ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=127.339ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.144ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.144ms
}

1..2
# failed 1 of 2 tests
# time=30066.624ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant8/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 843ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 398ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30025.861ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=129.044ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.762ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.762ms
}

1..2
# failed 1 of 2 tests
# time=30061.55ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant7/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 850ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 445ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30037.879ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.648ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.689ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.689ms
}

1..2
# failed 1 of 2 tests
# time=30073.776ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant6/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 850ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 400ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.409ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.304ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.203ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.203ms
}

1..2
# failed 1 of 2 tests
# time=30068.157ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant5/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 879ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 381ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30028.533ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.306ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.952ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.952ms
}

1..2
# failed 1 of 2 tests
# time=30067.264ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant4/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 830ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 387ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30036.372ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.72ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=17.112ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=17.112ms
}

1..2
# failed 1 of 2 tests
# time=30072.593ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant3/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 868ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.078ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.486ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.936ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.936ms
}

1..2
# failed 1 of 2 tests
# time=30067.158ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant2/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 879ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30026.832ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=125.26ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.329ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.329ms
}

1..2
# failed 1 of 2 tests
# time=30065.586ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./Variants/fastify/variant1/fastify
/data/js-variants/multee
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 883ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 397ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=234.41ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  exitCode: 1
  ...
{
    1..0 # no tests found
}

ok 2 - lib/matches.test.js # time=7.7ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=7.7ms
}

1..2
# failed 1 of 2 tests
# time=425.557ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
variantsDepsNum: 14
/data/js-variants/multee
14
fastify-vhost is testing ./VariantsDeps/fastify/variant14/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 906ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 423ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30031.693ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=123.235ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=9.489ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.489ms
}

1..2
# failed 1 of 2 tests
# time=30069.138ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant13/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 882ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 415ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.476ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.391ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=11.841ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.841ms
}

1..2
# failed 1 of 2 tests
# time=30071.782ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant12/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 960ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.67ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=122.31ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.121ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.121ms
}

1..2
# failed 1 of 2 tests
# time=30070.038ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant11/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 878ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 396ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=447.265ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  exitCode: 1
  ...
{
    1..0 # no tests found
}

ok 2 - lib/matches.test.js # time=8.925ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.925ms
}

1..2
# failed 1 of 2 tests
# time=502.085ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant10/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 941ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 416ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30050.16ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.294ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.852ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.852ms
}

1..2
# failed 1 of 2 tests
# time=30084.64ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant9/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 839ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 432ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30027.872ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - Cannot read properties of undefined (reading 'forEach')
          ---
          stack: >
            Ajv._addVocabularies
            (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/ajv/lib/ajv.ts:14:24)
          
            new Ajv (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/ajv/lib/core.ts:308:10)
          
            new Ajv (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/ajv/lib/ajv.ts:11:1)
          
            new ValidatorCompiler (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/@fastify/ajv-compiler/index.js:51:18)
          
            buildCompilerFromPool (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/@fastify/ajv-compiler/index.js:32:22)
          
            SchemaController.setupValidator (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/lib/schema-controller.js:100:56)
          
            Boot.<anonymous> (/data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/lib/route.js:314:32)
          
            /data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/avvio/boot.js:160:12
          at:
            line: 14
            column: 24
            file: /data/js-variants/multee/VariantsDeps/fastify/variant9/fastify/node_modules/ajv/lib/ajv.ts
            function: Ajv._addVocabularies
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: |2
                super._addVocabularies()
                draft7Vocabularies.forEach((v) => this.addVocabulary(v))
            -----------------------^
                if (this.opts.discriminator) this.addKeyword(discriminator)
              }
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=108.688ms
    
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=9.01ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=9.01ms
}

1..2
# failed 1 of 2 tests
# time=30062.848ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant8/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 855ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 412ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.88ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        not ok 1 - semver.satisfies is not a function
          ---
          stack: >
            Object.checkVersion
            (/data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/lib/pluginUtils.js:113:33)
          
            Object.registerPlugin (/data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/lib/pluginUtils.js:133:16)
          
            Boot.override (/data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/lib/pluginOverride.js:28:57)
          
            Plugin.exec (/data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/node_modules/avvio/plugin.js:79:33)
          
            Boot.loadPlugin (/data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/node_modules/avvio/plugin.js:272:10)
          at:
            line: 113
            column: 33
            file: /data/js-variants/multee/VariantsDeps/fastify/variant8/fastify/lib/pluginUtils.js
            function: Object.checkVersion
          type: TypeError
          tapCaught: returnedPromiseRejection
          test: listen
          source: >2
              }
              if (requiredVersion && semver.satisfies(this.version, requiredVersion, { includePrerelease: fastifyRc }) === false) {
            --------------------------------^
                // We are not in a release candidate phase. Thus, we must honor the semver
                // ranges defined by the plugin's metadata. Which is to say, if the plugin
          ...
        
        1..1
        # failed 1 test
    not ok 13 - listen # time=125.961ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 2 of 13 tests
}

ok 2 - lib/matches.test.js # time=11.822ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.822ms
}

1..2
# failed 1 of 2 tests
# time=30073.903ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant7/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 851ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.087ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=121.1ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=20.014ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=20.014ms
}

1..2
# failed 1 of 2 tests
# time=30067.688ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant6/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 858ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 431ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30039.451ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=132.445ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=8.683ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.683ms
}

1..2
# failed 1 of 2 tests
# time=30073.91ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant5/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 844ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 438ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30030.324ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.197ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=16.427ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.427ms
}

1..2
# failed 1 of 2 tests
# time=30067.636ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant4/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 847ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 428ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30037.529ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=126.182ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
    # test count(13) != plan(null)
    # failed 1 of 13 tests
        # test count(1) != plan(null)
        # failed 2 test
}

ok 2 - lib/matches.test.js # time=11.659ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=11.659ms
}

1..2
# failed 1 of 2 tests
# time=30071.916ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant3/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 830ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 448ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30029.773ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=124.936ms
    
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=8.858ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=8.858ms
}

1..2
# failed 1 of 2 tests
# time=30068.783ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant2/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 852ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=30057.668ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  failures:
    - tapError: no plan
  exitCode: null
  signal: SIGTERM
  ...
{
    ok 1 - null options should throw
    ok 2 - options missing upstream should throw
    ok 3 - options missing host should throw
    ok 4 - options containing subdomain should throw
    ok 5 - non-string host should throw
    ok 6 - tld-missing host should throw
    ok 7 - invalid timeout should throw
    ok 8 - negative timeout should throw
    ok 9 - timeout=0 should throw
    ok 10 - with both host and hosts should throw
    ok 11 - empty hosts should throw
    ok 12 - expected to not throw
    # Subtest: listen
        1..0
    ok 13 - listen # time=148.048ms
    
    # Subtest: GET domain
        not ok 1 - timeout!
          ---
          signal: SIGTERM
          requests:
            - type: TCPConnectWrap
          handles:
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3000
            - type: Server
              events:
                - request
                - connection
                - clientError
              connectionKey: 4:0.0.0.0:3001
            - type: Socket
              events:
                - end
                - connect
                - free
                - close
                - timeout
                - agentRemove
                - error
                - data
                - drain
          expired: TAP
          stack: |
            emit (node_modules/signal-exit/index.js:105:13)
            process.listener (node_modules/signal-exit/index.js:123:9)
          test: GET domain
          ...
        
        1..1
        # failed 1 test
    # test count(13) != plan(null)
    # failed 1 of 13 tests
}

ok 2 - lib/matches.test.js # time=16.459ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=16.459ms
}

1..2
# failed 1 of 2 tests
# time=30092.993ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |   78.33 |    86.04 |      50 |   78.33 |                   
 index.js   |   73.46 |    82.35 |      25 |   73.46 | 55-69,89-100      
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************
fastify-vhost is testing ./VariantsDeps/fastify/variant1/fastify
************* npm unlink module *************

removed 1 package, and audited 428 packages in 2s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 851ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 395ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 1 package, and audited 430 packages in 3s

29 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
************* npm link module done *************
************* start run test *************

> fastify-vhost@1.3.2 test
> tap test.js lib/*.test.js --100

TAP version 13
not ok 1 - test.js # time=232.225ms
  ---
  env: {}
  file: test.js
  timeout: 30000
  command: /usr/local/bin/node
  args:
    - test.js
  stdio:
    - 0
    - pipe
    - 2
  cwd: /data/js-variants/multee/Clients/fastify/fastify-vhost
  exitCode: 1
  ...
{
    1..0 # no tests found
}

ok 2 - lib/matches.test.js # time=7.636ms {
    ok 1 - null returns null
    ok 2 - missing header returns null
    ok 3 - null header returns null
    ok 4 - invalid header returns null
    ok 5 - undefined header returns null
    ok 6 - null expected returns null
    ok 7 - root domain should not match
    ok 8 - test subdomain should match
    ok 9 - root domain should not match
    ok 10 - host + port should match
    ok 11 - case insensitive should match
    ok 12 - host with whitespaces should match
    ok 13 - [strict] host + port should not match
    ok 14 - [strict] case insensitive should not match
    ok 15 - [strict] host containing whitespaces should not match
    1..15
    # time=7.636ms
}

1..2
# failed 1 of 2 tests
# time=407.876ms
------------|---------|----------|---------|---------|-------------------
File        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------|---------|----------|---------|---------|-------------------
All files   |     100 |      100 |     100 |     100 |                   
 matches.js |     100 |      100 |     100 |     100 |                   
------------|---------|----------|---------|---------|-------------------
************* run test done *************

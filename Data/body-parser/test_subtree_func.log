14
./VariantsSubtree/body-parser/variant14/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (60ms)
    ✔ should parse JSON (64ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests (41ms)
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (103ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (96ms)
        ✔ should work with Infinity limit (136ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (79ms)
        ✔ should work with Infinity limit (231ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant13/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (44ms)
    ✔ should parse JSON (62ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (75ms)
        ✔ should work with Infinity limit (175ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (47ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant12/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (70ms)
    ✔ should parse JSON (70ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (107ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (85ms)
        ✔ should work with Infinity limit (154ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (92ms)
        ✔ should work with Infinity limit (169ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant11/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON (70ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (104ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (59ms)
        ✔ should work with Infinity limit (173ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (43ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant10/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (46ms)
    ✔ should parse JSON (59ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (87ms)
        ✔ should work with Infinity limit (103ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (79ms)
        ✔ should work with Infinity limit (163ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant9/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (69ms)
    ✔ should parse JSON (61ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (84ms)
        ✔ should work with Infinity limit (94ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (80ms)
        ✔ should work with Infinity limit (196ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant8/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (103ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (47ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (75ms)
        ✔ should work with Infinity limit (170ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant7/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (57ms)
    ✔ should parse JSON (46ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (55ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (84ms)
        ✔ should work with Infinity limit (170ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (1s)

./VariantsSubtree/body-parser/variant6/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (48ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (85ms)
        ✔ should work with Infinity limit (135ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant5/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (101ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (69ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (77ms)
        ✔ should work with Infinity limit (202ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant4/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {} (44ms)
    ✔ should parse JSON (41ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (101ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (54ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (79ms)
        ✔ should work with Infinity limit (182ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant3/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON
    ✔ should parse x-www-form-urlencoded (39ms)
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (103ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (88ms)
        ✔ should work with Infinity limit (161ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (108ms)
        ✔ should work with Infinity limit (201ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)

./VariantsSubtree/body-parser/variant2/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON (39ms)
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit
        ✔ should work with Infinity limit (55ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (70ms)
        ✔ should work with Infinity limit (170ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (1s)

./VariantsSubtree/body-parser/variant1/body-parser

> body-parser@1.20.0 test
> mocha --require test/support/env --reporter spec --check-leaks --bail test/



  bodyParser()
    ✔ should default to {}
    ✔ should parse JSON
    ✔ should parse x-www-form-urlencoded
    ✔ should handle duplicated middleware
    http methods
      ✔ should support ACL requests
      ✔ should support BIND requests
      ✔ should support CHECKOUT requests
      ✔ should support COPY requests
      ✔ should support DELETE requests
      ✔ should support GET requests
      ✔ should support HEAD requests
      ✔ should support LINK requests
      ✔ should support LOCK requests
      ✔ should support M-SEARCH requests
      ✔ should support MERGE requests
      ✔ should support MKACTIVITY requests
      ✔ should support MKCALENDAR requests
      ✔ should support MKCOL requests
      ✔ should support MOVE requests
      ✔ should support NOTIFY requests
      ✔ should support OPTIONS requests
      ✔ should support PATCH requests
      ✔ should support POST requests
      ✔ should support PROPFIND requests
      ✔ should support PROPPATCH requests
      ✔ should support PURGE requests
      ✔ should support PUT requests
      ✔ should support REBIND requests
      ✔ should support REPORT requests
      ✔ should support SEARCH requests
      ✔ should support SOURCE requests
      ✔ should support SUBSCRIBE requests
      ✔ should support TRACE requests
      ✔ should support UNBIND requests
      ✔ should support UNLINK requests
      ✔ should support UNLOCK requests
      ✔ should support UNSUBSCRIBE requests
    with type option
      ✔ should parse JSON
      ✔ should parse x-www-form-urlencoded
    with verify option
      ✔ should apply to json
      ✔ should apply to urlencoded

  bodyParser.json()
    ✔ should parse JSON
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should handle no message-body
    ✔ should 400 when only whitespace
    ✔ should 400 when invalid content-length
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    when JSON is invalid
      ✔ should 400 for bad token
      ✔ should 400 for incomplete
      ✔ should include original body on error object
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with strict option
      when undefined
        ✔ should 400 on primitives
      when false
        ✔ should parse primitives
      when true
        ✔ should not parse primitives
        ✔ should not parse primitives with leading whitespaces
        ✔ should allow leading whitespaces in JSON
        ✔ should include correct message in stack trace
    with type option
      when "application/vnd.api+json"
        ✔ should parse JSON for custom type
        ✔ should ignore standard type
      when ["application/json", "application/vnd.api+json"]
        ✔ should parse JSON for "application/json"
        ✔ should parse JSON for "application/vnd.api+json"
        ✔ should ignore "application/x-json"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should include original body on error object
      ✔ should allow pass-through
      ✔ should work with different charsets
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when parse error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse utf-16
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding
      ✔ should 400 on malformed encoding
      ✔ should 413 when inflated value exceeds limit

  bodyParser.raw()
    ✔ should parse application/octet-stream
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "application/vnd+octets"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["application/octet-stream", "application/vnd+octets"]
        ✔ should parse "application/octet-stream"
        ✔ should parse "application/vnd+octets"
        ✔ should ignore "application/x-foo"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should ignore charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.text()
    ✔ should parse text/plain
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    with defaultCharset option
      ✔ should change default charset
      ✔ should honor content-type charset
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating (102ms)
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with type option
      when "text/html"
        ✔ should parse for custom type
        ✔ should ignore standard type
      when ["text/html", "text/plain"]
        ✔ should parse "text/html"
        ✔ should parse "text/plain"
        ✔ should ignore "text/xml"
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value is function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse codepage charsets
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should 415 on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding

  bodyParser.urlencoded()
    ✔ should parse x-www-form-urlencoded
    ✔ should 400 when invalid content-length
    ✔ should handle Content-Length: 0
    ✔ should handle empty message-body
    ✔ should 500 if stream not readable
    ✔ should handle duplicated middleware
    ✔ should parse extended syntax
    with extended option
      when false
        ✔ should not parse extended syntax
        ✔ should parse multiple key instances
      when true
        ✔ should parse multiple key instances
        ✔ should parse extended syntax
        ✔ should parse parameters with dots
        ✔ should parse fully-encoded extended syntax
        ✔ should parse array index notation
        ✔ should parse array index notation with large array
        ✔ should parse array of objects syntax
        ✔ should parse deep object
    with inflate option
      when false
        ✔ should not accept content-encoding
      when true
        ✔ should accept content-encoding
    with limit option
      ✔ should 413 when over limit with Content-Length
      ✔ should 413 when over limit with chunked encoding
      ✔ should 413 when inflated body over limit
      ✔ should accept number of bytes
      ✔ should not change when options altered
      ✔ should not hang response
      ✔ should not error when inflating
    with parameterLimit option
      with extended: false
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (50ms)
        ✔ should work with Infinity limit (51ms)
      with extended: true
        ✔ should reject 0
        ✔ should reject string
        ✔ should 413 if over limit
        ✔ should work when at the limit
        ✔ should work if number is floating point
        ✔ should work with large limit (80ms)
        ✔ should work with Infinity limit (162ms)
    with type option
      when "application/vnd.x-www-form-urlencoded"
        ✔ should parse for custom type (38ms)
        ✔ should ignore standard type
      when ["urlencoded", "application/x-pairs"]
        ✔ should parse "application/x-www-form-urlencoded"
        ✔ should parse "application/x-pairs"
        ✔ should ignore application/x-foo
      when a function
        ✔ should parse when truthy value returned
        ✔ should work without content-type
        ✔ should not invoke without a body
    with verify option
      ✔ should assert value if function
      ✔ should error from verify
      ✔ should allow custom codes
      ✔ should allow custom type
      ✔ should allow pass-through
      ✔ should 415 on unknown charset prior to verify
    async local storage
      ✔ should presist store
      ✔ should presist store when unmatched content-type
      ✔ should presist store when inflated
      ✔ should presist store when inflate error
      ✔ should presist store when limit exceeded
    charset
      ✔ should parse utf-8
      ✔ should parse when content-length != char length
      ✔ should default to utf-8
      ✔ should fail on unknown charset
    encoding
      ✔ should parse without encoding
      ✔ should support identity encoding
      ✔ should support gzip encoding
      ✔ should support deflate encoding
      ✔ should be case-insensitive
      ✔ should 415 on unknown encoding


  256 passing (2s)


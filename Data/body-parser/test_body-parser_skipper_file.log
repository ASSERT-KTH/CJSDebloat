/data/js-variants/multee
18
skipper is testing ./Variants/body-parser/variant18/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 3s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 453ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 407ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: Cannot read properties of undefined (reading 'undefined')
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/stringify.js:41:34)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant18/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant17/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 497ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 433ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (31s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1435ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(583ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1142ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1264ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(941ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(261ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(802ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(766ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(125ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(305ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(511ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(535ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(525ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1008ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1038ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(239ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(654ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(390ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(715ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(758ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(228ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1461ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (21s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant16/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 459ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/get-intrinsic/index.js:201:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant16/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant15/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 457ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 417ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/Variants/body-parser/variant15/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant14/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 482ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 419ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      1) "before all" hook


  60 passing (31s)
  3 pending
  1 failing

  1) req.body (URL-encoded parser) :: sending an application/x-www-form-urlencoded content-type request "before all" hook:
     Uncaught SyntaxError: Unexpected token T in JSON at position 0
      at JSON.parse (<anonymous>)
      at Request._callback (test/urlencoded.parser.test.js:53:25)
      at self.callback (node_modules/request/request.js:187:22)
      at Request.emit (node:events:527:28)
      at Request.<anonymous> (node_modules/request/request.js:1044:10)
      at Request.emit (node:events:527:28)
      at IncomingMessage.<anonymous> (node_modules/request/request.js:965:12)
      at IncomingMessage.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant13/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 472ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 394ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (32s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3018ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(329ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1423ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(105ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1255ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1283ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1403ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(813ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(667ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(777ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(481ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1673ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(361ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(868ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1710ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(325ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(927ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1375ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1494ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(628ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(364ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1581ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1409ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (26s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant12/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 467ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 434ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (31s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3019ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1321ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(277ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(244ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(137ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(767ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(794ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(372ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(550ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(527ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1139ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(102ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1146ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1668ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1482ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(208ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(56ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(522ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(542ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1679ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(953ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(982ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (20s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant11/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 455ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (29s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3016ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(786ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(252ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(278ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(514ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1388ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1061ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(941ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(181ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1330ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(380ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(709ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(349ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1440ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1521ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1513ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1004ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1332ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(767ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1107ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1316ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(190ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(75ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (23s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant10/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 5s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 513ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 407ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (28s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3016ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1491ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1313ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1606ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1649ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(587ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(818ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1314ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1113ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(663ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(405ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1283ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(492ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1673ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1338ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1416ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(632ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(481ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1517ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1343ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(818ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(975ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(129ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (28s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant9/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 464ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 423ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (30s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(999ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(38ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1383ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1395ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(120ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1174ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(319ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(442ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1465ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(985ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(842ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(830ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(648ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1172ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1344ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(182ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(682ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(309ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(669ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1275ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1189ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1662ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (24s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant8/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 469ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 401ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (31s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3018ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1223ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1662ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(560ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1395ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(369ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(538ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(190ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1707ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(365ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1302ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1695ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(193ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(571ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(462ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1688ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(584ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1281ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(305ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(925ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(471ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1143ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (23s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant7/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 461ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      1) should have all of the correct body params
      2) should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      3) "before all" hook


  58 passing (30s)
  3 pending
  3 failing

  1) req.body (JSON parser) :: sending an application/json content-type request should have all of the correct body params:
     TypeError: Cannot read properties of undefined (reading 'foo')
      at Context.<anonymous> (test/json.parser.test.js:58:34)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.body (JSON parser) :: sending an application/json content-type request should have an empty files array:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(_.isArray(res.body.files))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (test/json.parser.test.js:64:7)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (URL-encoded parser) :: sending an application/x-www-form-urlencoded content-type request "before all" hook:
     Uncaught SyntaxError: Unexpected token U in JSON at position 0
      at JSON.parse (<anonymous>)
      at Request._callback (test/urlencoded.parser.test.js:53:25)
      at self.callback (node_modules/request/request.js:187:22)
      at Request.emit (node:events:527:28)
      at Request.<anonymous> (node_modules/request/request.js:1044:10)
      at Request.emit (node:events:527:28)
      at IncomingMessage.<anonymous> (node_modules/request/request.js:965:12)
      at IncomingMessage.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant6/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 501ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 434ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (30s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1625ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1053ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(62ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1032ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(616ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(166ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(949ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(985ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1648ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(914ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1212ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(779ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(806ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1235ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(963ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(78ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1518ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(64ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(244ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(392ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1578ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1175ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (24s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant5/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 472ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 434ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (30s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1696ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(886ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(233ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1238ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1227ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(796ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1513ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1685ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1398ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1634ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(507ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(873ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(335ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(603ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(915ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1558ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1361ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1131ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(522ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(76ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1644ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1394ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (28s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant4/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 6s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 453ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 429ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (35s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(592ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1155ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(825ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(652ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(862ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1401ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(909ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(521ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(450ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(488ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1282ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1695ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(791ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1653ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1091ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1122ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(353ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(564ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(537ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(979ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(390ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (23s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./Variants/body-parser/variant3/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 468ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 410ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant2/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 496ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 399ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/Variants/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./Variants/body-parser/variant1/body-parser
/data/js-variants/multee
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 464ms

found 0 vulnerabilities
************* npm unlink globally done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 413ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (28s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(322ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(727ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1522ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(513ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1186ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(385ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(879ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1223ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(795ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1458ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1580ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(885ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(522ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1355ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1168ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(918ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1427ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(214ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(76ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(780ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1481ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1129ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (25s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
variantsDepsNum: 11
/data/js-variants/multee
11
skipper is testing ./VariantsDeps/body-parser/variant11/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 463ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 412ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (33s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3017ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1238ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1472ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(190ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1291ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(296ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(411ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(291ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(200ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1640ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1652ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1283ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(682ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1231ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(304ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1372ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1305ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(832ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1673ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(54ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1023ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1117ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(231ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (25s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant10/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 522ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 402ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: hasOwn is not a function
      at getBaseIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:229:6)
      at GetIntrinsic (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/get-intrinsic/index.js:267:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/index.js:6:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/call-bind/callBound.js:5:16)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/side-channel/index.js:4:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant10/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant9/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 479ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 413ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: bind.call is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/has/src/index.js:5:23)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/get-intrinsic/index.js:200:14)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/side-channel/index.js:3:20)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/stringify.js:3:22)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/node_modules/qs/lib/index.js:3:17)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at parser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:225:13)
      at extendedparser (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:136:15)
      at Function.urlencoded (/data/js-variants/multee/VariantsDeps/body-parser/variant9/body-parser/lib/types/urlencoded.js:65:7)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant8/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 468ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      1) "before all" hook


  60 passing (29s)
  3 pending
  1 failing

  1) req.body (URL-encoded parser) :: sending an application/x-www-form-urlencoded content-type request "before all" hook:
     Uncaught SyntaxError: Unexpected token T in JSON at position 0
      at JSON.parse (<anonymous>)
      at Request._callback (test/urlencoded.parser.test.js:53:25)
      at self.callback (node_modules/request/request.js:187:22)
      at Request.emit (node:events:527:28)
      at Request.<anonymous> (node_modules/request/request.js:1044:10)
      at Request.emit (node:events:527:28)
      at IncomingMessage.<anonymous> (node_modules/request/request.js:965:12)
      at IncomingMessage.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant7/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 458ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 400ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (34s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3016ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1594ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(273ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1461ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1003ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1548ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1116ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(742ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1162ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(737ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1187ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(342ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1142ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(814ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(110ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1007ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1221ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(176ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1297ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1608ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(893ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1405ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(786ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (26s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant6/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 4s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 501ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 404ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      1) should have all of the correct body params
      2) should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      3) "before all" hook


  58 passing (30s)
  3 pending
  3 failing

  1) req.body (JSON parser) :: sending an application/json content-type request should have all of the correct body params:
     TypeError: Cannot read properties of undefined (reading 'foo')
      at Context.<anonymous> (test/json.parser.test.js:58:34)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.body (JSON parser) :: sending an application/json content-type request should have an empty files array:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(_.isArray(res.body.files))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (test/json.parser.test.js:64:7)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (URL-encoded parser) :: sending an application/x-www-form-urlencoded content-type request "before all" hook:
     Uncaught SyntaxError: Unexpected token U in JSON at position 0
      at JSON.parse (<anonymous>)
      at Request._callback (test/urlencoded.parser.test.js:53:25)
      at self.callback (node_modules/request/request.js:187:22)
      at Request.emit (node:events:527:28)
      at Request.<anonymous> (node_modules/request/request.js:1044:10)
      at Request.emit (node:events:527:28)
      at IncomingMessage.<anonymous> (node_modules/request/request.js:965:12)
      at IncomingMessage.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant5/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 487ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 468ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (29s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3019ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1109ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(999ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1456ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(147ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1393ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(239ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(53ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1130ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1279ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(824ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(726ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1517ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1375ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1301ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1206ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(285ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1537ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1224ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(133ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1199ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1661ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (26s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant4/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 482ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 405ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (32s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3018ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(820ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1493ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1317ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1350ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1425ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(892ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(645ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1412ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(841ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1455ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(67ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1000ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1616ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1062ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(558ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(173ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(540ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[33m(62ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(797ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(801ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1344ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (25s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant3/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 463ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 409ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: require(...) is not a function
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/lib/types/urlencoded.js:18:29)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant3/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant2/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 468ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 408ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    1) "before all" hook: setup
    2) "after all" hook: teardown

  req.body (empty body) ::
    3) "before all" hook: setup
    4) "after all" hook: teardown

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    5) "before all" hook: setup
    6) "after all" hook: teardown

  multiple params ::
    7) "before all" hook: setup
    8) "after all" hook: teardown

  onBodyParserError ::
    basic functioning
      9) "before all" hook
      10) "after all" hook: teardown

  with async function
    basic functioning
      11) "before all" hook
      12) "after all" hook: teardown

  req.body ::
    13) "before all" hook: setup
    14) "after all" hook: teardown

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    15) "before all" hook: setup
    16) "after all" hook: teardown

  req.file(...).pipe(...) ::
    17) "before all" hook: setup
    18) "after all" hook: teardown

  req.file(...).upload(...) ::
    19) "before all" hook: setup
    20) "after all" hook: teardown

  Sucessive file uploads should not fail ::
    21) "before all" hook: setup
    22) "after all" hook: teardown

  test suite
    23) "before all" hook: setup
    24) "after all" hook: teardown

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      25) "before all" hook: setup
      26) "after all" hook: teardown
    with a custom 1000ms setting and a 600ms delay
      27) "before all" hook
      28) "after all" hook: teardown

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      29) "before all" hook
      30) "after all" hook: teardown

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        31) "before all" hook
        32) "after all" hook: teardown

  req.body (URL-encoded parser) ::
    33) "before all" hook: setup
    34) "after all" hook: teardown


  0 passing (6s)
  3 pending
  34 failing

  1) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  2) req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  3) req.body (empty body) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  4) req.body (empty body) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  5) req.body (JSON parser) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  6) req.body (JSON parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  7) multiple params :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  8) multiple params :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  9) onBodyParserError :: basic functioning "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:21:20)
      at process.processImmediate (node:internal/timers:471:21)

  10) onBodyParserError :: basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  11) with async function basic functioning "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/onbodyparsererror.test.js:60:22)
      at process.processImmediate (node:internal/timers:471:21)

  12) with async function basic functioning "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  13) req.body :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  14) req.body :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  15) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  16) Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  17) req.file(...).pipe(...) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  18) req.file(...).pipe(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  19) req.file(...).upload(...) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  20) req.file(...).upload(...) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  21) Sucessive file uploads should not fail :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  22) Sucessive file uploads should not fail :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  23) test suite "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  24) test suite "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  25) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  26) maxWaitTimeBeforePassingControlToApp with the default 500ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  27) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.control.test.js:139:13)
      at process.processImmediate (node:internal/timers:471:21)

  28) maxWaitTimeBeforePassingControlToApp with a custom 1000ms setting and a 600ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  29) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.firstfile.test.js:20:13)
      at process.processImmediate (node:internal/timers:471:21)

  30) maxTimeToWaitForFirstFile with a setting of 600 and a 1200ms delay "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  31) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "before all" hook:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Object.setup (test/helpers/lifecycle.js:78:22)
      at Context.<anonymous> (test/timeout.maxBuffer.test.js:24:15)
      at process.processImmediate (node:internal/timers:471:21)

  32) maxTimeToBuffer with a setting of 600 and a 1200ms delay with at least one file connected to a receiver "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)

  33) req.body (URL-encoded parser) :: "before all" hook: setup:
     TypeError: inherits is not a function
      at createHttpErrorConstructor (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:117:3)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/node_modules/http-errors/index.js:27:28)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at Object.<anonymous> (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/lib/types/urlencoded.js:17:19)
      at Module._compile (node:internal/modules/cjs/loader:1105:14)
      at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
      at Module.load (node:internal/modules/cjs/loader:981:32)
      at Module._load (node:internal/modules/cjs/loader:827:12)
      at Module.require (node:internal/modules/cjs/loader:1005:19)
      at require (node:internal/modules/cjs/helpers:102:18)
      at loadParser (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:151:16)
      at Function.get [as urlencoded] (/data/js-variants/multee/VariantsDeps/body-parser/variant2/body-parser/index.js:123:12)
      at toParseHTTPBody (lib/skipper.js:33:41)
      at Context.setup (test/helpers/lifecycle.js:78:22)
      at process.processImmediate (node:internal/timers:471:21)

  34) req.body (URL-encoded parser) :: "after all" hook: teardown:
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.teardown (test/helpers/lifecycle.js:107:21)
      at process.processImmediate (node:internal/timers:471:21)



************* run test done *************
skipper is testing ./VariantsDeps/body-parser/variant1/body-parser
************* npm unlink module *************

added 1 package, removed 3 packages, changed 1 package, and audited 427 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm unlink module done *************
************* npm unlink globally *************

removed 1 package, and audited 1 package in 474ms

found 0 vulnerabilities
************* npm unlink module done *************
************* npm link globally *************

added 1 package, and audited 3 packages in 416ms

found 0 vulnerabilities
************* npm link globally done *************
************* npm link module *************

added 3 packages, removed 1 package, changed 1 package, and audited 430 packages in 2s

2 packages are looking for funding
  run `npm fund` for details

42 vulnerabilities (3 low, 11 moderate, 21 high, 7 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
************* npm link module done *************
************* start run test *************

> skipper@0.9.1 test
> npm run lint && npm run custom-tests


> skipper@0.9.1 lint
> eslint . --max-warnings=0 --ignore-pattern 'test/' && echo '✔  Your code looks good.'

✔  Your code looks good.

> skipper@0.9.1 custom-tests
> mocha && node -e "require('skipper-adapter-tests')({module: require('skipper-disk')});"



  req.file(...).upload() defaults to skipper-disk adapter when passed a string or `options` object ::
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.body (empty body) ::
    sending an empty body with a POST request
      ✓ should return an empty object as the body

  multipart form upload
    - uses the multipart form parsing middleware
    - binds an action that will upload our test file
    - should upload the file when after the request is sent

  req.body (JSON parser) ::
    sending an application/json content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array

  multiple params ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access ALL of the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  onBodyParserError ::
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body

  with async function
    basic functioning
      ✓ should run the onBodyParserError function when there's an error parsing the body
      ✓ should catch errors thrown in the function

  req.body ::
    ✓ binds a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have been able to access the body parameters passed in the upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::
    ✓ binds a file uploader action
    ✓ sends an attachment on an unused field
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`
    ✓ binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds)
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ sends many attachments on unused fields
    ✓ should NOT have uploaded any files to `suite.outputDir`

  req.file(...).pipe(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  req.file(...).upload(...) ::
    ✓ bind a file uploader action
    ✓ sends a multi-part file upload request
    ✓ should have uploaded a file to `suite.outputDir`

  Sucessive file uploads should not fail ::
    ✓ binds a file uploader action
    ✓ sends 6 multi-part file upload requests
    ✓ should have uploaded a 6 files to `suite.outputDir`

  test suite
    ✓ should have access to file fixtures

  maxWaitTimeBeforePassingControlToApp
    with the default 500ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params
    with a custom 1000ms setting and a 600ms delay
      ✓ should result in a response with the files intact but missing params

  maxTimeToWaitForFirstFile
    with a setting of 600 and a 1200ms delay
      ✓ should result in the `.upload()` callback being called with an ETIMEOUT error

  maxTimeToBuffer
    with a setting of 600 and a 1200ms delay
      with at least one file connected to a receiver
        ✓ should result in a successful request (EMAXBUFFER should be swallowed)

  req.body (URL-encoded parser) ::
    sending an application/x-www-form-urlencoded content-type request
      ✓ should have all of the correct body params
      ✓ should have an empty files array


  62 passing (31s)
  3 pending


[0m[0m
[0m  aborting a file in progress[0m
  [32m  ✓[0m[90m should not crash the server [0m[31m(3018ms)[0m

[0m  when some big files start coming in, this adapter[0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with decent-sized (1.5MB) files [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous, "well-endowed" (4MB) requests [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 10MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 1 request with a 25MB file attachment [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (10MB) file attachments. [0m
  [32m  ✓[0m[90m should work properly with 2 simultaneous requests with big ass (25MB) file attachments. [0m

[0m  after uploading a file using this adapter, Skipper[0m
[0m    each file metadata object[0m
    [32m  ✓[0m[90m should be an object [0m
    [32m  ✓[0m[90m should have the original filename of the uploaded file [0m
    [32m  ✓[0m[90m should contain the file size [0m
[0m      field[0m
      [32m  ✓[0m[90m should be a string [0m
[0m      file descriptor (`fd`)[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should be within the specified `dirname` if one was provided [0m
      [32m  ✓[0m[90m should have basename === `saveAs` if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a string was passed in for `saveAs` [0m
      [32m  ✓[0m[90m should have expected basename when a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should be within the specified `dirname` even if a function is passed in for `saveAs` [0m
      [32m  ✓[0m[90m should default to a UUID as its basename if `saveAs` was not specified [0m
[0m      type[0m
      [32m  ✓[0m[90m should be a string [0m
      [32m  ✓[0m[90m should otherwise default to "application/octet-stream" [0m

[0m  when using the "maxBytes" option[0m
[0m    Uploading a single file[0m
    [36m  - should allow uploads <= the maxBytes value[0m
    [36m  - should not allow uploads > the maxBytes value[0m

[0m  under a bit of load, this adapter[0m
  [32m  ✓[0m[90m should work properly with 30 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 100 simultaneous requests [0m
  [32m  ✓[0m[90m should work properly with 200 simultaneous requests [0m

[0m  this adapter[0m
  [32m  ✓[0m[90m should allow a file to be uploaded [0m

[0m  this adapter's impact on `req.body` ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have been able to access the body parameters passed in the upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to expected location using provided `dirname` and `saveAs` options [0m

[0m  Ignoring :: req.file("foo"), when a file upload is sent to the "bar" field ::[0m
  [32m  ✓[0m[90m binds a file uploader action [0m
  [32m  ✓[0m[90m sends an attachment on an unused field [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m
  [32m  ✓[0m[90m binds an action which does not do anything w/ ANY of the incoming Upstreams (+ introduces a random delay <=2 seconds) [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(193ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(982ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(737ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(852ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(490ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1590ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1194ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1252ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(601ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(535ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1012ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(456ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(1639ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(252ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(781ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(270ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(181ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(104ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(531ms)[0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m
  [32m  ✓[0m[90m sends many attachments on unused fields [0m[31m(416ms)[0m
  [32m  ✓[0m[90m should NOT have uploaded any files to `suite.outputDir` [0m

[0m  req.file(...).pipe(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m

[0m  req.file(...).upload(...) ::[0m
  [32m  ✓[0m[90m bind a file uploader action [0m
  [32m  ✓[0m[90m sends a multi-part file upload request [0m
  [32m  ✓[0m[90m should have uploaded a file to `suite.outputDir` [0m


[92m [0m[32m 64 passing[0m[90m (19s)[0m
[36m [0m[36m 2 pending[0m

************* run test done *************

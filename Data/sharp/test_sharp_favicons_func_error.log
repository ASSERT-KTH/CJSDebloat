6
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant6/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059573886.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant6/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant6/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:281796) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant6/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant6/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant6/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_39_33_704Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.036 s)
PASS test/array.test.js (42.48 s)
PASS test/meta.test.js (26.013 s)
PASS test/prefixed.test.js (24.567 s)
PASS test/default.test.js (24.512 s)
PASS test/background.test.js (24.415 s)
PASS test/offset.test.js (22.887 s)
PASS test/pixelart.test.js (19.414 s)
PASS test/svg.test.js (19.344 s)
PASS test/stream.test.js (10.699 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/output.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/restrict.test.js
PASS test/svgScaling.test.js
PASS test/noassets.test.js
PASS test/manifest.test.js
PASS test/failure.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        280.222 s, estimated 288 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant5/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660059876801.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant5/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant5/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:287969) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant5/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant5/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant5/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_44_36_616Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.213 s)
PASS test/array.test.js (42.761 s)
PASS test/meta.test.js (26.132 s)
PASS test/prefixed.test.js (24.631 s)
PASS test/default.test.js (24.656 s)
PASS test/background.test.js (24.621 s)
PASS test/offset.test.js (22.98 s)
PASS test/pixelart.test.js (19.496 s)
PASS test/svg.test.js (19.536 s)
PASS test/stream.test.js (10.664 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/output.test.js
PASS test/svgScaling.test.js
PASS test/restrict.test.js
PASS test/manifest.test.js
PASS test/noassets.test.js
PASS test/failure.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        281.599 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant4/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660060181222.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant4/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant4/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:294136) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant4/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant4/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant4/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_49_41_037Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.147 s)
PASS test/array.test.js (42.875 s)
PASS test/meta.test.js (26.085 s)
PASS test/default.test.js (24.621 s)
PASS test/prefixed.test.js (24.645 s)
PASS test/background.test.js (24.716 s)
PASS test/offset.test.js (23.091 s)
PASS test/svg.test.js (19.53 s)
PASS test/pixelart.test.js (19.56 s)
PASS test/stream.test.js (10.571 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/output.test.js
PASS test/svgScaling.test.js
PASS test/restrict.test.js
PASS test/failure.test.js
PASS test/manifest.test.js
PASS test/noassets.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        281.698 s, estimated 282 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant3/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660060485432.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant3/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant3/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:300283) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant3/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant3/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant3/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_54_45_243Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.294 s)
PASS test/array.test.js (42.761 s)
PASS test/meta.test.js (26.123 s)
PASS test/background.test.js (24.62 s)
PASS test/prefixed.test.js (24.653 s)
PASS test/default.test.js (24.72 s)
PASS test/offset.test.js (22.887 s)
PASS test/pixelart.test.js (19.39 s)
PASS test/svg.test.js (19.502 s)
PASS test/stream.test.js (10.747 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/output.test.js
PASS test/svgScaling.test.js
PASS test/restrict.test.js
PASS test/manifest.test.js
PASS test/failure.test.js
PASS test/noassets.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        281.648 s, estimated 282 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant2/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660060789601.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant2/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant2/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:306449) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant2/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant2/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant2/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T15_59_49_413Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.408 s)
PASS test/array.test.js (42.914 s)
PASS test/meta.test.js (26.103 s)
PASS test/default.test.js (24.635 s)
PASS test/prefixed.test.js (24.712 s)
PASS test/background.test.js (24.613 s)
PASS test/offset.test.js (22.921 s)
PASS test/svg.test.js (19.477 s)
PASS test/pixelart.test.js (19.544 s)
PASS test/stream.test.js (10.693 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/output.test.js
PASS test/svgScaling.test.js
PASS test/restrict.test.js
PASS test/noassets.test.js
PASS test/failure.test.js
PASS test/manifest.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        282.001 s
Ran all test suites.
npm ERR! code 1
npm ERR! path /data/js-variants/multee/Variants/sharp/variant1/sharp
npm ERR! command failed
npm ERR! command sh -c /tmp/install-1660061094337.sh
npm ERR! sharp: Using existing vendored libvips v8.12.2
npm ERR! make: Entering directory '/data/js-variants/multee/Variants/sharp/variant1/sharp/build'
npm ERR!   TOUCH Release/obj.target/libvips-cpp.stamp
npm ERR!   CC(target) Release/obj.target/nothing/node_modules/node-addon-api/nothing.o
npm ERR!   AR(target) Release/obj.target/node_modules/node-addon-api/nothing.a
npm ERR!   COPY Release/nothing.a
npm ERR!   CXX(target) Release/obj.target/sharp-linux-x64/src/common.o
npm ERR! make: Leaving directory '/data/js-variants/multee/Variants/sharp/variant1/sharp/build'
npm ERR! prebuild-install warn install EACCES: permission denied, access '/root/.npm'
npm ERR! gyp info it worked if it ends with ok
npm ERR! gyp info using node-gyp@6.1.0
npm ERR! gyp info using node@18.3.0 | linux | x64
npm ERR! gyp info find Python using Python version 3.10.5 found at "/usr/bin/python3"
npm ERR! gyp WARN EACCES current user ("liu-yuxin") does not have permission to access the dev dir "/root/.cache/node-gyp/18.3.0"
npm ERR! gyp WARN EACCES attempting to reinstall using temporary dev dir "/tmp/.node-gyp"
npm ERR! (node:312636) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
npm ERR! (Use `node --trace-deprecation ...` to show where the warning was created)
npm ERR! gyp info spawn /usr/bin/python3
npm ERR! gyp info spawn args [
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/gyp/gyp_main.py',
npm ERR! gyp info spawn args   'binding.gyp',
npm ERR! gyp info spawn args   '-f',
npm ERR! gyp info spawn args   'make',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/build/config.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/addon.gypi',
npm ERR! gyp info spawn args   '-I',
npm ERR! gyp info spawn args   '/tmp/.node-gyp/18.3.0/include/node/common.gypi',
npm ERR! gyp info spawn args   '-Dlibrary=shared_library',
npm ERR! gyp info spawn args   '-Dvisibility=default',
npm ERR! gyp info spawn args   '-Dnode_root_dir=/tmp/.node-gyp/18.3.0',
npm ERR! gyp info spawn args   '-Dnode_gyp_dir=/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp',
npm ERR! gyp info spawn args   '-Dnode_lib_file=/tmp/.node-gyp/18.3.0/<(target_arch)/node.lib',
npm ERR! gyp info spawn args   '-Dmodule_root_dir=/data/js-variants/multee/Variants/sharp/variant1/sharp',
npm ERR! gyp info spawn args   '-Dnode_engine=v8',
npm ERR! gyp info spawn args   '--depth=.',
npm ERR! gyp info spawn args   '--no-parallel',
npm ERR! gyp info spawn args   '--generator-output',
npm ERR! gyp info spawn args   'build',
npm ERR! gyp info spawn args   '-Goutput_dir=.'
npm ERR! gyp info spawn args ]
npm ERR! gyp info spawn make
npm ERR! gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
npm ERR! ../src/common.cc:24:10: fatal error: vips/vips8: No such file or directory
npm ERR!    24 | #include <vips/vips8>
npm ERR!       |          ^~~~~~~~~~~~
npm ERR! compilation terminated.
npm ERR! make: *** [sharp-linux-x64.target.mk:139: Release/obj.target/sharp-linux-x64/src/common.o] Error 1
npm ERR! gyp ERR! build error 
npm ERR! gyp ERR! stack Error: `make` failed with exit code: 2
npm ERR! gyp ERR! stack     at ChildProcess.onExit (/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/node-gyp/lib/build.js:194:23)
npm ERR! gyp ERR! stack     at ChildProcess.emit (node:events:527:28)
npm ERR! gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
npm ERR! gyp ERR! System Linux 5.13.0-1031-azure
npm ERR! gyp ERR! command "/usr/local/bin/node" "/data/js-variants/multee/Variants/sharp/variant1/sharp/node_modules/.bin/node-gyp" "rebuild"
npm ERR! gyp ERR! cwd /data/js-variants/multee/Variants/sharp/variant1/sharp
npm ERR! gyp ERR! node -v v18.3.0
npm ERR! gyp ERR! node-gyp -v v6.1.0
npm ERR! gyp ERR! not ok

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2022-08-09T16_04_54_153Z-debug-0.log
Entry module "src/index.ts" is using named and default exports together. Consumers of your bundle will have to use `chunk["default"]` to access the default export, which may not be what you want. Use `output.exports: "named"` to disable this warning
PASS test/manifestMaskable.test.js (50.407 s)
PASS test/array.test.js (42.635 s)
PASS test/meta.test.js (26.309 s)
PASS test/prefixed.test.js (24.664 s)
PASS test/default.test.js (24.776 s)
PASS test/background.test.js (24.752 s)
PASS test/offset.test.js (23.046 s)
PASS test/pixelart.test.js (19.385 s)
PASS test/svg.test.js (19.498 s)
PASS test/stream.test.js (10.583 s)
PASS test/manifestShortcuts.test.js
PASS test/manifestRelativePaths.test.js
PASS test/loadManifestWithCredentials.test.js
PASS test/output.test.js
PASS test/svgScaling.test.js
PASS test/restrict.test.js
PASS test/manifest.test.js
PASS test/noassets.test.js
PASS test/failure.test.js

Test Suites: 19 passed, 19 total
Tests:       1 skipped, 30 passed, 31 total
Snapshots:   752 passed, 752 total
Time:        281.957 s, estimated 282 s
Ran all test suites.
